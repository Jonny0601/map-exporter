(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["mapExporter"]=e(require("vue")):t["mapExporter"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},"034f":function(t,e,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),a=n("fc6a"),s=n("c04e"),u=n("5135"),c=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},"0b25":function(t,e,n){var r=n("a691"),i=n("50c4");t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d3b":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("c430"),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e["delete"]("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},"0f6c":function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=132)}({132:function(t,e,n){"use strict";n.r(e);var r={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style:function(){var t={};return this.gutter&&(t.marginLeft="-"+this.gutter/2+"px",t.marginRight=t.marginLeft),t}},render:function(t){return t(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(t){t.component(r.name,r)}};e["default"]=r}})},"0fb7":function(t,e,n){},"10cb":function(t,e,n){},1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),o=n("825a"),a=n("1d80"),s=n("4840"),u=n("8aa5"),c=n("50c4"),l=n("14c3"),h=n("9263"),f=n("d039"),p=[].push,d=Math.min,g=4294967295,m=!f((function(){return!RegExp(g,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?g:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);var s,u,c,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,m=new RegExp(t.source,f+"g");while(s=h.call(m,r)){if(u=m.lastIndex,u>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&p.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return d===r.length?!c&&m.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var h=o(t),f=String(this),p=s(h,RegExp),v=h.unicode,y=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(m?"y":"g"),_=new p(m?h:"^(?:"+h.source+")",y),b=void 0===i?g:i>>>0;if(0===b)return[];if(0===f.length)return null===l(_,f)?[f]:[];var x=0,w=0,E=[];while(w<f.length){_.lastIndex=m?w:0;var S,M=l(_,m?f:f.slice(w));if(null===M||(S=d(c(_.lastIndex+(m?0:w)),f.length))===x)w=u(f,w,v);else{if(E.push(f.slice(x,w)),E.length===b)return E;for(var T=1;T<=M.length-1;T++)if(E.push(M[T]),E.length===b)return E;w=x=S}}return E.push(f.slice(x)),E}]}),!m)},"131a":function(t,e,n){var r=n("23e7"),i=n("d2bb");r({target:"Object",stat:!0},{setPrototypeOf:i})},1355:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("5639"),i=function(){r["a"].call(this),this.type="LineGeometry"};i.prototype=Object.assign(Object.create(r["a"].prototype),{constructor:i,isLineGeometry:!0,setPositions:function(t){for(var e=t.length-3,n=new Float32Array(2*e),i=0;i<e;i+=3)n[2*i]=t[i],n[2*i+1]=t[i+1],n[2*i+2]=t[i+2],n[2*i+3]=t[i+3],n[2*i+4]=t[i+4],n[2*i+5]=t[i+5];return r["a"].prototype.setPositions.call(this,n),this},setColors:function(t){for(var e=t.length-3,n=new Float32Array(2*e),i=0;i<e;i+=3)n[2*i]=t[i],n[2*i+1]=t[i+1],n[2*i+2]=t[i+2],n[2*i+3]=t[i+3],n[2*i+4]=t[i+4],n[2*i+5]=t[i+5];return r["a"].prototype.setColors.call(this,n),this},fromLine:function(t){var e=t.geometry;return e.isGeometry?this.setPositions(e.vertices):e.isBufferGeometry&&this.setPositions(e.position.array),this},copy:function(){return this}})},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),a=n("9112");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("b301");t.exports=i("forEach")?function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},1951:function(t,e,n){},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),o=n("60ae"),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1fb5":function(t,e,n){"use strict";e.byteLength=l,e.toByteArray=f,e.fromByteArray=g;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function l(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function h(t,e,n){return 3*(e+n)/4-n}function f(t){var e,n,r=c(t),a=r[0],s=r[1],u=new o(h(t,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u}function p(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function d(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(p(r));return i.join("")}function g(t){for(var e,n=t.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(d(t,s,s+a>u?u:s+a));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2182:function(t,e,n){"use strict";e["a"]=function(t){return t}},2215:function(t,e,n){"use strict";var r=n("257f"),i=n.n(r);i.a},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),a=n("f8c2"),s=n("35a1"),u=n("9bdd"),c=function(t,e){this.stopped=t,this.result=e},l=t.exports=function(t,e,n,l,h){var f,p,d,g,m,v,y,_=a(e,n,l?2:1);if(h)f=t;else{if(p=s(t),"function"!=typeof p)throw TypeError("Target is not iterable");if(i(p)){for(d=0,g=o(t.length);g>d;d++)if(m=l?_(r(y=t[d])[0],y[1]):_(t[d]),m&&m instanceof c)return m;return new c(!1)}f=p.call(t)}v=f.next;while(!(y=v.call(f)).done)if(m=u(f,_,y.value,l),"object"==typeof m&&m&&m instanceof c)return m;return new c(!1)};l.stop=function(t){return new c(!0,t)}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,l,h,f,p,d,g=t.target,m=t.global,v=t.stat;if(l=m?r:v?r[g]||s(g,{}):(r[g]||{}).prototype,l)for(h in e){if(p=e[h],t.noTargetGet?(d=i(l,h),f=d&&d.value):f=l[h],n=c(m?h:g+(v?".":"#")+h,t.forced),!n&&void 0!==f){if(typeof p===typeof f)continue;u(p,f)}(t.sham||f&&f.sham)&&o(p,"sham",!0),a(l,h,p,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},"257f":function(t,e,n){},"25f0":function(t,e,n){"use strict";var r=n("6eeb"),i=n("825a"),o=n("d039"),a=n("ad6d"),s="toString",u=RegExp.prototype,c=u[s],l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),h=c.name!=s;(l||h)&&r(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),n=t.flags,r=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n);return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},"262e":function(t,e,n){"use strict";n("131a");function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return i}))},2909:function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){return r(t)||i(t)||o()}n.d(e,"a",(function(){return a}))},"2b3d":function(t,e,n){"use strict";n("3ca3");var r,i=n("23e7"),o=n("83ab"),a=n("0d3b"),s=n("da84"),u=n("37e8"),c=n("6eeb"),l=n("19aa"),h=n("5135"),f=n("60da"),p=n("4df4"),d=n("6547").codeAt,g=n("c98e"),m=n("d44e"),v=n("9861"),y=n("69f3"),_=s.URL,b=v.URLSearchParams,x=v.getState,w=y.set,E=y.getterFor("URL"),S=Math.floor,M=Math.pow,T="Invalid authority",C="Invalid scheme",L="Invalid host",A="Invalid port",I=/[A-Za-z]/,P=/[\d+\-.A-Za-z]/,R=/\d/,O=/^(0x|0X)/,N=/^[0-7]+$/,D=/^\d+$/,F=/^[\dA-Fa-f]+$/,B=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,k=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,U=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,j=/[\u0009\u000A\u000D]/g,G=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return L;if(n=V(e.slice(1,-1)),!n)return L;t.host=n}else if(K(t)){if(e=g(e),B.test(e))return L;if(n=z(e),null===n)return L;t.host=n}else{if(k.test(e))return L;for(n="",r=p(e),i=0;i<r.length;i++)n+=J(r[i],W);t.host=n}},z=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),e=u.length,e>4)return t;for(n=[],r=0;r<e;r++){if(i=u[r],""==i)return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=O.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?D:8==o?N:F).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=M(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*M(256,3-r);return s},V=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,c++,l=c}while(f()){if(8==c)return;if(":"!=f()){e=n=0;while(n<4&&F.test(f()))e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;r=0;while(f()){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!R.test(f()))return;while(R.test(f())){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}u[c]=256*u[c]+i,r++,2!=r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=e}else{if(null!==l)return;h++,c++,l=c}}if(null!==l){a=c-l,c=7;while(0!=c&&a>0)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s}else if(8!=c)return;return u},H=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e},q=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=H(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},W={},X=f({},W,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=f({},X,{"#":1,"?":1,"{":1,"}":1}),$=f({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),J=function(t,e){var n=d(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(t){return h(Z,t.scheme)},Q=function(t){return""!=t.username||""!=t.password},tt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},et=function(t,e){var n;return 2==t.length&&I.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},nt=function(t){var e;return t.length>1&&et(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},rt=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&et(e[0],!0)||e.pop()},it=function(t){return"."===t||"%2e"===t.toLowerCase()},ot=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},at={},st={},ut={},ct={},lt={},ht={},ft={},pt={},dt={},gt={},mt={},vt={},yt={},_t={},bt={},xt={},wt={},Et={},St={},Mt={},Tt={},Ct=function(t,e,n,i){var o,a,s,u,c=n||at,l=0,f="",d=!1,g=!1,m=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(U,"")),e=e.replace(j,""),o=p(e);while(l<=o.length){switch(a=o[l],c){case at:if(!a||!I.test(a)){if(n)return C;c=ut;continue}f+=a.toLowerCase(),c=st;break;case st:if(a&&(P.test(a)||"+"==a||"-"==a||"."==a))f+=a.toLowerCase();else{if(":"!=a){if(n)return C;f="",c=ut,l=0;continue}if(n&&(K(t)!=h(Z,f)||"file"==f&&(Q(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,n)return void(K(t)&&Z[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?c=_t:K(t)&&i&&i.scheme==t.scheme?c=ct:K(t)?c=pt:"/"==o[l+1]?(c=lt,l++):(t.cannotBeABaseURL=!0,t.path.push(""),c=St)}break;case ut:if(!i||i.cannotBeABaseURL&&"#"!=a)return C;if(i.cannotBeABaseURL&&"#"==a){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,c=Tt;break}c="file"==i.scheme?_t:ht;continue;case ct:if("/"!=a||"/"!=o[l+1]){c=ht;continue}c=dt,l++;break;case lt:if("/"==a){c=gt;break}c=Et;continue;case ht:if(t.scheme=i.scheme,a==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==a||"\\"==a&&K(t))c=ft;else if("?"==a)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",c=Mt;else{if("#"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),c=Et;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=Tt}break;case ft:if(!K(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,c=Et;continue}c=gt}else c=dt;break;case pt:if(c=dt,"/"!=a||"/"!=f.charAt(l+1))continue;l++;break;case dt:if("/"!=a&&"\\"!=a){c=gt;continue}break;case gt:if("@"==a){d&&(f="%40"+f),d=!0,s=p(f);for(var v=0;v<s.length;v++){var y=s[v];if(":"!=y||m){var _=J(y,$);m?t.password+=_:t.username+=_}else m=!0}f=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(d&&""==f)return T;l-=p(f).length+1,f="",c=mt}else f+=a;break;case mt:case vt:if(n&&"file"==t.scheme){c=xt;continue}if(":"!=a||g){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(K(t)&&""==f)return L;if(n&&""==f&&(Q(t)||null!==t.port))return;if(u=G(t,f),u)return u;if(f="",c=wt,n)return;continue}"["==a?g=!0:"]"==a&&(g=!1),f+=a}else{if(""==f)return L;if(u=G(t,f),u)return u;if(f="",c=yt,n==vt)return}break;case yt:if(!R.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)||n){if(""!=f){var b=parseInt(f,10);if(b>65535)return A;t.port=K(t)&&b===Z[t.scheme]?null:b,f=""}if(n)return;c=wt;continue}return A}f+=a;break;case _t:if(t.scheme="file","/"==a||"\\"==a)c=bt;else{if(!i||"file"!=i.scheme){c=Et;continue}if(a==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==a)t.host=i.host,t.path=i.path.slice(),t.query="",c=Mt;else{if("#"!=a){nt(o.slice(l).join(""))||(t.host=i.host,t.path=i.path.slice(),rt(t)),c=Et;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",c=Tt}}break;case bt:if("/"==a||"\\"==a){c=xt;break}i&&"file"==i.scheme&&!nt(o.slice(l).join(""))&&(et(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),c=Et;continue;case xt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&et(f))c=Et;else if(""==f){if(t.host="",n)return;c=wt}else{if(u=G(t,f),u)return u;if("localhost"==t.host&&(t.host=""),n)return;f="",c=wt}continue}f+=a;break;case wt:if(K(t)){if(c=Et,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(c=Et,"/"!=a))continue}else t.fragment="",c=Tt;else t.query="",c=Mt;break;case Et:if(a==r||"/"==a||"\\"==a&&K(t)||!n&&("?"==a||"#"==a)){if(ot(f)?(rt(t),"/"==a||"\\"==a&&K(t)||t.path.push("")):it(f)?"/"==a||"\\"==a&&K(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&et(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(a==r||"?"==a||"#"==a))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==a?(t.query="",c=Mt):"#"==a&&(t.fragment="",c=Tt)}else f+=J(a,Y);break;case St:"?"==a?(t.query="",c=Mt):"#"==a?(t.fragment="",c=Tt):a!=r&&(t.path[0]+=J(a,W));break;case Mt:n||"#"!=a?a!=r&&("'"==a&&K(t)?t.query+="%27":t.query+="#"==a?"%23":J(a,W)):(t.fragment="",c=Tt);break;case Tt:a!=r&&(t.fragment+=J(a,X));break}l++}},Lt=function(t){var e,n,r=l(this,Lt,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(t),s=w(r,{type:"URL"});if(void 0!==i)if(i instanceof Lt)e=E(i);else if(n=Ct(e={},String(i)),n)throw TypeError(n);if(n=Ct(s,a,null,e),n)throw TypeError(n);var u=s.searchParams=new b,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=It.call(r),r.origin=Pt.call(r),r.protocol=Rt.call(r),r.username=Ot.call(r),r.password=Nt.call(r),r.host=Dt.call(r),r.hostname=Ft.call(r),r.port=Bt.call(r),r.pathname=kt.call(r),r.search=Ut.call(r),r.searchParams=jt.call(r),r.hash=Gt.call(r))},At=Lt.prototype,It=function(){var t=E(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",Q(t)&&(c+=n+(r?":"+r:"")+"@"),c+=q(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Pt=function(){var t=E(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&K(t)?e+"://"+q(t.host)+(null!==n?":"+n:""):"null"},Rt=function(){return E(this).scheme+":"},Ot=function(){return E(this).username},Nt=function(){return E(this).password},Dt=function(){var t=E(this),e=t.host,n=t.port;return null===e?"":null===n?q(e):q(e)+":"+n},Ft=function(){var t=E(this).host;return null===t?"":q(t)},Bt=function(){var t=E(this).port;return null===t?"":String(t)},kt=function(){var t=E(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ut=function(){var t=E(this).query;return t?"?"+t:""},jt=function(){return E(this).searchParams},Gt=function(){var t=E(this).fragment;return t?"#"+t:""},zt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(At,{href:zt(It,(function(t){var e=E(this),n=String(t),r=Ct(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)})),origin:zt(Pt),protocol:zt(Rt,(function(t){var e=E(this);Ct(e,String(t)+":",at)})),username:zt(Ot,(function(t){var e=E(this),n=p(String(t));if(!tt(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=J(n[r],$)}})),password:zt(Nt,(function(t){var e=E(this),n=p(String(t));if(!tt(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=J(n[r],$)}})),host:zt(Dt,(function(t){var e=E(this);e.cannotBeABaseURL||Ct(e,String(t),mt)})),hostname:zt(Ft,(function(t){var e=E(this);e.cannotBeABaseURL||Ct(e,String(t),vt)})),port:zt(Bt,(function(t){var e=E(this);tt(e)||(t=String(t),""==t?e.port=null:Ct(e,t,yt))})),pathname:zt(kt,(function(t){var e=E(this);e.cannotBeABaseURL||(e.path=[],Ct(e,t+"",wt))})),search:zt(Ut,(function(t){var e=E(this);t=String(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Ct(e,t,Mt)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:zt(jt),hash:zt(Gt,(function(t){var e=E(this);t=String(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Ct(e,t,Tt)):e.fragment=null}))}),c(At,"toJSON",(function(){return It.call(this)}),{enumerable:!0}),c(At,"toString",(function(){return It.call(this)}),{enumerable:!0}),_){var Vt=_.createObjectURL,Ht=_.revokeObjectURL;Vt&&c(Lt,"createObjectURL",(function(t){return Vt.apply(_,arguments)})),Ht&&c(Lt,"revokeObjectURL",(function(t){return Ht.apply(_,arguments)}))}m(Lt,"URL"),i({global:!0,forced:!a,sham:!o},{URL:Lt})},"2bb5":function(t,e,n){"use strict";e.__esModule=!0;n("8122");e.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"2cf4":function(t,e,n){var r,i,o,a=n("da84"),s=n("d039"),u=n("c6b6"),c=n("f8c2"),l=n("1be4"),h=n("cc12"),f=n("b629"),p=a.location,d=a.setImmediate,g=a.clearImmediate,m=a.process,v=a.MessageChannel,y=a.Dispatch,_=0,b={},x="onreadystatechange",w=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},E=function(t){return function(){w(t)}},S=function(t){w(t.data)},M=function(t){a.postMessage(t+"",p.protocol+"//"+p.host)};d&&g||(d=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return b[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(_),_},g=function(t){delete b[t]},"process"==u(m)?r=function(t){m.nextTick(E(t))}:y&&y.now?r=function(t){y.now(E(t))}:v&&!f?(i=new v,o=i.port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(M)?r=x in h("script")?function(t){l.appendChild(h("script"))[x]=function(){l.removeChild(this),w(t)}}:function(t){setTimeout(E(t),0)}:(r=M,a.addEventListener("message",S,!1))),t.exports={set:d,clear:g}},"2d9e":function(t,e,n){"use strict";var r=n("474c"),i=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};function o(t,e){return[Object(r["a"])(t)>r["m"]?t+Math.round(-t/r["t"])*r["t"]:t,e]}function a(t,e,n){return(t%=r["t"])?e||n?i(u(t),c(e,n)):u(t):e||n?c(e,n):o}function s(t){return function(e,n){return e+=t,[e>r["m"]?e-r["t"]:e<-r["m"]?e+r["t"]:e,n]}}function u(t){var e=s(t);return e.invert=s(-t),e}function c(t,e){var n=Object(r["f"])(t),i=Object(r["q"])(t),o=Object(r["f"])(e),a=Object(r["q"])(e);function s(t,e){var s=Object(r["f"])(e),u=Object(r["f"])(t)*s,c=Object(r["q"])(t)*s,l=Object(r["q"])(e),h=l*n+u*i;return[Object(r["e"])(c*o-h*a,u*n-l*i),Object(r["c"])(h*o+c*a)]}return s.invert=function(t,e){var s=Object(r["f"])(e),u=Object(r["f"])(t)*s,c=Object(r["q"])(t)*s,l=Object(r["q"])(e),h=l*o-c*a;return[Object(r["e"])(c*o+l*a,u*n+h*i),Object(r["c"])(h*n-u*i)]},s}o.invert=o;var l=function(t){function e(e){return e=t(e[0]*r["o"],e[1]*r["o"]),e[0]*=r["g"],e[1]*=r["g"],e}return t=a(t[0]*r["o"],t[1]*r["o"],t.length>2?t[2]*r["o"]:0),e.invert=function(e){return e=t.invert(e[0]*r["o"],e[1]*r["o"]),e[0]*=r["g"],e[1]*=r["g"],e},e},h=n("98f3"),f=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:h["a"],rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},p=function(t,e){return Object(r["a"])(t[0]-e[0])<r["h"]&&Object(r["a"])(t[1]-e[1])<r["h"]};function d(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var g=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(p(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new d(r,t,null,!0)),u.push(n.o=new d(r,null,n,!1)),s.push(n=new d(a,t,null,!1)),u.push(n.o=new d(a,null,n,!0))}})),s.length){for(u.sort(e),m(s),m(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;var c,l,h=s[0];while(1){var f=h,g=!0;while(f.v)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(g)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(g)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,g=!g}while(!f.v);i.lineEnd()}}};function m(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var v=n("b82a");function y(t){return[Object(r["e"])(t[1],t[0]),Object(r["c"])(t[2])]}function _(t){var e=t[0],n=t[1],i=Object(r["f"])(n);return[i*Object(r["f"])(e),i*Object(r["q"])(e),Object(r["q"])(n)]}function b(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function x(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function w(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function E(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function S(t){var e=Object(r["r"])(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var M=Object(v["a"])();function T(t){return Object(r["a"])(t[0])<=r["m"]?t[0]:Object(r["p"])(t[0])*((Object(r["a"])(t[0])+r["m"])%r["t"]-r["m"])}var C=function(t,e){var n=T(e),i=e[1],o=Object(r["q"])(i),a=[Object(r["q"])(n),-Object(r["f"])(n),0],s=0,u=0;M.reset(),1===o?i=r["k"]+r["h"]:-1===o&&(i=-r["k"]-r["h"]);for(var c=0,l=t.length;c<l;++c)if(f=(h=t[c]).length)for(var h,f,p=h[f-1],d=T(p),g=p[1]/2+r["n"],m=Object(r["q"])(g),v=Object(r["f"])(g),y=0;y<f;++y,d=w,m=C,v=L,p=b){var b=h[y],w=T(b),E=b[1]/2+r["n"],C=Object(r["q"])(E),L=Object(r["f"])(E),A=w-d,I=A>=0?1:-1,P=I*A,R=P>r["m"],O=m*C;if(M.add(Object(r["e"])(O*I*Object(r["q"])(P),v*L+O*Object(r["f"])(P))),s+=R?A+I*r["t"]:A,R^d>=n^w>=n){var N=x(_(p),_(b));S(N);var D=x(a,N);S(D);var F=(R^A>=0?-1:1)*Object(r["c"])(D[2]);(i>F||i===F&&(N[0]||N[1]))&&(u+=R^A>=0?1:-1)}}return(s<-r["h"]||s<r["h"]&&M<-r["h"])^1&u},L=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},A=function(t){return 1===t.length&&(t=I(t)),{left:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};function I(t){return function(e,n){return L(t(e),n)}}var P=A(L);P.right,P.left;var R=Array.prototype;R.slice,R.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var O=function(t){var e,n,r,i=t.length,o=-1,a=0;while(++o<i)a+=t[o].length;n=new Array(a);while(--i>=0){r=t[i],e=r.length;while(--e>=0)n[--a]=r[e]}return n};var N=function(t,e,n,r){return function(i){var o,a,s,u=e(i),c=f(),l=e(c),h=!1,p={point:d,lineStart:v,lineEnd:y,polygonStart:function(){p.point=_,p.lineStart=b,p.lineEnd=x,a=[],o=[]},polygonEnd:function(){p.point=d,p.lineStart=v,p.lineEnd=y,a=O(a);var t=C(o,r);a.length?(h||(i.polygonStart(),h=!0),g(a,F,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function m(t,e){u.point(t,e)}function v(){p.point=m,u.lineStart()}function y(){p.point=d,u.lineEnd()}function _(t,e){s.push([t,e]),l.point(t,e)}function b(){l.lineStart(),s=[]}function x(){_(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),f=c.result(),p=f.length;if(s.pop(),o.push(s),s=null,p)if(1&u){if(n=f[0],(e=n.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(D))}return p}};function D(t){return t.length>1}function F(t,e){return((t=t.x)[0]<0?t[1]-r["k"]-r["h"]:r["k"]-t[1])-((e=e.x)[0]<0?e[1]-r["k"]-r["h"]:r["k"]-e[1])}var B=N((function(){return!0}),k,j,[-r["m"],-r["k"]]);function k(t){var e,n=NaN,i=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,s){var u=a>0?r["m"]:-r["m"],c=Object(r["a"])(a-n);Object(r["a"])(c-r["m"])<r["h"]?(t.point(n,i=(i+s)/2>0?r["k"]:-r["k"]),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(u,i),t.point(a,i),e=0):o!==u&&c>=r["m"]&&(Object(r["a"])(n-o)<r["h"]&&(n-=o*r["h"]),Object(r["a"])(a-u)<r["h"]&&(a-=u*r["h"]),i=U(n,i,a,s),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(u,i),e=0),t.point(n=a,i=s),o=u},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function U(t,e,n,i){var o,a,s=Object(r["q"])(t-n);return Object(r["a"])(s)>r["h"]?Object(r["d"])((Object(r["q"])(e)*(a=Object(r["f"])(i))*Object(r["q"])(n)-Object(r["q"])(i)*(o=Object(r["f"])(e))*Object(r["q"])(t))/(o*a*s)):(e+i)/2}function j(t,e,n,i){var o;if(null==t)o=n*r["k"],i.point(-r["m"],o),i.point(0,o),i.point(r["m"],o),i.point(r["m"],0),i.point(r["m"],-o),i.point(0,-o),i.point(-r["m"],-o),i.point(-r["m"],0),i.point(-r["m"],o);else if(Object(r["a"])(t[0]-e[0])>r["h"]){var a=t[0]<e[0]?r["m"]:-r["m"];o=n*a/2,i.point(-a,o),i.point(0,o),i.point(a,o)}else i.point(e[0],e[1])}function G(t,e,n,i,o,a){if(n){var s=Object(r["f"])(e),u=Object(r["q"])(e),c=i*n;null==o?(o=e+i*r["t"],a=e-c/2):(o=z(s,o),a=z(s,a),(i>0?o<a:o>a)&&(o+=i*r["t"]));for(var l,h=o;i>0?h>a:h<a;h-=c)l=y([s,-u*Object(r["f"])(h),-u*Object(r["q"])(h)]),t.point(l[0],l[1])}}function z(t,e){e=_(e),e[0]-=t,S(e);var n=Object(r["b"])(-e[1]);return((-e[2]<0?-n:n)+r["t"]-r["h"])%r["t"]}var V=function(t){var e=Object(r["f"])(t),n=6*r["o"],i=e>0,o=Object(r["a"])(e)>r["h"];function a(e,r,i,o){G(o,t,n,i,e,r)}function s(t,n){return Object(r["f"])(t)*Object(r["f"])(n)>e}function u(t){var e,n,a,u,h;return{lineStart:function(){u=a=!1,h=1},point:function(f,d){var g,m=[f,d],v=s(f,d),y=i?v?0:l(f,d):v?l(f+(f<0?r["m"]:-r["m"]),d):0;if(!e&&(u=a=v)&&t.lineStart(),v!==a&&(g=c(e,m),(!g||p(e,g)||p(m,g))&&(m[0]+=r["h"],m[1]+=r["h"],v=s(m[0],m[1]))),v!==a)h=0,v?(t.lineStart(),g=c(m,e),t.point(g[0],g[1])):(g=c(e,m),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(o&&e&&i^v){var _;y&n||!(_=c(m,e,!0))||(h=0,i?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!v||e&&p(e,m)||t.point(m[0],m[1]),e=m,a=v,n=y},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return h|(u&&a)<<1}}}function c(t,n,i){var o=_(t),a=_(n),s=[1,0,0],u=x(o,a),c=b(u,u),l=u[0],h=c-l*l;if(!h)return!i&&t;var f=e*c/h,p=-e*l/h,d=x(s,u),g=E(s,f),m=E(u,p);w(g,m);var v=d,S=b(g,v),M=b(v,v),T=S*S-M*(b(g,g)-1);if(!(T<0)){var C=Object(r["r"])(T),L=E(v,(-S-C)/M);if(w(L,g),L=y(L),!i)return L;var A,I=t[0],P=n[0],R=t[1],O=n[1];P<I&&(A=I,I=P,P=A);var N=P-I,D=Object(r["a"])(N-r["m"])<r["h"],F=D||N<r["h"];if(!D&&O<R&&(A=R,R=O,O=A),F?D?R+O>0^L[1]<(Object(r["a"])(L[0]-I)<r["h"]?R:O):R<=L[1]&&L[1]<=O:N>r["m"]^(I<=L[0]&&L[0]<=P)){var B=E(v,(-S+C)/M);return w(B,g),[L,y(B)]}}}function l(e,n){var o=i?t:r["m"]-t,a=0;return e<-o?a|=1:e>o&&(a|=2),n<-o?a|=4:n>o&&(a|=8),a}return N(s,u,a,i?[0,-t]:[-r["m"],t-r["m"]])},H=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],h=0,f=1,p=c-s,d=l-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>h&&(h=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<f&&(f=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<h)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>h&&(h=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>h&&(h=a)}else if(d>0){if(a<h)return;a<f&&(f=a)}return h>0&&(t[0]=s+h*p,t[1]=u+h*d),f<1&&(e[0]=s+f*p,e[1]=u+f*d),!0}}}}},q=1e9,W=-q;function X(t,e,n,i){function o(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function a(r,o,a,u){var l=0,h=0;if(null==r||(l=s(r,a))!==(h=s(o,a))||c(r,o)<0^a>0)do{u.point(0===l||3===l?t:n,l>1?i:e)}while((l=(l+a+4)%4)!==h);else u.point(o[0],o[1])}function s(i,o){return Object(r["a"])(i[0]-t)<r["h"]?o>0?0:3:Object(r["a"])(i[0]-n)<r["h"]?o>0?2:1:Object(r["a"])(i[1]-e)<r["h"]?o>0?1:0:o>0?3:2}function u(t,e){return c(t.x,e.x)}function c(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var s,c,l,h,p,d,m,v,y,_,b,x=r,w=f(),E={point:S,lineStart:L,lineEnd:A,polygonStart:T,polygonEnd:C};function S(t,e){o(t,e)&&x.point(t,e)}function M(){for(var e=0,n=0,r=c.length;n<r;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],p=h[1];u<l;++u)o=f,a=p,h=s[u],f=h[0],p=h[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(t-o)&&++e:p<=i&&(f-o)*(i-a)<(p-a)*(t-o)&&--e;return e}function T(){x=w,s=[],c=[],b=!0}function C(){var t=M(),e=b&&t,n=(s=O(s)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),a(null,null,1,r),r.lineEnd()),n&&g(s,u,t,a,r),r.polygonEnd()),x=r,s=c=l=null}function L(){E.point=I,c&&c.push(l=[]),_=!0,y=!1,m=v=NaN}function A(){s&&(I(h,p),d&&y&&w.rejoin(),s.push(w.result())),E.point=S,y&&x.lineEnd()}function I(r,a){var s=o(r,a);if(c&&l.push([r,a]),_)h=r,p=a,d=s,_=!1,s&&(x.lineStart(),x.point(r,a));else if(s&&y)x.point(r,a);else{var u=[m=Math.max(W,Math.min(q,m)),v=Math.max(W,Math.min(q,v))],f=[r=Math.max(W,Math.min(q,r)),a=Math.max(W,Math.min(q,a))];H(u,f,t,e,n,i)?(y||(x.lineStart(),x.point(u[0],u[1])),x.point(f[0],f[1]),s||x.lineEnd(),b=!1):s&&(x.lineStart(),x.point(r,a),b=!1)}m=r,v=a,y=s}return E}}var Y=n("2182");function $(t){return function(e){var n=new J;for(var r in t)n[r]=t[r];return n.stream=e,n}}function J(){}J.prototype={constructor:J,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Z=n("b5ea"),K=n("48c4");function Q(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Object(Z["a"])(n,t.stream(K["a"])),e(K["a"].result()),null!=r&&t.clipExtent(r),t}function tt(t,e,n){return Q(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function et(t,e,n){return tt(t,[[0,0],e],n)}function nt(t,e,n){return Q(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function rt(t,e,n){return Q(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}var it=16,ot=Object(r["f"])(30*r["o"]),at=function(t,e){return+e?ut(t,e):st(t)};function st(t){return $({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function ut(t,e){function n(i,o,a,s,u,c,l,h,f,p,d,g,m,v){var y=l-i,_=h-o,b=y*y+_*_;if(b>4*e&&m--){var x=s+p,w=u+d,E=c+g,S=Object(r["r"])(x*x+w*w+E*E),M=Object(r["c"])(E/=S),T=Object(r["a"])(Object(r["a"])(E)-1)<r["h"]||Object(r["a"])(a-f)<r["h"]?(a+f)/2:Object(r["e"])(w,x),C=t(T,M),L=C[0],A=C[1],I=L-i,P=A-o,R=_*I-y*P;(R*R/b>e||Object(r["a"])((y*I+_*P)/b-.5)>.3||s*p+u*d+c*g<ot)&&(n(i,o,a,s,u,c,L,A,T,x/=S,w/=S,E,m,v),v.point(L,A),n(L,A,T,x,w,E,l,h,f,p,d,g,m,v))}}return function(e){var r,i,o,a,s,u,c,l,h,f,p,d,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,g.point=y,e.lineStart()}function y(r,i){var o=_([r,i]),a=t(r,i);n(l,h,c,f,p,d,l=a[0],h=a[1],c=r,f=o[0],p=o[1],d=o[2],it,e),e.point(l,h)}function b(){g.point=m,e.lineEnd()}function x(){v(),g.point=w,g.lineEnd=E}function w(t,e){y(r=t,e),i=l,o=h,a=f,s=p,u=d,g.point=y}function E(){n(l,h,c,f,p,d,i,o,r,a,s,u,it,e),g.lineEnd=b,b()}return g}}var ct=$({point:function(t,e){this.stream.point(t*r["o"],e*r["o"])}});function lt(t){return $({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function ht(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r}function ft(t,e,n,i){var o=Object(r["f"])(i),a=Object(r["q"])(i),s=o*t,u=a*t,c=o/t,l=a/t,h=(a*n-o*e)/t,f=(a*e+o*n)/t;function p(t,r){return[s*t-u*r+e,n-u*t-s*r]}return p.invert=function(t,e){return[c*t-l*e+h,f-l*t-c*e]},p}function pt(t){return dt((function(){return t}))()}function dt(t){var e,n,o,s,u,c,l,h,f,p,d=150,g=480,m=250,v=0,y=0,_=0,b=0,x=0,w=0,E=null,S=B,M=null,T=Y["a"],C=.5;function L(t){return h(t[0]*r["o"],t[1]*r["o"])}function A(t){return t=h.invert(t[0],t[1]),t&&[t[0]*r["g"],t[1]*r["g"]]}function I(){var t=ft(d,0,0,w).apply(null,e(v,y)),r=(w?ft:ht)(d,g-t[0],m-t[1],w);return n=a(_,b,x),l=i(e,r),h=i(n,l),c=at(l,C),P()}function P(){return f=p=null,L}return L.stream=function(t){return f&&p===t?f:f=ct(lt(n)(S(c(T(p=t)))))},L.preclip=function(t){return arguments.length?(S=t,E=void 0,P()):S},L.postclip=function(t){return arguments.length?(T=t,M=o=s=u=null,P()):T},L.clipAngle=function(t){return arguments.length?(S=+t?V(E=t*r["o"]):(E=null,B),P()):E*r["g"]},L.clipExtent=function(t){return arguments.length?(T=null==t?(M=o=s=u=null,Y["a"]):X(M=+t[0][0],o=+t[0][1],s=+t[1][0],u=+t[1][1]),P()):null==M?null:[[M,o],[s,u]]},L.scale=function(t){return arguments.length?(d=+t,I()):d},L.translate=function(t){return arguments.length?(g=+t[0],m=+t[1],I()):[g,m]},L.center=function(t){return arguments.length?(v=t[0]%360*r["o"],y=t[1]%360*r["o"],I()):[v*r["g"],y*r["g"]]},L.rotate=function(t){return arguments.length?(_=t[0]%360*r["o"],b=t[1]%360*r["o"],x=t.length>2?t[2]%360*r["o"]:0,I()):[_*r["g"],b*r["g"],x*r["g"]]},L.angle=function(t){return arguments.length?(w=t%360*r["o"],I()):w*r["g"]},L.precision=function(t){return arguments.length?(c=at(l,C=t*t),P()):Object(r["r"])(C)},L.fitExtent=function(t,e){return tt(L,t,e)},L.fitSize=function(t,e){return et(L,t,e)},L.fitWidth=function(t,e){return nt(L,t,e)},L.fitHeight=function(t,e){return rt(L,t,e)},function(){return e=t.apply(this,arguments),L.invert=e.invert&&A,I()}}function gt(t,e){return[t,Object(r["l"])(Object(r["s"])((r["k"]+e)/2))]}gt.invert=function(t,e){return[t,2*Object(r["d"])(Object(r["j"])(e))-r["k"]]};e["a"]=function(){return mt(gt).scale(961/r["t"])};function mt(t){var e,n,i,o=pt(t),a=o.center,s=o.scale,u=o.translate,c=o.clipExtent,h=null;function f(){var a=r["m"]*s(),u=o(l(o.rotate()).invert([0,0]));return c(null==h?[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]:t===gt?[[Math.max(u[0]-a,h),e],[Math.min(u[0]+a,n),i]]:[[h,Math.max(u[1]-a,e)],[n,Math.min(u[1]+a,i)]])}return o.scale=function(t){return arguments.length?(s(t),f()):s()},o.translate=function(t){return arguments.length?(u(t),f()):u()},o.center=function(t){return arguments.length?(a(t),f()):a()},o.clipExtent=function(t){return arguments.length?(null==t?h=e=n=i=null:(h=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),f()):null==h?null:[[h,e],[n,i]]},f()}},"2f78":function(t,e,n){"use strict";var r=n("a6a9"),i=n.n(r);i.a},3410:function(t,e,n){var r=n("23e7"),i=n("d039"),o=n("7b0b"),a=n("e163"),s=n("e177"),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:u,sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),a=n("df75");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=a(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},3835:function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function i(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(u){i=!0,o=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){return r(t)||i(t,e)||o()}n.d(e,"a",(function(){return a}))},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3c4e":function(t,e,n){"use strict";var r=function(t){return i(t)&&!o(t)};function i(t){return!!t&&"object"===typeof t}function o(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||u(t)}var a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103;function u(t){return t.$$typeof===s}function c(t){return Array.isArray(t)?[]:{}}function l(t,e){var n=e&&!0===e.clone;return n&&r(t)?p(c(t),t,e):t}function h(t,e,n){var i=t.slice();return e.forEach((function(e,o){"undefined"===typeof i[o]?i[o]=l(e,n):r(e)?i[o]=p(t[o],e,n):-1===t.indexOf(e)&&i.push(l(e,n))})),i}function f(t,e,n){var i={};return r(t)&&Object.keys(t).forEach((function(e){i[e]=l(t[e],n)})),Object.keys(e).forEach((function(o){r(e[o])&&t[o]?i[o]=p(t[o],e[o],n):i[o]=l(e[o],n)})),i}function p(t,e,n){var r=Array.isArray(e),i=Array.isArray(t),o=n||{arrayMerge:h},a=r===i;if(a){if(r){var s=o.arrayMerge||h;return s(t,e,n)}return f(t,e,n)}return l(e,n)}p.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return p(t,n,e)}))};var d=p;t.exports=d},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,i=n("69f3"),o=n("7dd0"),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},"3d2d":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=94)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},94:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"el-container",class:{"is-vertical":t.isVertical}},[t._t("default")],2)},i=[];r._withStripped=!0;var o={name:"ElContainer",componentName:"ElContainer",props:{direction:String},computed:{isVertical:function(){return"vertical"===this.direction||"horizontal"!==this.direction&&(!(!this.$slots||!this.$slots.default)&&this.$slots.default.some((function(t){var e=t.componentOptions&&t.componentOptions.tag;return"el-header"===e||"el-footer"===e})))}}},a=o,s=n(0),u=Object(s["a"])(a,r,i,!1,null,null,null);u.options.__file="packages/container/src/main.vue";var c=u.exports;c.install=function(t){t.component(c.name,c)};e["default"]=c}})},"3f8c":function(t,e){t.exports={}},"41f8":function(t,e,n){"use strict";e.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isVNode=o;var i=n("8122");function o(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":r(t))&&(0,i.hasOwn)(t,"componentOptions")}},"428f":function(t,e,n){var r=n("da84");t.exports=r},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),o=n("9112"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o(s,a,i(null)),t.exports=function(t){s[a][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),o=n("b622"),a=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},"450d":function(t,e,n){},"46a1":function(t,e,n){},"474c":function(t,e,n){"use strict";n.d(e,"h",(function(){return r})),n.d(e,"i",(function(){return i})),n.d(e,"m",(function(){return o})),n.d(e,"k",(function(){return a})),n.d(e,"n",(function(){return s})),n.d(e,"t",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"o",(function(){return l})),n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return d})),n.d(e,"j",(function(){return g})),n.d(e,"l",(function(){return m})),n.d(e,"q",(function(){return v})),n.d(e,"p",(function(){return y})),n.d(e,"r",(function(){return _})),n.d(e,"s",(function(){return b})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return w}));var r=1e-6,i=1e-12,o=Math.PI,a=o/2,s=o/4,u=2*o,c=180/o,l=o/180,h=Math.abs,f=Math.atan,p=Math.atan2,d=Math.cos,g=(Math.ceil,Math.exp),m=(Math.floor,Math.log),v=(Math.pow,Math.sin),y=Math.sign||function(t){return t>0?1:t<0?-1:0},_=Math.sqrt,b=Math.tan;function x(t){return t>1?0:t<-1?o:Math.acos(t)}function w(t){return t>1?a:t<-1?-a:Math.asin(t)}},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),a=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},4897:function(t,e,n){"use strict";e.__esModule=!0,e.i18n=e.use=e.t=void 0;var r=n("f0d9"),i=h(r),o=n("8bbf"),a=h(o),s=n("3c4e"),u=h(s),c=n("9d7e"),l=h(c);function h(t){return t&&t.__esModule?t:{default:t}}var f=(0,l.default)(a.default),p=i.default,d=!1,g=function(){var t=Object.getPrototypeOf(this||a.default).$t;if("function"===typeof t&&a.default.locale)return d||(d=!0,a.default.locale(a.default.config.lang,(0,u.default)(p,a.default.locale(a.default.config.lang)||{},{clone:!0}))),t.apply(this,arguments)},m=e.t=function(t,e){var n=g.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var r=t.split("."),i=p,o=0,a=r.length;o<a;o++){var s=r[o];if(n=i[s],o===a-1)return f(n,e);if(!n)return"";i=n}return""},v=e.use=function(t){p=t||p},y=e.i18n=function(t){g=t||g};e.default={use:v,t:m,i18n:y}},"48c4":function(t,e,n){"use strict";var r=n("98f3"),i=1/0,o=i,a=-i,s=a,u={point:c,lineStart:r["a"],lineEnd:r["a"],polygonStart:r["a"],polygonEnd:r["a"],result:function(){var t=[[i,o],[a,s]];return a=s=-(o=i=1/0),t}};function c(t,e){t<i&&(i=t),t>a&&(a=t),e<o&&(o=e),e>s&&(s=e)}e["a"]=u},4930:function(t,e,n){var r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"4b26":function(t,e,n){"use strict";e.__esModule=!0;var r=n("8bbf"),i=a(r),o=n("5924");function a(t){return t&&t.__esModule?t:{default:t}}var s=!1,u=!1,c=void 0,l=function(){if(!i.default.prototype.$isServer){var t=f.modalDom;return t?s=!0:(s=!1,t=document.createElement("div"),f.modalDom=t,t.addEventListener("touchmove",(function(t){t.preventDefault(),t.stopPropagation()})),t.addEventListener("click",(function(){f.doOnModalClick&&f.doOnModalClick()}))),t}},h={},f={modalFade:!0,getInstance:function(t){return h[t]},register:function(t,e){t&&e&&(h[t]=e)},deregister:function(t){t&&(h[t]=null,delete h[t])},nextZIndex:function(){return f.zIndex++},modalStack:[],doOnModalClick:function(){var t=f.modalStack[f.modalStack.length-1];if(t){var e=f.getInstance(t.id);e&&e.closeOnClickModal&&e.close()}},openModal:function(t,e,n,r,a){if(!i.default.prototype.$isServer&&t&&void 0!==e){this.modalFade=a;for(var u=this.modalStack,c=0,h=u.length;c<h;c++){var f=u[c];if(f.id===t)return}var p=l();if((0,o.addClass)(p,"v-modal"),this.modalFade&&!s&&(0,o.addClass)(p,"v-modal-enter"),r){var d=r.trim().split(/\s+/);d.forEach((function(t){return(0,o.addClass)(p,t)}))}setTimeout((function(){(0,o.removeClass)(p,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(p):document.body.appendChild(p),e&&(p.style.zIndex=e),p.tabIndex=0,p.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:r})}},closeModal:function(t){var e=this.modalStack,n=l();if(e.length>0){var r=e[e.length-1];if(r.id===t){if(r.modalClass){var i=r.modalClass.trim().split(/\s+/);i.forEach((function(t){return(0,o.removeClass)(n,t)}))}e.pop(),e.length>0&&(n.style.zIndex=e[e.length-1].zIndex)}else for(var a=e.length-1;a>=0;a--)if(e[a].id===t){e.splice(a,1);break}}0===e.length&&(this.modalFade&&(0,o.addClass)(n,"v-modal-leave"),setTimeout((function(){0===e.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",f.modalDom=void 0),(0,o.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(f,"zIndex",{configurable:!0,get:function(){return u||(c=c||(i.default.prototype.$ELEMENT||{}).zIndex||2e3,u=!0),c},set:function(t){c=t}});var p=function(){if(!i.default.prototype.$isServer&&f.modalStack.length>0){var t=f.modalStack[f.modalStack.length-1];if(!t)return;var e=f.getInstance(t.id);return e}};i.default.prototype.$isServer||window.addEventListener("keydown",(function(t){if(27===t.keyCode){var e=p();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}})),e.default=f},"4b2f":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("5a89");r["UniformsLib"].line={linewidth:{value:1},resolution:{value:new r["Vector2"](1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},r["ShaderLib"]["line"]={uniforms:r["UniformsUtils"].merge([r["UniformsLib"].common,r["UniformsLib"].fog,r["UniformsLib"].line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}\n\t\t"};var i=function(t){r["ShaderMaterial"].call(this,{type:"LineMaterial",uniforms:r["UniformsUtils"].clone(r["ShaderLib"]["line"].uniforms),vertexShader:r["ShaderLib"]["line"].vertexShader,fragmentShader:r["ShaderLib"]["line"].fragmentShader,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}}}),this.setValues(t)};i.prototype=Object.create(r["ShaderMaterial"].prototype),i.prototype.constructor=i,i.prototype.isLineMaterial=!0},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("d039"),a=n("1dde"),s=a("filter"),u=s&&!o((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var r=n("f8c2"),i=n("7b0b"),o=n("9bdd"),a=n("e95a"),s=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,h,f,p=i(t),d="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,v=void 0!==m,y=0,_=c(p);if(v&&(m=r(m,g>2?arguments[2]:void 0,2)),void 0==_||d==Array&&a(_))for(e=s(p.length),n=new d(e);e>y;y++)u(n,y,v?m(p[y],y):p[y]);else for(h=_.call(p),f=h.next,n=new d;!(l=f.call(h)).done;y++)u(n,y,v?o(h,m,[l.value,y],!0):l.value);return n.length=y,n}},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5128:function(t,e,n){"use strict";e.__esModule=!0,e.PopupManager=void 0;var r=n("8bbf"),i=f(r),o=n("7f4d"),a=f(o),s=n("4b26"),u=f(s),c=n("e62d"),l=f(c),h=n("5924");function f(t){return t&&t.__esModule?t:{default:t}}var p=1,d=void 0;e.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+p++,u.default.register(this._popupId,this)},beforeDestroy:function(){u.default.deregister(this._popupId),u.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(t){var e=this;if(t){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,i.default.nextTick((function(){e.open()})))}else this.close()}},methods:{open:function(t){var e=this;this.rendered||(this.rendered=!0);var n=(0,a.default)({},this.$props||this,t);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var r=Number(n.openDelay);r>0?this._openTimer=setTimeout((function(){e._openTimer=null,e.doOpen(n)}),r):this.doOpen(n)},doOpen:function(t){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var e=this.$el,n=t.modal,r=t.zIndex;if(r&&(u.default.zIndex=r),n&&(this._closing&&(u.default.closeModal(this._popupId),this._closing=!1),u.default.openModal(this._popupId,u.default.nextZIndex(),this.modalAppendToBody?void 0:e,t.modalClass,t.modalFade),t.lockScroll)){this.withoutHiddenClass=!(0,h.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,h.getStyle)(document.body,"paddingRight"),10)),d=(0,l.default)();var i=document.documentElement.clientHeight<document.body.scrollHeight,o=(0,h.getStyle)(document.body,"overflowY");d>0&&(i||"scroll"===o)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+d+"px"),(0,h.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(e).position&&(e.style.position="absolute"),e.style.zIndex=u.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var t=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var e=Number(this.closeDelay);e>0?this._closeTimer=setTimeout((function(){t._closeTimer=null,t.doClose()}),e):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){u.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,h.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},e.PopupManager=u.default},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},5639:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("5a89"),i=function(){r["InstancedBufferGeometry"].call(this),this.type="LineSegmentsGeometry";var t=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],e=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new r["Float32BufferAttribute"](t,3)),this.setAttribute("uv",new r["Float32BufferAttribute"](e,2))};i.prototype=Object.assign(Object.create(r["InstancedBufferGeometry"].prototype),{constructor:i,isLineSegmentsGeometry:!0,applyMatrix:function(t){var e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(t.applyToBufferAttribute(e),t.applyToBufferAttribute(n),e.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(t){var e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));var n=new r["InstancedInterleavedBuffer"](e,6,1);return this.setAttribute("instanceStart",new r["InterleavedBufferAttribute"](n,3,0)),this.setAttribute("instanceEnd",new r["InterleavedBufferAttribute"](n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(t){var e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));var n=new r["InstancedInterleavedBuffer"](e,6,1);return this.setAttribute("instanceColorStart",new r["InterleavedBufferAttribute"](n,3,0)),this.setAttribute("instanceColorEnd",new r["InterleavedBufferAttribute"](n,3,3)),this},fromWireframeGeometry:function(t){return this.setPositions(t.attributes.position.array),this},fromEdgesGeometry:function(t){return this.setPositions(t.attributes.position.array),this},fromMesh:function(t){return this.fromWireframeGeometry(new r["WireframeGeometry"](t.geometry)),this},fromLineSegements:function(t){var e=t.geometry;return e.isGeometry?this.setPositions(e.vertices):e.isBufferGeometry&&this.setPositions(e.position.array),this},computeBoundingBox:function(){var t=new r["Box3"];return function(){null===this.boundingBox&&(this.boundingBox=new r["Box3"]);var e=this.attributes.instanceStart,n=this.attributes.instanceEnd;void 0!==e&&void 0!==n&&(this.boundingBox.setFromBufferAttribute(e),t.setFromBufferAttribute(n),this.boundingBox.union(t))}}(),computeBoundingSphere:function(){var t=new r["Vector3"];return function(){null===this.boundingSphere&&(this.boundingSphere=new r["Sphere"]),null===this.boundingBox&&this.computeBoundingBox();var e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(void 0!==e&&void 0!==n){var i=this.boundingSphere.center;this.boundingBox.getCenter(i);for(var o=0,a=0,s=e.count;a<s;a++)t.fromBufferAttribute(e,a),o=Math.max(o,i.distanceToSquared(t)),t.fromBufferAttribute(n,a),o=Math.max(o,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}}(),toJSON:function(){}})},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.5.0",mode:r?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),o=n("7418"),a=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("5899"),o="["+i+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),u=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},5924:function(t,e,n){"use strict";e.__esModule=!0,e.isInContainer=e.getScrollContainer=e.isScroll=e.getStyle=e.once=e.off=e.on=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.hasClass=g,e.addClass=m,e.removeClass=v,e.setStyle=_;var i=n("8bbf"),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.prototype.$isServer,u=/([\:\-\_]+(.))/g,c=/^moz([A-Z])/,l=s?0:Number(document.documentMode),h=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},f=function(t){return t.replace(u,(function(t,e,n,r){return r?n.toUpperCase():n})).replace(c,"Moz$1")},p=e.on=function(){return!s&&document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}(),d=e.off=function(){return!s&&document.removeEventListener?function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)}}();e.once=function(t,e,n){var r=function r(){n&&n.apply(this,arguments),d(t,e,r)};p(t,e,r)};function g(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function m(t,e){if(t){for(var n=t.className,r=(e||"").split(" "),i=0,o=r.length;i<o;i++){var a=r[i];a&&(t.classList?t.classList.add(a):g(t,a)||(n+=" "+a))}t.classList||(t.className=n)}}function v(t,e){if(t&&e){for(var n=e.split(" "),r=" "+t.className+" ",i=0,o=n.length;i<o;i++){var a=n[i];a&&(t.classList?t.classList.remove(a):g(t,a)&&(r=r.replace(" "+a+" "," ")))}t.classList||(t.className=h(r))}}var y=e.getStyle=l<9?function(t,e){if(!s){if(!t||!e)return null;e=f(e),"float"===e&&(e="styleFloat");try{switch(e){case"opacity":try{return t.filters.item("alpha").opacity/100}catch(n){return 1}default:return t.style[e]||t.currentStyle?t.currentStyle[e]:null}}catch(n){return t.style[e]}}}:function(t,e){if(!s){if(!t||!e)return null;e=f(e),"float"===e&&(e="cssFloat");try{var n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch(r){return t.style[e]}}};function _(t,e,n){if(t&&e)if("object"===("undefined"===typeof e?"undefined":r(e)))for(var i in e)e.hasOwnProperty(i)&&_(t,i,e[i]);else e=f(e),"opacity"===e&&l<9?t.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":t.style[e]=n}var b=e.isScroll=function(t,e){if(!s){var n=null!==e||void 0!==e,r=y(t,n?e?"overflow-y":"overflow-x":"overflow");return r.match(/(scroll|auto)/)}};e.getScrollContainer=function(t,e){if(!s){var n=t;while(n){if([window,document,document.documentElement].includes(n))return window;if(b(n,e))return n;n=n.parentNode}return n}},e.isInContainer=function(t,e){if(s||!t||!e)return!1;var n=t.getBoundingClientRect(),r=void 0;return r=[window,document,document.documentElement,null,void 0].includes(e)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:e.getBoundingClientRect(),n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right}},"595b":function(t,e,n){!function(t,n){n(e)}(0,(function(t){"use strict";function e(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&M(r),i&&T(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i,a=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(a&&M(a),t){case"Point":i=r(e).geometry;break;case"LineString":i=s(e).geometry;break;case"Polygon":i=o(e).geometry;break;case"MultiPoint":i=h(e).geometry;break;case"MultiLineString":i=l(e).geometry;break;case"MultiPolygon":i=f(e).geometry;break;default:throw new Error(t+" is invalid")}return a&&(i.bbox=a),i}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return r(t,e)})),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!E(o[0][0])||!E(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return o(t,e)})),n)}function s(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!E(t[0][1])||!E(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return s(t,e)})),n)}function c(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&M(n),r&&T(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function l(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Bo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function m(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Bo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function v(t,e){return _(m(t,e))}function y(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function _(t){if(null===t||void 0===t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function b(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function x(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(m(t,e),n||"kilometers")}function w(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=Uo[e||"meters"];if(!r)throw new Error("invalid original units");var i=Uo[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function S(t){return!!t&&t.constructor===Object}function M(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!E(t))throw new Error("bbox must only contain numbers")}))}function T(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function C(t,e,n){if(null!==t)for(var r,i,o,a,s,u,c,l,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,m=d?t.features.length:1,v=0;v<m;v++){s=(l=!!(c=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<s;y++){var _=0,b=0;if(null!==(a=l?c.geometries[y]:c)){u=a.coordinates;var x=a.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":e(u,f,v,_,b),f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],f,v,_,b),f++,"MultiPoint"===x&&_++;"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],f,v,_,b),f++;"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===x&&(b=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],f,v,_,b),f++;b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)C(a.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function L(t,e,n,r){var i=n;return C(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i}function A(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function I(t,e,n){var r=n;return A(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function P(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function R(t,e,n){var r=n;return P(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function O(t){var e=[];return C(t,(function(t){e.push(t)})),e}function N(t,e){var n,r,i,o,a,s,u,c,l,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,f,c,l,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],f,c,l,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,c,l,h);f++}}function D(t,e,n){var r=n;return N(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function F(t,n){N(t,(function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:a}),r,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){n(e({type:s,coordinates:t},i),r,o)}))}))}function B(t,e,n){var r=n;return F(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function k(t,e){F(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&L(t,(function(o,a,u,c,l,h){var f=s([o,a],t.properties);return e(f,n,r,h,i),i++,a}))}}))}function U(t,e,n){var r=n,i=!1;return k(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r}function j(t,e){if(!t)throw new Error("geojson is required");F(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var a=0;a<o.length;a++)e(s(o[a],t.properties),n,r,a)}}}))}function G(t,e,n){var r=n;return j(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function z(t){var e=[1/0,1/0,-1/0,-1/0];return C(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function V(t){if(!t)throw new Error("obj is required");var e=H(t);if(e.length>1&&E(e[0])&&E(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function H(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return q(e),e;throw new Error("No valid coordinates")}function q(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return q(t[0]);throw new Error("coordinates must only contain numbers")}function W(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function X(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Y(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function $(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function J(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function Z(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function K(t,e,n){n=n||{};for(var r=Object.keys(Vo),i=0;i<r.length;i++){var o=r[i],a=n[o];a=void 0!==a&&null!==a?a:Vo[o],Ho[o]=a}Ho.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach((function(r,i){r.forEach((function(r,o){if(void 0!==r&&!function(t){return 5===t.cval||10===t.cval}(r)&&!tt(r)){var a=function(t,e,n){var r,i,o,a=t.length,s=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),f=h.cval,p=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][f]);s.push([n+p[0],e+p[1]]),p=nt(h,o=l[f]),s.push([n+p[0],e+p[1]]),et(h);for(var d=n+u[f],g=e+c[f],m=f;d>=0&&g>=0&&g<a&&(d!=n||g!=e)&&void 0!==(h=t[g][d]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};o=l[f],r=u[f],i=c[f],5!==f&&10!==f||(5===f?h.flipped?-1===c[m]?(o="left",r=-1,i=0):(o="right",r=1,i=0):-1===u[m]&&(o="bottom",r=0,i=-1):10===f&&(h.flipped?-1===u[m]?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===c[m]&&(o="left",r=-1,i=0))),p=nt(h,o),s.push([d+p[0],g+p[1]]),et(h),d+=r,g+=i,m=f}return{path:s,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],c=a.path[a.path.length-1][1],l=n-1;l>=0;l--)if(Math.abs(e[l][0][0]-u)<=1e-7&&Math.abs(e[l][0][1]-c)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[l].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],c=t[o+1][a+1],l=t[o][a+1],h=t[o][a];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(h))){s|=u>=e?8:0,s|=c>=e?4:0,s|=l>=e?2:0;var f,p,d,g,m=!1;if(5===(s|=h>=e?1:0)||10===s){var v=(u+c+l+h)/4;5===s&&v<e?(s=10,m=!0):10===s&&v<e&&(s=5,m=!0)}if(0!==s&&15!==s)f=p=d=g=.5,1===s?(d=1-Q(e,u,h),p=1-Q(e,l,h)):2===s?(p=Q(e,h,l),g=1-Q(e,c,l)):3===s?(d=1-Q(e,u,h),g=1-Q(e,c,l)):4===s?(f=Q(e,u,c),g=Q(e,l,c)):5===s?(f=Q(e,u,c),g=Q(e,l,c),p=1-Q(e,l,h),d=1-Q(e,u,h)):6===s?(p=Q(e,h,l),f=Q(e,u,c)):7===s?(d=1-Q(e,u,h),f=Q(e,u,c)):8===s?(d=Q(e,h,u),f=1-Q(e,c,u)):9===s?(p=1-Q(e,l,h),f=1-Q(e,c,u)):10===s?(f=1-Q(e,c,u),g=1-Q(e,c,l),p=Q(e,h,l),d=Q(e,h,u)):11===s?(f=1-Q(e,c,u),g=1-Q(e,c,l)):12===s?(d=Q(e,h,u),g=Q(e,l,c)):13===s?(p=1-Q(e,l,h),g=Q(e,l,c)):14===s?(d=Q(e,h,u),p=Q(e,h,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:m,top:f,right:g,bottom:p,left:d}}}}return i}(t,e));return"function"==typeof Ho.successCallback&&Ho.successCallback(s),s}function Q(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function rt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Y(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return P(t,(function(t){var e=H(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){var e=n[t],r=e.sort((function(t,e){return H(t)[0]-H(e)[0]}));return r})).sort((function(t,n){return e?H(t[0])[1]-H(n[0])[1]:H(n[0])[1]-H(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[s,l])}a.push(c)}return a}function it(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||function(t,e){return t<e?-1:t>e?1:0};r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);it(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],h=n,f=r;for(ot(t,n,e),i(t[r],l)>0&&ot(t,n,r);h<f;){for(ot(t,h,f),h++,f--;i(t[h],l)<0;)h++;for(;i(t[f],l)>0;)f--}0===i(t[n],l)?ot(t,n,f):ot(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function ot(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function at(t,e){if(!(this instanceof at))return new at(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function st(t,e){ut(t,0,t.children.length,e,t)}function ut(t,e,n,r,i){i||(i=mt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],ct(i,t.leaf?r(o):o);return i}function ct(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function lt(t,e){return t.minX-e.minX}function ht(t,e){return t.minY-e.minY}function ft(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function pt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function gt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function mt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vt(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,qo(t,o,e,n,i),a.push(e,o,o,n))}function yt(t,e){return e={exports:{}},t(e,e.exports),e.exports}function _t(t,e){if(!(this instanceof _t))return new _t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function bt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)ia(t[o],s)||u.push(t[o]);var c=ta(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=Wo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),r=Mt(u,r),a.push(r)}var c=Wo(16);for(s=0;s<a.length;s++)c.insert(St(a[s]));for(var l=e*e,h=n*n;a.length;){var f=a.shift(),p=f.p,d=f.next.p,g=Tt(p,d);if(!(g<h)){var m=g/l;(u=function(t,e,n,r,i,o,a){for(var s=new na(null,xt),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],h=u.leaf?Ct(l,n,r):function(t,e,n){if(wt(t,n)||wt(e,n))return 0;var r=Lt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=Lt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=Lt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Lt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}(n,r,l);h>o||s.push({node:l,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),p=f.node,d=Ct(p,e,n),g=Ct(p,r,i);if(f.dist<d&&f.dist<g&&Et(n,p,a)&&Et(r,p,a))return p}(u=s.pop())&&(u=u.node)}return null}(o,f.prev.p,p,d,f.next.next.p,m,c))&&Math.min(Tt(u,p),Tt(u,d))<=m&&(a.push(f),a.push(Mt(u,f)),o.remove(u),c.remove(f),c.insert(St(f)),c.insert(St(f.next)))}}f=r;var v=[];do{v.push(f.p),f=f.next}while(f!==r);return v.push(f.p),v}function xt(t,e){return t.dist-e.dist}function wt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Et(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:r,minY:i,maxX:o,maxY:a}),u=0;u<s.length;u++)if(function(t,e,n,r){return t!==r&&e!==n&&oa(t,e,n)>0!=oa(t,e,r)>0&&oa(n,r,t)>0!=oa(n,r,e)>0}(s[u].p,s[u].next.p,t,e))return!1;return!0}function St(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Mt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Tt(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Ct(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return o=t[0]-r,a=t[1]-i,o*o+a*a}function Lt(t,e,n,r,i,o,a,s){var u,c,l,h,f=n-t,p=r-e,d=a-i,g=s-o,m=t-i,v=e-o,y=f*f+p*p,_=f*d+p*g,b=d*d+g*g,x=f*m+p*v,w=d*m+g*v,E=y*b-_*_,S=E,M=E;0===E?(c=0,S=1,h=w,M=b):(h=y*w-_*x,(c=_*w-b*x)<0?(c=0,h=w,M=b):c>S&&(c=S,h=w+_,M=b)),h<0?(h=0,-x<0?c=0:-x>y?c=S:(c=-x,S=y)):h>M&&(h=M,-x+_<0?c=0:-x+_>y?c=S:(c=-x+_,S=y)),u=0===c?0:c/S;var T=(1-(l=0===h?0:h/M))*i+l*a-((1-u)*t+u*n),C=(1-l)*o+l*s-((1-u)*e+u*r);return T*T+C*C}function At(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(C(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var i=aa(r,n);return i.length>3?o([i]):null}function It(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=V(t),o=H(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(Pt(i,o[u][0],r)){for(var l=!1,h=1;h<o[u].length&&!l;)Pt(i,o[u][h],!r)&&(l=!0),h++;l||(c=!0)}return c}function Pt(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}function Rt(t,e){var n=[];return N(e,(function(e){P(t,(function(t){It(t,e)&&n.push(t)}))})),c(n)}function Ot(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return c(function(t){if(t.length<3)return[];t.sort(Dt);for(var e,n,r,i,o,a,s=t.length-1,u=t[s].x,c=t[0].x,l=t[s].y,h=l;s--;)t[s].y<l&&(l=t[s].y),t[s].y>h&&(h=t[s].y);var f,p=c-u,d=h-l,g=p>d?p:d,m=.5*(c+u),v=.5*(h+l),y=[new Nt({x:m-20*g,y:v-g,__sentinel:!0},{x:m,y:v+20*g,__sentinel:!0},{x:m+20*g,y:v-g,__sentinel:!0})],_=[],b=[];for(s=t.length;s--;){for(b.length=0,f=y.length;f--;)(p=t[s].x-y[f].x)>0&&p*p>y[f].r?(_.push(y[f]),y.splice(f,1)):(d=t[s].y-y[f].y,p*p+d*d>y[f].r||(b.push(y[f].a,y[f].b,y[f].b,y[f].c,y[f].c,y[f].a),y.splice(f,1)));for(Ft(b),f=b.length;f;)n=b[--f],e=b[--f],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>1e-12&&y.push(new Nt(e,n,r))}for(Array.prototype.push.apply(_,y),s=_.length;s--;)(_[s].a.__sentinel||_[s].b.__sentinel||_[s].c.__sentinel)&&_.splice(s,1);return _}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],a)})))}function Nt(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+a*(t.y+e.y),l=s*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(u*c-a*l)/h,this.y=(o*l-s*c)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function Dt(t,e){return e.x-t.x}function Ft(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function Bt(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=V(t),o=V(e),a=b(o[1]-i[1]),s=b(o[0]-i[0]),u=b(i[1]),c=b(o[1]),l=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(c);return g(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r)}function kt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ut(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Ut(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Gt(t);default:throw new Error("unknown GeoJSON type")}}function Ut(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=jt(t.properties),e.geometry=Gt(t.geometry),e}function jt(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map((function(t){return t})):e[n]=jt(r):e[n]=r})),e):e}function Gt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Gt(t)})),e):(e.coordinates=zt(t.coordinates),e)}function zt(t){return"object"!=typeof t[0]?t.slice():t.map((function(t){return zt(t)}))}function Vt(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&la(e,i)}function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}function s(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(s)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:n,coordinates:e}}var u=ca(t.transform),c=t.arcs;return s(e)}function Ht(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach((function(e){e.forEach((function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)}))})),a.push(t)}function i(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Vt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},a=[],s=[];return e.forEach(n),a.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),a.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:s.map((function(e){var n,r=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){o[t<0?~t:t].length<2&&r.push(t)}))}))})),r=ha(t,r),(n=r.length)>1)for(var a,s,u=1,c=i(r[0]);u<n;++u)(a=i(r[u]))>c&&(s=r[0],r[0]=r[u],r[u]=s,c=a);return r}))}}function qt(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Wt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Xt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Xt:Yt)(t)}function Xt(t){var e,n=Yt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Yt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Yt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function $t(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Jt(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Zt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Z(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=[],i=G(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Kt(r[0]),a=Kt(r[r.length-1]),u=Kt(i[0]),c=Kt(i[i.length-1]);if(o===c)n=i.concat(r.slice(1));else if(u===a)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(a!==c)return null;n=r.concat(i.reverse().slice(1))}return s(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:l(r.map((function(t){return t.coordinates}))):null}function Kt(t){return t[0].toString()+","+t[1].toString()}function Qt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Z(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=function(t){var e={};F(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return Zt(t,e);case"Polygon":return function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==Z(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=kt(t));var r=[];F(t,(function(t){r.push(t.geometry)}));var i=wa({geoms:p(r).geometry});return fa(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(r+" is not supported")}}function te(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=Z(t),o=[];switch(i){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":H(t).forEach((function(t){o.push(ee(t))}));break;case"MultiPolygon":H(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(ee(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var a={};H(t).forEach((function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=o,t):{type:i,coordinates:o}:!0===r?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=H(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,r,i,o=[],a=e.length-1;o.push(e[0]);for(var s=1;s<a;s++)n=e[s-1],r=e[s],function(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],c=s-o,l=u-a;return(r-o)*l-(i-a)*c==0&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=s:s<=r&&r<=o:l>0?a<=i&&i<=u:u<=i&&i<=a)}(n,i=e[s+1],r)||o.push(r);return o.push(i),o}function ne(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function re(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return o=t.x-r,a=t.y-i,o*o+a*a}function ie(t,e,n,r,i){for(var o,a=r,s=e+1;s<n;s++){var u=re(t[s],t[e],t[n]);u>a&&(o=s,a=u)}a>r&&(o-e>1&&ie(t,e,o,r,i),i.push(t[o]),n-o>1&&ie(t,o,n,r,i))}function oe(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r=t[0],i=[r],o=1,a=t.length;o<a;o++)ne(n=t[o],r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}(t,r),function(t,e){var n=t.length-1,r=[t[0]];return ie(t,0,n,e,r),r.push(t[n]),r}(t,r)}function ae(t,e,n){return oe(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function se(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=oe(r,e,n).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=oe(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function ue(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!E(n))throw new Error("resolution must be an number");if(!E(r))throw new Error("sharpness must be an number");for(var i=[],o=new Ea({points:$(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:n,sharpness:r}),a=0;a<o.duration;a+=10){var u=o.pos(a);Math.floor(a/100)%2==0&&i.push([u.x,u.y])}return s(i,t.properties)}function ce(t){M(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[r,n],[r,i],[e,i],a]])}function le(t){return ce(z(t))}function he(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(Bt(t.slice(0,2),[r,n])>=Bt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function fe(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.units,a=i.properties,s=V(t),u=b(s[0]),c=b(s[1]),l=b(n),h=m(e,o),f=Math.asin(Math.sin(c)*Math.cos(h)+Math.cos(c)*Math.sin(h)*Math.cos(l));return r([_(u+Math.atan2(Math.sin(l)*Math.sin(h)*Math.cos(c),Math.cos(h)-Math.sin(c)*Math.sin(f))),_(f)],a)}function pe(t,e,n){var r=(n=n||{}).steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var a=[],s=0;s<r;s++)a.push(fe(t,e,-360*s/r,n).geometry.coordinates);return a.push(a[0]),o([a],i)}function de(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=de(e,t);return(n+180)%360}(t,e);var r=V(t),i=V(e),o=b(r[0]),a=b(i[0]),s=b(r[1]),u=b(i[1]),c=Math.sin(a-o)*Math.cos(u),l=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return _(Math.atan2(c,l))}function ge(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=z(t);return r([(i[0]+i[2])/2,(i[1]+i[3])/2],n)}function me(t,e){var n=0,i=0,o=0;return C(t,(function(t){n+=t[0],i+=t[1],o++}),!0),r([n/o,i/o],e)}function ve(t,e){switch(Z(t)){case"Point":return t;case"Polygon":var n=[];C(t,(function(t){n.push(t)}));var i,o,a,s,u,c,l,h,f=me(t,e),p=f.geometry.coordinates,d=0,g=0,m=0,v=n.map((function(t){return[t[0]-p[0],t[1]-p[1]]}));for(i=0;i<n.length-1;i++)s=(o=v[i])[0],c=o[1],u=(a=v[i+1])[0],m+=h=s*(l=a[1])-u*c,d+=(s+u)*h,g+=(c+l)*h;if(0===m)return f;var y=1/(.5*m*6);return r([p[0]+y*d,p[1]+y*g],e);default:var _=At(t);return _?ve(_,e):me(t,e)}}function ye(t){var e=[];return"FeatureCollection"===t.type?P(t,(function(t){C(t,(function(n){e.push(r(n,t.properties))}))})):C(t,(function(n){e.push(r(n,t.properties))})),c(e)}function _e(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,h=l?e[0]*n:t.length,f=be(t,0,h,n,!0),p=[];if(!f)return p;if(l&&(f=function(t,e,n,r){var i,o,a,s,u,c=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(u=be(t,a,s,r,!1))===u.next&&(u.steiner=!0),c.push(function(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}(u));for(c.sort(Ee),i=0;i<c.length;i++)!function(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Me(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Ae(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Ie(e,t);xe(n,n.next)}}(c[i],n),n=xe(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)s=t[d],u=t[d+1],s<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return we(f,p,n,r,i,c),p}function be(t,e,n,r,i){var o,a;if(i===Ne(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Pe(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Pe(o,t[o],t[o+1],a);return a&&Ce(a,a.next)&&(Re(a),a=a.next),a}function xe(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Ce(r,r.next)&&0!==Te(r.prev,r,r.next))r=r.next;else{if(Re(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function we(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Se(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?function(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Te(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Se(s,u,e,n,r),f=Se(c,l,e,n,r),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Me(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Te(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Me(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Te(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}(t,r,i,o):function(t){var e=t.prev,n=t,r=t.next;if(Te(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Me(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Te(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Re(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?we(t=function(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Ce(i,o)&&Le(i,r,r.next,o)&&Ae(i,o)&&Ae(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Re(r),Re(r.next),r=t=o),r=r.next}while(r!==t);return r}(t,e,n),e,n,r,i,o,2):2===a&&function(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Le(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ae(t,e)&&Ae(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}(a,s)){var u=Ie(a,s);return a=xe(a,a.next),u=xe(u,u.next),we(a,e,n,r,i,o),void we(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}(t,e,n,r,i,o):we(xe(t),e,n,r,i,o,1);break}}}function Ee(t,e){return t.x-e.x}function Se(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Me(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Te(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ce(t,e){return t.x===e.x&&t.y===e.y}function Le(t,e,n,r){return!!(Ce(t,e)&&Ce(n,r)||Ce(t,r)&&Ce(n,e))||Te(t,e,n)>0!=Te(t,e,r)>0&&Te(n,r,t)>0!=Te(n,r,e)>0}function Ae(t,e){return Te(t.prev,t,t.next)<0?Te(t,e,t.next)>=0&&Te(t,t.prev,e)>=0:Te(t,e,t.prev)<0||Te(t,t.next,e)<0}function Ie(t,e){var n=new Oe(t.i,t.x,t.y),r=new Oe(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Pe(t,e,n,r){var i=new Oe(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Re(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Oe(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ne(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function De(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=Sa(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var a=0;a<i.length;a+=3){var s=i.slice(a,a+3);s.push(i[a]),r.push(o([s]))}return r}function Fe(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return P(e,(function(e,i){var o=Bt(t,e);o<r&&((n=kt(e)).properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)})),n}function Be(t,e,n,r,i){ke(t,e,n||0,r||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function ke(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);ke(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],h=n,f=r;for(Ue(t,n,e),i(t[r],l)>0&&Ue(t,n,r);h<f;){for(Ue(t,h,f),h++,f--;i(t[h],l)<0;)h++;for(;i(t[f],l)>0;)f--}0===i(t[n],l)?Ue(t,n,f):Ue(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function Ue(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function je(t,e){if(!(this instanceof je))return new je(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ge(t,e){ze(t,0,t.children.length,e,t)}function ze(t,e,n,r,i){i||(i=Je(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Ve(i,t.leaf?r(o):o);return i}function Ve(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function He(t,e){return t.minX-e.minX}function qe(t,e){return t.minY-e.minY}function We(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Xe(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ye(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function $e(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Je(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ze(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(Be(t,o=e+Math.ceil((n-e)/r/2)*r,e,n,i),a.push(e,o,o,n))}function Ke(t){var e=je(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:tn(t);return je.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=Qe(t);n.bbox=t,e.push(n)})):P(t,(function(t){t.bbox=t.bbox?t.bbox:tn(t),e.push(t)})),je.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Qe(e)).bbox=e}return je.prototype.remove.call(this,t)},e.clear=function(){return je.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:je.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return je.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:je.prototype.all.call(this)}},e.toJSON=function(){return je.prototype.toJSON.call(this)},e.fromJSON=function(t){return je.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tn(t),{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Qe(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function tn(t){var e=[1/0,1/0,-1/0,-1/0];return C(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function en(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,(function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=H(r);break;case"LineString":n=[H(r)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var i=s([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),c(e)}function nn(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=rn(t,n);return o&&i.push(o),c(i)}var a=Ke();return a.load(en(n)),P(en(t),(function(t){P(a.search(t),(function(e){var n=rn(t,e);if(n){var o=H(n).join(",");r[o]||(r[o]=!0,i.push(n))}}))})),c(i)}function rn(t,e){var n=H(t),i=H(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],u=n[1][1],c=i[0][0],l=i[0][1],h=i[1][0],f=i[1][1],p=(f-l)*(s-o)-(h-c)*(u-a),d=(h-c)*(a-l)-(f-l)*(o-c),g=(s-o)*(a-l)-(u-a)*(o-c);if(0===p)return null;var m=d/p,v=g/p;return m>=0&&m<=1&&v>=0&&v<=1?r([o+m*(s-o),a+m*(u-a)]):null}function on(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),a=0;return F(t,(function(t){for(var i=H(t),u=0;u<i.length-1;u++){var c=r(i[u]);c.properties.dist=Bt(e,c,n);var l=r(i[u+1]);l.properties.dist=Bt(e,l,n);var h=Bt(c,l,n),f=Math.max(c.properties.dist,l.properties.dist),p=de(c,l),d=fe(e,f,p+90,n),g=fe(e,f,p-90,n),m=nn(s([d.geometry.coordinates,g.geometry.coordinates]),s([c.geometry.coordinates,l.geometry.coordinates])),v=null;m.features.length>0&&((v=m.features[0]).properties.dist=Bt(e,v,n),v.properties.location=a+Bt(c,v,n)),c.properties.dist<o.properties.dist&&((o=c).properties.index=u,o.properties.location=a),l.properties.dist<o.properties.dist&&((o=l).properties.index=u+1,o.properties.location=a+h),v&&v.properties.dist<o.properties.dist&&((o=v).properties.index=u),a+=h}})),o}function an(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r,i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(r=i?sn(V(e),V(t)):sn(V(t),V(e)))>180?-(360-r):r}function sn(t,e){var n=b(t[1]),r=b(e[1]),i=b(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(_(Math.atan2(i,o))+360)%360}function un(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=V(t),o=V(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,x(function(t,e,n){var r=n=void 0===n?Fo:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-i,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+c*c*s*s)*r}(i,o),"meters",r)}function cn(t,e){return hn(t,"mercator",e)}function ln(t,e){return hn(t,"wgs84",e)}function hn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?fn(t):pn(t):(!0!==r&&(t=kt(t)),C(t,(function(t){var n="mercator"===e?fn(t):pn(t);t[0]=n[0],t[1]=n[1]}))),t}function fn(t){var e=Math.PI/180,n=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>n&&(r[0]=n),r[0]<-n&&(r[0]=-n),r[1]>n&&(r[1]=n),r[1]<-n&&(r[1]=-n),r}function pn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function dn(t,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):X(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):X(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return k(n,(function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],s=function(t,e,n,i){var o=i.mercator,a=!0!==o?Bt(e,t,i):gn(e,t,i),s=y(!0!==o?de(e,t):an(e,t)),u=y(!0!==o?de(e,n):an(e,n)),c=Math.abs(s-u);if(c>90)return a;var l=(u+180)%360,h=y(!0!==o?de(n,t):an(n,t)),f=Math.abs(h-l);return f>180&&(f=Math.abs(f-360)),f>90?!0!==o?Bt(t,n,i):gn(t,n,i):!0!==o?a*Math.sin(b(c)):function(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=r(n),s=cn([t[0]+o,t[1]]),u=cn([e[0]+o,e[1]]),c=cn([n[0]+o,n[1]]),l=ln(function(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1],s=n[0],u=n[1],c=o-r,l=a-i,h=((s-r)*c+(u-i)*l)/(c*c+l*l);return[r+h*c,i+h*l]}(s,u,c));return 0!==o&&(l[0]-=o),un(a,l,i)}(e,n,t,i)}(a,e,n,i);o>s&&(o=s)})),o}function gn(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=cn([t[0]+i,t[1]]),a=cn([e[0]+i,e[1]]),s=function(t){return t*t},u=s(o[0]-a[0])+s(o[1]-a[1]);return x(Math.sqrt(u),"meters",r)}function mn(t){for(var n=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?c([e(t)]):c([t]):t}(t),i=ge(n),o=!1,a=0;!o&&a<n.features.length;){var s,u=n.features[a].geometry,l=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var h=!1;for(s=0;!h&&s<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[s][0]&&i.geometry.coordinates[1]===u.coordinates[s][1]&&(o=!0,h=!0),s++}else if("LineString"===u.type)for(s=0;!l&&s<u.coordinates.length-1;)vn(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(l=!0,o=!0),s++;else if("MultiLineString"===u.type)for(var f=0;f<u.coordinates.length;){l=!1,s=0;for(var p=u.coordinates[f];!l&&s<p.length-1;)vn(i.geometry.coordinates[0],i.geometry.coordinates[1],p[s][0],p[s][1],p[s+1][0],p[s+1][1])&&(l=!0,o=!0),s++;f++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||It(i,u)&&(o=!0);a++}if(o)return i;var d=c([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(ye(n.features[a]).features);return r(Fe(i,d).geometry.coordinates)}function vn(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function yn(t){return D(t,(function(t,e){return t+_n(e)}),0)}function _n(t){var e,n=0;switch(t.type){case"Polygon":return bn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=bn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=_n(t.geometries[e]);return n}}function bn(t){var e=0;if(t&&t.length>0){e+=Math.abs(xn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(xn(t[n]))}return e}function xn(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(wn(t[o][0])-wn(e[0]))*Math.sin(wn(n[1]));s=s*Ca*Ca/2}return s}function wn(t){return t*Math.PI/180}function En(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return U(t,(function(t,n){var r=n.geometry.coordinates;return t+Bt(r[0],r[1],e)}),0)}function Sn(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,u,c,l=0,h=0;h<i.length&&!(e>=l&&h===i.length-1);h++){if(l>e&&0===o.length){if(!(a=e-l))return o.push(i[h]),s(o);u=de(i[h],i[h-1])-180,c=fe(i[h],a,u,r),o.push(c.geometry.coordinates)}if(l>=n)return(a=n-l)?(u=de(i[h],i[h-1])-180,c=fe(i[h],a,u,r),o.push(c.geometry.coordinates),s(o)):(o.push(i[h]),s(o));if(l>=e&&o.push(i[h]),h===i.length-1)return s(o);l+=Bt(i[h],i[h+1],r)}return s(i[i.length-1])}function Mn(t,e,n){var r=(n=n||{}).ignoreEndVertices;if(!S(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=V(t),o=H(e),a=0;a<o.length-1;a++){var s=!1;if(r&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,r){var i=n[0],o=n[1],a=t[0],s=t[1],u=e[0],c=e[1],l=n[0]-a,h=n[1]-s,f=u-a,p=c-s;return l*p-h*f==0&&(r?"start"===r?Math.abs(f)>=Math.abs(p)?f>0?a<i&&i<=u:u<=i&&i<a:p>0?s<o&&o<=c:c<=o&&o<s:"end"===r?Math.abs(f)>=Math.abs(p)?f>0?a<=i&&i<u:u<i&&i<=a:p>0?s<=o&&o<c:c<o&&o<=s:"both"===r?Math.abs(f)>=Math.abs(p)?f>0?a<i&&i<u:u<i&&i<a:p>0?s<o&&o<c:c<o&&o<s:void 0:Math.abs(f)>=Math.abs(p)?f>0?a<=i&&i<=u:u<=i&&i<=a:p>0?s<=o&&o<=c:c<=o&&o<=s)}(o[a],o[a+1],i,s))return!0}return!1}function Tn(t,e){var n=Z(t),r=Z(e),i=$(t),o=$(e);switch(n){case"Point":switch(r){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Ln(e.coordinates[n],t.coordinates)){r=!0;break}return r}(i,o);case"LineString":return Mn(i,o,{ignoreEndVertices:!0});case"Polygon":return It(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Ln(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Mn(t.coordinates[r],e))return!1;n||(n=Mn(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(i,o);case"Polygon":return function(t,e){for(var n=!0,r=0;r<t.coordinates.length;r++){var i=It(t.coordinates[1],e);if(!i){n=!1;break}i=It(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Mn(t.coordinates[n],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){var n=z(e),r=z(t);if(!Cn(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!It(t.coordinates[o],e))return!1;if(i||(i=It(t.coordinates[o],e,{ignoreBoundary:!0})),!i){var a=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]);i=It(a,e,{ignoreBoundary:!0})}}return i}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return function(t,e){var n=z(t);if(!Cn(z(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!It(t.coordinates[0][r],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function Cn(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Ln(t,e){return t[0]===e[0]&&t[1]===e[1]}function An(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.mask,o=n.properties,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Z(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],l=t[2],h=t[3],f=e/Bt([s,u],[l,u],n)*(l-s),p=e/Bt([s,u],[s,h],n)*(h-u),d=l-s,g=h-u,m=Math.floor(d/f),v=(g-Math.floor(g/p)*p)/2,y=s+(d-m*f)/2;y<=l;){for(var _=u+v;_<=h;){var b=r([y,_],o);i?Tn(b,i)&&a.push(b):a.push(b),_+=p}y+=f}return c(a)}function In(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return C(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function Pn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Pn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Rn(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function On(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!On(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Nn(t,e){var n=[],r=Ke();return F(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=Fn(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),P(Dn(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=Dn(t,e).features).forEach((function(t){t.bbox||(t.bbox=he(z(t)))})),r.load(c(n))})),c(n)}function Dn(t,e){var n=[],r=H(t)[0],i=H(t)[t.geometry.coordinates.length-1];if(Bn(r,V(e))||Bn(i,V(e)))return c([t]);var o=Ke(),a=en(t);o.load(a);var u=o.search(e);if(!u.features.length)return c([t]);var l=Fn(e,u),h=R(a,(function(t,r,i){var o=H(r)[1],a=V(e);return i===l.id?(t.push(a),n.push(s(t)),Bn(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return h.length>1&&n.push(s(h)),c(n)}function Fn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return P(e,(function(e){var i=on(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function Bn(t,e){return t[0]===e[0]&&t[1]===e[1]}function kn(t,e,n,r,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.steps,a=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Un(n),c=Un(r),l=t.properties;if(u===c)return s(pe(t,e,i).geometry.coordinates[0],l);for(var h=u,f=u<c?c:c+360,p=h,d=[],g=0;p<f;)d.push(fe(t,e,p,a).geometry.coordinates),p=h+360*++g/o;return p>f&&d.push(fe(t,e,f,a).geometry.coordinates),s(d,l)}function Un(t){var e=t%360;return e<0&&(e+=360),e}function jn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,r=Z(t),i=H(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Gn(i,n);case"MultiPolygon":var o=[];return i.forEach((function(t){o.push(Gn(t,n))})),c(o);default:throw new Error("geom "+r+" not supported")}}function Gn(t,e){return t.length>1?l(t,e):s(t[0],e)}function zn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(r=void 0===r||r,i=void 0===i||i,Z(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(H(Vn(t,{},r,i)))})),f(o,n)}return Vn(t,n,r,i)}function Vn(t,e,n,r){e=e||t.properties||{};var i=H(t),a=Z(t);if(!i.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(i=Hn(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach((function(t){if(n&&(t=Hn(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(z(s(t)));e>c?(u.unshift(t),c=e):u.push(t)}else u.push(t)})),o(u,e);default:throw new Error("geometry type "+a+" is not supported")}}function Hn(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function qn(t,e,n){var r,i,o,a,s,u=t.length,c=Xn(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],a=s=Xn(o=t[r],e);;){if(!(c|a)){l.push(i),a!==s?(l.push(o),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(o);break}if(c&a)break;c?c=Xn(i=Wn(i,o,c,e),e):a=Xn(o=Wn(i,o,a,e),e)}c=s}return l.length&&n.push(l),n}function Wn(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Xn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Yn(t,e){for(var n=[],r=0;r<t.length;r++){var i=ka.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function $n(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Jn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var r,i;if(Zn(t)||Zn(e))return!1;if(t.prototype!==e.prototype)return!1;if($n(t))return!!$n(e)&&(t=Ua.call(t),e=Ua.call(e),Jn(t,e,n));if(Kn(t)){if(!Kn(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),r=o.length-1;r>=0;r--)if(o[r]!==a[r])return!1;for(r=o.length-1;r>=0;r--)if(i=o[r],!Jn(t[i],e[i],n))return!1;return typeof t==typeof e}(t,e,n))}function Zn(t){return null===t||void 0===t}function Kn(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}function Qn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=Ke();return a.load(en(t)),k(e,(function(t){var e=!1;P(a.search(t),(function(n){if(!1===e){var o=H(t).sort(),a=H(n).sort();Jn(o,a)?(e=!0,r=r?tr(r,t):t):(0===i?Mn(o[0],n)&&Mn(o[1],n):on(n,o[0]).properties.dist<=i&&on(n,o[1]).properties.dist<=i)?(e=!0,r=r?tr(r,t):t):(0===i?Mn(a[0],t)&&Mn(a[1],t):on(t,a[0]).properties.dist<=i&&on(t,a[1]).properties.dist<=i)&&(r=r?tr(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0)})),r&&o.push(r),c(o)}function tr(t,e){var n=H(e),r=H(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return Jn(n[0],i)?a.unshift(n[1]):Jn(n[0],o)?a.push(n[1]):Jn(n[1],i)?a.unshift(n[0]):Jn(n[1],o)&&a.push(n[0]),t}function er(t){var e=t%360;return e<0&&(e+=360),e}function nr(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.units,a=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=x(e,o,"meters"),u=V(t),c=function(t,e,n,r){r=void 0===r?Fo:Number(r);var i=e/r,o=t[0]*Math.PI/180,a=b(t[1]),s=b(n),u=i*Math.cos(s),c=a+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(l)>1e-11?u/l:Math.cos(a),f=i*Math.sin(s)/h;return[(180*(o+f)/Math.PI+540)%360-180,180*c/Math.PI]}(u,s,n);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,r(c,a)}function rr(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=ir(s,u,e),n<=0&&r>0?function(t,e,n){return ir(t,e,n)<0}(e,s,i)||(i=s):n>0&&r<=0&&(function(t,e,n){return ir(t,e,n)>0}(e,s,o)||(o=s)),n=r}return[i,o]}function ir(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function or(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=H(t),o=0,a=1;a<i.length;)n=r||i[0],o+=((r=i[a])[0]-n[0])*(r[1]+n[1]),a++;return o>0}function ar(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return N(t,(function(t){ar(t,e)})),t;case"LineString":return sr(H(t),e),t;case"Polygon":return ur(H(t),e),t;case"MultiLineString":return H(t).forEach((function(t){sr(t,e)})),t;case"MultiPolygon":return H(t).forEach((function(t){ur(t,e)})),t;case"Point":case"MultiPoint":return t}}function sr(t,e){or(t)===e&&t.reverse()}function ur(t,e){or(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)or(t[n])===e&&t[n].reverse()}function cr(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Y(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return P(t,(function(t){var e=H(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){var e=n[t],r=e.sort((function(t,e){return H(t)[0]-H(e)[0]}));return r})).sort((function(t,n){return e?H(t[0])[1]-H(n[0])[1]:H(n[0])[1]-H(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[s,l])}a.push(c)}return a}function lr(t,e,n,r){r=r||{};for(var i=Object.keys(ja),o=0;o<i.length;o++){var a=i[o],s=r[a];s=void 0!==s&&null!==s?s:ja[a],Ga[a]=s}Ga.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<i;++u){var c=0,l=t[s+1][u],h=t[s+1][u+1],f=t[s][u+1],p=t[s][u];if(!(isNaN(l)||isNaN(h)||isNaN(f)||isNaN(p))){c|=l<e?0:l>a?128:64,c|=h<e?0:h>a?32:16,c|=f<e?0:f>a?8:4;var d=+(c|=p<e?0:p>a?2:1),g=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var m=(l+h+f+p)/4;g=m>a?2:m<e?0:1,34===c?1===g?c=35:0===g&&(c=136):136===c?1===g?(c=35,g=4):0===g&&(c=34):17===c?1===g?(c=155,g=4):0===g&&(c=153):68===c?1===g?(c=103,g=4):0===g&&(c=102):153===c?1===g&&(c=155):102===c?1===g&&(c=103):152===c?g<2&&(c=156,g=1):137===c?g<2&&(c=139,g=1):98===c?g<2&&(c=99,g=1):38===c?g<2&&(c=39,g=1):18===c?g>0?(c=156,g=4):c=152:33===c?g>0?(c=139,g=4):c=137:72===c?g>0?(c=99,g=4):c=98:132===c&&(g>0?(c=39,g=4):c=38)}if(0!=c&&170!=c){var v,y,_,b,x,w,E,S;v=y=_=b=x=w=E=S=.5;var M=[];1===c?(_=1-hr(e,f,p),S=1-hr(e,l,p),M.push(Cs[c])):169===c?(_=hr(a,p,f),S=hr(a,p,l),M.push(Cs[c])):4===c?(w=1-hr(e,h,f),b=hr(e,p,f),M.push(Ms[c])):166===c?(w=hr(a,f,h),b=1-hr(a,f,p),M.push(Ms[c])):16===c?(x=hr(e,f,h),y=hr(e,l,h),M.push(Ss[c])):154===c?(x=1-hr(a,h,f),y=1-hr(a,h,l),M.push(Ss[c])):64===c?(E=hr(e,p,l),v=1-hr(e,h,l),M.push(As[c])):106===c?(E=1-hr(a,l,p),v=hr(a,l,h),M.push(As[c])):168===c?(b=hr(a,p,f),_=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),M.push(Ts[c]),M.push(Cs[c])):2===c?(b=1-hr(e,f,p),_=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),M.push(Ts[c]),M.push(Cs[c])):162===c?(x=hr(a,f,h),w=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),M.push(Ts[c]),M.push(Cs[c])):8===c?(x=1-hr(e,h,f),w=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),M.push(Ss[c]),M.push(Ms[c])):138===c?(x=1-hr(e,h,f),w=1-hr(a,h,f),v=1-hr(a,h,l),y=1-hr(e,h,l),M.push(Ss[c]),M.push(Ms[c])):32===c?(x=hr(a,f,h),w=hr(e,f,h),v=hr(e,l,h),y=hr(a,l,h),M.push(Ss[c]),M.push(Ms[c])):42===c?(S=1-hr(a,l,p),E=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h),M.push(Ls[c]),M.push(As[c])):128===c&&(S=hr(e,p,l),E=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l),M.push(Ls[c]),M.push(As[c])),5===c?(w=1-hr(e,h,f),S=1-hr(e,l,p),M.push(Ms[c])):165===c?(w=hr(a,f,h),S=hr(a,p,l),M.push(Ms[c])):20===c?(b=hr(e,p,f),y=hr(e,l,h),M.push(Ts[c])):150===c?(b=1-hr(a,f,p),y=1-hr(a,h,l),M.push(Ts[c])):80===c?(x=hr(e,f,h),E=hr(e,p,l),M.push(Ss[c])):90===c?(x=1-hr(a,h,f),E=1-hr(a,l,p),M.push(Ss[c])):65===c?(_=1-hr(e,f,p),v=1-hr(e,h,l),M.push(Cs[c])):105===c?(_=hr(a,p,f),v=hr(a,l,h),M.push(Cs[c])):160===c?(x=hr(a,f,h),w=hr(e,f,h),S=hr(e,p,l),E=hr(a,p,l),M.push(Ss[c]),M.push(Ms[c])):10===c?(x=1-hr(e,h,f),w=1-hr(a,h,f),S=1-hr(a,l,p),E=1-hr(e,l,p),M.push(Ss[c]),M.push(Ms[c])):130===c?(b=1-hr(e,f,p),_=1-hr(a,f,p),v=1-hr(a,h,l),y=1-hr(e,h,l),M.push(Ts[c]),M.push(Cs[c])):40===c?(b=hr(a,p,f),_=hr(e,p,f),v=hr(e,l,h),y=hr(a,l,h),M.push(Ts[c]),M.push(Cs[c])):101===c?(w=hr(a,f,h),v=hr(a,l,h),M.push(Ms[c])):69===c?(w=1-hr(e,h,f),v=1-hr(e,h,l),M.push(Ms[c])):149===c?(S=hr(a,p,l),y=1-hr(a,h,l),M.push(Ls[c])):21===c?(S=1-hr(e,l,p),y=hr(e,l,h),M.push(Ls[c])):86===c?(b=1-hr(a,f,p),E=1-hr(a,l,p),M.push(Ts[c])):84===c?(b=hr(e,p,f),E=hr(e,p,l),M.push(Ts[c])):89===c?(x=1-hr(a,h,f),_=hr(a,p,f),M.push(Cs[c])):81===c?(x=hr(e,f,h),_=1-hr(e,f,p),M.push(Cs[c])):96===c?(x=hr(a,f,h),w=hr(e,f,h),E=hr(e,p,l),v=hr(a,l,h),M.push(Ss[c]),M.push(Ms[c])):74===c?(x=1-hr(e,h,f),w=1-hr(a,h,f),E=1-hr(a,l,p),v=1-hr(e,h,l),M.push(Ss[c]),M.push(Ms[c])):24===c?(x=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),y=hr(e,l,h),M.push(Ss[c]),M.push(Cs[c])):146===c?(x=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),y=1-hr(a,h,l),M.push(Ss[c]),M.push(Cs[c])):6===c?(w=1-hr(e,h,f),b=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),M.push(Ms[c]),M.push(Ts[c])):164===c?(w=hr(a,f,h),b=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),M.push(Ms[c]),M.push(Ts[c])):129===c?(_=1-hr(e,f,p),S=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l),M.push(Cs[c]),M.push(Ls[c])):41===c?(_=hr(a,p,f),S=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h),M.push(Cs[c]),M.push(Ls[c])):66===c?(b=1-hr(e,f,p),_=1-hr(a,f,p),E=1-hr(a,l,p),v=1-hr(e,h,l),M.push(Ts[c]),M.push(Cs[c])):104===c?(b=hr(a,p,f),_=hr(e,p,f),E=hr(e,p,l),v=hr(a,l,h),M.push(Cs[c]),M.push(Is[c])):144===c?(x=hr(e,f,h),S=hr(e,p,l),E=hr(a,p,l),y=1-hr(a,h,l),M.push(Ss[c]),M.push(As[c])):26===c?(x=1-hr(a,h,f),S=1-hr(a,l,p),E=1-hr(e,l,p),y=hr(e,l,h),M.push(Ss[c]),M.push(As[c])):36===c?(w=hr(a,f,h),b=hr(e,p,f),v=hr(e,l,h),y=hr(a,l,h),M.push(Ms[c]),M.push(Ts[c])):134===c?(w=1-hr(e,h,f),b=1-hr(a,f,p),v=1-hr(a,h,l),y=1-hr(e,h,l),M.push(Ms[c]),M.push(Ts[c])):9===c?(x=1-hr(e,h,f),w=1-hr(a,h,f),_=hr(a,p,f),S=1-hr(e,l,p),M.push(Ss[c]),M.push(Ms[c])):161===c?(x=hr(a,f,h),w=hr(e,f,h),_=1-hr(e,f,p),S=hr(a,p,l),M.push(Ss[c]),M.push(Ms[c])):37===c?(w=hr(a,f,h),S=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h),M.push(Ms[c]),M.push(Ls[c])):133===c?(w=1-hr(e,h,f),S=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l),M.push(Ms[c]),M.push(Ls[c])):148===c?(b=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),y=1-hr(a,h,l),M.push(Ts[c]),M.push(As[c])):22===c?(b=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),y=hr(e,l,h),M.push(Ts[c]),M.push(As[c])):82===c?(x=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),E=1-hr(a,l,p),M.push(Ss[c]),M.push(Cs[c])):88===c?(x=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),E=hr(e,p,l),M.push(Ss[c]),M.push(Cs[c])):73===c?(x=1-hr(e,h,f),w=1-hr(a,h,f),_=hr(a,p,f),v=1-hr(e,h,l),M.push(Ss[c]),M.push(Ms[c])):97===c?(x=hr(a,f,h),w=hr(e,f,h),_=1-hr(e,f,p),v=hr(a,l,h),M.push(Ss[c]),M.push(Ms[c])):145===c?(x=hr(e,f,h),_=1-hr(e,f,p),S=hr(a,p,l),y=1-hr(a,h,l),M.push(Ss[c]),M.push(Ls[c])):25===c?(x=1-hr(a,h,f),_=hr(a,p,f),S=1-hr(e,l,p),y=hr(e,l,h),M.push(Ss[c]),M.push(Ls[c])):70===c?(w=1-hr(e,h,f),b=1-hr(a,f,p),E=1-hr(a,l,p),v=1-hr(e,h,l),M.push(Ms[c]),M.push(Ts[c])):100===c?(w=hr(a,f,h),b=hr(e,p,f),E=hr(e,p,l),v=hr(a,l,h),M.push(Ms[c]),M.push(Ts[c])):34===c?(0===g?(x=1-hr(e,h,f),w=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l)):(x=hr(a,f,h),w=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h)),M.push(Ss[c]),M.push(Ms[c]),M.push(Ls[c]),M.push(As[c])):35===c?(4===g?(x=1-hr(e,h,f),w=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l)):(x=hr(a,f,h),w=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h)),M.push(Ss[c]),M.push(Ms[c]),M.push(Cs[c]),M.push(As[c])):136===c?(0===g?(x=hr(a,f,h),w=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h)):(x=1-hr(e,h,f),w=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l)),M.push(Ss[c]),M.push(Ms[c]),M.push(Ls[c]),M.push(As[c])):153===c?(0===g?(x=hr(e,f,h),_=1-hr(e,f,p),S=1-hr(e,l,p),y=hr(e,l,h)):(x=1-hr(a,h,f),_=hr(a,p,f),S=hr(a,p,l),y=1-hr(a,h,l)),M.push(Ss[c]),M.push(Cs[c])):102===c?(0===g?(w=1-hr(e,h,f),b=hr(e,p,f),E=hr(e,p,l),v=1-hr(e,h,l)):(w=hr(a,f,h),b=1-hr(a,f,p),E=1-hr(a,l,p),v=hr(a,l,h)),M.push(Ms[c]),M.push(As[c])):155===c?(4===g?(x=hr(e,f,h),_=1-hr(e,f,p),S=1-hr(e,l,p),y=hr(e,l,h)):(x=1-hr(a,h,f),_=hr(a,p,f),S=hr(a,p,l),y=1-hr(a,h,l)),M.push(Ss[c]),M.push(Ls[c])):103===c?(4===g?(w=1-hr(e,h,f),b=hr(e,p,f),E=hr(e,p,l),v=1-hr(e,h,l)):(w=hr(a,f,h),b=1-hr(a,f,p),E=1-hr(a,l,p),v=hr(a,l,h)),M.push(Ms[c]),M.push(Ts[c])):152===c?(0===g?(x=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),y=hr(e,l,h)):(x=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),y=1-hr(a,h,l)),M.push(Ss[c]),M.push(Ts[c]),M.push(Cs[c])):156===c?(4===g?(x=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),y=hr(e,l,h)):(x=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),y=1-hr(a,h,l)),M.push(Ss[c]),M.push(Cs[c]),M.push(As[c])):137===c?(0===g?(x=hr(a,f,h),w=hr(e,f,h),_=1-hr(e,f,p),S=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h)):(x=1-hr(e,h,f),w=1-hr(a,h,f),_=hr(a,p,f),S=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l)),M.push(Ss[c]),M.push(Ms[c]),M.push(Cs[c])):139===c?(4===g?(x=hr(a,f,h),w=hr(e,f,h),_=1-hr(e,f,p),S=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h)):(x=1-hr(e,h,f),w=1-hr(a,h,f),_=hr(a,p,f),S=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l)),M.push(Ss[c]),M.push(Ms[c]),M.push(Ls[c])):98===c?(0===g?(x=1-hr(e,h,f),w=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),E=hr(e,p,l),v=1-hr(e,h,l)):(x=hr(a,f,h),w=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),E=1-hr(a,l,p),v=hr(a,l,h)),M.push(Ss[c]),M.push(Ms[c]),M.push(As[c])):99===c?(4===g?(x=1-hr(e,h,f),w=1-hr(a,h,f),b=hr(a,p,f),_=hr(e,p,f),E=hr(e,p,l),v=1-hr(e,h,l)):(x=hr(a,f,h),w=hr(e,f,h),b=1-hr(e,f,p),_=1-hr(a,f,p),E=1-hr(a,l,p),v=hr(a,l,h)),M.push(Ss[c]),M.push(Ms[c]),M.push(Cs[c])):38===c?(0===g?(w=1-hr(e,h,f),b=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l)):(w=hr(a,f,h),b=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h)),M.push(Ms[c]),M.push(Ls[c]),M.push(As[c])):39===c?(4===g?(w=1-hr(e,h,f),b=hr(e,p,f),S=hr(e,p,l),E=hr(a,p,l),v=1-hr(a,h,l),y=1-hr(e,h,l)):(w=hr(a,f,h),b=1-hr(a,f,p),S=1-hr(a,l,p),E=1-hr(e,l,p),v=hr(e,l,h),y=hr(a,l,h)),M.push(Ms[c]),M.push(Ts[c]),M.push(As[c])):85===c&&(x=1,w=0,b=1,_=0,S=0,E=1,v=0,y=1),(v<0||v>1||y<0||y>1||x<0||x>1||b<0||b>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+d+" "+l+","+h+","+f+","+p+" "+g+" "+v+" "+y+" "+x+" "+w+" "+b+" "+_+" "+S+" "+E),o.cells[s][u]={cval:c,cval_real:d,flipped:g,topleft:v,topright:y,righttop:x,rightbottom:w,bottomright:b,bottomleft:_,leftbottom:S,lefttop:E,edges:M}}}}}return o}(t,e,n);return Ga.polygons?(Ga.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=Rs[t.cval](t);"object"==typeof o&&fr(o)?"object"==typeof o[0]&&fr(o[0])?"object"==typeof o[0][0]&&fr(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(c)):(Ga.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=t.cells[o][a],u=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Va?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Ha?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&qa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Va?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Ha?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&qa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&qa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&qa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&za?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&qa?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&qa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&za?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&za?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&qa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&za?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&za?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Va?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&za?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Va?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(s),c=null,l=a,h=o;null!==u&&i.push([u.p[0]+l,u.p[1]+h]);do{if(null===(c=function(t,e,n,r){var i,o,a,s,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=Ms[c],a=es[c],s=ns[c],u=rs[c];break;default:i=Ss[c],a=Ka[c],s=Qa[c],u=ts[c]}break;case 1:switch(r){case 0:i=Ls[c],a=ps[c],s=ds[c],u=gs[c];break;default:i=As[c],a=ls[c],s=hs[c],u=fs[c]}break;default:switch(n){case-1:switch(r){case 0:i=Is[c],a=Wa[c],s=Xa[c],u=Ya[c];break;default:i=Ps[c],a=$a[c],s=Ja[c],u=Za[c]}break;case 1:switch(r){case 0:i=Cs[c],a=is[c],s=os[c],u=as[c];break;default:i=Ts[c],a=ss[c],s=us[c],u=cs[c]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:c&Va?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:c&Ha?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:c&Ha?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:c&qa?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:c&Va?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:c&Ha?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:c&Ha?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:c&qa?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:c&Ha?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:c&qa?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:c&qa?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:c&za?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:c&Ha?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:c&qa?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:c&qa?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:c&za?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:c&Ha?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:c&za?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:c&qa?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:c&za?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:c&za?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:c&Va?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:c&za?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:c&Va?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+u)),{p:[e,n],x:a,y:s,o:u}}(t.cells[h][l],u.x,u.y,u.o)))break;if(i.push([c.p[0]+l,c.p[1]+h]),l+=c.x,h+=c.y,u=c,h<0||h>=n||l<0||l>=r||void 0===t.cells[h][l]){l-=c.x,h-=c.y;var f=function(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,u=e+r,c=n+i,l=[],h=!1;!h;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,a=t.cells[c][u],s=a.cval_real,-1===i)if(0===o)if(s&qa)l.push([u,c]),r=-1,i=0,o=0;else{if(!(s&Ha)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+1,c]),r=1,i=0,o=0}else{if(!(s&qa)){if(s&Ha){l.push([u+a.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+a.bottomleft,c]),r=0,i=1,o=0,h=!0;break}l.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&Va)){if(s&za){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+a.topright,c+1]),r=0,i=-1,o=1,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}else l.push([u+1,c+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(s&za)){if(s&qa){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+a.lefttop]),r=1,i=0,o=1,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}else{if(!(s&za)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&Ha)){l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}else{if(!(s&Ha)){if(s&Va){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1;break}l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else if(a=t.cells[c][u],s=a.cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(s&qa)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u,c])}else{if(!(s&za)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])r=0,i=1,o=0;else{if(!(s&Va)){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])r=1,i=0,o=1;else{if(!(s&Ha)){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(s&za)){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}}if(u+=r,c+=i,u===e&&c===n)break}return{path:l,i:u,j:c,x:r,y:i,o:o}}(t,l,h,c.x,c.y,c.o);if(null===f)break;f.path.forEach((function(t){i.push(t)})),l=f.i,h=f.j,u=f}}while(void 0!==t.cells[h][l]&&t.cells[h][l].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(c)),"function"==typeof Ga.successCallback&&Ga.successCallback(u),u}function hr(t,e,n){return(t-e)/(n-e)}function fr(t){return t.constructor.toString().indexOf("Array")>-1}function pr(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e?t:(r||(r=me(t)),!1!==i&&void 0!==i||(t=kt(t)),C(t,(function(t){var n=an(r,t)+e,i=un(r,t),o=H(nr(r,i,n));t[0]=o[0],t[1]=o[1]})),t)}function dr(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=kt(t)),"FeatureCollection"!==t.type||o?gr(t,e,r):(P(t,(function(n,i){t.features[i]=gr(n,e,r)})),t)}function gr(t,e,n){var i="Point"===Z(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return V(e);var n=t.bbox?t.bbox:z(t),i=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return r([a,s]);case"center":return ge(t);case void 0:case null:case"centroid":return me(t);default:throw new Error("invalid origin")}}(t,n),1===e||i?t:(C(t,(function(t){var r=un(n,t),i=an(n,t),o=H(nr(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t)}function mr(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function vr(t,e){return t[0]*e[1]-e[0]*t[1]}function yr(t,e){return!function(t,e){return 0===vr(mr(t),mr(e))}(t,e)&&function(t,e){var n=t[0],r=mr(t),i=e[0],o=mr(e),a=vr(r,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(vr(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,n),o)/a,r))}(t,e)}function _r(t,e,n){var r=[],i=v(e,n),o=H(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r,a=t[1]+n*(t[0]-e[0])/r,s=e[1]+n*(t[0]-e[0])/r;return[[i,a],[o,s]]}(t,o[e+1],i);if(r.push(n),e>0){var s=r[e-1],u=yr(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}})),s(a,t.properties)}function br(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],a=n[1]-e[1];return Math.sign(r*a-o*i)}function xr(t,e){return e.geometry.coordinates[0].every((function(e){return It(r(e),t)}))}function wr(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return r*a-i*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Er(t,e){return nn(e,jn(t)).features.length>0}function Sr(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Mr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Tr(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),Ar(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function Cr(t,e){return nn(t,jn(e)).features.length>0}function Lr(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,a=0;a<o&&n&&i;)It(r(t.coordinates[0][a]),e)?n=!0:i=!0,a++;return i&&i}function Ar(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Ir(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Pr(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Rr(t,e){return js(t,e,{strict:!0})}function Or(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=Z(t);if(n!==Z(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new zs({precision:6}).compare(t,e))return!1;var r=0;switch(n){case"MultiPoint":var i=O(t),o=O(e);i.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&r++}))}));break;case"LineString":case"MultiLineString":k(t,(function(t){k(e,(function(e){Qn(t,e).features.length&&r++}))}));break;case"Polygon":case"MultiPolygon":k(t,(function(t){k(e,(function(e){nn(t,e).features.length&&r++}))}))}return r>0}function Nr(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Dr(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Fr(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Br(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new kr(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function kr(t,e,n){this.x=t,this.y=e,this.weight=n}function Ur(t){this.content=[],this.scoreFunction=t}function jr(t){return t[0]}function Gr(t){return t[1]}function zr(){this._=null}function Vr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Hr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function qr(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Wr(t){for(;t.L;)t=t.L;return t}function Xr(t,e,n,r){var i=[null,null],o=uu.push(i)-1;return i.left=t,i.right=e,n&&$r(i,t,e,n),r&&$r(i,e,t,r),au[t.index].halfedges.push(o),au[e.index].halfedges.push(o),i}function Yr(t,e,n){var r=[e,n];return r.left=t,r}function $r(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Jr(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=0,h=1,f=s[0]-u,p=s[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=i-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}return!(l>0||h<1)||(l>0&&(t[0]=[u+l*f,c+l*p]),h<1&&(t[1]=[u+h*f,c+h*p]),!0)}}}}}function Zr(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],p=l[0],d=l[1],g=(h+p)/2,m=(f+d)/2;if(d===f){if(g<e||g>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=(h-p)/(d-f),s=m-a*g,a<-1||a>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Kr(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Qr(t,e){return e[+(e.left!==t.site)]}function ti(t,e){return e[+(e.left===t.site)]}function ei(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(f>=-fu)){var p=u*u+c*c,d=l*l+h*h,g=(h*p-c*d)/f,m=(u*d-l*p)/f,v=cu.pop()||new function(){Vr(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=g+a,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,_=su._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}su.insert(y,v),y||(iu=v)}}}}function ni(t){var e=t.circle;e&&(e.P||(iu=e.N),su.remove(e),cu.push(e),Vr(e),t.circle=null)}function ri(t){var e=lu.pop()||new function(){Vr(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ii(t){ni(t),ou.remove(t),lu.push(t),Vr(t)}function oi(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];ii(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<hu&&Math.abs(r-u.circle.cy)<hu;)o=u.P,s.unshift(u),ii(u),u=o;s.unshift(u),ni(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<hu&&Math.abs(r-c.circle.cy)<hu;)a=c.N,s.push(c),ii(c),c=a;s.push(c),ni(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],$r(c.edge,u.site,c.site,i);u=s[0],(c=s[h-1]).edge=Xr(u.site,c.site,null,i),ei(u),ei(c)}function ai(t){for(var e,n,r,i,o=t[0],a=t[1],s=ou._;s;)if((r=si(s,a)-o)>hu)s=s.L;else{if(!((i=o-function(t,e){var n=t.N;if(n)return si(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(s,a))>hu)){r>-hu?(e=s.P,n=s):i>-hu?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){au[t.index]={site:t,halfedges:[]}}(t);var u=ri(t);if(ou.insert(e,u),e||n){if(e===n)return ni(e),n=ri(e.site),ou.insert(u,n),u.edge=n.edge=Xr(e.site,u.site),ei(e),void ei(n);if(n){ni(e),ni(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,p=t[1]-h,d=n.site,g=d[0]-l,m=d[1]-h,v=2*(f*m-p*g),y=f*f+p*p,_=g*g+m*m,b=[(m*y-p*_)/v+l,(f*_-g*y)/v+h];$r(n.edge,c,d,b),u.edge=Xr(c,t,null,b),n.edge=Xr(t,d,null,b),ei(e),ei(n)}else u.edge=Xr(e.site,u.site)}}function si(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function ui(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ci(t,e){return e[1]-t[1]||e[0]-t[0]}function li(t,e){var n,r,i,o=t.sort(ci).pop();for(uu=[],au=new Array(t.length),ou=new zr,su=new zr;;)if(i=iu,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(ai(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;oi(i.arc)}if(function(){for(var t,e,n,r,i=0,o=au.length;i<o;++i)if((t=au[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Kr(t,uu[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=uu.length;o--;)Zr(i=uu[o],t,e,n,r)&&Jr(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>hu||Math.abs(i[0][1]-i[1][1])>hu)||delete uu[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,l,h,f,p,d,g,m=au.length,v=!0;for(i=0;i<m;++i)if(o=au[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)uu[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)d=(p=ti(o,uu[u[s]]))[0],g=p[1],h=(l=Qr(o,uu[u[++s%c]]))[0],f=l[1],(Math.abs(d-h)>hu||Math.abs(g-f)>hu)&&(u.splice(s,0,uu.push(Yr(a,p,Math.abs(d-t)<hu&&r-g>hu?[t,Math.abs(h-t)<hu?f:r]:Math.abs(g-r)<hu&&n-d>hu?[Math.abs(f-r)<hu?h:n,r]:Math.abs(d-n)<hu&&g-e>hu?[n,Math.abs(h-n)<hu?f:e]:Math.abs(g-e)<hu&&d-t>hu?[Math.abs(f-e)<hu?h:t,e]:null))-1),++c);c&&(v=!1)}if(v){var y,_,b,x=1/0;for(i=0,v=null;i<m;++i)(o=au[i])&&(b=(y=(a=o.site)[0]-t)*y+(_=a[1]-e)*_)<x&&(x=b,v=o);if(v){var w=[t,e],E=[t,r],S=[n,r],M=[n,e];v.halfedges.push(uu.push(Yr(a=v.site,w,E))-1,uu.push(Yr(a,E,S))-1,uu.push(Yr(a,S,M))-1,uu.push(Yr(a,M,w))-1)}}for(i=0;i<m;++i)(o=au[i])&&(o.halfedges.length||delete au[i])}(a,s,u,c)}this.edges=uu,this.cells=au,ou=su=uu=au=null}function hi(t){return(t=t.slice()).push(t[0]),o([t])}function fi(t,e,n,r){var i=(r=r||{}).steps||64,a=r.units||"kilometers",s=r.angle||0,u=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!S(r))throw new Error("options must be an object");if(!E(i))throw new Error("steps must be a number");if(!E(s))throw new Error("angle must be a number");var l=V(t);if("degrees"===a)var h=b(s);else e=nr(t,e,90,{units:a}),n=nr(t,n,0,{units:a}),e=V(e)[0]-l[0],n=V(n)[1]-l[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(pi(d),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(pi(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(m=-m),"degrees"===a){var v=g*Math.cos(h)+m*Math.sin(h),y=m*Math.cos(h)-g*Math.sin(h);g=v,m=y}f.push([g+l[0],m+l[1]])}return f.push(f[0]),"degrees"===a?o([f],c):pr(o([f],c),s,{pivot:u})}function pi(t){var e=t*Math.PI/180;return Math.tan(e)}function di(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return N(t,(function(t,e,n){var r=n[i];if(r=void 0===r||null===r?1:r,!E(r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&C(t,(function(t){o+=t[0]*r,a+=t[1]*r,s+=r}))})),r([o/s,a/s],n)}function gi(t,e,n,i){var o=n.properties.tolerance||.001,a=0,s=0,u=0,c=0;if(P(n,(function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(r=Number(r),!E(r))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*Bt(e,t);0===i&&(i=1);var o=r/i;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,u+=o}})),c<1)throw new Error("no features to measure");var l=a/u,h=s/u;return 1===c||0===i||Math.abs(l-e[0])<o&&Math.abs(h-e[1])<o?r([l,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([l,h]),gi([l,h],t,n,i-1))}function mi(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function vi(t){if(S(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*xi(),180*xi()]}function yi(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(vi(n)));return c(i)}function _i(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_radial_length;void 0!==t&&null!==t||(t=1),E(r)||(r=10),E(i)||(i=10);for(var a=[],s=0;s<t;s++){var u=[],l=Array.apply(null,new Array(r+1)).map(Math.random);l.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),l.forEach((function(t){t=2*t*Math.PI/l[l.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])})),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(vi(n))),a.push(o([u]))}return c(a)}function bi(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!E(r)||r<2)&&(r=10),E(i)||(i=1e-4),E(o)||(o=Math.PI/8);for(var a=[],u=0;u<t;u++){for(var l=[vi(n)],h=0;h<r-1;h++){var f=(0===h?2*Math.random()*Math.PI:Math.tan((l[h][1]-l[h-1][1])/(l[h][0]-l[h-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*i;l.push([l[h][0]+p*Math.cos(f),l[h][1]+p*Math.sin(f)])}a.push(s(l))}return c(a)}function xi(){return Math.random()-.5}function wi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return P(t,(function(t){Ti(t.properties,e)&&n.push(t)})),c(n)}function Ei(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=Mi(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],l=0;l<s.length;l++)u.push(t.features[s[l]]);n(c(u),a,o)}}function Si(t,e,n,r){var i=r;return Ei(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function Mi(t,e){var n={};return P(t,(function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}})),n}function Ti(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ti(t,e[r]))return!1;return!0}return Ci(t,e)}function Ci(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Li(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function Ai(){}function Ii(t){this.message=t||""}function Pi(t){this.message=t||""}function Ri(){}function Oi(t){return null===t?Nc:t.color}function Ni(t){return null===t?null:t.parent}function Di(t,e){null!==t&&(t.color=e)}function Fi(t){return null===t?null:t.left}function Bi(t){return null===t?null:t.right}function ki(){this.root_=null,this.size_=0}function Ui(){}function ji(){this.array_=[],arguments[0]instanceof _c&&this.addAll(arguments[0])}function Gi(){}function zi(t){this.message=t||""}function Vi(){this.array_=[]}function Hi(t){switch(t.type){case"Polygon":return yn(t)>1?t:null;case"MultiPolygon":var e=[];if(F(t,(function(t){yn(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function qi(){this.reset()}function Wi(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Xi(t){return t>1?jp:t<-1?-jp:Math.asin(t)}function Yi(){}function $i(t,e){t&&ed.hasOwnProperty(t.type)&&ed[t.type](t,e)}function Ji(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Zi(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ji(t[n],e,1);e.polygonEnd()}function Ki(t){return[Xp(t[1],t[0]),Xi(t[2])]}function Qi(t){var e=t[0],n=t[1],r=Yp(n);return[r*Yp(e),r*Zp(e),Zp(n)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function no(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ro(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function io(t){var e=Kp(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[t>Up?t-zp:t<-Up?t+zp:t,e]}function ao(t,e,n){return(t%=zp)?e||n?rd(uo(t),co(e,n)):uo(t):e||n?co(e,n):oo}function so(t){return function(e,n){return e+=t,[e>Up?e-zp:e<-Up?e+zp:e,n]}}function uo(t){var e=so(t);return e.invert=so(-t),e}function co(t,e){function n(t,e){var n=Yp(e),s=Yp(t)*n,u=Zp(t)*n,c=Zp(e),l=c*r+s*i;return[Xp(u*o-l*a,s*r-c*i),Xi(l*o+u*a)]}var r=Yp(t),i=Zp(t),o=Yp(e),a=Zp(e);return n.invert=function(t,e){var n=Yp(e),s=Yp(t)*n,u=Zp(t)*n,c=Zp(e),l=c*o-u*a;return[Xp(u*o+c*a,s*r+l*i),Xi(l*r-s*i)]},n}function lo(t,e){(e=Qi(e))[0]-=t,io(e);var n=function(t){return t>1?0:t<-1?Up:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+zp-kp)%zp}function ho(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fo(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function po(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return qp(r[0]-t)<kp?i>0?0:3:qp(r[0]-n)<kp?i>0?2:1:qp(r[1]-e)<kp?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&x.point(t,e)}function c(o,a){var s=i(o,a);if(h&&f.push([o,a]),_)p=o,d=a,g=s,_=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&y)x.point(o,a);else{var u=[m=Math.max(fd,Math.min(hd,m)),v=Math.max(fd,Math.min(hd,v))],c=[o=Math.max(fd,Math.min(hd,o)),a=Math.max(fd,Math.min(hd,a))];ad(u,c,t,e,n,r)?(y||(x.lineStart(),x.point(u[0],u[1])),x.point(c[0],c[1]),s||x.lineEnd(),b=!1):s&&(x.lineStart(),x.point(o,a),b=!1)}m=o,v=a,y=s}var l,h,f,p,d,g,m,v,y,_,b,x=a,w=od(),E={point:u,lineStart:function(){E.point=c,h&&h.push(f=[]),_=!0,y=!1,m=v=NaN},lineEnd:function(){l&&(c(p,d),g&&y&&w.rejoin(),l.push(w.result())),E.point=u,y&&x.lineEnd()},polygonStart:function(){x=w,l=[],h=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=h.length;n<i;++n)for(var o,a,s=h[n],u=1,c=s.length,l=s[0],f=l[0],p=l[1];u<c;++u)o=f,a=p,f=(l=s[u])[0],p=l[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=b&&e,i=(l=ld(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&ud(l,s,e,o,a),a.polygonEnd()),x=a,l=h=f=null}};return E}}function go(t){return t.length>1}function mo(t,e){return((t=t.x)[0]<0?t[1]-jp-kp:jp-t[1])-((e=e.x)[0]<0?e[1]-jp-kp:jp-e[1])}function vo(t){return function(e){var n=new yo;for(var r in t)n[r]=t[r];return n.stream=e,n}}function yo(){}function _o(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),nd(n,t.stream(_d));var a=_d.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function bo(t){return function(t){function e(t){return t=c(t[0]*Hp,t[1]*Hp),[t[0]*g+a,s-t[1]*g]}function n(t,e){return t=o(t,e),[t[0]*g+a,s-t[1]*g]}function r(){c=rd(u=ao(b,x,w),o);var t=o(y,_);return a=m-t[0]*g,s=v+t[1]*g,i()}function i(){return p=d=null,e}var o,a,s,u,c,l,h,f,p,d,g=150,m=480,v=250,y=0,_=0,b=0,x=0,w=0,E=null,S=xd,M=null,T=dd,C=.5,L=Md(n,C);return e.stream=function(t){return p&&d===t?p:p=Td(S(u,L(T(d=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?wd(E=t*Hp,6*Hp):(E=null,xd),i()):E*Vp},e.clipExtent=function(t){return arguments.length?(T=null==t?(M=l=h=f=null,dd):po(M=+t[0][0],l=+t[0][1],h=+t[1][0],f=+t[1][1]),i()):null==M?null:[[M,l],[h,f]]},e.scale=function(t){return arguments.length?(g=+t,r()):g},e.translate=function(t){return arguments.length?(m=+t[0],v=+t[1],r()):[m,v]},e.center=function(t){return arguments.length?(y=t[0]%360*Hp,_=t[1]%360*Hp,r()):[y*Vp,_*Vp]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Hp,x=t[1]%360*Hp,w=t.length>2?t[2]%360*Hp:0,r()):[b*Vp,x*Vp,w*Vp]},e.precision=function(t){return arguments.length?(L=Md(n,C=t*t),i()):Kp(C)},e.fitExtent=function(t,n){return _o(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return _o(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-a)/g,(s-t[1])/g))&&[t[0]*Vp,t[1]*Vp]},r()}}((function(){return t}))()}function xo(t,e){return[t,Jp(Qp((jp+e)/2))]}function wo(t,e){return[Jp(Qp((jp+e)/2)),-t]}function Eo(t,n,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return N(t,(function(t){var e=Eo(t,n,r,i);e&&s.push(e)})),c(s)}var u,l=z(t),h=l[1]>50&&l[3]>50;u=h?{type:a.type,coordinates:Mo(a.coordinates,Co(a))}:cn(a);var f,p=(new El).read(u),d=g(m(n,r),"meters"),v=gf.bufferOp(p,d);if(v=(new Sl).write(v),!So(v.coordinates))return(f=h?{type:v.type,coordinates:To(v.coordinates,Co(a))}:ln(v)).geometry?f:e(f,o)}function So(t){return Array.isArray(t[0])?So(t[0]):isNaN(t[0])}function Mo(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return Mo(t,e)}))}function To(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return To(t,e)}))}function Co(t){var e=ge(t).geometry.coordinates.reverse(),n=e.map((function(t){return-t}));return Cd().center(e).rotate(n).scale(Fo)}function Lo(){for(var t=new El,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Dp.union(e,t.read(JSON.stringify(arguments[n].geometry)));return e=(new Sl).write(e),{type:"Feature",geometry:e,properties:arguments[0].properties}}function Ao(t,n){var r=$(t),i=$(n);if(te(In(i,{precision:4})).coordinates[0].length<4)return null;if(te(In(r,{precision:4})).coordinates[0].length<4)return null;var o=new El,a=o.read(In(r)),s=o.read(In(i)),u=Tp.intersection(a,s);return u.isEmpty()?null:e((new Sl).write(u))}function Io(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,o){var a=n(e,t);a>=0&&(void 0===i||a<i)&&(i=a,r=o)})),r}(t,e,(function(t,e){return t-e}))}function Po(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,a=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(Z(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],u=t[1],l=t[2],h=t[3],f=(u+h)/2,p=(s+l)/2,d=2*e/Bt([s,f],[l,f],n)*(l-s),g=2*e/Bt([p,u],[p,h],n)*(h-u),m=d/2,v=2*m,y=Math.sqrt(3)/2*g,_=l-s,b=h-u,x=.75*v,w=y,M=(_-v)/(v-m/2),T=Math.floor(M),C=(T*x-m/2-_)/2-m/2+x/2,L=Math.floor((b-y)/y),A=(b-L*y)/2,I=L*y-b>y/2;I&&(A-=y/4);for(var P=[],R=[],O=0;O<6;O++){var N=2*Math.PI/6*O;P.push(Math.cos(N)),R.push(Math.sin(N))}for(var D=[],F=0;F<=T;F++)for(var B=0;B<=L;B++){var k=F%2==1;if((0!==B||!k)&&(0!==B||!I)){var U=F*x+s-C,j=B*w+u+A;if(k&&(j-=y/2),!0===i)(function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+n*a[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+n*a[(u+1)%6]]),c.push(t),s.push(o([c],r))}return s})([U,j],d/2,g/2,r,P,R).forEach((function(t){a?Ao(a,t)&&D.push(t):D.push(t)}));else{var G=function(t,e,n,r,i,a){for(var s=[],u=0;u<6;u++){var c=t[0]+e*i[u],l=t[1]+n*a[u];s.push([c,l])}return s.push(s[0].slice()),o([s],r)}([U,j],d/2,g/2,r,P,R);a?Ao(a,G)&&D.push(G):D.push(G)}}}return c(D)}function Ro(t){if(t.features.length<=1)return t;var e=function(t){var e=Wo(),n=[];return F(t,(function(t,e){var r=z(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})})),e.load(n),e}(t),n=[],r={};return F(t,(function(t,i){if(r[i])return!0;for(e.remove({index:i},Oo),r[i]=!0;;){var o=z(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map((function(t){return r[t.index]=!0,e.remove({index:t.index},Oo),t.geojson}));s.push(t),t=Lo.apply(this,s)}if(0===a.length)break}n.push(t)})),c(n)}function Oo(t,e){return t.index===e.index}function No(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Z(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],u=t[1],l=t[2],h=t[3],f=e/Bt([s,u],[l,u],n)*(l-s),p=e/Bt([s,u],[s,h],n)*(h-u),d=l-s,g=h-u,m=Math.floor(d/f),v=Math.floor(g/p),y=(g-v*p)/2,_=s+(d-m*f)/2,b=0;b<m;b++){for(var x=u+y,w=0;w<v;w++){var M=o([[[_,x],[_,x+p],[_+f,x+p],[_+f,x],[_,x]]],r);i?Ao(i,M)&&a.push(M):a.push(M),x+=p}_+=f}return c(a)}function Do(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(Z(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/Bt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/Bt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),l=0,h=t[0];h<=t[2];){for(var f=0,p=t[1];p<=t[3];){var d=null,g=null;l%2==0&&f%2==0?(d=o([[[h,p],[h,p+u],[h+s,p],[h,p]]],r),g=o([[[h,p+u],[h+s,p+u],[h+s,p],[h,p+u]]],r)):l%2==0&&f%2==1?(d=o([[[h,p],[h+s,p+u],[h+s,p],[h,p]]],r),g=o([[[h,p],[h,p+u],[h+s,p+u],[h,p]]],r)):f%2==0&&l%2==1?(d=o([[[h,p],[h,p+u],[h+s,p+u],[h,p]]],r),g=o([[[h,p],[h+s,p+u],[h+s,p],[h,p]]],r)):f%2==1&&l%2==1&&(d=o([[[h,p],[h,p+u],[h+s,p],[h,p]]],r),g=o([[[h,p+u],[h+s,p+u],[h+s,p],[h,p+u]]],r)),i?(Ao(i,d)&&a.push(d),Ao(i,g)&&a.push(g)):(a.push(d),a.push(g)),p+=u,f++}l++,h+=s}return c(a)}var Fo=6371008.8,Bo={meters:Fo,metres:Fo,millimeters:1e3*Fo,millimetres:1e3*Fo,centimeters:100*Fo,centimetres:100*Fo,kilometers:Fo/1e3,kilometres:Fo/1e3,miles:Fo/1609.344,nauticalmiles:Fo/1852,inches:39.37*Fo,yards:Fo/1.0936,feet:3.28084*Fo,radians:1,degrees:Fo/111325},ko={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/Fo,degrees:1/111325},Uo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},jo=Object.freeze({earthRadius:Fo,factors:Bo,unitsFactors:ko,areaFactors:Uo,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:a,lineString:s,lineStrings:u,featureCollection:c,multiLineString:l,multiPoint:h,multiPolygon:f,geometryCollection:p,round:d,radiansToLength:g,lengthToRadians:m,lengthToDegrees:v,bearingToAzimuth:y,radiansToDegrees:_,degreesToRadians:b,convertLength:x,convertArea:w,isNumber:E,isObject:S,validateBBox:M,validateId:T,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Go=Object.freeze({coordEach:C,coordReduce:L,propEach:A,propReduce:I,featureEach:P,featureReduce:R,coordAll:O,geomEach:N,geomReduce:D,flattenEach:F,flattenReduce:B,segmentEach:k,segmentReduce:U,lineEach:j,lineReduce:G}),zo=Object.freeze({getCoord:V,getCoords:H,containsNumber:q,geojsonType:W,featureOf:X,collectionOf:Y,getGeom:$,getGeomType:J,getType:Z}),Vo={successCallback:null,verbose:!1},Ho={},qo=it,Wo=at;at.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!gt(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],gt(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):dt(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!gt(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,gt(t,a)){if(e.leaf||dt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=mt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!dt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:lt,compareMinY:ht,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return i=mt(t.slice(e,n+1)),st(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=mt([])).leaf=!1,i.height=r;var s,u,c,l,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(vt(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(vt(t,s,c=Math.min(s+f-1,n),h,this.compareMinY),u=s;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return st(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,h;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=ft(a=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=c,l=u<l?u:l,s=a):c===h&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),ct(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=mt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,st(n,this.toBBox),st(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=mt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,st(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=ut(t,0,r,this.toBBox),o=ut(t,r,n,this.toBBox)),s=ft(i)+ft(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:lt,i=t.leaf?this.compareMinY:ht;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=ut(t,0,e,a),u=ut(t,n-e,n,a),c=pt(s)+pt(u);for(i=e;i<n-e;i++)o=t.children[i],ct(s,t.leaf?a(o):o),c+=pt(s);for(i=n-e-1;i>=e;i--)o=t.children[i],ct(u,t.leaf?a(o):o),c+=pt(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)ct(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():st(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Xo=function(t,e,n){var r=t*e,i=Yo*t,o=i-(i-t),a=t-o,s=Yo*e,u=s-(s-e),c=e-u,l=a*c-(r-o*u-a*u-o*c);return n?(n[0]=l,n[1]=r,n):[l,r]},Yo=+(Math.pow(2,27)+1),$o=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=n+r,s=new Array(a),u=0,c=0,l=0,h=Math.abs,f=t[c],p=h(f),d=e[l],g=h(d);p<g?(o=f,(c+=1)<n&&(p=h(f=t[c]))):(o=d,(l+=1)<r&&(g=h(d=e[l]))),c<n&&p<g||l>=r?(i=f,(c+=1)<n&&(p=h(f=t[c]))):(i=d,(l+=1)<r&&(g=h(d=e[l])));for(var m,v,y=i+o,_=y-i,b=o-_,x=b,w=y;c<n&&l<r;)p<g?(i=f,(c+=1)<n&&(p=h(f=t[c]))):(i=d,(l+=1)<r&&(g=h(d=e[l]))),(b=(o=x)-(_=(y=i+o)-i))&&(s[u++]=b),x=w-((m=w+y)-(v=m-w))+(y-v),w=m;for(;c<n;)(b=(o=x)-(_=(y=(i=f)+o)-i))&&(s[u++]=b),x=w-((m=w+y)-(v=m-w))+(y-v),w=m,(c+=1)<n&&(f=t[c]);for(;l<r;)(b=(o=x)-(_=(y=(i=d)+o)-i))&&(s[u++]=b),x=w-((m=w+y)-(v=m-w))+(y-v),w=m,(l+=1)<r&&(d=e[l]);return x&&(s[u++]=x),w&&(s[u++]=w),u||(s[u++]=0),s.length=u,s},Jo=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Zo=function(t,e){var n=t.length;if(1===n){var r=Xo(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Xo(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){Xo(t[u],e,a);var c=o[1];Jo(c,a[0],o),o[0]&&(i[s++]=o[0]);var l=a[1],h=o[1],f=l+h,p=h-(f-l);o[1]=f,p&&(i[s++]=p)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Ko=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=n+r,s=new Array(a),u=0,c=0,l=0,h=Math.abs,f=t[c],p=h(f),d=-e[l],g=h(d);p<g?(o=f,(c+=1)<n&&(p=h(f=t[c]))):(o=d,(l+=1)<r&&(g=h(d=-e[l]))),c<n&&p<g||l>=r?(i=f,(c+=1)<n&&(p=h(f=t[c]))):(i=d,(l+=1)<r&&(g=h(d=-e[l])));for(var m,v,y=i+o,_=y-i,b=o-_,x=b,w=y;c<n&&l<r;)p<g?(i=f,(c+=1)<n&&(p=h(f=t[c]))):(i=d,(l+=1)<r&&(g=h(d=-e[l]))),(b=(o=x)-(_=(y=i+o)-i))&&(s[u++]=b),x=w-((m=w+y)-(v=m-w))+(y-v),w=m;for(;c<n;)(b=(o=x)-(_=(y=(i=f)+o)-i))&&(s[u++]=b),x=w-((m=w+y)-(v=m-w))+(y-v),w=m,(c+=1)<n&&(f=t[c]);for(;l<r;)(b=(o=x)-(_=(y=(i=d)+o)-i))&&(s[u++]=b),x=w-((m=w+y)-(v=m-w))+(y-v),w=m,(l+=1)<r&&(d=-e[l]);return x&&(s[u++]=x),w&&(s[u++]=w),u||(s[u++]=0),s.length=u,s},Qo=yt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){return 1&t?"-":""}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",r(i(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(a,u))):o.push.apply(o,i(e(a,u))),s.push("m"+u);var c=r(n),l=r(o),h="orientation"+t+"Exact",f=["function ",h,"(",s.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)($o,Xo,Zo,Ko)}var a=5,s=o(3),u=o(4),c=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:s(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],c=e[1]-r[1],l=n[1]-r[1],h=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*l,g=a*c,m=a*s,v=i*l,y=i*c,_=o*s,b=h*(d-g)+f*(m-v)+p*(y-_),x=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(v))*Math.abs(f)+(Math.abs(y)+Math.abs(_))*Math.abs(p));return b>x||-b>x?b:u(t,e,n,r)}];!function(){for(;c.length<=a;)c.push(o(c.length));for(var e=[],n=["slow"],r=0;r<=a;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=a;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=c[t.length];return e||(e=c[t.length]=o(t.length)),e.apply(void 0,t)}].concat(c)),r=0;r<=a;++r)t.exports[r]=c[r]}()})),ta=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],u=t[s],c=o.length;c>1&&ea(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(s),c=a.length;c>1&&ea(t[a[c-2]],t[a[c-1]],u)>=0;)c-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var l=0,h=(r=0,o.length);r<h;++r)n[l++]=o[r];for(var f=a.length-2;f>0;--f)n[l++]=a[f];return n},ea=Qo[3],na=_t,ra=_t;_t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},na.default=ra;var ia=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i},oa=Qo[3],aa=bt,sa=bt;aa.default=sa;var ua=function(t){return t},ca=function(t){if(null==t)return ua;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;u<c;)l[u]=t[u],++u;return l}},la=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},ha=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){r[t<0?~t:t]=1})),a.push(i)}}var r={},i={},o={},a=[],s=-1;return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,r,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var c=r===n?n:n.concat(r);i[c.start=n.start]=o[c.end=r.end]=c}else i[n.start]=o[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=o[s]){delete o[r.end];var l=r===n?n:r.concat(n);i[l.start=r.start]=o[l.end=n.end]=l}else i[n.start]=o[n.end]=n;else i[(n=[e]).start=s]=o[n.end=u]=n})),n(o,i),n(i,o),e.forEach((function(t){r[t<0?~t:t]||a.push([t])})),a},fa=function(t){return Vt(t,Ht.apply(this,arguments))},pa=function(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,c=0;c<t;++c)a[c]=i;return{set:function(r,o){for(var c=e(r)&u,l=a[c],h=0;l!=i;){if(n(l,r))return s[c]=o;if(++h>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o},maybeSet:function(r,o){for(var c=e(r)&u,l=a[c],h=0;l!=i;){if(n(l,r))return s[c];if(++h>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o},get:function(r,o){for(var c=e(r)&u,l=a[c],h=0;l!=i;){if(n(l,r))return s[c];if(++h>=t)break;l=a[c=c+1&u]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}}},da=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ga=new ArrayBuffer(16),ma=new Float64Array(ga),va=new Uint32Array(ga),ya=function(t){ma[0]=t[0],ma[1]=t[1];var e=va[0]^va[1];return 2147483647&(e<<5^e>>7^va[2]^va[3])},_a=function(t){function e(t,e,n,r){if(f[n]!==t){f[n]=t;var i=p[n];if(i>=0){var o=d[n];i===e&&o===r||i===r&&o===e||(++m,g[n]=1)}else p[n]=e,d[n]=r}}function n(t){return ya(u[t])}function r(t,e){return da(u[t],u[e])}var i,o,a,s,u=t.coordinates,c=t.lines,l=t.rings,h=function(){for(var t=pa(1.4*u.length,n,r,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),f=new Int32Array(u.length),p=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),m=0;for(i=0,o=u.length;i<o;++i)f[i]=p[i]=d[i]=-1;for(i=0,o=c.length;i<o;++i){var v=c[i],y=v[0],_=v[1];for(a=h[y],s=h[++y],++m,g[a]=1;++y<=_;)e(i,a,a=s,s=h[y]);++m,g[s]=1}for(i=0,o=u.length;i<o;++i)f[i]=-1;for(i=0,o=l.length;i<o;++i){var b=l[i],x=b[0]+1,w=b[1];for(e(i,h[w-1],a=h[x-1],s=h[x]);++x<=w;)e(i,a,a=s,s=h[x])}f=p=d=null;var E,S=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;return{add:function(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0},has:function(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*m,ya,da);for(i=0,o=u.length;i<o;++i)g[E=h[i]]&&S.add(u[E]);return S},ba=function(t){var e,n,r,i=_a(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(function(t,e,n,r){qt(t,e,n),qt(t,e,e+r),qt(t,e+r,n)}(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t},xa=function(t){function e(t){var e,n,r,i,o,a,s,u;if(r=p.get(e=c[t[0]]))for(s=0,u=r.length;s<u;++s)if(i=r[s],function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,++r)if(!da(c[n],c[r]))return!1;return!0}(i,t))return t[0]=i[0],void(t[1]=i[1]);if(o=p.get(n=c[t[1]]))for(s=0,u=o.length;s<u;++s)if(a=o[s],function(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!da(c[n],c[o]))return!1;return!0}(a,t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):p.set(e,[t]),o?o.push(t):p.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var a=i(t),s=i(e),u=0;u<o;++u)if(!da(c[n+(u+a)%o],c[r+(u+s)%o]))return!1;return!0}function r(t,e){var n=t[0],r=e[0],o=t[1],a=e[1],s=o-n;if(s!==a-r)return!1;for(var u=i(t),l=s-i(e),h=0;h<s;++h)if(!da(c[n+(h+u)%s],c[a-(h+l)%s]))return!1;return!0}function i(t){for(var e=t[0],n=t[1],r=e,i=r,o=c[r];++r<n;){var a=c[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-e}var o,a,s,u,c=t.coordinates,l=t.lines,h=t.rings,f=l.length+h.length;for(delete t.lines,delete t.rings,s=0,u=l.length;s<u;++s)for(o=l[s];o=o.next;)++f;for(s=0,u=h.length;s<u;++s)for(a=h[s];a=a.next;)++f;var p=pa(2*f*1.4,ya,da),d=t.arcs=[];for(s=0,u=l.length;s<u;++s){o=l[s];do{e(o)}while(o=o.next)}for(s=0,u=h.length;s<u;++s)if((a=h[s]).next)do{e(a)}while(a=a.next);else!function(t){var e,o,a,s,u;if(o=p.get(e=c[t[0]]))for(s=0,u=o.length;s<u;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=p.get(e=c[t[0]+i(t)]))for(s=0,u=o.length;s<u;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(r(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):p.set(e,[t]),d.push(t)}(a);return t},wa=function(t,e){function n(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function r(t){var e=[];do{var n=c.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,a=1/0,s=-1/0,u=-1/0,c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var l in t)e(t[l]);return s>=o&&u>=a?[o,a,s,u]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=Wt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function r(t){return[Math.round((t[0]-c)*p),Math.round((t[1]-l)*d)]}function i(t,e){for(var n,r,i,o,a,s=-1,u=0,h=t.length,f=new Array(h);++s<h;)n=t[s],o=Math.round((n[0]-c)*p),a=Math.round((n[1]-l)*d),o===r&&a===i||(f[u++]=[r=o,i=a]);for(f.length=u;u<e;)u=f.push([f[0][0],f[0][1]]);return f}function o(t){return i(t,2)}function a(t){return i(t,4)}function s(t){return t.map(a)}function u(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var c=e[0],l=e[1],h=e[2],f=e[3],p=h-c?(n-1)/(h-c):1,d=f-l?(n-1)/(f-l):1,g={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var m in t)u(t[m]);return{scale:[1/p,1/d],translate:[c,l]}}(t,o,e),s=xa(ba(function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function i(t){return t.map(r)}var o=-1,a=[],s=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var l in t)e(t[l]);return{type:"Topology",coordinates:u,lines:a,rings:s,objects:t}}(t))),u=s.coordinates,c=pa(1.4*s.arcs.length,$t,Jt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map((function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)})),delete s.coordinates,u=null;var l={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,c=o[0],l=c[0],h=c[1];++a<u;)r=(c=o[a])[0],i=c[1],r===l&&i===h||(o[s++]=[r-l,i-h],l=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},Ea=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],r=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ea.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},Ea.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Ea.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])};var Sa=_e,Ma=_e;_e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Ne(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(Ne(t,c,l,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},_e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Sa.default=Ma,je.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!$e(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],$e(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Ye(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!$e(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],a=e.leaf?n(o):o,$e(t,a)){if(e.leaf||Ye(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Je([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Ye(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:He,compareMinY:qe,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return i=Je(t.slice(e,n+1)),Ge(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Je([])).leaf=!1,i.height=r;var s,u,c,l,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(Ze(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(Ze(t,s,c=Math.min(s+f-1,n),h,this.compareMinY),u=s;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return Ge(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,h;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=We(a=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-u)<h?(h=c,l=u<l?u:l,s=a):c===h&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Ve(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Je(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ge(n,this.toBBox),Ge(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Je([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ge(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)a=function(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}(i=ze(t,0,r,this.toBBox),o=ze(t,r,n,this.toBBox)),s=We(i)+We(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:He,i=t.leaf?this.compareMinY:qe;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=ze(t,0,e,a),u=ze(t,n-e,n,a),c=Xe(s)+Xe(u);for(i=e;i<n-e;i++)o=t.children[i],Ve(s,t.leaf?a(o):o),c+=Xe(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Ve(u,t.leaf?a(o):o),c+=Xe(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ve(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ge(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Ta=Object.freeze({toMercator:cn,toWgs84:ln}),Ca=6378137,La=function(t,e,n){function r(t,n,r,i){var u,c,l=o[t][n],h=o[t][n+1],f=o[r][i],p=o[r][i+1],d=function(t,e,n,r){if(Pn(t,n)||Pn(t,r)||Pn(e,n)||Pn(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],u=n[0],c=n[1],l=r[0],h=r[1],f=(i-a)*(c-h)-(o-s)*(u-l);return 0===f?null:[((i*s-o*a)*(u-l)-(i-a)*(u*h-c*l))/f,((i*s-o*a)*(c-h)-(o-s)*(u*h-c*l))/f]}(l,h,f,p);if(null!==d&&(u=h[0]!==l[0]?(d[0]-l[0])/(h[0]-l[0]):(d[1]-l[1])/(h[1]-l[1]),c=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||c>=1||c<=0))){var g=d,m=!s[g];m&&(s[g]=!0),e?a.push(e(d,t,n,l,h,u,r,i,f,p,c,m)):a.push(d)}}function i(t,e){var n,r,i,a,s=o[t][e],u=o[t][e+1];return s[0]<u[0]?(n=s[0],r=u[0]):(n=u[0],r=s[0]),s[1]<u[1]?(i=s[1],a=u[1]):(i=u[1],a=s[1]),{minX:n,minY:i,maxX:r,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var u=[],c=0;c<o.length;c++)for(var l=0;l<o[c].length-1;l++)u.push(i(c,l));var h=Wo();h.load(u)}for(var f=0;f<o.length;f++)for(var p=0;p<o[f].length-1;p++)if(n)h.search(i(f,p)).forEach((function(t){var e=t.ring,n=t.edge;r(f,p,e,n)}));else for(var d=0;d<o.length;d++)for(var g=0;g<o[d].length-1;g++)r(f,p,d,g);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a},Aa=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<d.features.length;r++)t[e]!=r&&It(d.features[t[e]].geometry.coordinates[0][0],d.features[r],{ignoreBoundary:!0})&&yn(d.features[r])<1/0&&(n=r);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var i=e+d.features[n].properties.winding;d.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,a=[],s=0;s<i;s++){var u=t.geometry.coordinates[s];On(u[0],u[u.length-1])||u.push(u[0]),a.push.apply(a,u.slice(0,u.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=a.length,h=La(t,(function(t,e,n,r,i,o,a,s,u,c,l,h){return[t,e,n,r,i,o,a,s,u,c,l,h]})),f=h.length;if(0==f){var p=[];for(s=0;s<i;s++)p.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Rn([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else r=-1;return r}(t.geometry.coordinates[s])}));var d=c(p);return e(),n(),d}var g=[],m=[];for(s=0;s<i;s++){g.push([]);for(var v=0;v<t.geometry.coordinates[s].length-1;v++)g[s].push([new Ia(t.geometry.coordinates[s][(v+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,v],[s,(v+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),m.push(new Pa(t.geometry.coordinates[s][v],[s,(v-1).modulo(t.geometry.coordinates[s].length-1)],[s,v],void 0,void 0,!1,!0))}for(s=0;s<f;s++)g[h[s][1]][h[s][2]].push(new Ia(h[s][0],h[s][5],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0)),h[s][11]&&m.push(new Pa(h[s][0],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0,void 0,!0,!0));var y=m.length;for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)g[s][v].sort((function(t,e){return t.param<e.param?-1:1}));var _=[];for(s=0;s<y;s++)_.push({minX:m[s].coord[0],minY:m[s].coord[1],maxX:m[s].coord[0],maxY:m[s].coord[1],index:s});var b=Wo();for(b.load(_),s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(var x=0;x<g[s][v].length;x++){E=x==g[s][v].length-1?g[s][(v+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:g[s][v][x+1].coord;var w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];g[s][v][x].nxtIsectAlongEdgeIn=w.index}for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(x=0;x<g[s][v].length;x++){var E=g[s][v][x].coord,S=(w=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;S<l?m[S].nxtIsectAlongRingAndEdge2=g[s][v][x].nxtIsectAlongEdgeIn:On(m[S].ringAndEdge1,g[s][v][x].ringAndEdgeIn)?m[S].nxtIsectAlongRingAndEdge1=g[s][v][x].nxtIsectAlongEdgeIn:m[S].nxtIsectAlongRingAndEdge2=g[s][v][x].nxtIsectAlongEdgeIn}var M=[];for(s=0,v=0;v<i;v++){var T=s;for(x=0;x<t.geometry.coordinates[v].length-1;x++)m[s].coord[0]<m[T].coord[0]&&(T=s),s++;var C=m[T].nxtIsectAlongRingAndEdge2;for(x=0;x<m.length;x++)if(m[x].nxtIsectAlongRingAndEdge1==T||m[x].nxtIsectAlongRingAndEdge2==T){var L=x;break}var A=Rn([m[L].coord,m[T].coord,m[C].coord],!0)?1:-1;M.push({isect:T,parent:-1,winding:A})}for(M.sort((function(t,e){return m[t.isect].coord>m[e.isect].coord?-1:1})),p=[];M.length>0;){var I=M.pop(),P=I.isect,R=I.parent,O=I.winding,N=p.length,D=[m[P].coord],F=P;if(m[P].ringAndEdge1Walkable)var B=m[P].ringAndEdge1,k=m[P].nxtIsectAlongRingAndEdge1;else B=m[P].ringAndEdge2,k=m[P].nxtIsectAlongRingAndEdge2;for(;!On(m[P].coord,m[k].coord);){D.push(m[k].coord);var U=void 0;for(s=0;s<M.length;s++)if(M[s].isect==k){U=s;break}if(void 0!=U&&M.splice(U,1),On(B,m[k].ringAndEdge1)){if(B=m[k].ringAndEdge2,m[k].ringAndEdge2Walkable=!1,m[k].ringAndEdge1Walkable){var j={isect:k};Rn([m[F].coord,m[k].coord,m[m[k].nxtIsectAlongRingAndEdge2].coord],1==O)?(j.parent=R,j.winding=-O):(j.parent=N,j.winding=O),M.push(j)}F=k,k=m[k].nxtIsectAlongRingAndEdge2}else B=m[k].ringAndEdge1,m[k].ringAndEdge1Walkable=!1,m[k].ringAndEdge2Walkable&&(j={isect:k},Rn([m[F].coord,m[k].coord,m[m[k].nxtIsectAlongRingAndEdge1].coord],1==O)?(j.parent=R,j.winding=-O):(j.parent=N,j.winding=O),M.push(j)),F=k,k=m[k].nxtIsectAlongRingAndEdge1}D.push(m[k].coord),p.push(o([D],{index:N,parent:R,winding:O,netWinding:void 0}))}return d=c(p),e(),n(),d},Ia=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Pa=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var Ra=Math.PI/180,Oa=180/Math.PI,Na=function(t,e){this.lon=t,this.lat=e,this.x=Ra*t,this.y=Ra*e};Na.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Na.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Na(e,t)};var Da=function(){this.coords=[],this.length=0};Da.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Fa=function(t){this.properties=t||{},this.geometries=[]};Fa.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Fa.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Ba=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Na(t.x,t.y),this.end=new Na(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};Ba.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=Oa*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Oa*Math.atan2(i,r),a]},Ba.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,h=-180+c,f=360-c,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],m=Math.abs(g-d);m>f&&(g>l&&d<h||d>l&&g<h)?s=!0:m>u&&(u=m)}var v=[];if(s&&u<c){var y=[];v.push(y);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>f){var x=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),E=parseFloat(n[_][0]),S=parseFloat(n[_][1]);if(x>-180&&x<h&&180===E&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){y.push([-180,n[_][1]]),_++,y.push([n[_][0],n[_][1]]);continue}if(x>l&&x<180&&-180===E&&_+1<n.length&&n[_-1][0]>l&&n[_-1][0]<180){y.push([180,n[_][1]]),_++,y.push([n[_][0],n[_][1]]);continue}if(x<h&&E>l){var M=x;x=E,E=M;var T=w;w=S,S=T}if(x>l&&E<h&&(E+=360),x<=180&&E>=180&&x<E){var C=(180-x)/(E-x),L=C*S+(1-C)*w;y.push([n[_-1][0]>l?180:-180,L]),(y=[]).push([n[_-1][0]>l?-180:180,L]),v.push(y)}else y=[],v.push(y);y.push([b,n[_][1]])}else y.push([n[_][0],n[_][1]])}}else{var A=[];v.push(A);for(var I=0;I<n.length;++I)A.push([n[I][0],n[I][1]])}for(var P=new Fa(this.properties),R=0;R<v.length;++R){var O=new Da;P.geometries.push(O);for(var N=v[R],D=0;D<N.length;++D)O.move_to(N[D])}return P};var ka=qn;qn.polyline=qn,qn.polygon=function(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Xn(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(Xn(s=t[a],e)&r))!==o&&n.push(Wn(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n};var Ua=Array.prototype.slice,ja={successCallback:null,verbose:!1,polygons:!1},Ga={},za=64,Va=16,Ha=4,qa=1,Wa=[],Xa=[],Ya=[],$a=[],Ja=[],Za=[],Ka=[],Qa=[],ts=[],es=[],ns=[],rs=[],is=[],os=[],as=[],ss=[],us=[],cs=[],ls=[],hs=[],fs=[],ps=[],ds=[],gs=[];Ka[85]=es[85]=-1,Qa[85]=ns[85]=0,ts[85]=rs[85]=1,ls[85]=ps[85]=1,hs[85]=ds[85]=0,fs[85]=gs[85]=1,Wa[85]=$a[85]=0,Xa[85]=Ja[85]=-1,Ya[85]=as[85]=0,ss[85]=is[85]=0,us[85]=os[85]=1,Za[85]=cs[85]=1,ps[1]=ps[169]=0,ds[1]=ds[169]=-1,gs[1]=gs[169]=0,is[1]=is[169]=-1,os[1]=os[169]=0,as[1]=as[169]=0,es[4]=es[166]=0,ns[4]=ns[166]=-1,rs[4]=rs[166]=1,ss[4]=ss[166]=1,us[4]=us[166]=0,cs[4]=cs[166]=0,Ka[16]=Ka[154]=0,Qa[16]=Qa[154]=1,ts[16]=ts[154]=1,$a[16]=$a[154]=1,Ja[16]=Ja[154]=0,Za[16]=Za[154]=1,ls[64]=ls[106]=0,hs[64]=hs[106]=1,fs[64]=fs[106]=0,Wa[64]=Wa[106]=-1,Xa[64]=Xa[106]=0,Ya[64]=Ya[106]=1,ls[2]=ls[168]=0,hs[2]=hs[168]=-1,fs[2]=fs[168]=1,ps[2]=ps[168]=0,ds[2]=ds[168]=-1,gs[2]=gs[168]=0,is[2]=is[168]=-1,os[2]=os[168]=0,as[2]=as[168]=0,ss[2]=ss[168]=-1,us[2]=us[168]=0,cs[2]=cs[168]=1,Ka[8]=Ka[162]=0,Qa[8]=Qa[162]=-1,ts[8]=ts[162]=0,es[8]=es[162]=0,ns[8]=ns[162]=-1,rs[8]=rs[162]=1,is[8]=is[162]=1,os[8]=os[162]=0,as[8]=as[162]=1,ss[8]=ss[162]=1,us[8]=us[162]=0,cs[8]=cs[162]=0,Ka[32]=Ka[138]=0,Qa[32]=Qa[138]=1,ts[32]=ts[138]=1,es[32]=es[138]=0,ns[32]=ns[138]=1,rs[32]=rs[138]=0,Wa[32]=Wa[138]=1,Xa[32]=Xa[138]=0,Ya[32]=Ya[138]=0,$a[32]=$a[138]=1,Ja[32]=Ja[138]=0,Za[32]=Za[138]=1,ps[128]=ps[42]=0,ds[128]=ds[42]=1,gs[128]=gs[42]=1,ls[128]=ls[42]=0,hs[128]=hs[42]=1,fs[128]=fs[42]=0,Wa[128]=Wa[42]=-1,Xa[128]=Xa[42]=0,Ya[128]=Ya[42]=1,$a[128]=$a[42]=-1,Ja[128]=Ja[42]=0,Za[128]=Za[42]=0,es[5]=es[165]=-1,ns[5]=ns[165]=0,rs[5]=rs[165]=0,ps[5]=ps[165]=1,ds[5]=ds[165]=0,gs[5]=gs[165]=0,ss[20]=ss[150]=0,us[20]=us[150]=1,cs[20]=cs[150]=1,$a[20]=$a[150]=0,Ja[20]=Ja[150]=-1,Za[20]=Za[150]=1,Ka[80]=Ka[90]=-1,Qa[80]=Qa[90]=0,ts[80]=ts[90]=1,ls[80]=ls[90]=1,hs[80]=hs[90]=0,fs[80]=fs[90]=1,is[65]=is[105]=0,os[65]=os[105]=1,as[65]=as[105]=0,Wa[65]=Wa[105]=0,Xa[65]=Xa[105]=-1,Ya[65]=Ya[105]=0,Ka[160]=Ka[10]=-1,Qa[160]=Qa[10]=0,ts[160]=ts[10]=1,es[160]=es[10]=-1,ns[160]=ns[10]=0,rs[160]=rs[10]=0,ps[160]=ps[10]=1,ds[160]=ds[10]=0,gs[160]=gs[10]=0,ls[160]=ls[10]=1,hs[160]=hs[10]=0,fs[160]=fs[10]=1,ss[130]=ss[40]=0,us[130]=us[40]=1,cs[130]=cs[40]=1,is[130]=is[40]=0,os[130]=os[40]=1,as[130]=as[40]=0,Wa[130]=Wa[40]=0,Xa[130]=Xa[40]=-1,Ya[130]=Ya[40]=0,$a[130]=$a[40]=0,Ja[130]=Ja[40]=-1,Za[130]=Za[40]=1,es[37]=es[133]=0,ns[37]=ns[133]=1,rs[37]=rs[133]=1,ps[37]=ps[133]=0,ds[37]=ds[133]=1,gs[37]=gs[133]=0,Wa[37]=Wa[133]=-1,Xa[37]=Xa[133]=0,Ya[37]=Ya[133]=0,$a[37]=$a[133]=1,Ja[37]=Ja[133]=0,Za[37]=Za[133]=0,ss[148]=ss[22]=-1,us[148]=us[22]=0,cs[148]=cs[22]=0,ps[148]=ps[22]=0,ds[148]=ds[22]=-1,gs[148]=gs[22]=1,ls[148]=ls[22]=0,hs[148]=hs[22]=1,fs[148]=fs[22]=1,$a[148]=$a[22]=-1,Ja[148]=Ja[22]=0,Za[148]=Za[22]=1,Ka[82]=Ka[88]=0,Qa[82]=Qa[88]=-1,ts[82]=ts[88]=1,ss[82]=ss[88]=1,us[82]=us[88]=0,cs[82]=cs[88]=1,is[82]=is[88]=-1,os[82]=os[88]=0,as[82]=as[88]=1,ls[82]=ls[88]=0,hs[82]=hs[88]=-1,fs[82]=fs[88]=0,Ka[73]=Ka[97]=0,Qa[73]=Qa[97]=1,ts[73]=ts[97]=0,es[73]=es[97]=0,ns[73]=ns[97]=-1,rs[73]=rs[97]=0,is[73]=is[97]=1,os[73]=os[97]=0,as[73]=as[97]=0,Wa[73]=Wa[97]=1,Xa[73]=Xa[97]=0,Ya[73]=Ya[97]=1,Ka[145]=Ka[25]=0,Qa[145]=Qa[25]=-1,ts[145]=ts[25]=0,is[145]=is[25]=1,os[145]=os[25]=0,as[145]=as[25]=1,ps[145]=ps[25]=0,ds[145]=ds[25]=1,gs[145]=gs[25]=1,$a[145]=$a[25]=-1,Ja[145]=Ja[25]=0,Za[145]=Za[25]=0,es[70]=es[100]=0,ns[70]=ns[100]=1,rs[70]=rs[100]=0,ss[70]=ss[100]=-1,us[70]=us[100]=0,cs[70]=cs[100]=1,ls[70]=ls[100]=0,hs[70]=hs[100]=-1,fs[70]=fs[100]=1,Wa[70]=Wa[100]=1,Xa[70]=Xa[100]=0,Ya[70]=Ya[100]=0,es[101]=es[69]=0,ns[101]=ns[69]=1,rs[101]=rs[69]=0,Wa[101]=Wa[69]=1,Xa[101]=Xa[69]=0,Ya[101]=Ya[69]=0,ps[149]=ps[21]=0,ds[149]=ds[21]=1,gs[149]=gs[21]=1,$a[149]=$a[21]=-1,Ja[149]=Ja[21]=0,Za[149]=Za[21]=0,ss[86]=ss[84]=-1,us[86]=us[84]=0,cs[86]=cs[84]=1,ls[86]=ls[84]=0,hs[86]=hs[84]=-1,fs[86]=fs[84]=1,Ka[89]=Ka[81]=0,Qa[89]=Qa[81]=-1,ts[89]=ts[81]=0,is[89]=is[81]=1,os[89]=os[81]=0,as[89]=as[81]=1,Ka[96]=Ka[74]=0,Qa[96]=Qa[74]=1,ts[96]=ts[74]=0,es[96]=es[74]=-1,ns[96]=ns[74]=0,rs[96]=rs[74]=1,ls[96]=ls[74]=1,hs[96]=hs[74]=0,fs[96]=fs[74]=0,Wa[96]=Wa[74]=1,Xa[96]=Xa[74]=0,Ya[96]=Ya[74]=1,Ka[24]=Ka[146]=0,Qa[24]=Qa[146]=-1,ts[24]=ts[146]=1,ss[24]=ss[146]=1,us[24]=us[146]=0,cs[24]=cs[146]=1,is[24]=is[146]=0,os[24]=os[146]=1,as[24]=as[146]=1,$a[24]=$a[146]=0,Ja[24]=Ja[146]=-1,Za[24]=Za[146]=0,es[6]=es[164]=-1,ns[6]=ns[164]=0,rs[6]=rs[164]=1,ss[6]=ss[164]=-1,us[6]=us[164]=0,cs[6]=cs[164]=0,ps[6]=ps[164]=0,ds[6]=ds[164]=-1,gs[6]=gs[164]=1,ls[6]=ls[164]=1,hs[6]=hs[164]=0,fs[6]=fs[164]=0,is[129]=is[41]=0,os[129]=os[41]=1,as[129]=as[41]=1,ps[129]=ps[41]=0,ds[129]=ds[41]=1,gs[129]=gs[41]=0,Wa[129]=Wa[41]=-1,Xa[129]=Xa[41]=0,Ya[129]=Ya[41]=0,$a[129]=$a[41]=0,Ja[129]=Ja[41]=-1,Za[129]=Za[41]=0,ss[66]=ss[104]=0,us[66]=us[104]=1,cs[66]=cs[104]=0,is[66]=is[104]=-1,os[66]=os[104]=0,as[66]=as[104]=1,ls[66]=ls[104]=0,hs[66]=hs[104]=-1,fs[66]=fs[104]=0,Wa[66]=Wa[104]=0,Xa[66]=Xa[104]=-1,Ya[66]=Ya[104]=1,Ka[144]=Ka[26]=-1,Qa[144]=Qa[26]=0,ts[144]=ts[26]=0,ps[144]=ps[26]=1,ds[144]=ds[26]=0,gs[144]=gs[26]=1,ls[144]=ls[26]=0,hs[144]=hs[26]=1,fs[144]=fs[26]=1,$a[144]=$a[26]=-1,Ja[144]=Ja[26]=0,Za[144]=Za[26]=1,es[36]=es[134]=0,ns[36]=ns[134]=1,rs[36]=rs[134]=1,ss[36]=ss[134]=0,us[36]=us[134]=1,cs[36]=cs[134]=0,Wa[36]=Wa[134]=0,Xa[36]=Xa[134]=-1,Ya[36]=Ya[134]=1,$a[36]=$a[134]=1,Ja[36]=Ja[134]=0,Za[36]=Za[134]=0,Ka[9]=Ka[161]=-1,Qa[9]=Qa[161]=0,ts[9]=ts[161]=0,es[9]=es[161]=0,ns[9]=ns[161]=-1,rs[9]=rs[161]=0,is[9]=is[161]=1,os[9]=os[161]=0,as[9]=as[161]=0,ps[9]=ps[161]=1,ds[9]=ds[161]=0,gs[9]=gs[161]=1,Ka[136]=0,Qa[136]=1,ts[136]=1,es[136]=0,ns[136]=1,rs[136]=0,ss[136]=-1,us[136]=0,cs[136]=1,is[136]=-1,os[136]=0,as[136]=0,ps[136]=0,ds[136]=-1,gs[136]=0,ls[136]=0,hs[136]=-1,fs[136]=1,Wa[136]=1,Xa[136]=0,Ya[136]=0,$a[136]=1,Ja[136]=0,Za[136]=1,Ka[34]=0,Qa[34]=-1,ts[34]=0,es[34]=0,ns[34]=-1,rs[34]=1,ss[34]=1,us[34]=0,cs[34]=0,is[34]=1,os[34]=0,as[34]=1,ps[34]=0,ds[34]=1,gs[34]=1,ls[34]=0,hs[34]=1,fs[34]=0,Wa[34]=-1,Xa[34]=0,Ya[34]=1,$a[34]=-1,Ja[34]=0,Za[34]=0,Ka[35]=0,Qa[35]=1,ts[35]=1,es[35]=0,ns[35]=-1,rs[35]=1,ss[35]=1,us[35]=0,cs[35]=0,is[35]=-1,os[35]=0,as[35]=0,ps[35]=0,ds[35]=-1,gs[35]=0,ls[35]=0,hs[35]=1,fs[35]=0,Wa[35]=-1,Xa[35]=0,Ya[35]=1,$a[35]=1,Ja[35]=0,Za[35]=1,Ka[153]=0,Qa[153]=1,ts[153]=1,is[153]=-1,os[153]=0,as[153]=0,ps[153]=0,ds[153]=-1,gs[153]=0,$a[153]=1,Ja[153]=0,Za[153]=1,es[102]=0,ns[102]=-1,rs[102]=1,ss[102]=1,us[102]=0,cs[102]=0,ls[102]=0,hs[102]=1,fs[102]=0,Wa[102]=-1,Xa[102]=0,Ya[102]=1,Ka[155]=0,Qa[155]=-1,ts[155]=0,is[155]=1,os[155]=0,as[155]=1,ps[155]=0,ds[155]=1,gs[155]=1,$a[155]=-1,Ja[155]=0,Za[155]=0,es[103]=0,ns[103]=1,rs[103]=0,ss[103]=-1,us[103]=0,cs[103]=1,ls[103]=0,hs[103]=-1,fs[103]=1,Wa[103]=1,Xa[103]=0,Ya[103]=0,Ka[152]=0,Qa[152]=1,ts[152]=1,ss[152]=-1,us[152]=0,cs[152]=1,is[152]=-1,os[152]=0,as[152]=0,ps[152]=0,ds[152]=-1,gs[152]=0,ls[152]=0,hs[152]=-1,fs[152]=1,$a[152]=1,Ja[152]=0,Za[152]=1,Ka[156]=0,Qa[156]=-1,ts[156]=1,ss[156]=1,us[156]=0,cs[156]=1,is[156]=-1,os[156]=0,as[156]=0,ps[156]=0,ds[156]=-1,gs[156]=0,ls[156]=0,hs[156]=1,fs[156]=1,$a[156]=-1,Ja[156]=0,Za[156]=1,Ka[137]=0,Qa[137]=1,ts[137]=1,es[137]=0,ns[137]=1,rs[137]=0,is[137]=-1,os[137]=0,as[137]=0,ps[137]=0,ds[137]=-1,gs[137]=0,Wa[137]=1,Xa[137]=0,Ya[137]=0,$a[137]=1,Ja[137]=0,Za[137]=1,Ka[139]=0,Qa[139]=1,ts[139]=1,es[139]=0,ns[139]=-1,rs[139]=0,is[139]=1,os[139]=0,as[139]=0,ps[139]=0,ds[139]=1,gs[139]=0,Wa[139]=-1,Xa[139]=0,Ya[139]=0,$a[139]=1,Ja[139]=0,Za[139]=1,Ka[98]=0,Qa[98]=-1,ts[98]=0,es[98]=0,ns[98]=-1,rs[98]=1,ss[98]=1,us[98]=0,cs[98]=0,is[98]=1,os[98]=0,as[98]=1,ls[98]=0,hs[98]=1,fs[98]=0,Wa[98]=-1,Xa[98]=0,Ya[98]=1,Ka[99]=0,Qa[99]=1,ts[99]=0,es[99]=0,ns[99]=-1,rs[99]=1,ss[99]=1,us[99]=0,cs[99]=0,is[99]=-1,os[99]=0,as[99]=1,ls[99]=0,hs[99]=-1,fs[99]=0,Wa[99]=1,Xa[99]=0,Ya[99]=1,es[38]=0,ns[38]=-1,rs[38]=1,ss[38]=1,us[38]=0,cs[38]=0,ps[38]=0,ds[38]=1,gs[38]=1,ls[38]=0,hs[38]=1,fs[38]=0,Wa[38]=-1,Xa[38]=0,Ya[38]=1,$a[38]=-1,Ja[38]=0,Za[38]=0,es[39]=0,ns[39]=1,rs[39]=1,ss[39]=-1,us[39]=0,cs[39]=0,ps[39]=0,ds[39]=-1,gs[39]=1,ls[39]=0,hs[39]=1,fs[39]=0,Wa[39]=-1,Xa[39]=0,Ya[39]=1,$a[39]=1,Ja[39]=0,Za[39]=0;var ms=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},vs=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ys=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},_s=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},bs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},xs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ws=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Es=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ss=[],Ms=[],Ts=[],Cs=[],Ls=[],As=[],Is=[],Ps=[];Cs[1]=Ls[1]=18,Cs[169]=Ls[169]=18,Ts[4]=Ms[4]=12,Ts[166]=Ms[166]=12,Ss[16]=Ps[16]=4,Ss[154]=Ps[154]=4,As[64]=Is[64]=22,As[106]=Is[106]=22,Ts[2]=As[2]=17,Cs[2]=Ls[2]=18,Ts[168]=As[168]=17,Cs[168]=Ls[168]=18,Ss[8]=Cs[8]=9,Ms[8]=Ts[8]=12,Ss[162]=Cs[162]=9,Ms[162]=Ts[162]=12,Ss[32]=Ps[32]=4,Ms[32]=Is[32]=1,Ss[138]=Ps[138]=4,Ms[138]=Is[138]=1,Ls[128]=Ps[128]=21,As[128]=Is[128]=22,Ls[42]=Ps[42]=21,As[42]=Is[42]=22,Ms[5]=Ls[5]=14,Ms[165]=Ls[165]=14,Ts[20]=Ps[20]=6,Ts[150]=Ps[150]=6,Ss[80]=As[80]=11,Ss[90]=As[90]=11,Cs[65]=Is[65]=3,Cs[105]=Is[105]=3,Ss[160]=As[160]=11,Ms[160]=Ls[160]=14,Ss[10]=As[10]=11,Ms[10]=Ls[10]=14,Ts[130]=Ps[130]=6,Cs[130]=Is[130]=3,Ts[40]=Ps[40]=6,Cs[40]=Is[40]=3,Ms[101]=Is[101]=1,Ms[69]=Is[69]=1,Ls[149]=Ps[149]=21,Ls[21]=Ps[21]=21,Ts[86]=As[86]=17,Ts[84]=As[84]=17,Ss[89]=Cs[89]=9,Ss[81]=Cs[81]=9,Ss[96]=Is[96]=0,Ms[96]=As[96]=15,Ss[74]=Is[74]=0,Ms[74]=As[74]=15,Ss[24]=Ts[24]=8,Cs[24]=Ps[24]=7,Ss[146]=Ts[146]=8,Cs[146]=Ps[146]=7,Ms[6]=As[6]=15,Ts[6]=Ls[6]=16,Ms[164]=As[164]=15,Ts[164]=Ls[164]=16,Cs[129]=Ps[129]=7,Ls[129]=Is[129]=20,Cs[41]=Ps[41]=7,Ls[41]=Is[41]=20,Ts[66]=Is[66]=2,Cs[66]=As[66]=19,Ts[104]=Is[104]=2,Cs[104]=As[104]=19,Ss[144]=Ls[144]=10,As[144]=Ps[144]=23,Ss[26]=Ls[26]=10,As[26]=Ps[26]=23,Ms[36]=Ps[36]=5,Ts[36]=Is[36]=2,Ms[134]=Ps[134]=5,Ts[134]=Is[134]=2,Ss[9]=Ls[9]=10,Ms[9]=Cs[9]=13,Ss[161]=Ls[161]=10,Ms[161]=Cs[161]=13,Ms[37]=Ps[37]=5,Ls[37]=Is[37]=20,Ms[133]=Ps[133]=5,Ls[133]=Is[133]=20,Ts[148]=Ls[148]=16,As[148]=Ps[148]=23,Ts[22]=Ls[22]=16,As[22]=Ps[22]=23,Ss[82]=Ts[82]=8,Cs[82]=As[82]=19,Ss[88]=Ts[88]=8,Cs[88]=As[88]=19,Ss[73]=Is[73]=0,Ms[73]=Cs[73]=13,Ss[97]=Is[97]=0,Ms[97]=Cs[97]=13,Ss[145]=Cs[145]=9,Ls[145]=Ps[145]=21,Ss[25]=Cs[25]=9,Ls[25]=Ps[25]=21,Ms[70]=Is[70]=1,Ts[70]=As[70]=17,Ms[100]=Is[100]=1,Ts[100]=As[100]=17,Ss[34]=Cs[34]=9,Ms[34]=Ts[34]=12,Ls[34]=Ps[34]=21,As[34]=Is[34]=22,Ss[136]=Ps[136]=4,Ms[136]=Is[136]=1,Ts[136]=As[136]=17,Cs[136]=Ls[136]=18,Ss[35]=Ps[35]=4,Ms[35]=Ts[35]=12,Cs[35]=Ls[35]=18,As[35]=Is[35]=22,Ss[153]=Ps[153]=4,Cs[153]=Ls[153]=18,Ms[102]=Ts[102]=12,As[102]=Is[102]=22,Ss[155]=Cs[155]=9,Ls[155]=Ps[155]=23,Ms[103]=Is[103]=1,Ts[103]=As[103]=17,Ss[152]=Ps[152]=4,Ts[152]=As[152]=17,Cs[152]=Ls[152]=18,Ss[156]=Ts[156]=8,Cs[156]=Ls[156]=18,As[156]=Ps[156]=23,Ss[137]=Ps[137]=4,Ms[137]=Is[137]=1,Cs[137]=Ls[137]=18,Ss[139]=Ps[139]=4,Ms[139]=Cs[139]=13,Ls[139]=Is[139]=20,Ss[98]=Cs[98]=9,Ms[98]=Ts[98]=12,As[98]=Is[98]=22,Ss[99]=Is[99]=0,Ms[99]=Ts[99]=12,Cs[99]=As[99]=19,Ms[38]=Ts[38]=12,Ls[38]=Ps[38]=21,As[38]=Is[38]=22,Ms[39]=Ps[39]=5,Ts[39]=Ls[39]=16,As[39]=Is[39]=22;var Rs=[];Rs[1]=Rs[169]=ms,Rs[4]=Rs[166]=vs,Rs[16]=Rs[154]=ys,Rs[64]=Rs[106]=_s,Rs[168]=Rs[2]=bs,Rs[162]=Rs[8]=xs,Rs[138]=Rs[32]=ws,Rs[42]=Rs[128]=Es,Rs[5]=Rs[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Rs[20]=Rs[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Rs[80]=Rs[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Rs[65]=Rs[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Rs[160]=Rs[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Rs[130]=Rs[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Rs[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Rs[101]=Rs[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Rs[149]=Rs[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Rs[86]=Rs[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Rs[89]=Rs[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Rs[96]=Rs[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[24]=Rs[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Rs[6]=Rs[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Rs[129]=Rs[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Rs[66]=Rs[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[144]=Rs[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Rs[36]=Rs[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Rs[9]=Rs[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Rs[37]=Rs[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Rs[148]=Rs[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Rs[82]=Rs[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Rs[73]=Rs[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Rs[145]=Rs[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Rs[70]=Rs[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[34]=function(t){return[Es(t),xs(t)]},Rs[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Rs[136]=function(t){return[ws(t),bs(t)]},Rs[153]=function(t){return[ys(t),ms(t)]},Rs[102]=function(t){return[vs(t),_s(t)]},Rs[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Rs[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[152]=function(t){return[ys(t),bs(t)]},Rs[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Rs[137]=function(t){return[ws(t),ms(t)]},Rs[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Rs[98]=function(t){return[xs(t),_s(t)]},Rs[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Rs[38]=function(t){return[vs(t),Es(t)]},Rs[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Os=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};Os.buildId=function(t){return t.join(",")},Os.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},Os.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},Os.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Os.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=br(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},Os.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Os.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Os.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var Ns=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};Ns.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Ns(this.to,this.from),this.symetric.symetric=this),this.symetric},Ns.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Ns.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},Ns.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Ns.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},Ns.prototype.compareTo=function(t){return br(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Ds=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Fs={length:{configurable:!0}};Ds.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Ds.prototype.get=function(t){return this.edges[t]},Fs.length.get=function(){return this.edges.length},Ds.prototype.forEach=function(t){this.edges.forEach(t)},Ds.prototype.map=function(t){return this.edges.map(t)},Ds.prototype.some=function(t){return this.edges.some(t)},Ds.prototype.isValid=function(){return!0},Ds.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=br(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},Ds.prototype.toMultiPoint=function(){return h(this.edges.map((function(t){return t.from.coordinates})))},Ds.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Ds.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=le(this.toPolygon())},Ds.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach((function(e){var a=e.getEnvelope();if(i&&(n=i.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map((function(t){return t[0]})),r=t.geometry.coordinates.map((function(t){return t[1]})),i=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}(a,o)&&xr(a,o)){var s=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));s&&e.inside(r(s))&&(i&&!xr(n,a)||(i=e))}})),i},Ds.prototype.inside=function(t){return It(t,this.toPolygon())},Object.defineProperties(Ds.prototype,Fs);var Bs=function(){this.edges=[],this.nodes={}};Bs.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new Bs;return F(t,(function(t){X(t,"LineString","Graph::fromGeoJson"),L(t,(function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n}))})),e},Bs.prototype.getNode=function(t){var e=Os.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Os(t)),n},Bs.prototype.addEdge=function(t,e){var n=new Ns(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},Bs.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},Bs.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},Bs.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},Bs.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},Bs.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,c=void 0;a.label===e&&(u=a),s.label===e&&(c=s),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},Bs.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},Bs.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},Bs.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},Bs.prototype._findEdgeRing=function(t){var e=t,n=new Ds;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},Bs.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},Bs.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var ks=yt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Us=(ks.shim,yt((function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?n:r).supported=n,e.unsupported=r}))),js=(Us.supported,Us.unsupported,yt((function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,i=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Us(t))return!!Us(o)&&(t=r.call(t),o=r.call(o),i(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=ks(t),l=ks(o)}catch(t){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),s=c.length-1;s>=0;s--)if(c[s]!=l[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!i(t[u],o[u],a))return!1;return typeof t==typeof o}(t,o,a))}}))),Gs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Rr};Gs.prototype.compare=function(t,e){if(t.type!==e.type||!Pr(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Ir(t),i=Ir(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},Gs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Gs.prototype.compareLine=function(t,e,n,r){if(!Pr(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Gs.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Gs.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Gs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},Gs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Gs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Gs.prototype.removePseudo=function(t){return t};var zs=Gs,Vs=yt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Hs=yt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(l),s=0,u=0;u<l;u++)a[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)a[u]+=this.dataset[c][u];s++}}if(s>0){for(u=0;u<l;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),qs=yt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),Ws=yt((function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=qs;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(s,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Xs=yt((function(t){t.exports&&(t.exports={DBSCAN:Vs,KMEANS:Hs,OPTICS:Ws,PriorityQueue:qs})})),Ys=(Xs.DBSCAN,Xs.KMEANS,Xs.OPTICS,Xs.PriorityQueue,function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i}),$s=Ys,Js=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Zs=Ys,Ks=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r},Qs=function(t,e){var n=t[0].length?$s:Js,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,c=0,l=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}s[h]=f}for(var g=0;g<i;g++)c+=s[g];for(var m=0;m<i;m++)l[m]={i:m,v:t[m],pr:s[m]/c,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var v=1;v<i;v++)l[v].cs=l[v-1].cs+l[v].pr;for(var y=Math.random(),_=0;_<i-1&&l[_++].cs<y;);r.push(l[_-1].v)}return r},tu=1e4,eu=function(t,e,n,r){var i=[],o=[],a=[],s=[],u=!1,c=r||tu,l=t.length,h=t[0].length,f=h>0,p=[];if(n)i="kmrand"==n?Ks(t,e):"kmpp"==n?Qs(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*l);d[g]||(d[g]=!0,i.push(t[g]))}do{Nr(e,0,p);for(var m=0;m<l;m++){for(var v=1/0,y=0,_=0;_<e;_++)(s=f?Zs(t[m],i[_]):Math.abs(t[m]-i[_]))<=v&&(v=s,y=_);a[m]=y,p[y]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?Nr(h,0,b[x]):0,o[x]=i[x];if(f){for(var w=0;w<e;w++)i[w]=[];for(var E=0;E<l;E++)for(var S=b[a[E]],M=t[E],T=0;T<h;T++)S[T]+=M[T];u=!0;for(var C=0;C<e;C++){for(var L=i[C],A=b[C],I=o[C],P=p[C],R=0;R<h;R++)L[R]=A[R]/P||0;if(u)for(var O=0;O<h;O++)if(I[O]!=L[O]){u=!1;break}}}else{for(var N=0;N<l;N++)b[a[N]]+=t[N];for(var D=0;D<e;D++)i[D]=b[D]/p[D]||0;u=!0;for(var F=0;F<e;F++)if(o[F]!=i[F]){u=!1;break}}u=u||--c<=0}while(!u);return{it:tu-c,k:e,idxs:a,centroids:i}},nu={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||nu.heuristics.manhattan,o=r.closest||!1,a=new Ur((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return Fr(u);u.closed=!0;for(var c=t.neighbors(u),l=0,h=c.length;l<h;++l){var f=c[l];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),d?a.rescoreElement(f):a.push(f))}}}return o?Fr(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Br.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)nu.cleanNode(this.nodes[t])},Br.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)nu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Br.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Br.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Br.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},kr.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},kr.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},kr.prototype.isWall=function(){return 0===this.weight},Ur.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var u=this.content[a];(i=this.scoreFunction(u))<r&&(s=a)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var ru=function(t){return function(){return t}};zr.prototype={constructor:zr,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Wr(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Hr(this,n),n=(t=n).U),n.C=!1,r.C=!0,qr(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(qr(this,n),n=(t=n).U),n.C=!1,r.C=!0,Hr(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Wr(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Hr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,qr(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Hr(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,qr(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Hr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,qr(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var iu,ou,au,su,uu,cu=[],lu=[],hu=1e-6,fu=1e-12;li.prototype={constructor:li,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Qr(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;++u<o;)a=l,l=(c=e[i[u]]).left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&ui(s,a,l)<0&&t.push([s.data,a.data,l.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var pu=function(){function t(t){return new li(t.map((function(r,i){var o=[Math.round(e(r,i,t)/hu)*hu,Math.round(n(r,i,t)/hu)*hu];return o.index=i,o.data=r,o})),r)}var e=jr,n=Gr,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:ru(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:ru(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},du=Object.freeze({randomPosition:vi,randomPoint:yi,randomPolygon:_i,randomLineString:bi}),gu=Object.freeze({getCluster:wi,clusterEach:Ei,clusterReduce:Si,createBins:Mi,applyFilter:Ti,propertiesContainsFilter:Ci,filterProperties:Li});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var mu=function(){};mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu},mu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var vu=function(){},yu=function(){},_u={MAX_VALUE:{configurable:!0}};yu.isNaN=function(t){return Number.isNaN(t)},yu.doubleToLongBits=function(t){return t},yu.longBitsToDouble=function(t){return t},yu.isInfinite=function(t){return!Number.isFinite(t)},_u.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(yu,_u);var bu=function(){},xu=function(){},wu=function(){},Eu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Su={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Eu.prototype.setOrdinate=function(t,e){switch(t){case Eu.X:this.x=e;break;case Eu.Y:this.y=e;break;case Eu.Z:this.z=e;break;default:throw new vu("Invalid ordinate index: "+t)}},Eu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!mu.equalsWithTolerance(this.x,e.x,n)&&!!mu.equalsWithTolerance(this.y,e.y,n)}},Eu.prototype.getOrdinate=function(t){switch(t){case Eu.X:return this.x;case Eu.Y:return this.y;case Eu.Z:return this.z}throw new vu("Invalid ordinate index: "+t)},Eu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||yu.isNaN(this.z))&&yu.isNaN(t.z)},Eu.prototype.equals=function(t){return t instanceof Eu&&this.equals2D(t)},Eu.prototype.equalInZ=function(t,e){return mu.equalsWithTolerance(this.z,t.z,e)},Eu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Eu.prototype.clone=function(){},Eu.prototype.copy=function(){return new Eu(this)},Eu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Eu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Eu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Eu.prototype.hashCode=function(){var t=17;return t=37*t+Eu.hashCode(this.x),37*t+Eu.hashCode(this.y)},Eu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Eu.prototype.interfaces_=function(){return[bu,xu,Ai]},Eu.prototype.getClass=function(){return Eu},Eu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=yu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Su.DimensionalComparator.get=function(){return Mu},Su.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Su.NULL_ORDINATE.get=function(){return yu.NaN},Su.X.get=function(){return 0},Su.Y.get=function(){return 1},Su.Z.get=function(){return 2},Object.defineProperties(Eu,Su);var Mu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new vu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Mu.prototype.compare=function(t,e){var n=t,r=e,i=Mu.compare(n.x,r.x);if(0!==i)return i;var o=Mu.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Mu.compare(n.z,r.z)},Mu.prototype.interfaces_=function(){return[wu]},Mu.prototype.getClass=function(){return Mu},Mu.compare=function(t,e){return t<e?-1:t>e?1:yu.isNaN(t)?yu.isNaN(e)?0:-1:yu.isNaN(e)?1:0};var Tu=function(){};Tu.prototype.create=function(){},Tu.prototype.interfaces_=function(){return[]},Tu.prototype.getClass=function(){return Tu};var Cu=function(){},Lu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu},Cu.toLocationSymbol=function(t){switch(t){case Cu.EXTERIOR:return"e";case Cu.BOUNDARY:return"b";case Cu.INTERIOR:return"i";case Cu.NONE:return"-"}throw new vu("Unknown location value: "+t)},Lu.INTERIOR.get=function(){return 0},Lu.BOUNDARY.get=function(){return 1},Lu.EXTERIOR.get=function(){return 2},Lu.NONE.get=function(){return-1},Object.defineProperties(Cu,Lu);var Au=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Iu=function(){},Pu={LOG_10:{configurable:!0}};Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu},Iu.log10=function(t){var e=Math.log(t);return yu.isInfinite(e)?e:yu.isNaN(e)?e:e/Iu.LOG_10},Iu.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Iu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Iu.wrap=function(t,e){return t<0?e- -t%e:t%e},Iu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},Iu.average=function(t,e){return(t+e)/2},Pu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Iu,Pu);var Ru=function(t){this.str=t};Ru.prototype.append=function(t){this.str+=t},Ru.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Ru.prototype.toString=function(t){return this.str};var Ou=function(t){this.value=t};Ou.prototype.intValue=function(){return this.value},Ou.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Ou.isNaN=function(t){return Number.isNaN(t)};var Nu=function(){};Nu.isWhitespace=function(t){return t<=32&&t>=0||127===t},Nu.toUpperCase=function(t){return t.toUpperCase()};var Du=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Fu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Du.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Du.magnitude(n._hi),i=Du.TEN.pow(r);(n=n.divide(i)).gt(Du.TEN)?(n=n.divide(Du.TEN),r+=1):n.lt(Du.ONE)&&(n=n.multiply(Du.TEN),r-=1);for(var o=r+1,a=new Ru,s=Du.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,h=0;c>9?(l=!0,h="9"):h="0"+c,a.append(h),n=n.subtract(Du.valueOf(c)).multiply(Du.TEN),l&&n.selfAdd(Du.TEN);var f=!0,p=Du.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return e[0]=r,a.toString()},Du.prototype.sqr=function(){return this.multiply(this)},Du.prototype.doubleValue=function(){return this._hi+this._lo},Du.prototype.subtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Du.prototype.selfSubtract=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Du.prototype.min=function(t){return this.le(t)?this:t},Du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,h=null;return u=this._hi/n,c=Du.SPLIT*u,i=c-u,h=Du.SPLIT*n,i=c-i,o=u-i,a=h-n,l=u*n,a=h-a,s=n-a,h=i*a-l+i*s+o*a+o*s,c=(this._hi-l-h+this._lo-u*r)/n,h=u+c,this._hi=h,this._lo=u-h+c,this}},Du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Du.prototype.divide=function(){if(arguments[0]instanceof Du){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=Du.SPLIT*o)-(e=a-o)),u=e*(r=(u=Du.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new Du(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return yu.isNaN(c)?Du.createNaN():Du.copy(this).selfDivide(c,0)}},Du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Du.prototype.pow=function(t){if(0===t)return Du.valueOf(1);var e=new Du(this),n=Du.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Du.prototype.ceil=function(){if(this.isNaN())return Du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Du(t,e)},Du.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Du.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Du.prototype.setValue=function(){if(arguments[0]instanceof Du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Du.prototype.max=function(t){return this.ge(t)?this:t},Du.prototype.sqrt=function(){if(this.isZero())return Du.valueOf(0);if(this.isNegative())return Du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Du.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return i=this._hi+e,a=i-this._hi,o=i-a,o=e-a+(this._hi-o),s=o+this._lo,n=i+s,r=s+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,h=null,f=null,p=null,d=null,g=null,m=null;p=this._hi+u,h=this._lo+c,d=p-(g=p-this._hi),f=h-(m=h-this._lo);var v=(l=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=c-m+(this._lo-f))+(g+(p-l))),y=g+(l-v);return this._hi=v,this._lo=y,this}},Du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=Du.SPLIT*this._hi)-this._hi,c=Du.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=c+(i=u-l);return this._hi=l,this._lo=h,this}},Du.prototype.selfSqr=function(){return this.selfMultiply(this)},Du.prototype.floor=function(){if(this.isNaN())return Du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Du(t,e)},Du.prototype.negate=function(){return this.isNaN()?this:new Du(-this._hi,-this._lo)},Du.prototype.clone=function(){},Du.prototype.multiply=function(){if(arguments[0]instanceof Du){var t=arguments[0];return t.isNaN()?Du.createNaN():Du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return yu.isNaN(e)?Du.createNaN():Du.copy(this).selfMultiply(e,0)}},Du.prototype.isNaN=function(){return yu.isNaN(this._hi)},Du.prototype.intValue=function(){return Math.trunc(this._hi)},Du.prototype.toString=function(){var t=Du.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Du.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Du.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Du.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=Du.SPLIT*i)-(t=o-i)),n=(s=Du.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new Du(u,i-u+o)},Du.prototype.toSciNotation=function(){if(this.isZero())return Du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Du.prototype.abs=function(){return this.isNaN()?Du.NaN:this.isNegative()?this.negate():new Du(this)},Du.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Du.prototype.add=function(){if(arguments[0]instanceof Du){var t=arguments[0];return Du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Du.copy(this).selfAdd(e)}},Du.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Du){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Du.prototype.trunc=function(){return this.isNaN()?Du.NaN:this.isPositive()?this.floor():this.ceil()},Du.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Du.prototype.interfaces_=function(){return[Ai,bu,xu]},Du.prototype.getClass=function(){return Du},Du.sqr=function(t){return Du.valueOf(t).selfMultiply(t)},Du.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Du.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Du(e)}},Du.sqrt=function(t){return Du.valueOf(t).sqrt()},Du.parse=function(t){for(var e=0,n=t.length;Nu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Du,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,Nu.isDigit(c)){var l=c-"0";o.selfMultiply(Du.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=Ou.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=Du.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=Du.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},Du.createNaN=function(){return new Du(yu.NaN,yu.NaN)},Du.copy=function(t){return new Du(t)},Du.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Du.stringOfChar=function(t,e){for(var n=new Ru,r=0;r<e;r++)n.append(t);return n.toString()},Fu.PI.get=function(){return new Du(3.141592653589793,12246467991473532e-32)},Fu.TWO_PI.get=function(){return new Du(6.283185307179586,24492935982947064e-32)},Fu.PI_2.get=function(){return new Du(1.5707963267948966,6123233995736766e-32)},Fu.E.get=function(){return new Du(2.718281828459045,14456468917292502e-32)},Fu.NaN.get=function(){return new Du(yu.NaN,yu.NaN)},Fu.EPS.get=function(){return 123259516440783e-46},Fu.SPLIT.get=function(){return 134217729},Fu.MAX_PRINT_DIGITS.get=function(){return 32},Fu.TEN.get=function(){return Du.valueOf(10)},Fu.ONE.get=function(){return Du.valueOf(1)},Fu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Fu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Du,Fu);var Bu=function(){},ku={DP_SAFE_EPSILON:{configurable:!0}};Bu.prototype.interfaces_=function(){return[]},Bu.prototype.getClass=function(){return Bu},Bu.orientationIndex=function(t,e,n){var r=Bu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Du.valueOf(e.x).selfAdd(-t.x),o=Du.valueOf(e.y).selfAdd(-t.y),a=Du.valueOf(n.x).selfAdd(-e.x),s=Du.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},Bu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Bu.intersection=function(t,e,n,r){var i=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(e.x).selfSubtract(t.x)),o=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=Du.valueOf(r.x).selfSubtract(n.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),u=Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=Du.valueOf(t.x).selfAdd(Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=Du.valueOf(e.x).selfSubtract(t.x).selfMultiply(Du.valueOf(t.y).selfSubtract(n.y)),f=Du.valueOf(e.y).selfSubtract(t.y).selfMultiply(Du.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=Du.valueOf(n.y).selfAdd(Du.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new Eu(l,d)},Bu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return Bu.signum(a);r=i+o}else{if(!(i<0))return Bu.signum(a);if(o>=0)return Bu.signum(a);r=-i-o}var s=Bu.DP_SAFE_EPSILON*r;return a>=s||-a>=s?Bu.signum(a):2},Bu.signum=function(t){return t>0?1:t<0?-1:0},ku.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Bu,ku);var Uu=function(){},ju={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ju.X.get=function(){return 0},ju.Y.get=function(){return 1},ju.Z.get=function(){return 2},ju.M.get=function(){return 3},Uu.prototype.setOrdinate=function(t,e,n){},Uu.prototype.size=function(){},Uu.prototype.getOrdinate=function(t,e){},Uu.prototype.getCoordinate=function(){},Uu.prototype.getCoordinateCopy=function(t){},Uu.prototype.getDimension=function(){},Uu.prototype.getX=function(t){},Uu.prototype.clone=function(){},Uu.prototype.expandEnvelope=function(t){},Uu.prototype.copy=function(){},Uu.prototype.getY=function(t){},Uu.prototype.toCoordinateArray=function(){},Uu.prototype.interfaces_=function(){return[xu]},Uu.prototype.getClass=function(){return Uu},Object.defineProperties(Uu,ju);var Gu=function(){},zu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gu),Vu=function(){};Vu.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},Vu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Hu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,m=f.x-h.x,v=h.x*f.y-f.x*h.y,y=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=m*b-_*v,this.y=y*v-g*b,this.w=g*_-y*m}};Hu.prototype.getY=function(){var t=this.y/this.w;if(yu.isNaN(t)||yu.isInfinite(t))throw new zu;return t},Hu.prototype.getX=function(){var t=this.x/this.w;if(yu.isNaN(t)||yu.isInfinite(t))throw new zu;return t},Hu.prototype.getCoordinate=function(){var t=new Eu;return t.x=this.getX(),t.y=this.getY(),t},Hu.prototype.interfaces_=function(){return[]},Hu.prototype.getClass=function(){return Hu},Hu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,h=(o*c-u*a)/l,f=(s*a-i*c)/l;if(yu.isNaN(h)||yu.isInfinite(h)||yu.isNaN(f)||yu.isInfinite(f))throw new zu;return new Eu(h,f)};var qu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Eu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Wu={serialVersionUID:{configurable:!0}};qu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},qu.prototype.equals=function(t){if(!(t instanceof qu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},qu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new qu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new qu(e,r,n,i)},qu.prototype.isNull=function(){return this._maxx<this._minx},qu.prototype.getMaxX=function(){return this._maxx},qu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof qu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},qu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof qu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},qu.prototype.getMinY=function(){return this._miny},qu.prototype.getMinX=function(){return this._minx},qu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof qu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},qu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},qu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},qu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},qu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},qu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},qu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},qu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},qu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},qu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},qu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof qu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},qu.prototype.centre=function(){return this.isNull()?null:new Eu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},qu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof qu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},qu.prototype.getMaxY=function(){return this._maxy},qu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},qu.prototype.hashCode=function(){var t=17;return t=37*t+Eu.hashCode(this._minx),t=37*t+Eu.hashCode(this._maxx),t=37*t+Eu.hashCode(this._miny),37*t+Eu.hashCode(this._maxy)},qu.prototype.interfaces_=function(){return[bu,Ai]},qu.prototype.getClass=function(){return qu},qu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&!(l<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<s))}},Wu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(qu,Wu);var Xu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Yu=function(t){this.geometryFactory=t||new vl};Yu.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Xu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Xu.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Ju[n]&&(e=Ju[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Yu.prototype.write=function(t){return this.extractGeometry(t)},Yu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!$u[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+$u[e].apply(this,[t])+")"};var $u={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $u.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$u.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($u.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($u.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$u.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+$u.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+$u.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$u.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Ju={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Xu.spaces);return this.geometryFactory.createPoint(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Ju.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Xu.spaces),r.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Xu.spaces),r.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Xu.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Ju.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Xu.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Xu.trimParens,"$1"),n=Ju.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Xu.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Xu.trimParens,"$1"),r.push(Ju.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Zu=function(t){this.parser=new Yu(t)};Zu.prototype.write=function(t){return this.parser.write(t)},Zu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Ku=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Qu=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ku),tc=function(){};tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.shouldNeverReachHere=function(){if(0===arguments.length)tc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Qu("Should never reach here"+(null!==t?": "+t:""))}},tc.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],tc.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new Qu:new Qu(e)},tc.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],tc.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new Qu("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ec=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Eu,this._intPt[1]=new Eu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ec.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ec.prototype.getTopologySummary=function(){var t=new Ru;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ec.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ec.prototype.getIntersectionNum=function(){return this._result},ec.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ec.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ec.prototype.setPrecisionModel=function(t){this._precisionModel=t},ec.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ec.prototype.getIntersection=function(t){return this._intPt[t]},ec.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ec.prototype.hasIntersection=function(){return this._result!==ec.NO_INTERSECTION},ec.prototype.getEdgeDistance=function(t,e){return ec.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ec.prototype.isCollinear=function(){return this._result===ec.COLLINEAR_INTERSECTION},ec.prototype.toString=function(){return Zu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Zu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ec.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ec.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ec.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return tc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ec.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return tc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nc.DONT_INTERSECT.get=function(){return 0},nc.DO_INTERSECT.get=function(){return 1},nc.COLLINEAR.get=function(){return 2},nc.NO_INTERSECTION.get=function(){return 0},nc.POINT_INTERSECTION.get=function(){return 1},nc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ec,nc);var rc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new qu(this._inputLines[0][0],this._inputLines[0][1]),n=new qu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,qu.intersects(n,r,e)&&0===ac.orientationIndex(n,r,e)&&0===ac.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Hu.intersection(t,n,r,i)}catch(a){if(!(a instanceof zu))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new Eu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Bu.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);Vu.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&Vu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new Eu(t),o=new Eu(e),a=new Eu(n),s=new Eu(r),u=new Eu;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=qu.intersects(e,n,r),a=qu.intersects(e,n,i),s=qu.intersects(r,i,e),u=qu.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>c?o:c)+(s<h?s:h))/2,d=((a>l?a:l)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!qu.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=ac.orientationIndex(e,n,r),a=ac.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=ac.orientationIndex(r,i,e),u=ac.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new Eu(r):0===a?this._intPt[0]=new Eu(i):0===s?this._intPt[0]=new Eu(e):0===u&&(this._intPt[0]=new Eu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=ac.distancePointLine(t,n,r),a=ac.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=ac.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=ac.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(ec),ic=function(){};ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ic.signOfDet2x2(r,i,o,a)},ic.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(a=Math.floor(n/t),n-=a*t,(r-=a*e)<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(a=Math.floor(t/n),t-=a*n,(e-=a*r)<0)return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var oc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};oc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ic.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},oc.prototype.isPointInPolygon=function(){return this.getLocation()!==Cu.EXTERIOR},oc.prototype.getLocation=function(){return this._isPointOnSegment?Cu.BOUNDARY:this._crossingCount%2==1?Cu.INTERIOR:Cu.EXTERIOR},oc.prototype.isOnSegment=function(){return this._isPointOnSegment},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.locatePointInRing=function(){if(arguments[0]instanceof Eu&&Au(arguments[1],Uu)){for(var t=arguments[0],e=arguments[1],n=new oc(t),r=new Eu,i=new Eu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Eu&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new oc(a),c=1;c<s.length;c++){var l=s[c],h=s[c-1];if(u.countSegment(l,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var ac=function(){},sc={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},ac.orientationIndex=function(t,e,n){return Bu.orientationIndex(t,e,n)},ac.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(Au(arguments[0],Uu)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new Eu,c=new Eu,l=new Eu;a.getCoordinate(0,c),a.getCoordinate(1,l);var h=c.x;l.x-=h;for(var f=0,p=1;p<s-1;p++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(p+1,l),l.x-=h,f+=c.x*(u.y-l.y);return f/2}},ac.distanceLineLine=function(t,e,n,r){if(t.equals(e))return ac.distancePointLine(t,n,r);if(n.equals(r))return ac.distancePointLine(r,t,e);var i=!1;if(qu.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Iu.min(ac.distancePointLine(t,n,r),ac.distancePointLine(e,n,r),ac.distancePointLine(n,t,e),ac.distancePointLine(r,t,e)):0},ac.isPointInRing=function(t,e){return ac.locatePointInRing(t,e)!==Cu.EXTERIOR},ac.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Eu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},ac.isCCW=function(t){var e=t.length-1;if(e<3)throw new vu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=ac.computeOrientation(u,n,c),h=!1;return h=0===l?u.x>c.x:l>0,h},ac.locatePointInRing=function(t,e){return oc.locatePointInRing(t,e)},ac.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},ac.computeOrientation=function(t,e,n){return ac.orientationIndex(t,e,n)},ac.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new vu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=ac.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},ac.isOnLine=function(t,e){for(var n=new rc,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},sc.CLOCKWISE.get=function(){return-1},sc.RIGHT.get=function(){return ac.CLOCKWISE},sc.COUNTERCLOCKWISE.get=function(){return 1},sc.LEFT.get=function(){return ac.COUNTERCLOCKWISE},sc.COLLINEAR.get=function(){return 0},sc.STRAIGHT.get=function(){return ac.COLLINEAR},Object.defineProperties(ac,sc);var uc=function(){};uc.prototype.filter=function(t){},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};var cc=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},lc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};cc.prototype.isGeometryCollection=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION},cc.prototype.getFactory=function(){return this._factory},cc.prototype.getGeometryN=function(t){return this},cc.prototype.getArea=function(){return 0},cc.prototype.isRectangle=function(){return!1},cc.prototype.equals=function(){if(arguments[0]instanceof cc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof cc))return!1;var n=e;return this.equalsExact(n)}},cc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},cc.prototype.geometryChanged=function(){this.apply(cc.geometryChangedFilter)},cc.prototype.geometryChangedAction=function(){this._envelope=null},cc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},cc.prototype.getLength=function(){return 0},cc.prototype.getNumGeometries=function(){return 1},cc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},cc.prototype.getUserData=function(){return this._userData},cc.prototype.getSRID=function(){return this._SRID},cc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},cc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION)throw new vu("This method does not support GeometryCollection arguments")},cc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},cc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},cc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},cc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new qu(this._envelope)},cc.prototype.setSRID=function(t){this._SRID=t},cc.prototype.setUserData=function(t){this._userData=t},cc.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},cc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},cc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===cc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===cc.SORTINDEX_MULTIPOINT||this.getSortIndex()===cc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===cc.SORTINDEX_MULTIPOLYGON},cc.prototype.interfaces_=function(){return[xu,bu,Ai]},cc.prototype.getClass=function(){return cc},cc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},cc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},lc.serialVersionUID.get=function(){return 0x799ea46522854c00},lc.SORTINDEX_POINT.get=function(){return 0},lc.SORTINDEX_MULTIPOINT.get=function(){return 1},lc.SORTINDEX_LINESTRING.get=function(){return 2},lc.SORTINDEX_LINEARRING.get=function(){return 3},lc.SORTINDEX_MULTILINESTRING.get=function(){return 4},lc.SORTINDEX_POLYGON.get=function(){return 5},lc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},lc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},lc.geometryChangedFilter.get=function(){return hc},Object.defineProperties(cc,lc);var hc=function(){};hc.interfaces_=function(){return[uc]},hc.filter=function(t){t.geometryChangedAction()};var fc=function(){};fc.prototype.filter=function(t){},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var pc=function(){},dc={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};pc.prototype.isInBoundary=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},dc.Mod2BoundaryNodeRule.get=function(){return gc},dc.EndPointBoundaryNodeRule.get=function(){return mc},dc.MultiValentEndPointBoundaryNodeRule.get=function(){return vc},dc.MonoValentEndPointBoundaryNodeRule.get=function(){return yc},dc.MOD2_BOUNDARY_RULE.get=function(){return new gc},dc.ENDPOINT_BOUNDARY_RULE.get=function(){return new mc},dc.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vc},dc.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yc},dc.OGC_SFS_BOUNDARY_RULE.get=function(){return pc.MOD2_BOUNDARY_RULE},Object.defineProperties(pc,dc);var gc=function(){};gc.prototype.isInBoundary=function(t){return t%2==1},gc.prototype.interfaces_=function(){return[pc]},gc.prototype.getClass=function(){return gc};var mc=function(){};mc.prototype.isInBoundary=function(t){return t>0},mc.prototype.interfaces_=function(){return[pc]},mc.prototype.getClass=function(){return mc};var vc=function(){};vc.prototype.isInBoundary=function(t){return t>1},vc.prototype.interfaces_=function(){return[pc]},vc.prototype.getClass=function(){return vc};var yc=function(){};yc.prototype.isInBoundary=function(t){return 1===t},yc.prototype.interfaces_=function(){return[pc]},yc.prototype.getClass=function(){return yc};var _c=function(){};_c.prototype.add=function(){},_c.prototype.addAll=function(){},_c.prototype.isEmpty=function(){},_c.prototype.iterator=function(){},_c.prototype.size=function(){},_c.prototype.toArray=function(){},_c.prototype.remove=function(){};var bc=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),xc=function(){};xc.prototype.hasNext=function(){},xc.prototype.next=function(){},xc.prototype.remove=function(){};var wc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(_c);(Ii.prototype=new Error).name="NoSuchElementException";var Ec=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof _c&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,_c]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Sc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new bc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wc),Sc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ii;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xc),Mc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof Eu&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Eu){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}t.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],m=arguments[2],v=arguments[3],y=1;m>v&&(y=-1);for(var _=m;_!==v;_+=y)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Eu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Ec),Tc=function(){},Cc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Cc.ForwardComparator.get=function(){return Lc},Cc.BidirectionalComparator.get=function(){return Ac},Cc.coordArrayType.get=function(){return new Array(0).fill(null)},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Tc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Tc.indexOf(r,e)<0)return r}return null},Tc.scroll=function(t,e){var n=Tc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Vu.arraycopy(t,n,r,0,t.length-n),Vu.arraycopy(t,0,r,t.length-n,n),Vu.arraycopy(r,0,t,0,t.length)},Tc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Tc.intersection=function(t,e){for(var n=new Mc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Tc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tc.removeRepeatedPoints=function(t){return Tc.hasRepeatedPoints(t)?new Mc(t,!1).toCoordinateArray():t},Tc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Tc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Tc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Eu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new Eu(r[i+u])},Tc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Tc.envelope=function(t){for(var e=new qu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Tc.toCoordinateArray=function(t){return t.toArray(Tc.coordArrayType)},Tc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Tc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Tc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Tc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Tc.extract=function(t,e,n){e=Iu.clamp(e,0,t.length);var r=(n=Iu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Tc,Cc);var Lc=function(){};Lc.prototype.compare=function(t,e){return Tc.compare(t,e)},Lc.prototype.interfaces_=function(){return[wu]},Lc.prototype.getClass=function(){return Lc};var Ac=function(){};Ac.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Tc.compare(n,r);return Tc.isEqualReversed(n,r)?0:i},Ac.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Tc.increasingDirection(n),o=Tc.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},Ac.prototype.interfaces_=function(){return[wu]},Ac.prototype.getClass=function(){return Ac};var Ic=function(){};Ic.prototype.get=function(){},Ic.prototype.put=function(){},Ic.prototype.size=function(){},Ic.prototype.values=function(){},Ic.prototype.entrySet=function(){};var Pc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ic);(Pi.prototype=new Error).name="OperationNotSupported",(Ri.prototype=new _c).contains=function(){};var Rc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof _c&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Oc(this)},e}(Ri),Oc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ii;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Pi},e}(xc),Nc=0;(ki.prototype=new Pc).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},ki.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:Nc,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},ki.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ni(t)===Fi(Ni(Ni(t)))){var e=Bi(Ni(Ni(t)));1===Oi(e)?(Di(Ni(t),Nc),Di(e,Nc),Di(Ni(Ni(t)),1),t=Ni(Ni(t))):(t===Bi(Ni(t))&&(t=Ni(t),this.rotateLeft(t)),Di(Ni(t),Nc),Di(Ni(Ni(t)),1),this.rotateRight(Ni(Ni(t))))}else{var n=Fi(Ni(Ni(t)));1===Oi(n)?(Di(Ni(t),Nc),Di(n,Nc),Di(Ni(Ni(t)),1),t=Ni(Ni(t))):(t===Fi(Ni(t))&&(t=Ni(t),this.rotateRight(t)),Di(Ni(t),Nc),Di(Ni(Ni(t)),1),this.rotateLeft(Ni(Ni(t))))}this.root_.color=Nc},ki.prototype.values=function(){var t=new Ec,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=ki.successor(e));)t.add(e.value);return t},ki.prototype.entrySet=function(){var t=new Rc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=ki.successor(e));)t.add(e);return t},ki.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},ki.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},ki.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},ki.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},ki.prototype.size=function(){return this.size_};var Dc=function(){};Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Ui.prototype=new Ri,(ji.prototype=new Ui).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},ji.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},ji.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ji.prototype.remove=function(t){throw new Pi},ji.prototype.size=function(){return this.array_.length},ji.prototype.isEmpty=function(){return 0===this.array_.length},ji.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ji.prototype.iterator=function(){return new Fc(this)};var Fc=function(t){this.treeSet_=t,this.position_=0};Fc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ii;return this.treeSet_.array_[this.position_++]},Fc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Fc.prototype.remove=function(){throw new Pi};var Bc=function(){};Bc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Bc.asList=function(t){for(var e=new Ec,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var kc=function(){},Uc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Uc.P.get=function(){return 0},Uc.L.get=function(){return 1},Uc.A.get=function(){return 2},Uc.FALSE.get=function(){return-1},Uc.TRUE.get=function(){return-2},Uc.DONTCARE.get=function(){return-3},Uc.SYM_FALSE.get=function(){return"F"},Uc.SYM_TRUE.get=function(){return"T"},Uc.SYM_DONTCARE.get=function(){return"*"},Uc.SYM_P.get=function(){return"0"},Uc.SYM_L.get=function(){return"1"},Uc.SYM_A.get=function(){return"2"},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},kc.toDimensionSymbol=function(t){switch(t){case kc.FALSE:return kc.SYM_FALSE;case kc.TRUE:return kc.SYM_TRUE;case kc.DONTCARE:return kc.SYM_DONTCARE;case kc.P:return kc.SYM_P;case kc.L:return kc.SYM_L;case kc.A:return kc.SYM_A}throw new vu("Unknown dimension value: "+t)},kc.toDimensionValue=function(t){switch(Nu.toUpperCase(t)){case kc.SYM_FALSE:return kc.FALSE;case kc.SYM_TRUE:return kc.TRUE;case kc.SYM_DONTCARE:return kc.DONTCARE;case kc.SYM_P:return kc.P;case kc.SYM_L:return kc.L;case kc.SYM_A:return kc.A}throw new vu("Unknown dimension symbol: "+t)},Object.defineProperties(kc,Uc);var jc=function(){};jc.prototype.filter=function(t){},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var Gc=function(){};Gc.prototype.filter=function(t,e){},Gc.prototype.isDone=function(){},Gc.prototype.isGeometryChanged=function(){},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var zc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new vu("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new qu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Bc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=kc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=kc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new ji(Bc.asList(this._geometries)),n=new ji(Bc.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,a=this.getNumGeometries(),s=o.getNumGeometries(),u=0;u<a&&u<s;){var c=this.getGeometryN(u),l=o.getGeometryN(u),h=c.compareToSameClass(l,i);if(0!==h)return h;u++}return u<a?1:u<s?-1:0}},e.prototype.apply=function(){if(Au(arguments[0],fc))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Au(arguments[0],Gc)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Au(arguments[0],jc)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(Au(arguments[0],uc)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),tc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(cc),Vc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Hc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(zc),Hc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=pc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Hc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Hc.prototype.getBoundary=function(){return this._geom instanceof $c?this.boundaryLineString(this._geom):this._geom instanceof Vc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Hc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Hc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Hc.prototype.computeBoundaryCoordinates=function(t){var e=new Ec;this._endpointMap=new ki;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Tc.toCoordinateArray(e)},Hc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new qc,this._endpointMap.put(t,e)),e.count++},Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Hc(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Hc(e,n).getBoundary()}};var qc=function(){this.count=null};qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var Wc=function(){},Xc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Wc.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Wc.NEWLINE}catch(t){if(!(t instanceof Gi))throw t;tc.shouldNeverReachHere()}return o}},Wc.split=function(t,e){for(var n=e.length,r=new Ec,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Wc.toString=function(){if(1===arguments.length){var t=arguments[0];return Wc.SIMPLE_ORDINATE_FORMAT.format(t)}},Wc.spaces=function(t){return Wc.chars(" ",t)},Xc.NEWLINE.get=function(){return Vu.getProperty("line.separator")},Xc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wc,Xc);var Yc=function(){};Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Yc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Uu.X)===t.getOrdinate(e-1,Uu.X)&&t.getOrdinate(0,Uu.Y)===t.getOrdinate(e-1,Uu.Y)},Yc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!yu.isNaN(a)||!yu.isNaN(s)))return!1}return!0},Yc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Yc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Yc.copy(e,i-1,r,o,1);return r},Yc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Yc.swap(t,r,e-r)},Yc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Yc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Yc.copyCoord(t,e+o,n,r+o)},Yc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Ru;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Yc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Yc.createClosedRing(t,e,4):e.getOrdinate(0,Uu.X)===e.getOrdinate(n-1,Uu.X)&&e.getOrdinate(0,Uu.Y)===e.getOrdinate(n-1,Uu.Y)?e:Yc.createClosedRing(t,e,n+1)},Yc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Yc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Yc.copy(e,0,r,o,1);return r};var $c=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new qu:this._points.expandEnvelope(new qu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Yc.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return ac.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Yc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(Au(arguments[0],fc))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Au(arguments[0],Gc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else Au(arguments[0],jc)?arguments[0].filter(this):Au(arguments[0],uc)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Hc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new vu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(cc),Jc=function(){};Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc};var Zc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new qu;var t=new qu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return kc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Au(arguments[0],fc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Au(arguments[0],Gc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Au(arguments[0],jc)?arguments[0].filter(this):Au(arguments[0],uc)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),tc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Jc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(cc),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Qc=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new vu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new vu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(ac.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(ac.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o===(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Bc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Vu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Tc.minCoordinate(e.getCoordinates());Tc.scroll(r,i),Vu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],ac.isCCW(e.getCoordinates())===n&&Tc.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,a=this._shell,s=o._shell,u=a.compareToSameClass(s,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),h=0;h<c&&h<l;){var f=this.getInteriorRingN(h),p=o.getInteriorRingN(h),d=f.compareToSameClass(p,i);if(0!==d)return d;h++}return h<c?1:h<l?-1:0}},e.prototype.apply=function(t){if(Au(t,fc)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Au(t,Gc)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Au(t,jc))t.filter(this);else if(Au(t,uc)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(cc),tl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return kc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(zc),el=function(t){function e(e,n){e instanceof Eu&&n instanceof vl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return kc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Yc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new vu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new vu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}($c),nl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ec,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(zc),rl=function(t){this._factory=t||null,this._isUserDataCopied=!1},il={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};rl.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},rl.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},rl.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof zc?this.editGeometryCollection(t,e):t instanceof Qc?this.editPolygon(t,e):t instanceof Zc?e.edit(t,this._factory):t instanceof $c?e.edit(t,this._factory):(tc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},rl.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Ec,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===tl?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Vc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===nl?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},rl.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Ec,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl},rl.GeometryEditorOperation=function(){},il.NoOpGeometryOperation.get=function(){return ol},il.CoordinateOperation.get=function(){return al},il.CoordinateSequenceOperation.get=function(){return sl},Object.defineProperties(rl,il);var ol=function(){};ol.prototype.edit=function(t,e){return t},ol.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},ol.prototype.getClass=function(){return ol};var al=function(){};al.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof el?e.createLinearRing(n):t instanceof $c?e.createLineString(n):t instanceof Zc?n.length>0?e.createPoint(n[0]):e.createPoint():t},al.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},al.prototype.getClass=function(){return al};var sl=function(){};sl.prototype.edit=function(t,e){return t instanceof el?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof $c?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Zc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},sl.prototype.interfaces_=function(){return[rl.GeometryEditorOperation]},sl.prototype.getClass=function(){return sl};var ul=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Eu}else if(Au(arguments[0],Uu)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new Eu}},cl={serialVersionUID:{configurable:!0}};ul.prototype.setOrdinate=function(t,e,n){switch(e){case Uu.X:this._coordinates[t].x=n;break;case Uu.Y:this._coordinates[t].y=n;break;case Uu.Z:this._coordinates[t].z=n;break;default:throw new vu("invalid ordinateIndex")}},ul.prototype.size=function(){return this._coordinates.length},ul.prototype.getOrdinate=function(t,e){switch(e){case Uu.X:return this._coordinates[t].x;case Uu.Y:return this._coordinates[t].y;case Uu.Z:return this._coordinates[t].z}return yu.NaN},ul.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ul.prototype.getCoordinateCopy=function(t){return new Eu(this._coordinates[t])},ul.prototype.getDimension=function(){return this._dimension},ul.prototype.getX=function(t){return this._coordinates[t].x},ul.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ul(t,this._dimension)},ul.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ul.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ul(t,this._dimension)},ul.prototype.toString=function(){if(this._coordinates.length>0){var t=new Ru(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ul.prototype.getY=function(t){return this._coordinates[t].y},ul.prototype.toCoordinateArray=function(){return this._coordinates},ul.prototype.interfaces_=function(){return[Uu,Ai]},ul.prototype.getClass=function(){return ul},cl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ul,cl);var ll=function(){},hl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ll.prototype.readResolve=function(){return ll.instance()},ll.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ul(t)}if(Au(arguments[0],Uu)){var e=arguments[0];return new ul(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new ul(n):new ul(n,r)}},ll.prototype.interfaces_=function(){return[Tu,Ai]},ll.prototype.getClass=function(){return ll},ll.instance=function(){return ll.instanceObject},hl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},hl.instanceObject.get=function(){return new ll},Object.defineProperties(ll,hl);var fl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Ec,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rc;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ic),pl=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gl){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},dl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pl.prototype.equals=function(t){if(!(t instanceof pl))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pl.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Ou(n).compareTo(new Ou(r))},pl.prototype.getScale=function(){return this._scale},pl.prototype.isFloating=function(){return this._modelType===pl.FLOATING||this._modelType===pl.FLOATING_SINGLE},pl.prototype.getType=function(){return this._modelType},pl.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pl.FLOATING?t="Floating":this._modelType===pl.FLOATING_SINGLE?t="Floating-Single":this._modelType===pl.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pl.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return yu.isNaN(t)?t:this._modelType===pl.FLOATING_SINGLE?t:this._modelType===pl.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Eu){var e=arguments[0];if(this._modelType===pl.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pl.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pl.FLOATING?t=16:this._modelType===pl.FLOATING_SINGLE?t=6:this._modelType===pl.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pl.prototype.setScale=function(t){this._scale=Math.abs(t)},pl.prototype.interfaces_=function(){return[Ai,bu]},pl.prototype.getClass=function(){return pl},pl.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},dl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},dl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pl,dl);var gl=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ml={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gl.prototype.readResolve=function(){return gl.nameToTypeMap.get(this._name)},gl.prototype.toString=function(){return this._name},gl.prototype.interfaces_=function(){return[Ai]},gl.prototype.getClass=function(){return gl},ml.serialVersionUID.get=function(){return-552860263173159e4},ml.nameToTypeMap.get=function(){return new fl},Object.defineProperties(gl,ml),pl.Type=gl,pl.FIXED=new gl("FIXED"),pl.FLOATING=new gl("FLOATING"),pl.FLOATING_SINGLE=new gl("FLOATING SINGLE");var vl=function t(){this._precisionModel=new pl,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Au(arguments[0],Tu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pl&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},yl={serialVersionUID:{configurable:!0}};vl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Eu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMinX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMinY()),new Eu(t.getMinX(),t.getMinY())]),null)},vl.prototype.createLineString=function(t){return t?t instanceof Array?new $c(this.getCoordinateSequenceFactory().create(t),this):Au(t,Uu)?new $c(t,this):void 0:new $c(this.getCoordinateSequenceFactory().create([]),this)},vl.prototype.createMultiLineString=function(){if(0===arguments.length)return new Vc(null,this);if(1===arguments.length){var t=arguments[0];return new Vc(t,this)}},vl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(vl.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qc)return this.createMultiPolygon(vl.toPolygonArray(t));if(s instanceof $c)return this.createMultiLineString(vl.toLineStringArray(t));if(s instanceof Zc)return this.createMultiPoint(vl.toPointArray(t));tc.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},vl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},vl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Au(arguments[0],Uu)){var e=arguments[0];return new Zc(e,this)}}},vl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},vl.prototype.createPolygon=function(){if(0===arguments.length)return new Qc(null,null,this);if(1===arguments.length){if(Au(arguments[0],Uu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof el){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Qc(r,i,this)}},vl.prototype.getSRID=function(){return this._SRID},vl.prototype.createGeometryCollection=function(){if(0===arguments.length)return new zc(null,this);if(1===arguments.length){var t=arguments[0];return new zc(t,this)}},vl.prototype.createGeometry=function(t){return new rl(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},vl.prototype.getPrecisionModel=function(){return this._precisionModel},vl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Au(arguments[0],Uu)){var e=arguments[0];return new el(e,this)}}},vl.prototype.createMultiPolygon=function(){if(0===arguments.length)return new nl(null,this);if(1===arguments.length){var t=arguments[0];return new nl(t,this)}},vl.prototype.createMultiPoint=function(){if(0===arguments.length)return new tl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new tl(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Au(arguments[0],Uu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Yc.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},vl.prototype.interfaces_=function(){return[Ai]},vl.prototype.getClass=function(){return vl},vl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.getDefaultCoordinateSequenceFactory=function(){return ll.instance()},vl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},yl.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(vl,yl);var _l=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],bl=function(t){this.geometryFactory=t||new vl};bl.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xl[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_l.indexOf(n)?xl[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xl[n].apply(this,[e.geometries]):xl[n].apply(this,[e])},bl.prototype.write=function(t){var e=t.getGeometryType();if(!wl[e])throw new Error("Geometry is not supported");return wl[e].apply(this,[t])};var xl={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xl[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xl.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Eu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Eu(t[0],t[1]),new Eu(t[2],t[1]),new Eu(t[2],t[3]),new Eu(t[0],t[3]),new Eu(t[0],t[1])])},Point:function(t){var e=new Eu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xl.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xl.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xl.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xl.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xl.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xl.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},wl={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wl.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(wl.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=wl.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=wl.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wl.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(wl[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},El=function(t){this.geometryFactory=t||new vl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bl(this.geometryFactory)};El.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pl.FIXED&&this.reducePrecision(e),e},El.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Sl=function(){this.parser=new bl(this.geometryFactory)};Sl.prototype.write=function(t){return this.parser.write(t)};var Ml=function(){},Tl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml},Ml.opposite=function(t){return t===Ml.LEFT?Ml.RIGHT:t===Ml.RIGHT?Ml.LEFT:t},Tl.ON.get=function(){return 0},Tl.LEFT.get=function(){return 1},Tl.RIGHT.get=function(){return 2},Object.defineProperties(Ml,Tl),(zi.prototype=new Error).name="EmptyStackException",(Vi.prototype=new wc).add=function(t){return this.array_.push(t),!0},Vi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Vi.prototype.push=function(t){return this.array_.push(t),t},Vi.prototype.pop=function(t){if(0===this.array_.length)throw new zi;return this.array_.pop()},Vi.prototype.peek=function(){if(0===this.array_.length)throw new zi;return this.array_[this.array_.length-1]},Vi.prototype.empty=function(){return 0===this.array_.length},Vi.prototype.isEmpty=function(){return this.empty()},Vi.prototype.search=function(t){return this.array_.indexOf(t)},Vi.prototype.size=function(){return this.array_.length},Vi.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Cl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Cl.prototype.getCoordinate=function(){return this._minCoord},Cl.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Cl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();tc.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=ac.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===ac.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===ac.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Cl.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ml.LEFT;return n[e].y<n[e+1].y&&(r=Ml.RIGHT),r},Cl.prototype.getEdge=function(){return this._orientedDe},Cl.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Cl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Cl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}tc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ml.LEFT&&(this._orientedDe=this._minDe.getSym())},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl};var Ll=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new Eu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Ku),Al=function(){this.array_=[]};Al.prototype.addLast=function(t){this.array_.push(t)},Al.prototype.removeFirst=function(){return this.array_.shift()},Al.prototype.isEmpty=function(){return 0===this.array_.length};var Il=function(){this._finder=null,this._dirEdgeList=new Ec,this._nodes=new Ec,this._rightMostCoord=null,this._env=null,this._finder=new Cl};Il.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Il.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Il.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ll("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Il.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ml.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Il.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Il.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ml.RIGHT)>=1&&e.getDepth(Ml.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Il.prototype.computeDepths=function(t){var e=new Rc,n=new Al,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Il.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Il.prototype.getEnvelope=function(){if(null===this._env){for(var t=new qu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Il.prototype.addReachable=function(t){var e=new Vi;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Il.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ml.LEFT,t.getDepth(Ml.RIGHT)),e.setDepth(Ml.RIGHT,t.getDepth(Ml.LEFT))},Il.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Il.prototype.getNodes=function(){return this._nodes},Il.prototype.getDirectedEdges=function(){return this._dirEdgeList},Il.prototype.interfaces_=function(){return[bu]},Il.prototype.getClass=function(){return Il};var Pl=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ml.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ml.ON]=o,this.location[Ml.LEFT]=a,this.location[Ml.RIGHT]=s}};Pl.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Pl.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Cu.NONE)return!1;return!0},Pl.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Cu.NONE&&(this.location[e]=t)},Pl.prototype.isLine=function(){return 1===this.location.length},Pl.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ml.ON]=this.location[Ml.ON],e[Ml.LEFT]=Cu.NONE,e[Ml.RIGHT]=Cu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Cu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Pl.prototype.getLocations=function(){return this.location},Pl.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ml.LEFT];this.location[Ml.LEFT]=this.location[Ml.RIGHT],this.location[Ml.RIGHT]=t},Pl.prototype.toString=function(){var t=new Ru;return this.location.length>1&&t.append(Cu.toLocationSymbol(this.location[Ml.LEFT])),t.append(Cu.toLocationSymbol(this.location[Ml.ON])),this.location.length>1&&t.append(Cu.toLocationSymbol(this.location[Ml.RIGHT])),t.toString()},Pl.prototype.setLocations=function(t,e,n){this.location[Ml.ON]=t,this.location[Ml.LEFT]=e,this.location[Ml.RIGHT]=n},Pl.prototype.get=function(t){return t<this.location.length?this.location[t]:Cu.NONE},Pl.prototype.isArea=function(){return this.location.length>1},Pl.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Cu.NONE)return!0;return!1},Pl.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ml.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Pl.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Cu.NONE)},Pl.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Pl.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var Rl=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Pl(e),this.elt[1]=new Pl(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Pl(n.elt[0]),this.elt[1]=new Pl(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Pl(Cu.NONE),this.elt[1]=new Pl(Cu.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Pl(o,a,s),this.elt[1]=new Pl(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new Pl(Cu.NONE,Cu.NONE,Cu.NONE),this.elt[1]=new Pl(Cu.NONE,Cu.NONE,Cu.NONE),this.elt[u].setLocations(c,l,h)}};Rl.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Rl.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Rl.prototype.isNull=function(t){return this.elt[t].isNull()},Rl.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Rl.prototype.isLine=function(t){return this.elt[t].isLine()},Rl.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Pl(t.elt[e]):this.elt[e].merge(t.elt[e])},Rl.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Rl.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ml.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Rl.prototype.toString=function(){var t=new Ru;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Rl.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Rl.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Rl.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ml.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Rl.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Rl.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Rl.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Pl(this.elt[t].location[0]))},Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl},Rl.toLineLabel=function(t){for(var e=new Rl(Cu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ol=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ec,this._pts=new Ec,this._label=new Rl(Cu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ec,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ol.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ac.isCCW(this._ring.getCoordinates())},Ol.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ol.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ll("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ll("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();tc.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Ol.prototype.getLinearRing=function(){return this._ring},Ol.prototype.getCoordinate=function(t){return this._pts.get(t)},Ol.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Ol.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Ol.prototype.isHole=function(){return this._isHole},Ol.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Ol.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!ac.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ol.prototype.addHole=function(t){this._holes.add(t)},Ol.prototype.isShell=function(){return null===this._shell},Ol.prototype.getLabel=function(){return this._label},Ol.prototype.getEdges=function(){return this._edges},Ol.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ol.prototype.getShell=function(){return this._shell},Ol.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Ml.RIGHT);if(r===Cu.NONE)return null;if(this._label.getLocation(n)===Cu.NONE)return this._label.setLocation(n,r),null}},Ol.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Ol.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol};var Nl=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ol),Dl=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Ec,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Nl(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ol),Fl=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Fl.prototype.setVisited=function(t){this._isVisited=t},Fl.prototype.setInResult=function(t){this._isInResult=t},Fl.prototype.isCovered=function(){return this._isCovered},Fl.prototype.isCoveredSet=function(){return this._isCoveredSet},Fl.prototype.setLabel=function(t){this._label=t},Fl.prototype.getLabel=function(){return this._label},Fl.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fl.prototype.updateIM=function(t){tc.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fl.prototype.isInResult=function(){return this._isInResult},Fl.prototype.isVisited=function(){return this._isVisited},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl};var Bl=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Rl(0,Cu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Cu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Cu.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Rl(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Rl)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===Cu.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Cu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Cu.BOUNDARY:n=Cu.INTERIOR;break;case Cu.INTERIOR:default:n=Cu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fl),kl=function(){this.nodeMap=new ki,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};kl.prototype.find=function(t){return this.nodeMap.get(t)},kl.prototype.addNode=function(){if(arguments[0]instanceof Eu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Bl){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},kl.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},kl.prototype.iterator=function(){return this.nodeMap.values().iterator()},kl.prototype.values=function(){return this.nodeMap.values()},kl.prototype.getBoundaryNodes=function(t){for(var e=new Ec,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Cu.BOUNDARY&&e.add(r)}return e},kl.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},kl.prototype.interfaces_=function(){return[]},kl.prototype.getClass=function(){return kl};var Ul=function(){},jl={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.isNorthern=function(t){return t===Ul.NE||t===Ul.NW},Ul.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Ul.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Ul.isInHalfPlane=function(t,e){return e===Ul.SE?t===Ul.SE||t===Ul.SW:t===e||t===e+1},Ul.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ul.NE:Ul.SE:e>=0?Ul.NW:Ul.SW}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new vu("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ul.NE:Ul.SE:r.y>=n.y?Ul.NW:Ul.SW}},jl.NE.get=function(){return 0},jl.NW.get=function(){return 1},jl.SW.get=function(){return 2},jl.SE.get=function(){return 3},Object.defineProperties(Ul,jl);var Gl=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Gl.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ac.computeOrientation(t._p0,t._p1,this._p1)},Gl.prototype.getDy=function(){return this._dy},Gl.prototype.getCoordinate=function(){return this._p0},Gl.prototype.setNode=function(t){this._node=t},Gl.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Gl.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Gl.prototype.getDirectedCoordinate=function(){return this._p1},Gl.prototype.getDx=function(){return this._dx},Gl.prototype.getLabel=function(){return this._label},Gl.prototype.getEdge=function(){return this._edge},Gl.prototype.getQuadrant=function(){return this._quadrant},Gl.prototype.getNode=function(){return this._node},Gl.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Gl.prototype.computeLabel=function(t){},Gl.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Ul.quadrant(this._dx,this._dy),tc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Gl.prototype.interfaces_=function(){return[bu]},Gl.prototype.getClass=function(){return Gl};var zl=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Rl(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ll("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ml.LEFT)===Cu.INTERIOR&&this._label.getLocation(e,Ml.RIGHT)===Cu.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ml.LEFT]+"/"+this._depth[Ml.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Cu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Cu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ml.LEFT&&(r=-1);var i=Ml.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Cu.EXTERIOR&&e===Cu.INTERIOR?1:t===Cu.INTERIOR&&e===Cu.EXTERIOR?-1:0},e}(Gl),Vl=function(){};Vl.prototype.createNode=function(t){return new Bl(t,null)},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};var Hl=function(){if(this._edges=new Ec,this._nodes=null,this._edgeEndList=new Ec,0===arguments.length)this._nodes=new kl(new Vl);else if(1===arguments.length){var t=arguments[0];this._nodes=new kl(t)}};Hl.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Hl.prototype.find=function(t){return this._nodes.find(t)},Hl.prototype.addNode=function(){if(arguments[0]instanceof Bl){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this._nodes.addNode(e)}},Hl.prototype.getNodeIterator=function(){return this._nodes.iterator()},Hl.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Hl.prototype.debugPrintln=function(t){Vu.out.println(t)},Hl.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Cu.BOUNDARY},Hl.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Hl.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&ac.computeOrientation(t,e,r)===ac.COLLINEAR&&Ul.quadrant(t,e)===Ul.quadrant(n,r)},Hl.prototype.getEdgeEnds=function(){return this._edgeEndList},Hl.prototype.debugPrint=function(t){Vu.out.print(t)},Hl.prototype.getEdgeIterator=function(){return this._edges.iterator()},Hl.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Hl.prototype.insertEdge=function(t){this._edges.add(t)},Hl.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Hl.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new zl(n,!0),i=new zl(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Hl.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Hl.prototype.getNodes=function(){return this._nodes.values()},Hl.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var ql=function(){this._geometryFactory=null,this._shellList=new Ec;var t=arguments[0];this._geometryFactory=t};ql.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},ql.prototype.computePolygons=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},ql.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ll("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},ql.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Ec,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},ql.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},ql.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Dl(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},ql.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},ql.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},ql.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(r)&&ac.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||a.contains(l))&&(o=u)}return o},ql.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return tc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},ql.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Hl.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Ec,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql};var Wl=function(){};Wl.prototype.getBounds=function(){},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl};var Xl=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Xl.prototype.getItem=function(){return this._item},Xl.prototype.getBounds=function(){return this._bounds},Xl.prototype.interfaces_=function(){return[Wl,Ai]},Xl.prototype.getClass=function(){return Xl};var Yl=function(){this._size=null,this._items=null,this._size=0,this._items=new Ec,this._items.add(null)};Yl.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Yl.prototype.size=function(){return this._size},Yl.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Yl.prototype.clear=function(){this._size=0,this._items.clear()},Yl.prototype.isEmpty=function(){return 0===this._size},Yl.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var $l=function(){};$l.prototype.visitItem=function(t){},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l};var Jl=function(){};Jl.prototype.insert=function(t,e){},Jl.prototype.remove=function(t,e){},Jl.prototype.query=function(){},Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl};var Zl=function(){if(this._childBoundables=new Ec,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Kl={serialVersionUID:{configurable:!0}};Zl.prototype.getLevel=function(){return this._level},Zl.prototype.size=function(){return this._childBoundables.size()},Zl.prototype.getChildBoundables=function(){return this._childBoundables},Zl.prototype.addChildBoundable=function(t){tc.isTrue(null===this._bounds),this._childBoundables.add(t)},Zl.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Zl.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Zl.prototype.interfaces_=function(){return[Wl,Ai]},Zl.prototype.getClass=function(){return Zl},Kl.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Zl,Kl);var Ql=function(){};Ql.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Ql.min=function(t){return Ql.sort(t),t.get(0)},Ql.sort=function(t,e){var n=t.toArray();e?Bc.sort(n,e):Bc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Ql.singletonList=function(t){var e=new Ec;return e.add(t),e};var th=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};th.prototype.expandToQueue=function(t,e){var n=th.isComposite(this._boundable1),r=th.isComposite(this._boundable2);if(n&&r)return th.area(this._boundable1)>th.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new vu("neither boundable is composite")},th.prototype.isLeaves=function(){return!(th.isComposite(this._boundable1)||th.isComposite(this._boundable2))},th.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},th.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new th(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},th.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},th.prototype.getDistance=function(){return this._distance},th.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},th.prototype.interfaces_=function(){return[bu]},th.prototype.getClass=function(){return th},th.area=function(t){return t.getBounds().getArea()},th.isComposite=function(t){return t instanceof Zl};var eh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Ec,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];tc.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};eh.prototype.getNodeCapacity=function(){return this._nodeCapacity},eh.prototype.lastNode=function(t){return t.get(t.size()-1)},eh.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Zl?t+=this.size(n):n instanceof Xl&&(t+=1)}return t}},eh.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Xl&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},eh.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Ec:t}if(1===arguments.length){for(var e=arguments[0],n=new Ec,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Zl){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Xl?n.add(i.getItem()):tc.shouldNeverReachHere()}return n.size()<=0?null:n}},eh.prototype.insert=function(t,e){tc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xl(t,e))},eh.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Ec;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(tc.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Zl?this.boundablesAtLevel(n,a,i):(tc.isTrue(a instanceof Xl),-1===n&&i.add(a))}return null}},eh.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Ec;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(Au(arguments[2],$l)&&arguments[0]instanceof Object&&arguments[1]instanceof Zl)for(var i=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),u=0;u<s.size();u++){var c=s.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Zl?this.query(i,c,a):c instanceof Xl?a.visitItem(c.getItem()):tc.shouldNeverReachHere())}else if(Au(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Zl)for(var l=arguments[0],h=arguments[1],f=arguments[2],p=h.getChildBoundables(),d=0;d<p.size();d++){var g=p.get(d);this.getIntersectsOp().intersects(g.getBounds(),l)&&(g instanceof Zl?this.query(l,g,f):g instanceof Xl?f.add(g.getItem()):tc.shouldNeverReachHere())}},eh.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},eh.prototype.getRoot=function(){return this.build(),this._root},eh.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Zl&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},eh.prototype.createHigherLevels=function(t,e){tc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},eh.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Zl){var r=this.depth(n);r>t&&(t=r)}}return t+1}},eh.prototype.createParentBoundables=function(t,e){tc.isTrue(!t.isEmpty());var n=new Ec;n.add(this.createNode(e));var r=new Ec(t);Ql.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},eh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},eh.prototype.interfaces_=function(){return[Ai]},eh.prototype.getClass=function(){return eh},eh.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nh.IntersectsOp.get=function(){return rh},nh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(eh,nh);var rh=function(){},ih=function(){};ih.prototype.distance=function(t,e){},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih};var oh=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){tc.isTrue(t.length>0);for(var n=new Ec,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new ah(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Ec;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Au(arguments[2],$l)&&arguments[0]instanceof Object&&arguments[1]instanceof Zl){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(Au(arguments[2],wc)&&arguments[0]instanceof Object&&arguments[1]instanceof Zl){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){tc.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Ec(t);Ql.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Au(arguments[0],ih)){var t=arguments[0],n=new th(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof th){var r=arguments[0];return this.nearestNeighbour(r,yu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Au(arguments[1],ih)){var i=arguments[0],o=arguments[1],a=new th(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof th&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new Yl;for(l.add(s);!l.isEmpty()&&u>0;){var h=l.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,c=h):h.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],m=new Xl(p,d),v=new th(this.getRoot(),m,g);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[Jl,Ai]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return ah},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[wu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(eh),ah=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new qu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zl),sh=function(){};sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh},sh.relativeSign=function(t,e){return t<e?-1:t>e?1:0},sh.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=sh.relativeSign(e.x,n.x),i=sh.relativeSign(e.y,n.y);switch(t){case 0:return sh.compareValue(r,i);case 1:return sh.compareValue(i,r);case 2:return sh.compareValue(i,-r);case 3:return sh.compareValue(-r,i);case 4:return sh.compareValue(-r,-i);case 5:return sh.compareValue(-i,-r);case 6:return sh.compareValue(-i,r);case 7:return sh.compareValue(r,-i)}return tc.shouldNeverReachHere("invalid octant value"),0},sh.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var uh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Eu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};uh.prototype.getCoordinate=function(){return this.coord},uh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},uh.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:sh.compare(this._segmentOctant,this.coord,e.coord)},uh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},uh.prototype.isInterior=function(){return this._isInterior},uh.prototype.interfaces_=function(){return[bu]},uh.prototype.getClass=function(){return uh};var ch=function(){this._nodeMap=new ki,this._edge=null;var t=arguments[0];this._edge=t};ch.prototype.getSplitCoordinates=function(){var t=new Mc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ch.prototype.addCollapsedNodes=function(){var t=new Ec;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ch.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ch.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Ou(e+1))}},ch.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new Eu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Eu(e.coord))},ch.prototype.iterator=function(){return this._nodeMap.values().iterator()},ch.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ch.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ch.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Ou(e[0])),r=i}},ch.prototype.getEdge=function(){return this._edge},ch.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ch.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Eu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new Eu(e.coord)),new ph(o,this._edge.getData())},ch.prototype.add=function(t,e){var n=new uh(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(tc.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ch.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Ku("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Ku("bad split edge end point at "+i)},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var lh=function(){};lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},lh.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new vu("Cannot compute the octant for two identical points "+i);return lh.octant(a,s)}};var hh=function(){};hh.prototype.getCoordinates=function(){},hh.prototype.size=function(){},hh.prototype.getCoordinate=function(t){},hh.prototype.isClosed=function(){},hh.prototype.setData=function(t){},hh.prototype.getData=function(){},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var fh=function(){};fh.prototype.addIntersection=function(t,e){},fh.prototype.interfaces_=function(){return[hh]},fh.prototype.getClass=function(){return fh};var ph=function(){this._nodeList=new ch(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};ph.prototype.getCoordinates=function(){return this._pts},ph.prototype.size=function(){return this._pts.length},ph.prototype.getCoordinate=function(t){return this._pts[t]},ph.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ph.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},ph.prototype.setData=function(t){this._data=t},ph.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:lh.octant(t,e)},ph.prototype.getData=function(){return this._data},ph.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new Eu(n.getIntersection(i));this.addIntersection(o,r)}},ph.prototype.toString=function(){return Zu.toLineString(new ul(this._pts))},ph.prototype.getNodeList=function(){return this._nodeList},ph.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},ph.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},ph.prototype.interfaces_=function(){return[fh]},ph.prototype.getClass=function(){return ph},ph.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ec;return ph.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var dh=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Eu,this.p1=new Eu;else if(1===arguments.length){var t=arguments[0];this.p0=new Eu(t.p0),this.p1=new Eu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new Eu(e,n),this.p1=new Eu(r,i)}},gh={serialVersionUID:{configurable:!0}};dh.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},dh.prototype.orientationIndex=function(){if(arguments[0]instanceof dh){var t=arguments[0],e=ac.orientationIndex(this.p0,this.p1,t.p0),n=ac.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Eu){var r=arguments[0];return ac.orientationIndex(this.p0,this.p1,r)}},dh.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},dh.prototype.isVertical=function(){return this.p0.x===this.p1.x},dh.prototype.equals=function(t){if(!(t instanceof dh))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},dh.prototype.intersection=function(t){var e=new rc;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},dh.prototype.project=function(){if(arguments[0]instanceof Eu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Eu(t);var e=this.projectionFactor(t),n=new Eu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof dh){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new dh(a,s)}},dh.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},dh.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},dh.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},dh.prototype.distancePerpendicular=function(t){return ac.distancePointLinePerpendicular(t,this.p0,this.p1)},dh.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},dh.prototype.midPoint=function(){return dh.midPoint(this.p0,this.p1)},dh.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?yu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},dh.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=yu.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},dh.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},dh.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},dh.prototype.getLength=function(){return this.p0.distance(this.p1)},dh.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},dh.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},dh.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},dh.prototype.lineIntersection=function(t){try{return Hu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof zu))throw t}return null},dh.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},dh.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new Eu(n-u,r+s)},dh.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},dh.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||yu.isNaN(e))&&(e=1),e},dh.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},dh.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},dh.prototype.distance=function(){if(arguments[0]instanceof dh){var t=arguments[0];return ac.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Eu){var e=arguments[0];return ac.distancePointLine(e,this.p0,this.p1)}},dh.prototype.pointAlong=function(t){var e=new Eu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},dh.prototype.hashCode=function(){var t=yu.doubleToLongBits(this.p0.x);t^=31*yu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=yu.doubleToLongBits(this.p1.x);return n^=31*yu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},dh.prototype.interfaces_=function(){return[bu,Ai]},dh.prototype.getClass=function(){return dh},dh.midPoint=function(t,e){return new Eu((t.x+e.x)/2,(t.y+e.y)/2)},gh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(dh,gh);var mh=function(){this.tempEnv1=new qu,this.tempEnv2=new qu,this._overlapSeg1=new dh,this._overlapSeg2=new dh};mh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var vh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vh.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},vh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vh.prototype.setId=function(t){this._id=t},vh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new qu(t,e)}return this._env},vh.prototype.getEndIndex=function(){return this._end},vh.prototype.getStartIndex=function(){return this._start},vh.prototype.getContext=function(){return this._context},vh.prototype.getId=function(){return this._id},vh.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<l&&(r<h&&this.computeOverlapsInternal(t,l,n,r,h,o),h<i&&this.computeOverlapsInternal(t,l,n,h,i,o)),l<e&&(r<h&&this.computeOverlapsInternal(l,e,n,r,h,o),h<i&&this.computeOverlapsInternal(l,e,n,h,i,o))},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var yh=function(){};yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh},yh.getChainStartIndices=function(t){var e=0,n=new Ec;n.add(new Ou(e));do{var r=yh.findChainEnd(t,e);n.add(new Ou(r)),e=r}while(e<t.length-1);return yh.toIntArray(n)},yh.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Ul.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])&&Ul.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},yh.getChains=function(){if(1===arguments.length){var t=arguments[0];return yh.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Ec,i=yh.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new vh(e,i[o],i[o+1],n);r.add(a)}return r}},yh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var _h=function(){};_h.prototype.computeNodes=function(t){},_h.prototype.getNodedSubstrings=function(){},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var bh=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bh.prototype.setSegmentIntersector=function(t){this._segInt=t},bh.prototype.interfaces_=function(){return[_h]},bh.prototype.getClass=function(){return bh};var xh=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Ec,this._index=new oh,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return ph.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=yh.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wh(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return wh},Object.defineProperties(e,n),e}(bh),wh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mh),Eh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Sh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Eh.prototype.getEndCapStyle=function(){return this._endCapStyle},Eh.prototype.isSingleSided=function(){return this._isSingleSided},Eh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Eh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Eh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Eh.JOIN_ROUND&&(this._quadrantSegments=Eh.DEFAULT_QUADRANT_SEGMENTS)},Eh.prototype.getJoinStyle=function(){return this._joinStyle},Eh.prototype.setJoinStyle=function(t){this._joinStyle=t},Eh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Eh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Eh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Eh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Eh.prototype.getMitreLimit=function(){return this._mitreLimit},Eh.prototype.setMitreLimit=function(t){this._mitreLimit=t},Eh.prototype.setSingleSided=function(t){this._isSingleSided=t},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Sh.CAP_ROUND.get=function(){return 1},Sh.CAP_FLAT.get=function(){return 2},Sh.CAP_SQUARE.get=function(){return 3},Sh.JOIN_ROUND.get=function(){return 1},Sh.JOIN_MITRE.get=function(){return 2},Sh.JOIN_BEVEL.get=function(){return 3},Sh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sh.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Eh,Sh);var Mh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ac.COUNTERCLOCKWISE,this._inputLine=t||null},Th={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Mh.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Mh.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Mh.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Mh.prototype.isShallowConcavity=function(t,e,n,r){return ac.computeOrientation(t,e,n)===this._angleOrientation&&ac.distancePointLine(e,t,n)<r},Mh.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Mh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Mh.prototype.isConcave=function(t,e,n){var r=ac.computeOrientation(t,e,n)===this._angleOrientation;return r},Mh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ac.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Mh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Mh.DELETE;)e++;return e},Mh.prototype.isShallow=function(t,e,n,r){return ac.distancePointLine(e,t,n)<r},Mh.prototype.collapseLine=function(){for(var t=new Mc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Mh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.simplify=function(t,e){return new Mh(t).simplify(e)},Th.INIT.get=function(){return 0},Th.DELETE.get=function(){return 1},Th.KEEP.get=function(){return 1},Th.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Mh,Th);var Ch=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ec},Lh={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ch.prototype.getCoordinates=function(){return this._ptList.toArray(Ch.COORDINATE_ARRAY_TYPE)},Ch.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ch.prototype.addPt=function(t){var e=new Eu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Ch.prototype.revere=function(){},Ch.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Ch.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ch.prototype.toString=function(){return(new vl).createLineString(this.getCoordinates()).toString()},Ch.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Eu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Ch.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Lh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ch,Lh);var Ah=function(){},Ih={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Ah.toDegrees=function(t){return 180*t/Math.PI},Ah.normalize=function(t){for(;t>Math.PI;)t-=Ah.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ah.PI_TIMES_2;return t},Ah.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Ah.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Ah.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Ah.interiorAngle=function(t,e,n){var r=Ah.angle(e,t),i=Ah.angle(e,n);return Math.abs(i-r)},Ah.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ah.PI_TIMES_2;t>=Ah.PI_TIMES_2&&(t=0)}else{for(;t>=Ah.PI_TIMES_2;)t-=Ah.PI_TIMES_2;t<0&&(t=0)}return t},Ah.angleBetween=function(t,e,n){var r=Ah.angle(e,t),i=Ah.angle(e,n);return Ah.diff(r,i)},Ah.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ah.toRadians=function(t){return t*Math.PI/180},Ah.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ah.COUNTERCLOCKWISE:n<0?Ah.CLOCKWISE:Ah.NONE},Ah.angleBetweenOriented=function(t,e,n){var r=Ah.angle(e,t),i=Ah.angle(e,n)-r;return i<=-Math.PI?i+Ah.PI_TIMES_2:i>Math.PI?i-Ah.PI_TIMES_2:i},Ih.PI_TIMES_2.get=function(){return 2*Math.PI},Ih.PI_OVER_2.get=function(){return Math.PI/2},Ih.PI_OVER_4.get=function(){return Math.PI/4},Ih.COUNTERCLOCKWISE.get=function(){return ac.COUNTERCLOCKWISE},Ih.CLOCKWISE.get=function(){return ac.CLOCKWISE},Ih.NONE.get=function(){return ac.COLLINEAR},Object.defineProperties(Ah,Ih);var Ph=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new dh,this._seg1=new dh,this._offset0=new dh,this._offset1=new dh,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rc,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Eh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Rh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Ph.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ac.computeOrientation(this._s0,this._s1,this._s2),r=n===ac.CLOCKWISE&&this._side===Ml.LEFT||n===ac.COUNTERCLOCKWISE&&this._side===Ml.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Ph.prototype.addLineEndCap=function(t,e){var n=new dh(t,e),r=new dh;this.computeOffsetSegment(n,Ml.LEFT,this._distance,r);var i=new dh;this.computeOffsetSegment(n,Ml.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Eh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,ac.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Eh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Eh.CAP_SQUARE:var u=new Eu;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new Eu(r.p1.x+u.x,r.p1.y+u.y),l=new Eu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Ph.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ph.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Hu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof zu))throw t;o=new Eu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Ph.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===ac.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},Ph.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ph.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Eh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Eh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ph.prototype.createSquare=function(t){this._segList.addPt(new Eu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Eu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ph.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ph.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ph.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ph.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Ph.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Ah.angle(i,this._seg0.p0),a=Ah.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Ah.normalize(o+a),u=Ah.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),h=i.x+c*Math.cos(u),f=i.y+c*Math.sin(u),p=new Eu(h,f),d=new dh(i,p),g=d.pointAlongOffset(1,l),m=d.pointAlongOffset(1,-l);this._side===Ml.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Ph.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ml.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Ph.prototype.addFilletArc=function(t,e,n,r,i){var o=r===ac.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new Eu;c<a;){var h=e+o*c;l.x=t.x+i*Math.cos(h),l.y=t.y+i*Math.sin(h),this._segList.addPt(l),c+=u}},Ph.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ph.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Eu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Eu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Ph.prototype.createCircle=function(t){var e=new Eu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ph.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ph.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ch,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ph.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ph.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Eh.JOIN_BEVEL||this._bufParams.getJoinStyle()===Eh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,ac.CLOCKWISE,this._distance))},Ph.prototype.closeRing=function(){this._segList.closeRing()},Ph.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Rh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Rh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Rh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Rh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ph,Rh);var Oh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Oh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Tc.reverse(o),o},Oh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Mh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ml.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Mh.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ml.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},Oh.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ml.RIGHT&&(r=-r);var i=Mh.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},Oh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Mh.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ml.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Mh.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ml.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},Oh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Eh.CAP_ROUND:e.createCircle(t);break;case Eh.CAP_SQUARE:e.createSquare(t)}},Oh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Oh.prototype.getBufferParameters=function(){return this._bufParams},Oh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Oh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Oh.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Oh.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Mh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ml.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Mh.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ml.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},Oh.prototype.getSegGen=function(t){return new Ph(this._precisionModel,this._bufParams,t)},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh},Oh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Eu(t[n]);return e};var Nh=function(){this._subgraphs=null,this._seg=new dh,this._cga=new ac;var t=arguments[0];this._subgraphs=t},Dh={DepthSegment:{configurable:!0}};Nh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Ec,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Au(arguments[2],wc)&&arguments[0]instanceof Eu&&arguments[1]instanceof zl){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ac.computeOrientation(this._seg.p0,this._seg.p1,o)===ac.RIGHT)){var l=a.getDepth(Ml.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Ml.RIGHT));var h=new Fh(this._seg,l);s.add(h)}}else if(Au(arguments[2],wc)&&arguments[0]instanceof Eu&&Au(arguments[1],wc))for(var f=arguments[0],p=arguments[1],d=arguments[2],g=p.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.findStabbedSegments(f,m,d)}},Nh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Ql.min(e)._leftDepth},Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Dh.DepthSegment.get=function(){return Fh},Object.defineProperties(Nh,Dh);var Fh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new dh(t),this._leftDepth=e};Fh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fh.prototype.toString=function(){return this._upwardSeg.toString()},Fh.prototype.interfaces_=function(){return[bu]},Fh.prototype.getClass=function(){return Fh};var Bh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Bh.prototype.area=function(){return Bh.area(this.p0,this.p1,this.p2)},Bh.prototype.signedArea=function(){return Bh.signedArea(this.p0,this.p1,this.p2)},Bh.prototype.interpolateZ=function(t){if(null===t)throw new vu("Supplied point is null.");return Bh.interpolateZ(t,this.p0,this.p1,this.p2)},Bh.prototype.longestSideLength=function(){return Bh.longestSideLength(this.p0,this.p1,this.p2)},Bh.prototype.isAcute=function(){return Bh.isAcute(this.p0,this.p1,this.p2)},Bh.prototype.circumcentre=function(){return Bh.circumcentre(this.p0,this.p1,this.p2)},Bh.prototype.area3D=function(){return Bh.area3D(this.p0,this.p1,this.p2)},Bh.prototype.centroid=function(){return Bh.centroid(this.p0,this.p1,this.p2)},Bh.prototype.inCentre=function(){return Bh.inCentre(this.p0,this.p1,this.p2)},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Bh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Bh.det=function(t,e,n,r){return t*r-e*n},Bh.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,h=t.x-i,f=t.y-o,p=(c*h-s*f)/l,d=(-u*h+a*f)/l;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Bh.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},Bh.isAcute=function(t,e,n){return!!Ah.isAcute(t,e,n)&&!!Ah.isAcute(e,n,t)&&!!Ah.isAcute(n,t,e)},Bh.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*Bh.det(o,a,s,u),l=Bh.det(a,o*o+a*a,u,s*s+u*u),h=Bh.det(o,o*o+a*a,s,s*s+u*u);return new Eu(r-l/c,i+h/c)},Bh.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Hu(t.x+n/2,t.y+r/2,1),o=new Hu(t.x-r+n/2,t.y+n+r/2,1);return new Hu(i,o)},Bh.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new Eu(t.x+i*o,t.y+i*a)},Bh.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,h=r*s-i*a,f=c*c+l*l+h*h,p=Math.sqrt(f)/2;return p},Bh.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new Eu(r,i)},Bh.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new Eu(s,u)};var kh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ec;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};kh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Cu.EXTERIOR,Cu.INTERIOR)},kh.prototype.addPolygon=function(t){var e=this._distance,n=Ml.LEFT;this._distance<0&&(e=-this._distance,n=Ml.RIGHT);var r=t.getExteriorRing(),i=Tc.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,Cu.EXTERIOR,Cu.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Tc.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ml.opposite(n),Cu.INTERIOR,Cu.EXTERIOR)}},kh.prototype.isTriangleErodedCompletely=function(t,e){var n=new Bh(t[0],t[1],t[2]),r=n.inCentre();return ac.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},kh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Cu.EXTERIOR,Cu.INTERIOR)},kh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new ph(t,new Rl(0,Cu.BOUNDARY,e,n));this._curveList.add(r)},kh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},kh.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<el.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=el.MINIMUM_VALID_SIZE&&ac.isCCW(t)&&(o=i,a=r,n=Ml.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},kh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qc?this.addPolygon(t):t instanceof $c?this.addLineString(t):t instanceof Zc?this.addPoint(t):t instanceof tl?this.addCollection(t):t instanceof Vc?this.addCollection(t):t instanceof nl?this.addCollection(t):t instanceof zc&&this.addCollection(t)},kh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},kh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var Uh=function(){};Uh.prototype.locate=function(t){},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh};var jh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};jh.prototype.next=function(){if(this._atStart)return this._atStart=!1,jh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ii;var t=this._parent.getGeometryN(this._index++);return t instanceof zc?(this._subcollectionIterator=new jh(t),this._subcollectionIterator.next()):t},jh.prototype.remove=function(){throw new Error(this.getClass().getName())},jh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},jh.prototype.interfaces_=function(){return[xc]},jh.prototype.getClass=function(){return jh},jh.isAtomic=function(t){return!(t instanceof zc)};var Gh=function(){this._geom=null;var t=arguments[0];this._geom=t};Gh.prototype.locate=function(t){return Gh.locate(t,this._geom)},Gh.prototype.interfaces_=function(){return[Uh]},Gh.prototype.getClass=function(){return Gh},Gh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&ac.isPointInRing(t,e.getCoordinates())},Gh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Gh.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Gh.isPointInRing(t,i))return!1}return!0},Gh.containsPoint=function(t,e){if(e instanceof Qc)return Gh.containsPointInPolygon(t,e);if(e instanceof zc)for(var n=new jh(e);n.hasNext();){var r=n.next();if(r!==e&&Gh.containsPoint(t,r))return!0}return!1},Gh.locate=function(t,e){return e.isEmpty()?Cu.EXTERIOR:Gh.containsPoint(t,e)?Cu.INTERIOR:Cu.EXTERIOR};var zh=function(){this._edgeMap=new ki,this._edgeList=null,this._ptInAreaLocation=[Cu.NONE,Cu.NONE]};zh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},zh.prototype.propagateSideLabels=function(t){for(var e=Cu.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ml.LEFT)!==Cu.NONE&&(e=r.getLocation(t,Ml.LEFT))}if(e===Cu.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ml.ON)===Cu.NONE&&s.setLocation(t,Ml.ON,i),s.isArea(t)){var u=s.getLocation(t,Ml.LEFT),c=s.getLocation(t,Ml.RIGHT);if(c!==Cu.NONE){if(c!==i)throw new Ll("side location conflict",a.getCoordinate());u===Cu.NONE&&tc.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else tc.isTrue(s.getLocation(t,Ml.LEFT)===Cu.NONE,"found single null side"),s.setLocation(t,Ml.RIGHT,i),s.setLocation(t,Ml.LEFT,i)}}},zh.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},zh.prototype.print=function(t){Vu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},zh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},zh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ml.LEFT);tc.isTrue(r!==Cu.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();tc.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ml.LEFT),u=a.getLocation(t,Ml.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},zh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},zh.prototype.iterator=function(){return this.getEdges().iterator()},zh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ec(this._edgeMap.values())),this._edgeList},zh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Cu.NONE&&(this._ptInAreaLocation[t]=Gh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},zh.prototype.toString=function(){var t=new Ru;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},zh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},zh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Cu.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=Cu.NONE;if(e[u])c=Cu.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},zh.prototype.getDegree=function(){return this._edgeMap.size()},zh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var Vh=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ll("no outgoing dirEdge found",this.getCoordinate());tc.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Ul.isNorthern(i)&&Ul.isNorthern(o)?n:Ul.isNorthern(i)||Ul.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(tc.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Vu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ec;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ml.LEFT),r=t.getDepth(Ml.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ll("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var c=this._edgeList.get(u);c.setEdgeDepths(Ml.RIGHT,s),s=c.getDepth(Ml.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(tc.isTrue(null!==e,"found null for first outgoing dirEdge"),tc.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Cu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Cu.INTERIOR;break}if(r.isInResult()){t=Cu.EXTERIOR;break}}}if(t===Cu.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Cu.INTERIOR):(a.isInResult()&&(i=Cu.EXTERIOR),s.isInResult()&&(i=Cu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Rl(Cu.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Cu.INTERIOR&&o!==Cu.BOUNDARY||this._label.setLocation(i,Cu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zh),Hh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Bl(t,new Vh)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vl),qh=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};qh.prototype.compareTo=function(t){var e=t;return qh.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},qh.prototype.interfaces_=function(){return[bu]},qh.prototype.getClass=function(){return qh},qh.orientation=function(t){return 1===Tc.increasingDirection(t)},qh.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var h=(u+=i)===a,f=(c+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var Wh=function(){this._edges=new Ec,this._ocaMap=new ki};Wh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Wh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Wh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Wh.prototype.iterator=function(){return this._edges.iterator()},Wh.prototype.getEdges=function(){return this._edges},Wh.prototype.get=function(t){return this._edges.get(t)},Wh.prototype.findEqualEdge=function(t){var e=new qh(t.getCoordinates());return this._ocaMap.get(e)},Wh.prototype.add=function(t){this._edges.add(t);var e=new qh(t.getCoordinates());this._ocaMap.put(e,t)},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh};var Xh=function(){};Xh.prototype.processIntersections=function(t,e,n,r){},Xh.prototype.isDone=function(){},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh};var Yh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Yh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Yh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Yh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Yh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Yh.prototype.getLineIntersector=function(){return this._li},Yh.prototype.hasProperIntersection=function(){return this._hasProper},Yh.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Yh.prototype.hasIntersection=function(){return this._hasIntersection},Yh.prototype.isDone=function(){return!1},Yh.prototype.hasInteriorIntersection=function(){return this._hasInterior},Yh.prototype.interfaces_=function(){return[Xh]},Yh.prototype.getClass=function(){return Yh},Yh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $h=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Eu(t),this.segmentIndex=e,this.dist=n};$h.prototype.getSegmentIndex=function(){return this.segmentIndex},$h.prototype.getCoordinate=function(){return this.coord},$h.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$h.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$h.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$h.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$h.prototype.getDistance=function(){return this.dist},$h.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$h.prototype.interfaces_=function(){return[bu]},$h.prototype.getClass=function(){return $h};var Jh=function(){this._nodeMap=new ki,this.edge=null;var t=arguments[0];this.edge=t};Jh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jh.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jh.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Jh.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Jh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Eu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new ef(o,new Rl(this.edge._label))},Jh.prototype.add=function(t,e,n){var r=new $h(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Jh.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Zh=function(){};Zh.prototype.getChainStartIndices=function(t){var e=0,n=new Ec;n.add(new Ou(e));do{var r=this.findChainEnd(t,e);n.add(new Ou(r)),e=r}while(e<t.length-1);return Zh.toIntArray(n)},Zh.prototype.findChainEnd=function(t,e){for(var n=Ul.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(Ul.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Zh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Kh=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new qu,this.env2=new qu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Zh;this.startIndex=e.getChainStartIndices(this.pts)};Kh.prototype.getCoordinates=function(){return this.pts},Kh.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Kh.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Kh.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,c),g<u&&this.computeIntersectsForChain(i,d,a,g,u,c)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,c),g<u&&this.computeIntersectsForChain(d,o,a,g,u,c))}},Kh.prototype.getStartIndexes=function(){return this.startIndex},Kh.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Qh=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},tf={NULL_VALUE:{configurable:!0}};Qh.prototype.getDepth=function(t,e){return this._depth[t][e]},Qh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Qh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Qh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Qh.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===Qh.NULL_VALUE}},Qh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},Qh.prototype.getDelta=function(t){return this._depth[t][Ml.RIGHT]-this._depth[t][Ml.LEFT]},Qh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Cu.EXTERIOR:Cu.INTERIOR},Qh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Qh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==Cu.EXTERIOR&&r!==Cu.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Qh.depthAtLocation(r):this._depth[e][n]+=Qh.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===Cu.INTERIOR&&this._depth[i][o]++}},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.depthAtLocation=function(t){return t===Cu.EXTERIOR?0:t===Cu.INTERIOR?1:Qh.NULL_VALUE},tf.NULL_VALUE.get=function(){return-1},Object.defineProperties(Qh,tf);var ef=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Jh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Qh,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Rl.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Kh(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new qu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new Eu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new Ru;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ml.ON),e.getLocation(1,Ml.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ml.LEFT),e.getLocation(1,Ml.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ml.RIGHT),e.getLocation(1,Ml.RIGHT),2))},e}(Fl),nf=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wh,this._bufParams=t||null};nf.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},nf.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Rl(t.getLabel())).flip(),n.merge(r);var i=nf.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(nf.depthDelta(t.getLabel()))},nf.prototype.buildSubgraphs=function(t,e){for(var n=new Ec,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Nh(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},nf.prototype.createSubgraphs=function(t){for(var e=new Ec,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Il;i.create(r),e.add(i)}}return Ql.sort(e,Ql.reverseOrder()),e},nf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},nf.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new xh,n=new rc;return n.setPrecisionModel(t),e.setSegmentIntersector(new Yh(n)),e},nf.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Oh(n,this._bufParams),i=new kh(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Hl(new Hh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new ql(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},nf.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new ef(i.getCoordinates(),new Rl(a));this.insertUniqueEdge(s)}}},nf.prototype.setNoder=function(t){this._workingNoder=t},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},nf.depthDelta=function(t){var e=t.getLocation(0,Ml.LEFT),n=t.getLocation(0,Ml.RIGHT);return e===Cu.INTERIOR&&n===Cu.EXTERIOR?1:e===Cu.EXTERIOR&&n===Cu.INTERIOR?-1:0},nf.convertSegStrings=function(t){for(var e=new vl,n=new Ec;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var rf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};rf.prototype.rescale=function(){if(Au(arguments[0],_c))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Vu.out.println(n)}},rf.prototype.scale=function(){if(Au(arguments[0],_c)){for(var t=arguments[0],e=new Ec,n=t.iterator();n.hasNext();){var r=n.next();e.add(new ph(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new Eu(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Tc.removeRepeatedPoints(o)}},rf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},rf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rf.prototype.interfaces_=function(){return[_h]},rf.prototype.getClass=function(){return rf};var of=function(){this._li=new rc,this._segStrings=null;var t=arguments[0];this._segStrings=t},af={fact:{configurable:!0}};of.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Ku("found endpt/interior pt intersection at index "+o+" :pt "+n)},of.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(l===f&&h===p)return null;var d=l.getCoordinates()[h],g=l.getCoordinates()[h+1],m=f.getCoordinates()[p],v=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,m,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,v)))throw new Ku("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+v)}},of.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},of.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},of.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},of.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Ku("found non-noded collapse at "+of.fact.createLineString([t,e,n]))},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},af.fact.get=function(){return new vl},Object.defineProperties(of,af);var sf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new vu("Scale factor must be non-zero");1!==e&&(this._pt=new Eu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Eu,this._p1Scaled=new Eu),this.initCorners(this._pt)},uf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sf.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return tc.isTrue(!(a&&s),"Found bad envelope test"),s},sf.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Eu(this._maxx,this._maxy),this._corner[1]=new Eu(this._minx,this._maxy),this._corner[2]=new Eu(this._minx,this._miny),this._corner[3]=new Eu(this._maxx,this._miny)},sf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sf.prototype.getCoordinate=function(){return this._originalPt},sf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new qu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},sf.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},sf.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},uf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sf,uf);var cf=function(){this.tempEnv1=new qu,this.selectedSegment=new dh};cf.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};var lf=function(){this._index=null;var t=arguments[0];this._index=t},hf={HotPixelSnapAction:{configurable:!0}};lf.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new ff(e,n,r);return this._index.query(i,{interfaces_:function(){return[$l]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf},hf.HotPixelSnapAction.get=function(){return ff},Object.defineProperties(lf,hf);var ff=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cf),pf=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ec};pf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},pf.prototype.isDone=function(){return!1},pf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pf.prototype.interfaces_=function(){return[Xh]},pf.prototype.getClass=function(){return pf};var df=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};df.prototype.checkCorrectness=function(t){var e=ph.getNodedSubstrings(t),n=new of(e);try{n.checkValid()}catch(t){if(!(t instanceof Gu))throw t;t.printStackTrace()}},df.prototype.getNodedSubstrings=function(){return ph.getNodedSubstrings(this._nodedSegStrings)},df.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},df.prototype.findInteriorIntersections=function(t,e){var n=new pf(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},df.prototype.computeVertexSnaps=function(){if(Au(arguments[0],_c))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof ph)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sf(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},df.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new xh,this._pointSnapper=new lf(this._noder.getIndex()),this.snapRound(t,this._li)},df.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sf(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},df.prototype.interfaces_=function(){return[_h]},df.prototype.getClass=function(){return df};var gf=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Eh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},mf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gf.prototype.bufferFixedPrecision=function(t){var e=new rf(new df(new pl(1)),t.getScale()),n=new nf(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gf.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gf.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ll))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gf.precisionScaleFactor(this._argGeom,this._distance,n),i=new pl(r);this.bufferFixedPrecision(i)}},gf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pl.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gf.prototype.bufferOriginalPrecision=function(){try{var t=new nf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ku))throw t;this._saveException=t}},gf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf},gf.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gf(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1],i=arguments[2],o=new gf(n);return o.setQuadrantSegments(i),o.getResultGeometry(r)}if(arguments[2]instanceof Eh&&arguments[0]instanceof cc&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],u=arguments[2];return new gf(a,u).getResultGeometry(s)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],h=arguments[2],f=arguments[3],p=new gf(c);return p.setQuadrantSegments(h),p.setEndCapStyle(f),p.getResultGeometry(l)}},gf.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Iu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},mf.CAP_ROUND.get=function(){return Eh.CAP_ROUND},mf.CAP_BUTT.get=function(){return Eh.CAP_FLAT},mf.CAP_FLAT.get=function(){return Eh.CAP_FLAT},mf.CAP_SQUARE.get=function(){return Eh.CAP_SQUARE},mf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gf,mf);var vf=function(){this._pt=[new Eu,new Eu],this._distance=yu.NaN,this._isNull=!0};vf.prototype.getCoordinates=function(){return this._pt},vf.prototype.getCoordinate=function(t){return this._pt[t]},vf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},vf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},vf.prototype.getDistance=function(){return this._distance},vf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var yf=function(){};yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},yf.computeDistance=function(){if(arguments[2]instanceof vf&&arguments[0]instanceof $c&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new dh,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof vf&&arguments[0]instanceof Qc&&arguments[1]instanceof Eu){var s=arguments[0],u=arguments[1],c=arguments[2];yf.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)yf.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof vf&&arguments[0]instanceof cc&&arguments[1]instanceof Eu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof $c)yf.computeDistance(h,f,p);else if(h instanceof Qc)yf.computeDistance(h,f,p);else if(h instanceof zc)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);yf.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof vf&&arguments[0]instanceof dh&&arguments[1]instanceof Eu){var v=arguments[0],y=arguments[1],_=arguments[2],b=v.closestPoint(y);_.setMinimum(b,y)}};var _f=function(t){this._maxPtDist=new vf,this._inputGeom=t||null},bf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_f.prototype.computeMaxMidpointDistance=function(t){var e=new wf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_f.prototype.computeMaxVertexDistance=function(t){var e=new xf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_f.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_f.prototype.getDistancePoints=function(){return this._maxPtDist},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},bf.MaxPointDistanceFilter.get=function(){return xf},bf.MaxMidpointDistanceFilter.get=function(){return wf},Object.defineProperties(_f,bf);var xf=function(t){this._maxPtDist=new vf,this._minPtDist=new vf,this._geom=t||null};xf.prototype.filter=function(t){this._minPtDist.initialize(),yf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xf.prototype.getMaxPointDistance=function(){return this._maxPtDist},xf.prototype.interfaces_=function(){return[fc]},xf.prototype.getClass=function(){return xf};var wf=function(t){this._maxPtDist=new vf,this._minPtDist=new vf,this._geom=t||null};wf.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new Eu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),yf.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wf.prototype.isDone=function(){return!1},wf.prototype.isGeometryChanged=function(){return!1},wf.prototype.getMaxPointDistance=function(){return this._maxPtDist},wf.prototype.interfaces_=function(){return[Gc]},wf.prototype.getClass=function(){return wf};var Ef=function(t){this._comps=t||null};Ef.prototype.filter=function(t){t instanceof Qc&&this._comps.add(t)},Ef.prototype.interfaces_=function(){return[jc]},Ef.prototype.getClass=function(){return Ef},Ef.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ef.getPolygons(t,new Ec)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qc?n.add(e):e instanceof zc&&e.apply(new Ef(n)),n}};var Sf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof el){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof $c&&this._lines.add(t)},Sf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sf.prototype.interfaces_=function(){return[uc]},Sf.prototype.getClass=function(){return Sf},Sf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sf.getLines(e,n))}},Sf.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sf.getLines(t,!1)}if(2===arguments.length){if(Au(arguments[0],_c)&&Au(arguments[1],_c)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Sf.getLines(i,n)}return n}if(arguments[0]instanceof cc&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new Ec;return o.apply(new Sf(s,a)),s}if(arguments[0]instanceof cc&&Au(arguments[1],_c)){var u=arguments[0],c=arguments[1];return u instanceof $c?c.add(u):u.apply(new Sf(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Au(arguments[0],_c)&&Au(arguments[1],_c)){for(var l=arguments[0],h=arguments[1],f=arguments[2],p=l.iterator();p.hasNext();){var d=p.next();Sf.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof cc&&Au(arguments[1],_c)){var g=arguments[0],m=arguments[1],v=arguments[2];return g.apply(new Sf(m,v)),m}}};var Mf=function(){if(this._boundaryRule=pc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new vu("Rule must be non-null");this._boundaryRule=t}};Mf.prototype.locateInternal=function(){if(arguments[0]instanceof Eu&&arguments[1]instanceof Qc){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Cu.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Cu.EXTERIOR)return Cu.EXTERIOR;if(r===Cu.BOUNDARY)return Cu.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===Cu.INTERIOR)return Cu.EXTERIOR;if(a===Cu.BOUNDARY)return Cu.BOUNDARY}return Cu.INTERIOR}if(arguments[0]instanceof Eu&&arguments[1]instanceof $c){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return Cu.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?ac.isOnLine(s,c)?Cu.INTERIOR:Cu.EXTERIOR:Cu.BOUNDARY}if(arguments[0]instanceof Eu&&arguments[1]instanceof Zc){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?Cu.INTERIOR:Cu.EXTERIOR}},Mf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?ac.locatePointInRing(t,e.getCoordinates()):Cu.EXTERIOR},Mf.prototype.intersects=function(t,e){return this.locate(t,e)!==Cu.EXTERIOR},Mf.prototype.updateLocationInfo=function(t){t===Cu.INTERIOR&&(this._isIn=!0),t===Cu.BOUNDARY&&this._numBoundaries++},Mf.prototype.computeLocation=function(t,e){if(e instanceof Zc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof $c)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Vc)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof nl)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof zc)for(var u=new jh(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Mf.prototype.locate=function(t,e){return e.isEmpty()?Cu.EXTERIOR:e instanceof $c?this.locateInternal(t,e):e instanceof Qc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Cu.BOUNDARY:this._numBoundaries>0||this._isIn?Cu.INTERIOR:Cu.EXTERIOR)},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf};var Tf=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Cf={INSIDE_AREA:{configurable:!0}};Tf.prototype.isInsideArea=function(){return this._segIndex===Tf.INSIDE_AREA},Tf.prototype.getCoordinate=function(){return this._pt},Tf.prototype.getGeometryComponent=function(){return this._component},Tf.prototype.getSegmentIndex=function(){return this._segIndex},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Cf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tf,Cf);var Lf=function(t){this._pts=t||null};Lf.prototype.filter=function(t){t instanceof Zc&&this._pts.add(t)},Lf.prototype.interfaces_=function(){return[jc]},Lf.prototype.getClass=function(){return Lf},Lf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Zc?Ql.singletonList(t):Lf.getPoints(t,new Ec)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Zc?n.add(e):e instanceof zc&&e.apply(new Lf(n)),n}};var Af=function(){this._locations=null;var t=arguments[0];this._locations=t};Af.prototype.filter=function(t){(t instanceof Zc||t instanceof $c||t instanceof Qc)&&this._locations.add(new Tf(t,0,t.getCoordinate()))},Af.prototype.interfaces_=function(){return[jc]},Af.prototype.getClass=function(){return Af},Af.getLocations=function(t){var e=new Ec;return t.apply(new Af(e)),e};var If=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Mf,this._minDistanceLocation=null,this._minDistance=yu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};If.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Ef.getPolygons(this._geom[e]);if(i.size()>0){var o=Af.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Au(arguments[0],wc)&&Au(arguments[1],wc)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),h=0;h<s.size();h++)if(this.computeContainmentDistance(l,s.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tf&&arguments[1]instanceof Qc){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(Cu.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=f,d[1]=new Tf(p,g),null}},If.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},If.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sf.getLines(this._geom[0]),n=Sf.getLines(this._geom[1]),r=Lf.getPoints(this._geom[0]),i=Lf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},If.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},If.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},If.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},If.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof $c&&arguments[1]instanceof Zc){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=ac.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new dh(r[o],r[o+1]).closestPoint(i);n[0]=new Tf(t,o,s),n[1]=new Tf(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof $c&&arguments[1]instanceof $c){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),f=c.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var g=ac.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(g<this._minDistance){this._minDistance=g;var m=new dh(h[p],h[p+1]),v=new dh(f[d],f[d+1]),y=m.closestPoints(v);l[0]=new Tf(u,p,y[0]),l[1]=new Tf(c,d,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},If.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Tf(i,0,i.getCoordinate()),n[1]=new Tf(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},If.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new vu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},If.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If},If.distance=function(t,e){return new If(t,e).distance()},If.isWithinDistance=function(t,e,n){return new If(t,e,n).distance()<=n},If.nearestPoints=function(t,e){return new If(t,e).nearestPoints()};var Pf=function(){this._pt=[new Eu,new Eu],this._distance=yu.NaN,this._isNull=!0};Pf.prototype.getCoordinates=function(){return this._pt},Pf.prototype.getCoordinate=function(t){return this._pt[t]},Pf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Pf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Pf.prototype.toString=function(){return Zu.toLineString(this._pt[0],this._pt[1])},Pf.prototype.getDistance=function(){return this._distance},Pf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf};var Rf=function(){};Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.computeDistance=function(){if(arguments[2]instanceof Pf&&arguments[0]instanceof $c&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new dh,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Pf&&arguments[0]instanceof Qc&&arguments[1]instanceof Eu){var s=arguments[0],u=arguments[1],c=arguments[2];Rf.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Rf.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Pf&&arguments[0]instanceof cc&&arguments[1]instanceof Eu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof $c)Rf.computeDistance(h,f,p);else if(h instanceof Qc)Rf.computeDistance(h,f,p);else if(h instanceof zc)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Rf.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Pf&&arguments[0]instanceof dh&&arguments[1]instanceof Eu){var v=arguments[0],y=arguments[1],_=arguments[2],b=v.closestPoint(y);_.setMinimum(b,y)}};var Of=function(){this._g0=null,this._g1=null,this._ptDist=new Pf,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Nf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Of.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Of.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new vu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Of.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Of.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Of.prototype.computeOrientedDistance=function(t,e,n){var r=new Df(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Ff(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Of.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Of.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Of(t,e).distance()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Of(n,r);return o.setDensifyFraction(i),o.distance()}},Nf.MaxPointDistanceFilter.get=function(){return Df},Nf.MaxDensifiedByFractionDistanceFilter.get=function(){return Ff},Object.defineProperties(Of,Nf);var Df=function(){this._maxPtDist=new Pf,this._minPtDist=new Pf,this._euclideanDist=new Rf,this._geom=null;var t=arguments[0];this._geom=t};Df.prototype.filter=function(t){this._minPtDist.initialize(),Rf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Df.prototype.getMaxPointDistance=function(){return this._maxPtDist},Df.prototype.interfaces_=function(){return[fc]},Df.prototype.getClass=function(){return Df};var Ff=function(){this._maxPtDist=new Pf,this._minPtDist=new Pf,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Ff.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new Eu(s,u);this._minPtDist.initialize(),Rf.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ff.prototype.isDone=function(){return!1},Ff.prototype.isGeometryChanged=function(){return!1},Ff.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ff.prototype.interfaces_=function(){return[Gc]},Ff.prototype.getClass=function(){return Ff};var Bf=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},kf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Bf.prototype.checkMaximumDistance=function(t,e,n){var r=new Of(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Zu.toLineString(i[0],i[1])+")"}},Bf.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Bf.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Bf.VERBOSE&&Vu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Bf.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qc||this._input instanceof nl||this._input instanceof zc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Bf.prototype.getErrorIndicator=function(){return this._errorIndicator},Bf.prototype.checkMinimumDistance=function(t,e,n){var r=new If(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Zu.toLineString(i[0],i[1])+" )"}},Bf.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Bf.prototype.getErrorLocation=function(){return this._errorLocation},Bf.prototype.getPolygonLines=function(t){for(var e=new Ec,n=new Sf(e),r=Ef.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Bf.prototype.getErrorMessage=function(){return this._errMsg},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},kf.VERBOSE.get=function(){return!1},kf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bf,kf);var Uf=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},jf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Uf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Uf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Uf.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new qu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new qu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Uf.prototype.checkDistance=function(){var t=new Bf(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Uf.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Uf.prototype.checkPolygonal=function(){this._result instanceof Qc||this._result instanceof nl||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Uf.prototype.getErrorIndicator=function(){return this._errorIndicator},Uf.prototype.getErrorLocation=function(){return this._errorLocation},Uf.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Uf.prototype.report=function(t){if(!Uf.VERBOSE)return null;Vu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Uf.prototype.getErrorMessage=function(){return this._errorMsg},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.isValidMsg=function(t,e,n){var r=new Uf(t,e,n);return r.isValid()?null:r.getErrorMessage()},Uf.isValid=function(t,e,n){return!!new Uf(t,e,n).isValid()},jf.VERBOSE.get=function(){return!1},jf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Uf,jf);var Gf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Gf.prototype.getCoordinates=function(){return this._pts},Gf.prototype.size=function(){return this._pts.length},Gf.prototype.getCoordinate=function(t){return this._pts[t]},Gf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Gf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:lh.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Gf.prototype.setData=function(t){this._data=t},Gf.prototype.getData=function(){return this._data},Gf.prototype.toString=function(){return Zu.toLineString(new ul(this._pts))},Gf.prototype.interfaces_=function(){return[hh]},Gf.prototype.getClass=function(){return Gf};var zf=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ec,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};zf.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zf.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zf.prototype.getIntersectionSegments=function(){return this._intSegments},zf.prototype.count=function(){return this._intersectionCount},zf.prototype.getIntersections=function(){return this._intersections},zf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zf.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zf.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zf.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zf.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zf.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zf.prototype.interfaces_=function(){return[Xh]},zf.prototype.getClass=function(){return zf},zf.createAllIntersectionsFinder=function(t){var e=new zf(t);return e.setFindAllIntersections(!0),e},zf.createAnyIntersectionFinder=function(t){return new zf(t)},zf.createIntersectionCounter=function(t){var e=new zf(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vf=function(){this._li=new rc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vf.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vf.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vf.prototype.isValid=function(){return this.execute(),this._isValid},Vf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zf(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new xh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ll(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Zu.toLineString(t[0],t[1])+" and "+Zu.toLineString(t[2],t[3])},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf},Vf.computeIntersections=function(t){var e=new Vf(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Hf=function t(){this._nv=null;var e=arguments[0];this._nv=new Vf(t.toSegmentStrings(e))};Hf.prototype.checkValid=function(){this._nv.checkValid()},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf},Hf.toSegmentStrings=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Gf(r.getCoordinates(),r))}return e},Hf.checkValid=function(t){new Hf(t).checkValid()};var qf=function(t){this._mapOp=t};qf.prototype.map=function(t){for(var e=new Ec,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(vl.toGeometryArray(e))},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.map=function(t,e){return new qf(e).map(t)};var Wf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ec,this._resultLineList=new Ec;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Wf.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Wf.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Wf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wf.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Tp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Wf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Wf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Wf.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Wf.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(tc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Tp.isResultOfOp(r,e)&&e===Tp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf};var Xf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ec;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Xf.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Xf.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Tp.INTERSECTION)){var r=n.getLabel();Tp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Xf.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var Yf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Yf.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Yf.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof el&&!r.isEmpty()||(n=!1);for(var i=new Ec,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof el||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Ec;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Yf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Yf.prototype.getInputGeometry=function(){return this._inputGeom},Yf.prototype.transformMultiLineString=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yf.prototype.transformCoordinates=function(t,e){return this.copy(t)},Yf.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Yf.prototype.transformMultiPoint=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yf.prototype.transformMultiPolygon=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Yf.prototype.copy=function(t){return t.copy()},Yf.prototype.transformGeometryCollection=function(t,e){for(var n=new Ec,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(vl.toGeometryArray(n)):this._factory.buildGeometry(n)},Yf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Zc)return this.transformPoint(t,null);if(t instanceof tl)return this.transformMultiPoint(t,null);if(t instanceof el)return this.transformLinearRing(t,null);if(t instanceof $c)return this.transformLineString(t,null);if(t instanceof Vc)return this.transformMultiLineString(t,null);if(t instanceof Qc)return this.transformPolygon(t,null);if(t instanceof nl)return this.transformMultiPolygon(t,null);if(t instanceof zc)return this.transformGeometryCollection(t,null);throw new vu("Unknown Geometry subtype: "+t.getClass().getName())},Yf.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf};var $f=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new dh,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof $c&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};$f.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new Eu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Eu(o)))}},$f.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},$f.prototype.snapTo=function(t){var e=new Mc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},$f.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new Eu(i),!1)}},$f.prototype.findSegmentIndexToSnap=function(t,e){for(var n=yu.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},$f.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f},$f.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Jf=function(t){this._srcGeom=t||null},Zf={SNAP_PRECISION_FACTOR:{configurable:!0}};Jf.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Kf(e,n).transform(this._srcGeom)},Jf.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Kf(t,n,!0).transform(this._srcGeom),i=r;return e&&Au(i,Kc)&&(i=r.buffer(0)),i},Jf.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Jf.prototype.extractTargetCoordinates=function(t){for(var e=new ji,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Jf.prototype.computeMinimumSegmentLength=function(t){for(var e=yu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Jf(t);r[0]=i.snapTo(e,n);var o=new Jf(e);return r[1]=o.snapTo(r[0],n),r},Jf.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Jf.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pl.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Jf.computeOverlaySnapTolerance(i),Jf.computeOverlaySnapTolerance(o))}},Jf.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Jf.SNAP_PRECISION_FACTOR},Jf.snapToSelf=function(t,e,n){return new Jf(t).snapToSelf(e,n)},Zf.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Jf,Zf);var Kf=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new $f(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yf),Qf=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qf.prototype.getCommon=function(){return yu.longBitsToDouble(this._commonBits)},Qf.prototype.add=function(t){var e=yu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qf.signExpBits(this._commonBits),this._isFirst=!1,null):Qf.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qf.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qf.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=yu.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+yu.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf},Qf.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qf.signExpBits=function(t){return t>>52},Qf.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qf.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qf.getBit(t,r)!==Qf.getBit(e,r))return n;n++}return 52};var tp=function(){this._commonCoord=null,this._ccFilter=new np},ep={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tp.prototype.addCommonBits=function(t){var e=new rp(this._commonCoord);t.apply(e),t.geometryChanged()},tp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Eu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new rp(e);return t.apply(n),t.geometryChanged(),t},tp.prototype.getCommonCoordinate=function(){return this._commonCoord},tp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp},ep.CommonCoordinateFilter.get=function(){return np},ep.Translater.get=function(){return rp},Object.defineProperties(tp,ep);var np=function(){this._commonBitsX=new Qf,this._commonBitsY=new Qf};np.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},np.prototype.getCommonCoordinate=function(){return new Eu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},np.prototype.interfaces_=function(){return[fc]},np.prototype.getClass=function(){return np};var rp=function(){this.trans=null;var t=arguments[0];this.trans=t};rp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},rp.prototype.isDone=function(){return!1},rp.prototype.isGeometryChanged=function(){return!0},rp.prototype.interfaces_=function(){return[Gc]},rp.prototype.getClass=function(){return rp};var ip=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ip.prototype.selfSnap=function(t){return new Jf(t).snapTo(t,this._snapTolerance)},ip.prototype.removeCommonBits=function(t){this._cbr=new tp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ip.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ip.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Tp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ip.prototype.checkValid=function(t){t.isValid()||Vu.out.println("Snapped geometry is invalid")},ip.prototype.computeSnapTolerance=function(){this._snapTolerance=Jf.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ip.prototype.snap=function(t){var e=this.removeCommonBits(t);return Jf.snap(e[0],e[1],this._snapTolerance)},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.overlayOp=function(t,e,n){return new ip(t,e).getResultGeometry(n)},ip.union=function(t,e){return ip.overlayOp(t,e,Tp.UNION)},ip.intersection=function(t,e){return ip.overlayOp(t,e,Tp.INTERSECTION)},ip.symDifference=function(t,e){return ip.overlayOp(t,e,Tp.SYMDIFFERENCE)},ip.difference=function(t,e){return ip.overlayOp(t,e,Tp.DIFFERENCE)};var op=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};op.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Tp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Ku))throw t;r=t}if(!n)try{e=ip.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Ku?r:t}return e},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.overlayOp=function(t,e,n){return new op(t,e).getResultGeometry(n)},op.union=function(t,e){return op.overlayOp(t,e,Tp.UNION)},op.intersection=function(t,e){return op.overlayOp(t,e,Tp.INTERSECTION)},op.symDifference=function(t,e){return op.overlayOp(t,e,Tp.SYMDIFFERENCE)},op.difference=function(t,e){return op.overlayOp(t,e,Tp.DIFFERENCE)};var ap=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ap.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap};var sp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},up={INSERT:{configurable:!0},DELETE:{configurable:!0}};sp.prototype.isDelete=function(){return this._eventType===sp.DELETE},sp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},sp.prototype.getObject=function(){return this._obj},sp.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},sp.prototype.getInsertEvent=function(){return this._insertEvent},sp.prototype.isInsert=function(){return this._eventType===sp.INSERT},sp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},sp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},sp.prototype.interfaces_=function(){return[bu]},sp.prototype.getClass=function(){return sp},up.INSERT.get=function(){return 1},up.DELETE.get=function(){return 2},Object.defineProperties(sp,up);var cp=function(){};cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var lp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};lp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(lp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},lp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},lp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},lp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},lp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},lp.prototype.hasProperIntersection=function(){return this._hasProper},lp.prototype.hasIntersection=function(){return this._hasIntersection},lp.prototype.isDone=function(){return this._isDone},lp.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},lp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},lp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hp=function(t){function e(){t.call(this),this.events=new Ec,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Ql.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof lp&&Au(arguments[0],wc)&&Au(arguments[1],wc)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Au(arguments[0],wc)&&arguments[1]instanceof lp){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ap(n,i),a=new sp(e,n.getMinX(i),o);this.events.add(a),this.events.add(new sp(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cp),fp=function(){this._min=yu.POSITIVE_INFINITY,this._max=yu.NEGATIVE_INFINITY},pp={NodeComparator:{configurable:!0}};fp.prototype.getMin=function(){return this._min},fp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fp.prototype.getMax=function(){return this._max},fp.prototype.toString=function(){return Zu.toLineString(new Eu(this._min,0),new Eu(this._max,0))},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},pp.NodeComparator.get=function(){return dp},Object.defineProperties(fp,pp);var dp=function(){};dp.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},dp.prototype.interfaces_=function(){return[wu]},dp.prototype.getClass=function(){return dp};var gp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),mp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),vp=function(){this._leaves=new Ec,this._root=null,this._level=0};vp.prototype.buildTree=function(){Ql.sort(this._leaves,new fp.NodeComparator);for(var t=this._leaves,e=null,n=new Ec;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},vp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gp(t,e,n))},vp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},vp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},vp.prototype.printNode=function(t){Vu.out.println(Zu.toLineString(new Eu(t._min,this._level),new Eu(t._max,this._level)))},vp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},vp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new mp(t.get(n),t.get(n+1));e.add(i)}}},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var yp=function(){this._items=new Ec};yp.prototype.visitItem=function(t){this._items.add(t)},yp.prototype.getItems=function(){return this._items},yp.prototype.interfaces_=function(){return[$l]},yp.prototype.getClass=function(){return yp};var _p=function(){this._index=null;var t=arguments[0];if(!Au(t,Kc))throw new vu("Argument must be Polygonal");this._index=new wp(t)},bp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_p.prototype.locate=function(t){var e=new oc(t),n=new xp(e);return this._index.query(t.y,t.y,n),e.getLocation()},_p.prototype.interfaces_=function(){return[Uh]},_p.prototype.getClass=function(){return _p},bp.SegmentVisitor.get=function(){return xp},bp.IntervalIndexedGeometry.get=function(){return wp},Object.defineProperties(_p,bp);var xp=function(){this._counter=null;var t=arguments[0];this._counter=t};xp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xp.prototype.interfaces_=function(){return[$l]},xp.prototype.getClass=function(){return xp};var wp=function(){this._index=new vp;var t=arguments[0];this.init(t)};wp.prototype.init=function(t){for(var e=Sf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new dh(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new yp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp};var Ep=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Mf,2===arguments.length){var e=arguments[0],n=arguments[1],r=pc.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;Cu.NONE,r.getLocation(t,Ml.ON)===Cu.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new lp(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof el||this._parentGeom instanceof Qc||this._parentGeom instanceof nl,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new lp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Zc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Cu.INTERIOR)}else if(arguments[0]instanceof Eu){var e=arguments[0];this.insertPoint(this._argIndex,e,Cu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Cu.EXTERIOR,Cu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Cu.INTERIOR,Cu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Cu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Cu.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ef(e,new Rl(this._argIndex,Cu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),tc.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Cu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Tc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;ac.isCCW(r)&&(i=n,o=e);var a=new ef(r,new Rl(this._argIndex,Cu.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Cu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Rl(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof nl&&(this._useBoundaryDeterminationRule=!1),e instanceof Qc)this.addPolygon(e);else if(e instanceof $c)this.addLineString(e);else if(e instanceof Zc)this.addPoint(e);else if(e instanceof tl)this.addCollection(e);else if(e instanceof Vc)this.addCollection(e);else if(e instanceof nl)this.addCollection(e);else{if(!(e instanceof zc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Au(this._parentGeom,Kc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _p(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Cu.BOUNDARY:Cu.INTERIOR},e}(Hl),Sp=function(){if(this._li=new rc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ep(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=pc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ep(0,e,r),this._arg[1]=new Ep(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ep(0,i,a),this._arg[1]=new Ep(1,o,a)}};Sp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Sp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var Mp=function(){};Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Mp.map=function(){if(arguments[0]instanceof cc&&Au(arguments[1],Mp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Ec,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Au(arguments[0],_c)&&Au(arguments[1],Mp.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Ec,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Mp.MapOp=function(){};var Tp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Mf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Wh,this._resultPolyList=new Ec,this._resultLineList=new Ec,this._resultPointList=new Ec,this._graph=new Hl(new Hh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Rl(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Ec;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Cu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Ec,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ec;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Hf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new ql(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Wf(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Xf(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ml.RIGHT),i.getLocation(1,Ml.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(tc.isTrue(!r.isNull(i,Ml.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ml.LEFT,r.getLocation(i,Ml.LEFT)),tc.isTrue(!r.isNull(i,Ml.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ml.RIGHT,r.getLocation(i,Ml.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sp);Tp.overlayOp=function(t,e,n){return new Tp(t,e).getResultGeometry(n)},Tp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Tp.createEmptyResult(Tp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return qf.map(t,{interfaces_:function(){return[Mp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Tp.INTERSECTION)},Tp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Tp.createEmptyResult(Tp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Tp.SYMDIFFERENCE)},Tp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Tp.INTERSECTION:o=Math.min(r,i);break;case Tp.UNION:o=Math.max(r,i);break;case Tp.DIFFERENCE:o=r;break;case Tp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Tp.createEmptyResult=function(t,e,n,r){var i=null;switch(Tp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Tp.difference=function(t,e){return t.isEmpty()?Tp.createEmptyResult(Tp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Tp.DIFFERENCE))},Tp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Tp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===Cu.BOUNDARY&&(i=Cu.INTERIOR),o===Cu.BOUNDARY&&(o=Cu.INTERIOR),a){case Tp.INTERSECTION:return i===Cu.INTERIOR&&o===Cu.INTERIOR;case Tp.UNION:return i===Cu.INTERIOR||o===Cu.INTERIOR;case Tp.DIFFERENCE:return i===Cu.INTERIOR&&o!==Cu.INTERIOR;case Tp.SYMDIFFERENCE:return i===Cu.INTERIOR&&o!==Cu.INTERIOR||i!==Cu.INTERIOR&&o===Cu.INTERIOR}return!1}},Tp.INTERSECTION=1,Tp.UNION=2,Tp.DIFFERENCE=3,Tp.SYMDIFFERENCE=4;var Cp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Mf,this._seg=new dh;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Cp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Cp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Cu.BOUNDARY:this._ptLocator.locate(t,this._g)},Cp.prototype.extractLinework=function(t){var e=new Lp;t.apply(e);var n=e.getLinework(),r=vl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp};var Lp=function(){this._linework=null,this._linework=new Ec};Lp.prototype.getLinework=function(){return this._linework},Lp.prototype.filter=function(t){if(t instanceof Qc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Lp.prototype.interfaces_=function(){return[jc]},Lp.prototype.getClass=function(){return Lp};var Ap=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ap.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ap.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ap.prototype.getPoints=function(t){for(var e=new Ec,n=Sf.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ap.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var h=new Eu(c-u,l+s);r.add(h)}if(this._doRight){var f=new Eu(c+u,l-s);r.add(f)}},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap};var Ip=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Ec;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Cp(this._geom[0],this._boundaryDistanceTolerance),new Cp(this._geom[1],this._boundaryDistanceTolerance),new Cp(this._geom[2],this._boundaryDistanceTolerance)]},Pp={TOLERANCE:{configurable:!0}};Ip.prototype.reportResult=function(t,e,n){Vu.out.println("Overlay result invalid - A:"+Cu.toLocationSymbol(e[0])+" B:"+Cu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Cu.toLocationSymbol(e[2]))},Ip.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Ip.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ip.hasLocation(this._location,Cu.BOUNDARY)||this.isValidResult(r,this._location)}},Ip.prototype.addTestPts=function(t){var e=new Ap(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ip.prototype.isValidResult=function(t,e){var n=Tp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Cu.INTERIOR);return r||this.reportResult(t,e,n),r},Ip.prototype.getInvalidLocation=function(){return this._invalidLocation},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip},Ip.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ip.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Jf.computeSizeBasedSnapTolerance(t),Jf.computeSizeBasedSnapTolerance(e))},Ip.isValid=function(t,e,n,r){return new Ip(t,e,r).isValid(n)},Pp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ip,Pp);var Rp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Rp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Rp.prototype.combine=function(){for(var t=new Ec,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.combine=function(){if(1===arguments.length){var t=arguments[0];return new Rp(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Rp(Rp.createList(e,n)).combine()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];return new Rp(Rp.createList(r,i,o)).combine()}},Rp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Rp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ec;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Ec;return a.add(r),a.add(i),a.add(o),a}};var Op=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ec)},Np={STRTREE_NODE_CAPACITY:{configurable:!0}};Op.prototype.reduceToGeometries=function(t){for(var e=new Ec,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Au(r,wc)?i=this.unionTree(r):r instanceof cc&&(i=r),e.add(i)}return e},Op.prototype.extractByEnvelope=function(t,e,n){for(var r=new Ec,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Op.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Rp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Op.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new oh(Op.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Op.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Op.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Op.getGeometry(e,n),Op.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Op.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Op.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Op.prototype.unionActual=function(t,e){return Op.restrictToPolygons(t.union(e))},Op.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Op.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Ec,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Rp.combine(r)},Op.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.restrictToPolygons=function(t){if(Au(t,Kc))return t;var e=Ef.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(vl.toPolygonArray(e))},Op.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Op.union=function(t){return new Op(t).union()},Np.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Op,Np);var Dp=function(){};Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Tp.createEmptyResult(Tp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Tp.UNION)};var Fp=function(){return new qi};qi.prototype={constructor:qi,reset:function(){this.s=this.t=0},add:function(t){Wi(Bp,t,this.t),Wi(this,Bp.s,this.s),this.s?this.t+=Bp.t:this.s=Bp.t},valueOf:function(){return this.s}};var Bp=new qi,kp=1e-6,Up=Math.PI,jp=Up/2,Gp=Up/4,zp=2*Up,Vp=180/Up,Hp=Up/180,qp=Math.abs,Wp=Math.atan,Xp=Math.atan2,Yp=Math.cos,$p=Math.exp,Jp=Math.log,Zp=Math.sin,Kp=Math.sqrt,Qp=Math.tan,td={Feature:function(t,e){$i(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)$i(n[r].geometry,e)}},ed={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ji(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ji(n[r],e,0)},Polygon:function(t,e){Zi(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Zi(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)$i(n[r],e)}},nd=function(t,e){t&&td.hasOwnProperty(t.type)?td[t.type](t,e):$i(t,e)},rd=(Fp(),Fp(),Fp(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});oo.invert=oo;var id=function(t){function e(e){return e=t(e[0]*Hp,e[1]*Hp),e[0]*=Vp,e[1]*=Vp,e}return t=ao(t[0]*Hp,t[1]*Hp,t.length>2?t[2]*Hp:0),e.invert=function(e){return e=t.invert(e[0]*Hp,e[1]*Hp),e[0]*=Vp,e[1]*=Vp,e},e},od=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Yi,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},ad=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*h,t[1]=u+c*f),l<1&&(e[0]=s+l*h,e[1]=u+l*f),!0}}}}},sd=function(t,e){return qp(t[0]-e[0])<kp&&qp(t[1]-e[1])<kp},ud=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(sd(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new ho(r,t,null,!0)),u.push(n.o=new ho(r,null,n,!1)),s.push(n=new ho(a,t,null,!1)),u.push(n.o=new ho(a,null,n,!0))}})),s.length){for(u.sort(e),fo(s),fo(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}},cd=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ld=(function(t){1===t.length&&(t=function(t){return function(e,n){return cd(t(e),n)}}(t))}(cd),function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}),hd=1e9,fd=-hd,pd=Fp(),dd=(Fp(),function(t){return t}),gd=(Fp(),Fp(),1/0),md=gd,vd=-gd,yd=vd,_d={point:function(t,e){t<gd&&(gd=t),t>vd&&(vd=t),e<md&&(md=e),e>yd&&(yd=e)},lineStart:Yi,lineEnd:Yi,polygonStart:Yi,polygonEnd:Yi,result:function(){var t=[[gd,md],[vd,yd]];return vd=yd=-(md=gd=1/0),t}},bd=(Fp(),function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function u(){x.point=s,m.lineStart()}function c(){x.point=a,m.lineEnd()}function l(t,e){g.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),g=[]}function f(){l(g[0][0],g[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),a=y.result(),s=a.length;if(g.pop(),p.push(g),g=null,s)if(1&i){if(n=a[0],(e=n.length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(go))}var p,d,g,m=e(o),v=i.invert(r[0],r[1]),y=od(),_=e(y),b=!1,x={point:a,lineStart:u,lineEnd:c,polygonStart:function(){x.point=l,x.lineStart=h,x.lineEnd=f,d=[],p=[]},polygonEnd:function(){x.point=a,x.lineStart=u,x.lineEnd=c,d=ld(d);var t=function(t,e){var n=e[0],r=e[1],i=[Zp(n),-Yp(n),0],o=0,a=0;pd.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,h=c[l-1],f=h[0],p=h[1]/2+Gp,d=Zp(p),g=Yp(p),m=0;m<l;++m,f=y,d=b,g=x,h=v){var v=c[m],y=v[0],_=v[1]/2+Gp,b=Zp(_),x=Yp(_),w=y-f,E=w>=0?1:-1,S=E*w,M=S>Up,T=d*b;if(pd.add(Xp(T*E*Zp(S),g*x+T*Yp(S))),o+=M?w+E*zp:w,M^f>=n^y>=n){var C=eo(Qi(h),Qi(v));io(C);var L=eo(i,C);io(L);var A=(M^w>=0?-1:1)*Xi(L[2]);(r>A||r===A&&(C[0]||C[1]))&&(a+=M^w>=0?1:-1)}}return(o<-kp||o<kp&&pd<-kp)^1&a}(p,v);d.length?(b||(o.polygonStart(),b=!0),ud(d,mo,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}}),xd=bd((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Up:-Up,u=qp(o-n);qp(u-Up)<kp?(t.point(n,r=(r+a)/2>0?jp:-jp),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Up&&(qp(n-i)<kp&&(n-=i*kp),qp(o-s)<kp&&(o-=s*kp),r=function(t,e,n,r){var i,o,a=Zp(t-n);return qp(a)>kp?Wp((Zp(e)*(o=Yp(r))*Zp(n)-Zp(r)*(i=Yp(e))*Zp(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*jp,r.point(-Up,i),r.point(0,i),r.point(Up,i),r.point(Up,0),r.point(Up,-i),r.point(0,-i),r.point(-Up,-i),r.point(-Up,0),r.point(-Up,i);else if(qp(t[0]-e[0])>kp){var o=t[0]<e[0]?Up:-Up;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Up,-jp]),wd=function(t,e){function n(t,e){return Yp(t)*Yp(e)>o}function r(t,e,n){var r=[1,0,0],i=eo(Qi(t),Qi(e)),a=to(i,i),s=i[0],u=a-s*s;if(!u)return!n&&t;var c=o*a/u,l=-o*s/u,h=eo(r,i),f=ro(r,c);no(f,ro(i,l));var p=h,d=to(f,p),g=to(p,p),m=d*d-g*(to(f,f)-1);if(!(m<0)){var v=Kp(m),y=ro(p,(-d-v)/g);if(no(y,f),y=Ki(y),!n)return y;var _,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(_=b,b=x,x=_);var S=x-b,M=qp(S-Up)<kp;if(!M&&E<w&&(_=w,w=E,E=_),M||S<kp?M?w+E>0^y[1]<(qp(y[0]-b)<kp?w:E):w<=y[1]&&y[1]<=E:S>Up^(b<=y[0]&&y[0]<=x)){var T=ro(p,(-d+v)/g);return no(T,f),[y,Ki(T)]}}}function i(e,n){var r=a?t:Up-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Yp(t),a=o>0,s=qp(o)>kp;return bd(n,(function(t){var e,o,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var p,d=[h,f],g=n(h,f),m=a?g?0:i(h,f):g?i(h+(h<0?Up:-Up),f):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(p=r(e,d))||sd(e,p)||sd(d,p))&&(d[0]+=kp,d[1]+=kp,g=n(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(s&&e&&a^g){var v;m&o||!(v=r(d,e,!0))||(l=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&sd(e,d)||t.point(d[0],d[1]),e=d,u=g,o=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Yp(e),s=Zp(e),u=r*n;null==i?(i=e+r*zp,o=e-u/2):(i=lo(a,i),o=lo(a,o),(r>0?i<o:i>o)&&(i+=r*zp));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Ki([a,-s*Yp(l),-s*Zp(l)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)}),a?[0,-t]:[-Up,t-Up])};yo.prototype={constructor:yo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ed=16,Sd=Yp(30*Hp),Md=function(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,h,f,p,d,g,m){var v=c-r,y=l-i,_=v*v+y*y;if(_>4*e&&g--){var b=a+f,x=s+p,w=u+d,E=Kp(b*b+x*x+w*w),S=Xi(w/=E),M=qp(qp(w)-1)<kp||qp(o-h)<kp?(o+h)/2:Xp(x,b),T=t(M,S),C=T[0],L=T[1],A=C-r,I=L-i,P=y*A-v*I;(P*P/_>e||qp((v*A+y*I)/_-.5)>.3||a*f+s*p+u*d<Sd)&&(n(r,i,o,a,s,u,C,L,M,b/=E,x/=E,w,g,m),m.point(C,L),n(C,L,M,b,x,w,c,l,h,f,p,d,g,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){v=NaN,w.point=o,e.lineStart()}function o(r,i){var o=Qi([r,i]),a=t(r,i);n(v,y,m,_,b,x,v=a[0],y=a[1],m=r,_=o[0],b=o[1],x=o[2],Ed,e),e.point(v,y)}function a(){w.point=r,e.lineEnd()}function s(){i(),w.point=u,w.lineEnd=c}function u(t,e){o(l=t,e),h=v,f=y,p=_,d=b,g=x,w.point=o}function c(){n(v,y,m,_,b,x,h,f,l,p,d,g,Ed,e),w.lineEnd=a,a()}var l,h,f,p,d,g,m,v,y,_,b,x,w={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}(t,e):function(t){return vo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Td=vo({point:function(t,e){this.stream.point(t*Hp,e*Hp)}});xo.invert=function(t,e){return[t,2*Wp($p(e))-jp]},wo.invert=function(t,e){return[-e,2*Wp($p(t))-jp]};var Cd=function(){var t=function(t){function e(){var e=Up*s(),a=o(id(o.rotate()).invert([0,0]));return c(null==l?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===xo?[[Math.max(a[0]-e,l),n],[Math.min(a[0]+e,r),i]]:[[l,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,i)]])}var n,r,i,o=bo(t),a=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?l=n=r=i=null:(l=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,n],[r,i]]},e()}(wo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.projection=Ta,t.random=du,t.clusters=gu,t.helpers=jo,t.invariant=zo,t.meta=Go,t.isolines=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!S(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=rt(t,{zProperty:r,flip:!0});return c(function(t,e,n){var r=z(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,f=function(t){t[0]=t[0]*l+a,t[1]=t[1]*h+s};return t.forEach((function(t){C(t,f)})),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=Object.assign({},r,i[a]);u[n]=s;var c=l(K(t,s),u);o.push(c)}return o}(a,e,r,i,o),a,t))},t.convex=At,t.pointsWithinPolygon=Rt,t.concave=function(t,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!E(r))throw new Error("maxEdge is invalid");var i=Ot(function(t){var e=[],n={};return P(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}})),c(e)}(t));if(i.features=i.features.filter((function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=Bt(e,i,n),s=Bt(i,o,n),u=Bt(e,o,n);return a<=r&&s<=r&&u<=r})),i.features.length<1)return null;var o=Qt(i,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,r){var i=Wo(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=z(t),n=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){It([e.minX,e.minY],t)&&n.push(e.property)})),t.properties[r]=n})),t},t.flip=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=kt(t)),C(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.simplify=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=kt(t)),N(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;te(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=ae(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return ae(t,e,n)}));break;case"Polygon":t.coordinates=se(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return se(t,e,n)}))}}(t,n,r)})),t},t.bezierSpline=ue,t.tag=function(t,e,n,r){return t=kt(t),e=kt(e),P(t,(function(t){t.properties||(t.properties={}),P(e,(function(e){void 0===t.properties[r]&&It(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return c(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)r=Math.floor((o+1)*Math.random()),n=i[r],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},t.envelope=le,t.square=he,t.circle=pe,t.midpoint=function(t,e){return fe(t,Bt(t,e)/2,de(t,e))},t.center=ge,t.centerOfMass=ve,t.centroid=me,t.combine=function(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return P(t,(function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))})),c(Object.keys(r).filter((function(t){return r[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:r[t].coordinates},{collectedProperties:r[t].properties})})))},t.distance=Bt,t.explode=ye,t.bbox=z,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=De(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(De(t))})),e},t.bboxPolygon=ce,t.booleanPointInPolygon=It,t.nearestPoint=Fe,t.nearestPointOnLine=on,t.nearestPointToLine=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return N(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==Z(e))throw new Error("line must be a LineString");var o=1/0,a=null;return P(t,(function(t){var n=dn(t,e,{units:r});n<o&&(o=n,a=t)})),a&&(a.properties=Object.assign({dist:o},a.properties,i)),a},t.planepoint=function(t,e){var n=V(t),r=$(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],c=n[1],l=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==a?a:r[1][2],m=r[2][0],v=r[2][1],y=void 0!==s?s:r[2][2];return(y*(u-l)*(c-d)+f*(u-p)*(c-v)+g*(u-m)*(c-h)-g*(u-l)*(c-v)-y*(u-p)*(c-h)-f*(u-m)*(c-d))/((u-l)*(c-d)+(u-p)*(c-v)+(u-m)*(c-h)-(u-l)*(c-v)-(u-p)*(c-h)-(u-m)*(c-d))},t.tin=Ot,t.bearing=de,t.destination=fe,t.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,r,i,o,a,s){var u,c,l,h,f,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(s-o)*(n-t)-(a-i)*(r-e))?null!==p.x&&null!==p.y&&p:(c=e-o,l=t-i,h=(a-i)*c-(s-o)*l,f=(n-t)*c-(r-e)*l,c=h/u,l=f/u,p.x=t+c*(n-t),p.y=e+c*(r-e),c>=0&&c<=1&&(p.onLine1=!0),l>=0&&l<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&i.features.push(r([a[0],a[1]]))}}))})),i},t.pointOnFeature=mn,t.area=yn,t.along=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!E(e))throw new Error("distance must be a number");for(var o=0,a=0;a<i.length&&!(e>=o&&a===i.length-1);a++){if(o>=e){var s=e-o;if(s){var u=de(i[a],i[a-1])-180;return fe(i[a],s,u,n)}return r(i[a])}o+=Bt(i[a],i[a+1],n)}return r(i[i.length-1])},t.length=En,t.lineSlice=function(t,e,n){var r=H(n);if("LineString"!==Z(n))throw new Error("line must be a LineString");for(var i,o=on(n,t),a=on(n,e),u=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(r[c]);return u.push(i[1].geometry.coordinates),s(u,n.properties)},t.lineSliceAlong=Sn,t.pointGrid=An,t.truncate=In,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return F(t,(function(t){e.push(t)})),c(e)},t.lineIntersect=nn,t.lineChunk=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return F(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=En(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){var s=Sn(t,e*a,e*(a+1),{units:n});r(s,a)}}(t,e,r,(function(t){o.push(t)}))})),c(o)},t.unkinkPolygon=function(t){var e=[];return F(t,(function(t){"Polygon"===t.geometry.type&&P(Aa(t),(function(n){e.push(o(n.geometry.coordinates,t.properties))}))})),c(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=V(t),e=V(e),r=r||{},i=i||100,o=o||10,new Ba({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.lineSegment=en,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=Z(t),r=Z(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=In(e,{precision:7});switch(r){case"Point":return Dn(t,i);case"MultiPoint":return Nn(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Nn(t,nn(t,i))}},t.lineArc=kn,t.polygonToLine=jn,t.lineToPolygon=zn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),r=H(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(r=[r]),r.forEach((function(t){ka(t,e,a)})),1===a.length?s(a[0],i):l(a,i);case"Polygon":return o(Yn(r,e),i);case"MultiPolygon":return f(r.map((function(t){return Yn(t,e)})),i);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Qn,t.sector=function(t,e,n,r,i){if(i=i||{},!S(i))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(er(n)===er(r))return pe(t,e,i);var a=H(t),s=[[a]];return C(kn(t,e,n,r,i),(function(t){s[0].push(t)})),s[0].push(a),o(s)},t.rhumbBearing=an,t.rhumbDistance=un,t.rhumbDestination=nr,t.polygonTangents=function(t,e){var n,i,o,a=H(t),s=H(e);switch(Z(e)){case"Polygon":n=s[0][0],i=s[0][0],o=ir(s[0][0],s[0][s[0].length-1],a);var u=rr(s[0],a,o,void 0,n,i);n=u[0],i=u[1];break;case"MultiPolygon":n=s[0][0][0],i=s[0][0][0],o=ir(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=rr(t[0],a,o,void 0,n,i);n=e[0],i=e[1]}))}return c([r(n),r(i)])},t.rewind=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=kt(t));var i=[];switch(t.type){case"GeometryCollection":return N(t,(function(t){ar(t,n)})),t;case"FeatureCollection":return P(t,(function(t){P(ar(t,n),(function(t){i.push(t)}))})),c(i)}return ar(t,n)},t.isobands=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},a=n.breaksProperties||[];if(Y(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!S(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=cr(t,{zProperty:r,flip:!0}),u=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var a=+e[i-1],s=+e[i],u=lr(t,a,s-a),c=function(t){var e=[],n=[];t.forEach((function(t){var r=yn(o([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}(u),l=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var a=o([e[r].lrCoordinates]),s=r+1;s<e.length;s++)if(!e[s].grouped){var u=o([e[s].lrCoordinates]);(function(t,e){for(var n=ye(t),r=0;r<n.features.length;r++)if(!It(n.features[r],e))return!1;return!0})(u,a)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}n.push(i)}return n}(c),h={};h.groupedRings=l,h[n]=a+"-"+s,r.push(h)}return r}(s,e,r);return c((u=function(t,e,n){var r=z(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,f=function(t){t[0]=t[0]*l+a,t[1]=t[1]*h+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(u,s,t)).map((function(t,e){if(a[e]&&!S(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,a[e]);return n[r]=t[r],f(t.groupedRings,n)})))},t.transformRotate=pr,t.transformScale=dr,t.transformTranslate=function(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=kt(t)),C(t,(function(t){var r=H(nr(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=Z(t),o=t.properties;switch(i){case"LineString":return _r(t,e,r);case"MultiLineString":var a=[];return F(t,(function(t){a.push(_r(t,e,r).geometry.coordinates)})),l(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=Bs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){Ds.findEdgeRingContaining(t,r)&&r.push(t)})),c(r.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var n;return F(t,(function(t){F(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!wr(e,t);case"Polygon":return!It(t,e)}break;case"LineString":switch(e.type){case"Point":return!wr(t,e);case"LineString":return!function(t,e){return nn(t,e).features.length>0}(t,e);case"Polygon":return!Er(e,t)}break;case"Polygon":switch(e.type){case"Point":return!It(e,t);case"LineString":return!Er(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(It(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(It(e.coordinates[0][r],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),n},t.booleanContains=function(t,e){var n=Z(t),r=Z(e),i=$(t),o=$(e),a=H(t),s=H(e);switch(n){case"Point":switch(r){case"Point":return Mr(a,s);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Mr(t.coordinates[n],e.coordinates)){r=!0;break}return r}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Mr(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return Mn(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Mn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!Mn({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}(i,o);case"MultiPoint":return function(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(Mn(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!Mn(e.coordinates[r],t))return!1;return!!n}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return It(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=z(t),o=z(e);if(!Sr(i,o))return!1;for(;r<e.coordinates.length-1;r++){var a=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[r],e.coordinates[r+1]);if(It({type:"Point",coordinates:a},t,{ignoreBoundary:!0})){n=!0;break}}return n}(i,o);case"Polygon":return function(t,e){var n=z(t),r=z(e);if(!Sr(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!It(e.coordinates[0][i],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!It(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=Z(t),r=Z(e),i=$(t),o=$(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Tr(i,o);case"Polygon":return Lr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Tr(o,i);case"LineString":return function(t,e){if(nn(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Ar(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(i,o);case"Polygon":return Cr(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Lr(o,i);case"LineString":return Cr(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=or,t.booleanOverlap=Or,t.booleanPointOnLine=Mn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return Z(t)===Z(e)&&new zs({precision:6}).compare(te(t),te(e))},t.booleanWithin=Tn,t.clone=kt,t.cleanCoords=te,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(Y(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=kt(t),r=r||3;var o=new Xs.DBSCAN,a=-1;return o.run(O(t),x(e,i),r,Bt).forEach((function(e){a++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"}))})),o.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;Y(t,"Point","Input must contain Points");var i=t.features.length;(n=n||Math.round(Math.sqrt(i/2)))>i&&(n=i),!1!==r&&void 0!==r||(t=kt(t));var o=O(t),a=o.slice(0,n),s=eu(o,n,a),u={};return s.centroids.forEach((function(t,e){u[e]=t})),P(t,(function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]})),t},t.pointToLineDistance=dn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Dr(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Dr(e,"line2"))throw new Error("line2 must be a LineString");for(var n=en(te(t)).features,r=en(te(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!function(t,e){var n=y(an(t[0],t[1])),r=y(an(e[0],e[1]));return n===r}(o,r[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var o=i.resolution,a=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!E(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var l=V(t),h=V(n);switch(t=r(l),n=r(h),Z(u)){case"FeatureCollection":if(0===u.features.length)return s([l,h]);break;case"Polygon":u=c([e($(u))]);break;default:throw new Error("invalid obstacles")}var f=u;f.features.push(t),f.features.push(n);var p=z(dr(ce(z(f)),1.15));o||(o=Bt([p[0],p[1]],[p[2],p[1]],i)/100),f.features.pop(),f.features.pop();for(var d=p[0],g=p[1],m=p[2],v=p[3],y=o/Bt([d,g],[m,g],i)*(m-d),_=o/Bt([d,g],[d,v],i)*(v-g),b=m-d,x=v-g,w=(b-Math.floor(b/y)*y)/2,M=[],T=[],C=[],L=[],A=1/0,I=1/0,P=v-(x-Math.floor(x/_)*_)/2,R=0;P>=g;){for(var O=[],N=[],D=d+w,F=0;D<=m;){var B=r([D,P]),k=function(t,e){for(var n=0;n<e.features.length;n++)if(It(t,e.features[n]))return!0;return!1}(B,u);O.push(k?0:1),N.push(D+"|"+P);var U=Bt(B,t);!k&&U<A&&(A=U,C={x:F,y:R});var j=Bt(B,n);!k&&j<I&&(I=j,L={x:F,y:R}),D+=y,F++}T.push(O),M.push(N),P-=_,R++}var G=new Br(T,{diagonal:!0}),H=G.grid[C.y][C.x],q=G.grid[L.y][L.x],W=[l];return nu.search(G,H,q).forEach((function(t){var e=M[t.x][t.y].split("|");W.push([+e[0],+e[1]])})),W.push(h),te(s(W))},t.voronoi=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return Y(t,"Point","points"),c(pu().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(hi))},t.ellipse=fi,t.centerMean=di,t.centerMedian=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.counter||10;if(!E(n))throw new Error("counter must be a number");var r=e.weight,i=di(t,{weight:e.weight}),o=c([]);return P(t,(function(t){o.features.push(me(t,{weight:t.properties[r]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},gi(i.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!E(n))throw new Error("steps must be a number");if(!S(i))throw new Error("properties must be a number");var o=O(t).length,a=di(t,{weight:r}),s=0,u=0,l=0;P(t,(function(t){var e=t.properties[r]||1,n=mi(H(t),H(a));s+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e}));var h=s-u,f=Math.sqrt(Math.pow(h,2)+4*Math.pow(l,2)),p=2*l,d=Math.atan((h+f)/p),g=180*d/Math.PI,m=0,v=0,y=0;P(t,(function(t){var e=t.properties[r]||1,n=mi(H(t),H(a));m+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,v+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,y+=e}));var _=Math.sqrt(2*m/y),b=Math.sqrt(2*v/y),x=fi(a,_,b,{units:"degrees",angle:g,steps:n,properties:i}),w=Rt(t,c([x])),M={meanCenterCoordinates:H(a),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*O(w).length/o};return x.properties.standardDeviationalEllipse=M,x},t.difference=function(t,n){var r=$(t),i=$(n),o=t.properties||{};if(r=Hi(r),i=Hi(i),!r)return null;if(!i)return e(r,o);var a=new El,s=a.read(r),u=a.read(i),c=Tp.difference(s,u);return c.isEmpty()?null:e((new Sl).write(c),o)},t.buffer=function(t,e,n){var r=(n=n||{}).units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return N(t,(function(t){var n=Eo(t,e,r,i);n&&o.push(n)})),c(o);case"FeatureCollection":return P(t,(function(t){var n=Eo(t,e,r,i);n&&P(n,(function(t){t&&o.push(t)}))})),c(o)}return Eo(t,e,r,i)},t.union=Lo,t.intersect=Ao,t.dissolve=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.propertyName;Y(t,"Polygon","dissolve");var r=kt(t),i=r.features,o=[];i.forEach((function(t,e){t.properties.origIndexPosition=e}));var a=Ke();for(var u in a.load(r),i){var c=i[u],l=!1;if(a.search(c).features.forEach((function(t){c=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=Io(e,o);0!==r&&(e-=r)}if(e!==+u){var h=i[e];h&&c&&(void 0!==n&&h.properties[n]!==c.properties[n]||Or(c,h)&&function(t,e){var n=s(O(t)),r=s(O(e));return nn(n,r).features.length>0}(c,h)&&(i[u]=Lo(c,h),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),a.remove(t),i.splice(e,1),c.properties.origIndexPosition=u,a.remove(c,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),l=!0))}})),l){if(!c)continue;c.properties.origIndexPosition=u,a.insert(c),u--}}return i.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),r},t.hexGrid=Po,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),r=function(t){var e=[],n=[];return F(t,(function(t){var r=t.geometry.coordinates,i=r[0],a=r.slice(1);e.push(o([i])),a.forEach((function(t){n.push(o([t]))}))})),[c(e),c(n)]}(t),i=r[0],a=r[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),F(e,(function(t){r.push(t.geometry.coordinates[0])})),F(n,(function(t){r.push(t.geometry.coordinates[0])})),o(r)}(n,i=Ro(i),a=Ro(a))},t.squareGrid=No,t.triangleGrid=Do,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(Y(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=z(t);switch(r){case"point":case"points":a=An(s,e,n);break;case"square":case"squares":a=No(s,e,n);break;case"hex":case"hexes":a=Po(s,e,n);break;case"triangle":case"triangles":a=Do(s,e,n);break;default:throw new Error("invalid gridType")}var u=[];return P(a,(function(e){var a=0,s=0;P(t,(function(t){var u,c=Bt("point"===r?e:me(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(a=u);var l=1/Math.pow(c,o);s+=l,a+=l*u}));var c=kt(e);c.properties[i]=a/s,u.push(c)})),c(u)},t.pointOnSurface=mn,t.polygonToLineString=jn,t.lineStringToPolygon=zn,t.inside=It,t.within=Rt,t.bezier=ue,t.nearest=Fe,t.pointOnLine=on,t.lineDistance=En,t.radians2degrees=_,t.degrees2radians=b,t.distanceToDegrees=v,t.distanceToRadians=m,t.radiansToDistance=g,t.bearingToAngle=y,t.convertDistance=x,t.toMercator=cn,t.toWgs84=ln,t.randomPosition=vi,t.randomPoint=yi,t.randomPolygon=_i,t.randomLineString=bi,t.getCluster=wi,t.clusterEach=Ei,t.clusterReduce=Si,t.createBins=Mi,t.applyFilter=Ti,t.propertiesContainsFilter=Ci,t.filterProperties=Li,t.earthRadius=Fo,t.factors=Bo,t.unitsFactors=ko,t.areaFactors=Uo,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=u,t.featureCollection=c,t.multiLineString=l,t.multiPoint=h,t.multiPolygon=f,t.geometryCollection=p,t.round=d,t.radiansToLength=g,t.lengthToRadians=m,t.lengthToDegrees=v,t.bearingToAzimuth=y,t.radiansToDegrees=_,t.degreesToRadians=b,t.convertLength=x,t.convertArea=w,t.isNumber=E,t.isObject=S,t.validateBBox=M,t.validateId=T,t.getCoord=V,t.getCoords=H,t.containsNumber=q,t.geojsonType=W,t.featureOf=X,t.collectionOf=Y,t.getGeom=$,t.getGeomType=J,t.getType=Z,t.coordEach=C,t.coordReduce=L,t.propEach=A,t.propReduce=I,t.featureEach=P,t.featureReduce=R,t.coordAll=O,t.geomEach=N,t.geomReduce=D,t.flattenEach=F,t.flattenReduce=B,t.segmentEach=k,t.segmentReduce=U,t.lineEach=j,t.lineReduce=G,Object.defineProperty(t,"__esModule",{value:!0})}))},"5a89":function(t,e,n){"use strict";n.r(e),n.d(e,"ACESFilmicToneMapping",(function(){return ut})),n.d(e,"AddEquation",(function(){return I})),n.d(e,"AddOperation",(function(){return nt})),n.d(e,"AdditiveBlending",(function(){return T})),n.d(e,"AlphaFormat",(function(){return zt})),n.d(e,"AlwaysDepth",(function(){return X})),n.d(e,"AlwaysStencilFunc",(function(){return an})),n.d(e,"AmbientLight",(function(){return Gp})),n.d(e,"AmbientLightProbe",(function(){return hd})),n.d(e,"AnimationClip",(function(){return jf})),n.d(e,"AnimationLoader",(function(){return $f})),n.d(e,"AnimationMixer",(function(){return Vd})),n.d(e,"AnimationObjectGroup",(function(){return Gd})),n.d(e,"AnimationUtils",(function(){return Cf})),n.d(e,"ArcCurve",(function(){return rp})),n.d(e,"ArrayCamera",(function(){return Gc})),n.d(e,"ArrowHelper",(function(){return Hg})),n.d(e,"Audio",(function(){return xd})),n.d(e,"AudioAnalyser",(function(){return Cd})),n.d(e,"AudioContext",(function(){return ad})),n.d(e,"AudioListener",(function(){return bd})),n.d(e,"AudioLoader",(function(){return sd})),n.d(e,"AxesHelper",(function(){return qg})),n.d(e,"AxisHelper",(function(){return vm})),n.d(e,"BackSide",(function(){return v})),n.d(e,"BasicDepthPacking",(function(){return je})),n.d(e,"BasicShadowMap",(function(){return f})),n.d(e,"BinaryTextureLoader",(function(){return wm})),n.d(e,"Bone",(function(){return xl})),n.d(e,"BooleanKeyframeTrack",(function(){return Of})),n.d(e,"BoundingBoxHelper",(function(){return ym})),n.d(e,"Box2",(function(){return Kd})),n.d(e,"Box3",(function(){return br})),n.d(e,"Box3Helper",(function(){return Ug})),n.d(e,"BoxBufferGeometry",(function(){return Ji})),n.d(e,"BoxGeometry",(function(){return $i})),n.d(e,"BoxHelper",(function(){return kg})),n.d(e,"BufferAttribute",(function(){return ii})),n.d(e,"BufferGeometry",(function(){return Ei})),n.d(e,"BufferGeometryLoader",(function(){return Xp})),n.d(e,"ByteType",(function(){return Pt})),n.d(e,"Cache",(function(){return Vf})),n.d(e,"Camera",(function(){return ro})),n.d(e,"CameraHelper",(function(){return Dg})),n.d(e,"CanvasRenderer",(function(){return Sm})),n.d(e,"CanvasTexture",(function(){return Xl})),n.d(e,"CatmullRomCurve3",(function(){return cp})),n.d(e,"CineonToneMapping",(function(){return st})),n.d(e,"CircleBufferGeometry",(function(){return df})),n.d(e,"CircleGeometry",(function(){return pf})),n.d(e,"ClampToEdgeWrapping",(function(){return yt})),n.d(e,"Clock",(function(){return gd})),n.d(e,"ClosedSplineCurve3",(function(){return dm})),n.d(e,"Color",(function(){return Jr})),n.d(e,"ColorKeyframeTrack",(function(){return Nf})),n.d(e,"CompressedTexture",(function(){return Wl})),n.d(e,"CompressedTextureLoader",(function(){return Jf})),n.d(e,"ConeBufferGeometry",(function(){return ff})),n.d(e,"ConeGeometry",(function(){return hf})),n.d(e,"CubeCamera",(function(){return so})),n.d(e,"CubeGeometry",(function(){return $i})),n.d(e,"CubeReflectionMapping",(function(){return lt})),n.d(e,"CubeRefractionMapping",(function(){return ht})),n.d(e,"CubeTexture",(function(){return Xs})),n.d(e,"CubeTextureLoader",(function(){return Qf})),n.d(e,"CubeUVReflectionMapping",(function(){return gt})),n.d(e,"CubeUVRefractionMapping",(function(){return mt})),n.d(e,"CubicBezierCurve",(function(){return bp})),n.d(e,"CubicBezierCurve3",(function(){return xp})),n.d(e,"CubicInterpolant",(function(){return Af})),n.d(e,"CullFaceBack",(function(){return s})),n.d(e,"CullFaceFront",(function(){return u})),n.d(e,"CullFaceFrontBack",(function(){return c})),n.d(e,"CullFaceNone",(function(){return a})),n.d(e,"Curve",(function(){return ep})),n.d(e,"CurvePath",(function(){return Lp})),n.d(e,"CustomBlending",(function(){return A})),n.d(e,"CylinderBufferGeometry",(function(){return lf})),n.d(e,"CylinderGeometry",(function(){return cf})),n.d(e,"Cylindrical",(function(){return Jd})),n.d(e,"DataTexture",(function(){return co})),n.d(e,"DataTexture2DArray",(function(){return Ys})),n.d(e,"DataTexture3D",(function(){return $s})),n.d(e,"DataTextureLoader",(function(){return Zf})),n.d(e,"DecrementStencilOp",(function(){return Ye})),n.d(e,"DecrementWrapStencilOp",(function(){return Je})),n.d(e,"DefaultLoadingManager",(function(){return qf})),n.d(e,"DepthFormat",(function(){return Yt})),n.d(e,"DepthStencilFormat",(function(){return $t})),n.d(e,"DepthTexture",(function(){return Yl})),n.d(e,"DirectionalLight",(function(){return jp})),n.d(e,"DirectionalLightHelper",(function(){return Rg})),n.d(e,"DirectionalLightShadow",(function(){return Up})),n.d(e,"DiscreteInterpolant",(function(){return Pf})),n.d(e,"DodecahedronBufferGeometry",(function(){return sh})),n.d(e,"DodecahedronGeometry",(function(){return ah})),n.d(e,"DoubleSide",(function(){return y})),n.d(e,"DstAlphaFactor",(function(){return G})),n.d(e,"DstColorFactor",(function(){return V})),n.d(e,"DynamicBufferAttribute",(function(){return im})),n.d(e,"DynamicCopyUsage",(function(){return dn})),n.d(e,"DynamicDrawUsage",(function(){return un})),n.d(e,"DynamicReadUsage",(function(){return hn})),n.d(e,"EdgesGeometry",(function(){return uf})),n.d(e,"EdgesHelper",(function(){return _m})),n.d(e,"EllipseCurve",(function(){return np})),n.d(e,"EqualDepth",(function(){return J})),n.d(e,"EqualStencilFunc",(function(){return tn})),n.d(e,"EquirectangularReflectionMapping",(function(){return ft})),n.d(e,"EquirectangularRefractionMapping",(function(){return pt})),n.d(e,"Euler",(function(){return Hn})),n.d(e,"EventDispatcher",(function(){return mn})),n.d(e,"ExtrudeBufferGeometry",(function(){return Xh})),n.d(e,"ExtrudeGeometry",(function(){return Wh})),n.d(e,"Face3",(function(){return ti})),n.d(e,"Face4",(function(){return Wg})),n.d(e,"FaceColors",(function(){return w})),n.d(e,"FaceNormalsHelper",(function(){return Lg})),n.d(e,"FileLoader",(function(){return Yf})),n.d(e,"FlatShading",(function(){return _})),n.d(e,"Float32Attribute",(function(){return fm})),n.d(e,"Float32BufferAttribute",(function(){return fi})),n.d(e,"Float64Attribute",(function(){return pm})),n.d(e,"Float64BufferAttribute",(function(){return pi})),n.d(e,"FloatType",(function(){return Ft})),n.d(e,"Fog",(function(){return Jc})),n.d(e,"FogExp2",(function(){return $c})),n.d(e,"Font",(function(){return nd})),n.d(e,"FontLoader",(function(){return od})),n.d(e,"FrontFaceDirectionCCW",(function(){return h})),n.d(e,"FrontFaceDirectionCW",(function(){return l})),n.d(e,"FrontSide",(function(){return m})),n.d(e,"Frustum",(function(){return fo})),n.d(e,"GammaEncoding",(function(){return Ne})),n.d(e,"Geometry",(function(){return Yi})),n.d(e,"GeometryUtils",(function(){return Em})),n.d(e,"GreaterDepth",(function(){return K})),n.d(e,"GreaterEqualDepth",(function(){return Z})),n.d(e,"GreaterEqualStencilFunc",(function(){return on})),n.d(e,"GreaterStencilFunc",(function(){return nn})),n.d(e,"GridHelper",(function(){return wg})),n.d(e,"Group",(function(){return jc})),n.d(e,"HalfFloatType",(function(){return Bt})),n.d(e,"HemisphereLight",(function(){return Rp})),n.d(e,"HemisphereLightHelper",(function(){return bg})),n.d(e,"HemisphereLightProbe",(function(){return ld})),n.d(e,"IcosahedronBufferGeometry",(function(){return oh})),n.d(e,"IcosahedronGeometry",(function(){return ih})),n.d(e,"ImageBitmapLoader",(function(){return td})),n.d(e,"ImageLoader",(function(){return Kf})),n.d(e,"ImageUtils",(function(){return Ln})),n.d(e,"ImmediateRenderObject",(function(){return ng})),n.d(e,"IncrementStencilOp",(function(){return Xe})),n.d(e,"IncrementWrapStencilOp",(function(){return $e})),n.d(e,"InstancedBufferAttribute",(function(){return Wp})),n.d(e,"InstancedBufferGeometry",(function(){return qp})),n.d(e,"InstancedInterleavedBuffer",(function(){return qd})),n.d(e,"InstancedMesh",(function(){return Tl})),n.d(e,"Int16Attribute",(function(){return um})),n.d(e,"Int16BufferAttribute",(function(){return ui})),n.d(e,"Int32Attribute",(function(){return lm})),n.d(e,"Int32BufferAttribute",(function(){return li})),n.d(e,"Int8Attribute",(function(){return om})),n.d(e,"Int8BufferAttribute",(function(){return oi})),n.d(e,"IntType",(function(){return Nt})),n.d(e,"InterleavedBuffer",(function(){return Zc})),n.d(e,"InterleavedBufferAttribute",(function(){return Kc})),n.d(e,"Interpolant",(function(){return Lf})),n.d(e,"InterpolateDiscrete",(function(){return Ee})),n.d(e,"InterpolateLinear",(function(){return Se})),n.d(e,"InterpolateSmooth",(function(){return Me})),n.d(e,"InvertStencilOp",(function(){return Ze})),n.d(e,"JSONLoader",(function(){return Mm})),n.d(e,"KeepStencilOp",(function(){return qe})),n.d(e,"KeyframeTrack",(function(){return Rf})),n.d(e,"LOD",(function(){return ml})),n.d(e,"LatheBufferGeometry",(function(){return rf})),n.d(e,"LatheGeometry",(function(){return nf})),n.d(e,"Layers",(function(){return qn})),n.d(e,"LensFlare",(function(){return Cm})),n.d(e,"LessDepth",(function(){return Y})),n.d(e,"LessEqualDepth",(function(){return $})),n.d(e,"LessEqualStencilFunc",(function(){return en})),n.d(e,"LessStencilFunc",(function(){return Qe})),n.d(e,"Light",(function(){return Pp})),n.d(e,"LightProbe",(function(){return cd})),n.d(e,"LightProbeHelper",(function(){return xg})),n.d(e,"LightShadow",(function(){return Op})),n.d(e,"Line",(function(){return Ol})),n.d(e,"Line3",(function(){return eg})),n.d(e,"LineBasicMaterial",(function(){return Cl})),n.d(e,"LineCurve",(function(){return wp})),n.d(e,"LineCurve3",(function(){return Ep})),n.d(e,"LineDashedMaterial",(function(){return Mf})),n.d(e,"LineLoop",(function(){return Bl})),n.d(e,"LinePieces",(function(){return Yg})),n.d(e,"LineSegments",(function(){return Fl})),n.d(e,"LineStrip",(function(){return Xg})),n.d(e,"LinearEncoding",(function(){return Re})),n.d(e,"LinearFilter",(function(){return Mt})),n.d(e,"LinearInterpolant",(function(){return If})),n.d(e,"LinearMipMapLinearFilter",(function(){return At})),n.d(e,"LinearMipMapNearestFilter",(function(){return Ct})),n.d(e,"LinearMipmapLinearFilter",(function(){return Lt})),n.d(e,"LinearMipmapNearestFilter",(function(){return Tt})),n.d(e,"LinearToneMapping",(function(){return it})),n.d(e,"Loader",(function(){return Wf})),n.d(e,"LoaderUtils",(function(){return Hp})),n.d(e,"LoadingManager",(function(){return Hf})),n.d(e,"LogLuvEncoding",(function(){return Fe})),n.d(e,"LoopOnce",(function(){return be})),n.d(e,"LoopPingPong",(function(){return we})),n.d(e,"LoopRepeat",(function(){return xe})),n.d(e,"LuminanceAlphaFormat",(function(){return Wt})),n.d(e,"LuminanceFormat",(function(){return qt})),n.d(e,"MOUSE",(function(){return i})),n.d(e,"Material",(function(){return ni})),n.d(e,"MaterialLoader",(function(){return Vp})),n.d(e,"Math",(function(){return _n})),n.d(e,"Matrix3",(function(){return Cn})),n.d(e,"Matrix4",(function(){return Gn})),n.d(e,"MaxEquation",(function(){return N})),n.d(e,"Mesh",(function(){return Gi})),n.d(e,"MeshBasicMaterial",(function(){return ri})),n.d(e,"MeshDepthMaterial",(function(){return Ic})),n.d(e,"MeshDistanceMaterial",(function(){return Pc})),n.d(e,"MeshFaceMaterial",(function(){return $g})),n.d(e,"MeshLambertMaterial",(function(){return Ef})),n.d(e,"MeshMatcapMaterial",(function(){return Sf})),n.d(e,"MeshNormalMaterial",(function(){return wf})),n.d(e,"MeshPhongMaterial",(function(){return bf})),n.d(e,"MeshPhysicalMaterial",(function(){return _f})),n.d(e,"MeshStandardMaterial",(function(){return yf})),n.d(e,"MeshToonMaterial",(function(){return xf})),n.d(e,"MinEquation",(function(){return O})),n.d(e,"MirroredRepeatWrapping",(function(){return _t})),n.d(e,"MixOperation",(function(){return et})),n.d(e,"MultiMaterial",(function(){return Jg})),n.d(e,"MultiplyBlending",(function(){return L})),n.d(e,"MultiplyOperation",(function(){return tt})),n.d(e,"NearestFilter",(function(){return bt})),n.d(e,"NearestMipMapLinearFilter",(function(){return St})),n.d(e,"NearestMipMapNearestFilter",(function(){return wt})),n.d(e,"NearestMipmapLinearFilter",(function(){return Et})),n.d(e,"NearestMipmapNearestFilter",(function(){return xt})),n.d(e,"NeverDepth",(function(){return W})),n.d(e,"NeverStencilFunc",(function(){return Ke})),n.d(e,"NoBlending",(function(){return S})),n.d(e,"NoColors",(function(){return x})),n.d(e,"NoToneMapping",(function(){return rt})),n.d(e,"NormalBlending",(function(){return M})),n.d(e,"NotEqualDepth",(function(){return Q})),n.d(e,"NotEqualStencilFunc",(function(){return rn})),n.d(e,"NumberKeyframeTrack",(function(){return Df})),n.d(e,"Object3D",(function(){return or})),n.d(e,"ObjectLoader",(function(){return $p})),n.d(e,"ObjectSpaceNormalMap",(function(){return Ve})),n.d(e,"OctahedronBufferGeometry",(function(){return rh})),n.d(e,"OctahedronGeometry",(function(){return nh})),n.d(e,"OneFactor",(function(){return F})),n.d(e,"OneMinusDstAlphaFactor",(function(){return z})),n.d(e,"OneMinusDstColorFactor",(function(){return H})),n.d(e,"OneMinusSrcAlphaFactor",(function(){return j})),n.d(e,"OneMinusSrcColorFactor",(function(){return k})),n.d(e,"OrthographicCamera",(function(){return kp})),n.d(e,"PCFShadowMap",(function(){return p})),n.d(e,"PCFSoftShadowMap",(function(){return d})),n.d(e,"ParametricBufferGeometry",(function(){return Zl})),n.d(e,"ParametricGeometry",(function(){return Jl})),n.d(e,"Particle",(function(){return Kg})),n.d(e,"ParticleBasicMaterial",(function(){return em})),n.d(e,"ParticleSystem",(function(){return Qg})),n.d(e,"ParticleSystemMaterial",(function(){return nm})),n.d(e,"Path",(function(){return Ap})),n.d(e,"PerspectiveCamera",(function(){return io})),n.d(e,"Plane",(function(){return Dr})),n.d(e,"PlaneBufferGeometry",(function(){return Ds})),n.d(e,"PlaneGeometry",(function(){return Ns})),n.d(e,"PlaneHelper",(function(){return jg})),n.d(e,"PointCloud",(function(){return Zg})),n.d(e,"PointCloudMaterial",(function(){return tm})),n.d(e,"PointLight",(function(){return Bp})),n.d(e,"PointLightHelper",(function(){return gg})),n.d(e,"Points",(function(){return Vl})),n.d(e,"PointsMaterial",(function(){return kl})),n.d(e,"PolarGridHelper",(function(){return Eg})),n.d(e,"PolyhedronBufferGeometry",(function(){return Ql})),n.d(e,"PolyhedronGeometry",(function(){return Kl})),n.d(e,"PositionalAudio",(function(){return Td})),n.d(e,"PositionalAudioHelper",(function(){return Sg})),n.d(e,"PropertyBinding",(function(){return jd})),n.d(e,"PropertyMixer",(function(){return Ld})),n.d(e,"QuadraticBezierCurve",(function(){return Sp})),n.d(e,"QuadraticBezierCurve3",(function(){return Mp})),n.d(e,"Quaternion",(function(){return xn})),n.d(e,"QuaternionKeyframeTrack",(function(){return Bf})),n.d(e,"QuaternionLinearInterpolant",(function(){return Ff})),n.d(e,"REVISION",(function(){return r})),n.d(e,"RGBADepthPacking",(function(){return Ge})),n.d(e,"RGBAFormat",(function(){return Ht})),n.d(e,"RGBA_ASTC_10x10_Format",(function(){return ve})),n.d(e,"RGBA_ASTC_10x5_Format",(function(){return de})),n.d(e,"RGBA_ASTC_10x6_Format",(function(){return ge})),n.d(e,"RGBA_ASTC_10x8_Format",(function(){return me})),n.d(e,"RGBA_ASTC_12x10_Format",(function(){return ye})),n.d(e,"RGBA_ASTC_12x12_Format",(function(){return _e})),n.d(e,"RGBA_ASTC_4x4_Format",(function(){return ae})),n.d(e,"RGBA_ASTC_5x4_Format",(function(){return se})),n.d(e,"RGBA_ASTC_5x5_Format",(function(){return ue})),n.d(e,"RGBA_ASTC_6x5_Format",(function(){return ce})),n.d(e,"RGBA_ASTC_6x6_Format",(function(){return le})),n.d(e,"RGBA_ASTC_8x5_Format",(function(){return he})),n.d(e,"RGBA_ASTC_8x6_Format",(function(){return fe})),n.d(e,"RGBA_ASTC_8x8_Format",(function(){return pe})),n.d(e,"RGBA_PVRTC_2BPPV1_Format",(function(){return ie})),n.d(e,"RGBA_PVRTC_4BPPV1_Format",(function(){return re})),n.d(e,"RGBA_S3TC_DXT1_Format",(function(){return Kt})),n.d(e,"RGBA_S3TC_DXT3_Format",(function(){return Qt})),n.d(e,"RGBA_S3TC_DXT5_Format",(function(){return te})),n.d(e,"RGBDEncoding",(function(){return Ue})),n.d(e,"RGBEEncoding",(function(){return De})),n.d(e,"RGBEFormat",(function(){return Xt})),n.d(e,"RGBFormat",(function(){return Vt})),n.d(e,"RGBM16Encoding",(function(){return ke})),n.d(e,"RGBM7Encoding",(function(){return Be})),n.d(e,"RGB_ETC1_Format",(function(){return oe})),n.d(e,"RGB_PVRTC_2BPPV1_Format",(function(){return ne})),n.d(e,"RGB_PVRTC_4BPPV1_Format",(function(){return ee})),n.d(e,"RGB_S3TC_DXT1_Format",(function(){return Zt})),n.d(e,"RawShaderMaterial",(function(){return vf})),n.d(e,"Ray",(function(){return Pr})),n.d(e,"Raycaster",(function(){return Wd})),n.d(e,"RectAreaLight",(function(){return zp})),n.d(e,"RectAreaLightHelper",(function(){return mg})),n.d(e,"RedFormat",(function(){return Jt})),n.d(e,"ReinhardToneMapping",(function(){return ot})),n.d(e,"RepeatWrapping",(function(){return vt})),n.d(e,"ReplaceStencilOp",(function(){return We})),n.d(e,"ReverseSubtractEquation",(function(){return R})),n.d(e,"RingBufferGeometry",(function(){return ef})),n.d(e,"RingGeometry",(function(){return tf})),n.d(e,"Scene",(function(){return ar})),n.d(e,"SceneUtils",(function(){return Tm})),n.d(e,"ShaderChunk",(function(){return As})),n.d(e,"ShaderLib",(function(){return Ps})),n.d(e,"ShaderMaterial",(function(){return no})),n.d(e,"ShadowMaterial",(function(){return mf})),n.d(e,"Shape",(function(){return Ip})),n.d(e,"ShapeBufferGeometry",(function(){return af})),n.d(e,"ShapeGeometry",(function(){return of})),n.d(e,"ShapePath",(function(){return ed})),n.d(e,"ShapeUtils",(function(){return Vh})),n.d(e,"ShortType",(function(){return Rt})),n.d(e,"Skeleton",(function(){return bl})),n.d(e,"SkeletonHelper",(function(){return dg})),n.d(e,"SkinnedMesh",(function(){return vl})),n.d(e,"SmoothShading",(function(){return b})),n.d(e,"Sphere",(function(){return Er})),n.d(e,"SphereBufferGeometry",(function(){return Qh})),n.d(e,"SphereGeometry",(function(){return Kh})),n.d(e,"Spherical",(function(){return $d})),n.d(e,"SphericalHarmonics3",(function(){return ud})),n.d(e,"SphericalReflectionMapping",(function(){return dt})),n.d(e,"Spline",(function(){return mm})),n.d(e,"SplineCurve",(function(){return Tp})),n.d(e,"SplineCurve3",(function(){return gm})),n.d(e,"SpotLight",(function(){return Dp})),n.d(e,"SpotLightHelper",(function(){return cg})),n.d(e,"SpotLightShadow",(function(){return Np})),n.d(e,"Sprite",(function(){return fl})),n.d(e,"SpriteMaterial",(function(){return Qc})),n.d(e,"SrcAlphaFactor",(function(){return U})),n.d(e,"SrcAlphaSaturateFactor",(function(){return q})),n.d(e,"SrcColorFactor",(function(){return B})),n.d(e,"StaticCopyUsage",(function(){return pn})),n.d(e,"StaticDrawUsage",(function(){return sn})),n.d(e,"StaticReadUsage",(function(){return ln})),n.d(e,"StereoCamera",(function(){return dd})),n.d(e,"StreamCopyUsage",(function(){return gn})),n.d(e,"StreamDrawUsage",(function(){return cn})),n.d(e,"StreamReadUsage",(function(){return fn})),n.d(e,"StringKeyframeTrack",(function(){return kf})),n.d(e,"SubtractEquation",(function(){return P})),n.d(e,"SubtractiveBlending",(function(){return C})),n.d(e,"TOUCH",(function(){return o})),n.d(e,"TangentSpaceNormalMap",(function(){return ze})),n.d(e,"TetrahedronBufferGeometry",(function(){return eh})),n.d(e,"TetrahedronGeometry",(function(){return th})),n.d(e,"TextBufferGeometry",(function(){return Zh})),n.d(e,"TextGeometry",(function(){return Jh})),n.d(e,"Texture",(function(){return In})),n.d(e,"TextureLoader",(function(){return tp})),n.d(e,"TorusBufferGeometry",(function(){return ph})),n.d(e,"TorusGeometry",(function(){return fh})),n.d(e,"TorusKnotBufferGeometry",(function(){return hh})),n.d(e,"TorusKnotGeometry",(function(){return lh})),n.d(e,"Triangle",(function(){return Wr})),n.d(e,"TriangleFanDrawMode",(function(){return Pe})),n.d(e,"TriangleStripDrawMode",(function(){return Ie})),n.d(e,"TrianglesDrawMode",(function(){return Ae})),n.d(e,"TubeBufferGeometry",(function(){return ch})),n.d(e,"TubeGeometry",(function(){return uh})),n.d(e,"UVMapping",(function(){return ct})),n.d(e,"Uint16Attribute",(function(){return cm})),n.d(e,"Uint16BufferAttribute",(function(){return ci})),n.d(e,"Uint32Attribute",(function(){return hm})),n.d(e,"Uint32BufferAttribute",(function(){return hi})),n.d(e,"Uint8Attribute",(function(){return am})),n.d(e,"Uint8BufferAttribute",(function(){return ai})),n.d(e,"Uint8ClampedAttribute",(function(){return sm})),n.d(e,"Uint8ClampedBufferAttribute",(function(){return si})),n.d(e,"Uncharted2ToneMapping",(function(){return at})),n.d(e,"Uniform",(function(){return Hd})),n.d(e,"UniformsLib",(function(){return Is})),n.d(e,"UniformsUtils",(function(){return Qi})),n.d(e,"UnsignedByteType",(function(){return It})),n.d(e,"UnsignedInt248Type",(function(){return Gt})),n.d(e,"UnsignedIntType",(function(){return Dt})),n.d(e,"UnsignedShort4444Type",(function(){return kt})),n.d(e,"UnsignedShort5551Type",(function(){return Ut})),n.d(e,"UnsignedShort565Type",(function(){return jt})),n.d(e,"UnsignedShortType",(function(){return Ot})),n.d(e,"VSMShadowMap",(function(){return g})),n.d(e,"Vector2",(function(){return bn})),n.d(e,"Vector3",(function(){return Sn})),n.d(e,"Vector4",(function(){return Pn})),n.d(e,"VectorKeyframeTrack",(function(){return Uf})),n.d(e,"Vertex",(function(){return rm})),n.d(e,"VertexColors",(function(){return E})),n.d(e,"VertexNormalsHelper",(function(){return sg})),n.d(e,"VideoTexture",(function(){return ql})),n.d(e,"WebGLMultisampleRenderTarget",(function(){return On})),n.d(e,"WebGLRenderTarget",(function(){return Rn})),n.d(e,"WebGLRenderTargetCube",(function(){return uo})),n.d(e,"WebGLRenderer",(function(){return Yc})),n.d(e,"WebGLUtils",(function(){return Bc})),n.d(e,"WireframeGeometry",(function(){return $l})),n.d(e,"WireframeHelper",(function(){return bm})),n.d(e,"WrapAroundEnding",(function(){return Le})),n.d(e,"XHRLoader",(function(){return xm})),n.d(e,"ZeroCurvatureEnding",(function(){return Te})),n.d(e,"ZeroFactor",(function(){return D})),n.d(e,"ZeroSlopeEnding",(function(){return Ce})),n.d(e,"ZeroStencilOp",(function(){return He})),n.d(e,"sRGBEncoding",(function(){return Oe})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e});var r="111",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,u=2,c=3,l=0,h=1,f=0,p=1,d=2,g=3,m=0,v=1,y=2,_=1,b=2,x=0,w=1,E=2,S=0,M=1,T=2,C=3,L=4,A=5,I=100,P=101,R=102,O=103,N=104,D=200,F=201,B=202,k=203,U=204,j=205,G=206,z=207,V=208,H=209,q=210,W=0,X=1,Y=2,$=3,J=4,Z=5,K=6,Q=7,tt=0,et=1,nt=2,rt=0,it=1,ot=2,at=3,st=4,ut=5,ct=300,lt=301,ht=302,ft=303,pt=304,dt=305,gt=306,mt=307,vt=1e3,yt=1001,_t=1002,bt=1003,xt=1004,wt=1004,Et=1005,St=1005,Mt=1006,Tt=1007,Ct=1007,Lt=1008,At=1008,It=1009,Pt=1010,Rt=1011,Ot=1012,Nt=1013,Dt=1014,Ft=1015,Bt=1016,kt=1017,Ut=1018,jt=1019,Gt=1020,zt=1021,Vt=1022,Ht=1023,qt=1024,Wt=1025,Xt=Ht,Yt=1026,$t=1027,Jt=1028,Zt=33776,Kt=33777,Qt=33778,te=33779,ee=35840,ne=35841,re=35842,ie=35843,oe=36196,ae=37808,se=37809,ue=37810,ce=37811,le=37812,he=37813,fe=37814,pe=37815,de=37816,ge=37817,me=37818,ve=37819,ye=37820,_e=37821,be=2200,xe=2201,we=2202,Ee=2300,Se=2301,Me=2302,Te=2400,Ce=2401,Le=2402,Ae=0,Ie=1,Pe=2,Re=3e3,Oe=3001,Ne=3007,De=3002,Fe=3003,Be=3004,ke=3005,Ue=3006,je=3200,Ge=3201,ze=0,Ve=1,He=0,qe=7680,We=7681,Xe=7682,Ye=7683,$e=34055,Je=34056,Ze=5386,Ke=512,Qe=513,tn=514,en=515,nn=516,rn=517,on=518,an=519,sn=35044,un=35048,cn=35040,ln=35045,hn=35049,fn=35041,pn=35046,dn=35050,gn=35042;function mn(){}Object.assign(mn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var r=n.slice(0),i=0,o=r.length;i<o;i++)r[i].call(this,t)}}}});for(var vn=[],yn=0;yn<256;yn++)vn[yn]=(yn<16?"0":"")+yn.toString(16);var _n={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=vn[255&t]+vn[t>>8&255]+vn[t>>16&255]+vn[t>>24&255]+"-"+vn[255&e]+vn[e>>8&255]+"-"+vn[e>>16&15|64]+vn[e>>24&255]+"-"+vn[63&n|128]+vn[n>>8&255]+"-"+vn[n>>16&255]+vn[n>>24&255]+vn[255&r]+vn[r>>8&255]+vn[r>>16&255]+vn[r>>24&255];return i.toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*_n.DEG2RAD},radToDeg:function(t){return t*_n.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function bn(t,e){this.x=t||0,this.y=e||0}function xn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}Object.defineProperties(bn.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(bn.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}),Object.assign(xn,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(l!==d||s!==h||u!==f||c!==p){var g=1-a,m=s*h+u*f+c*p+l*d,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,m*v);g=Math.sin(g*b)/_,a=Math.sin(a*b)/_}var x=a*v;if(s=s*g+h*x,u=u*g+f*x,c=c*g+p*x,l=l*g+d*x,g===1-a){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}}),Object.defineProperties(xn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(xn.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),h=s(n/2),f=s(r/2),p=s(i/2);return"XYZ"===o?(this._x=h*c*l+u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l-h*f*p):"YXZ"===o?(this._x=h*c*l+u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l+h*f*p):"ZXY"===o?(this._x=h*c*l-u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l-h*f*p):"ZYX"===o?(this._x=h*c*l-u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l+h*f*p):"YZX"===o?(this._x=h*c*l+u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l-h*f*p):"XZY"===o&&(this._x=h*c*l-u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l+h*f*p),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-c)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(l-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+c)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-c)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+c)/e,this._y=(u+l)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=1e-6,r=t.dot(e)+1;return r<n?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=r),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(_n.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,a),h=Math.sin((1-e)*l)/c,f=Math.sin(e*l)/c;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var wn=new Sn,En=new xn;function Sn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(Sn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(En.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(En.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,c=s*n+a*e-i*r,l=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return wn.copy(this).projectOnVector(t),this.sub(wn)},reflect:function(t){return this.sub(wn.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());0===e&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var n=this.dot(t)/e;return Math.acos(_n.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var Mn,Tn=new Sn;function Cn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Cn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)Tn.x=t.getX(e),Tn.y=t.getY(e),Tn.z=t.getZ(e),Tn.applyMatrix3(this),t.setXYZ(e,Tn.x,Tn.y,Tn.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],p=n[8],d=r[0],g=r[3],m=r[6],v=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=o*d+a*v+s*b,i[3]=o*g+a*y+s*x,i[6]=o*m+a*_+s*w,i[1]=u*d+c*v+l*b,i[4]=u*g+c*y+l*x,i[7]=u*m+c*_+l*w,i[2]=h*d+f*v+p*b,i[5]=h*g+f*y+p*x,i[8]=h*m+f*_+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],p=f*u-c*h,d=c*l-f*s,g=h*s-u*l,m=i*p+o*d+a*g;if(0===m){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return r[0]=p*y,r[1]=(a*h-f*o)*y,r[2]=(c*o-a*u)*y,r[3]=d*y,r[4]=(f*i-a*l)*y,r[5]=(a*s-c*i)*y,r[6]=g*y,r[7]=(o*l-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*c,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Ln={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Mn&&(Mn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Mn.width=t.width,Mn.height=t.height;var n=Mn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Mn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},An=0;function In(t,e,n,r,i,o,a,s,u,c){Object.defineProperty(this,"id",{value:An++}),this.uuid=_n.generateUUID(),this.name="",this.image=void 0!==t?t:In.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:In.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:yt,this.wrapT=void 0!==r?r:yt,this.magFilter=void 0!==i?i:Mt,this.minFilter=void 0!==o?o:Lt,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Ht,this.type=void 0!==s?s:It,this.offset=new bn(0,0),this.repeat=new bn(1,1),this.center=new bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Re,this.version=0,this.onUpdate=null}function Pn(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function Rn(t,e,n){this.width=t,this.height=e,this.scissor=new Pn(0,0,t,e),this.scissorTest=!1,this.viewport=new Pn(0,0,t,e),n=n||{},this.texture=new In(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Mt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function On(t,e,n){Rn.call(this,t,e,n),this.samples=4}In.DEFAULT_IMAGE=void 0,In.DEFAULT_MAPPING=ct,In.prototype=Object.assign(Object.create(mn.prototype),{constructor:In,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=_n.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Ln.getDataURL(r[o]))}else i=Ln.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==ct)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case vt:t.x=t.x-Math.floor(t.x);break;case yt:t.x=t.x<0?0:1;break;case _t:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case vt:t.y=t.y-Math.floor(t.y);break;case yt:t.y=t.y<0?0:1;break;case _t:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(In.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(Pn.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(Pn.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,u=s[0],c=s[4],l=s[8],h=s[1],f=s[5],p=s[9],d=s[2],g=s[6],m=s[10];if(Math.abs(c-h)<o&&Math.abs(l-d)<o&&Math.abs(p-g)<o){if(Math.abs(c+h)<a&&Math.abs(l+d)<a&&Math.abs(p+g)<a&&Math.abs(u+f+m-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var v=(u+1)/2,y=(f+1)/2,_=(m+1)/2,b=(c+h)/4,x=(l+d)/4,w=(p+g)/4;return v>y&&v>_?v<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(v),r=b/n,i=x/n):y>_?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=b/r,i=w/r):_<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=x/i,r=w/i),this.set(n,r,i,e),this}var E=Math.sqrt((g-p)*(g-p)+(l-d)*(l-d)+(h-c)*(h-c));return Math.abs(E)<.001&&(E=1),this.x=(g-p)/E,this.y=(l-d)/E,this.z=(h-c)/E,this.w=Math.acos((u+f+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Rn.prototype=Object.assign(Object.create(mn.prototype),{constructor:Rn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),On.prototype=Object.assign(Object.create(Rn.prototype),{constructor:On,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Rn.prototype.copy.call(this,t),this.samples=t.samples,this}});var Nn=new Sn,Dn=new Gn,Fn=new Sn(0,0,0),Bn=new Sn(1,1,1),kn=new Sn,Un=new Sn,jn=new Sn;function Gn(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Gn.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,c,l,h,f,p,d,g){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=a,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=f,m[7]=p,m[11]=d,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Gn).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/Nn.setFromMatrixColumn(t,0).length(),i=1/Nn.setFromMatrixColumn(t,1).length(),o=1/Nn.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var h=o*c,f=o*l,p=a*c,d=a*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=f+p*u,e[5]=h-d*u,e[9]=-a*s,e[2]=d-h*u,e[6]=p+f*u,e[10]=o*s}else if("YXZ"===t.order){var g=s*c,m=s*l,v=u*c,y=u*l;e[0]=g+y*a,e[4]=v*a-m,e[8]=o*u,e[1]=o*l,e[5]=o*c,e[9]=-a,e[2]=m*a-v,e[6]=y+g*a,e[10]=o*s}else if("ZXY"===t.order){g=s*c,m=s*l,v=u*c,y=u*l;e[0]=g-y*a,e[4]=-o*l,e[8]=v+m*a,e[1]=m+v*a,e[5]=o*c,e[9]=y-g*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){h=o*c,f=o*l,p=a*c,d=a*l;e[0]=s*c,e[4]=p*u-f,e[8]=h*u+d,e[1]=s*l,e[5]=d*u+h,e[9]=f*u-p,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var _=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*c,e[4]=w-_*l,e[8]=x*l+b,e[1]=l,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=b*l+x,e[10]=_-w*l}else if("XZY"===t.order){_=o*s,b=o*u,x=a*s,w=a*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=_*l+w,e[5]=o*c,e[9]=b*l-x,e[2]=x*l-b,e[6]=a*c,e[10]=w*l+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Fn,t,Bn)},lookAt:function(t,e,n){var r=this.elements;return jn.subVectors(t,e),0===jn.lengthSq()&&(jn.z=1),jn.normalize(),kn.crossVectors(n,jn),0===kn.lengthSq()&&(1===Math.abs(n.z)?jn.x+=1e-4:jn.z+=1e-4,jn.normalize(),kn.crossVectors(n,jn)),kn.normalize(),Un.crossVectors(jn,kn),r[0]=kn.x,r[4]=Un.x,r[8]=jn.x,r[1]=kn.y,r[5]=Un.y,r[9]=jn.y,r[2]=kn.z,r[6]=Un.z,r[10]=jn.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],p=n[2],d=n[6],g=n[10],m=n[14],v=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],E=r[8],S=r[12],M=r[1],T=r[5],C=r[9],L=r[13],A=r[2],I=r[6],P=r[10],R=r[14],O=r[3],N=r[7],D=r[11],F=r[15];return i[0]=o*x+a*M+s*A+u*O,i[4]=o*w+a*T+s*I+u*N,i[8]=o*E+a*C+s*P+u*D,i[12]=o*S+a*L+s*R+u*F,i[1]=c*x+l*M+h*A+f*O,i[5]=c*w+l*T+h*I+f*N,i[9]=c*E+l*C+h*P+f*D,i[13]=c*S+l*L+h*R+f*F,i[2]=p*x+d*M+g*A+m*O,i[6]=p*w+d*T+g*I+m*N,i[10]=p*E+d*C+g*P+m*D,i[14]=p*S+d*L+g*R+m*F,i[3]=v*x+y*M+_*A+b*O,i[7]=v*w+y*T+_*I+b*N,i[11]=v*E+y*C+_*P+b*D,i[15]=v*S+y*L+_*R+b*F,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)Nn.x=t.getX(e),Nn.y=t.getY(e),Nn.z=t.getZ(e),Nn.applyMatrix4(this),t.setXYZ(e,Nn.x,Nn.y,Nn.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14],p=t[3],d=t[7],g=t[11],m=t[15];return p*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*f-n*s*f)+d*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*c-i*s*c)+g*(+e*u*l-e*a*f-i*o*l+n*o*f+i*a*c-n*u*c)+m*(-r*a*c-e*s*l+e*a*h+r*o*l-n*o*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=r[8],p=r[9],d=r[10],g=r[11],m=r[12],v=r[13],y=r[14],_=r[15],b=p*y*h-v*d*h+v*l*g-c*y*g-p*l*_+c*d*_,x=m*d*h-f*y*h-m*l*g+u*y*g+f*l*_-u*d*_,w=f*v*h-m*p*h+m*c*g-u*v*g-f*c*_+u*p*_,E=m*p*l-f*v*l-m*c*d+u*v*d+f*c*y-u*p*y,S=i*b+o*x+a*w+s*E;if(0===S){var M="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(M);return console.warn(M),this.identity()}var T=1/S;return n[0]=b*T,n[1]=(v*d*s-p*y*s-v*a*g+o*y*g+p*a*_-o*d*_)*T,n[2]=(c*y*s-v*l*s+v*a*h-o*y*h-c*a*_+o*l*_)*T,n[3]=(p*l*s-c*d*s-p*a*h+o*d*h+c*a*g-o*l*g)*T,n[4]=x*T,n[5]=(f*y*s-m*d*s+m*a*g-i*y*g-f*a*_+i*d*_)*T,n[6]=(m*l*s-u*y*s-m*a*h+i*y*h+u*a*_-i*l*_)*T,n[7]=(u*d*s-f*l*s+f*a*h-i*d*h-u*a*g+i*l*g)*T,n[8]=w*T,n[9]=(m*p*s-f*v*s-m*o*g+i*v*g+f*o*_-i*p*_)*T,n[10]=(u*v*s-m*c*s+m*o*h-i*v*h-u*o*_+i*c*_)*T,n[11]=(f*c*s-u*p*s-f*o*h+i*p*h+u*o*g-i*c*g)*T,n[12]=E*T,n[13]=(f*v*a-m*p*a+m*o*d-i*v*d-f*o*y+i*p*y)*T,n[14]=(m*c*a-u*v*a-m*o*l+i*v*l+u*o*y-i*c*y)*T,n[15]=(u*p*a-f*c*a+f*o*l-i*p*l-u*o*d+i*c*d)*T,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,c=o+o,l=a+a,h=i*u,f=i*c,p=i*l,d=o*c,g=o*l,m=a*l,v=s*u,y=s*c,_=s*l,b=n.x,x=n.y,w=n.z;return r[0]=(1-(d+m))*b,r[1]=(f+_)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(f-_)*x,r[5]=(1-(h+m))*x,r[6]=(g+v)*x,r[7]=0,r[8]=(p+y)*w,r[9]=(g-v)*w,r[10]=(1-(h+d))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,n){var r=this.elements,i=Nn.set(r[0],r[1],r[2]).length(),o=Nn.set(r[4],r[5],r[6]).length(),a=Nn.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],Dn.copy(this);var u=1/i,c=1/o,l=1/a;return Dn.elements[0]*=u,Dn.elements[1]*=u,Dn.elements[2]*=u,Dn.elements[4]*=c,Dn.elements[5]*=c,Dn.elements[6]*=c,Dn.elements[8]*=l,Dn.elements[9]*=l,Dn.elements[10]*=l,e.setFromRotationMatrix(Dn),n.x=i,n.y=o,n.z=a,this},makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),l=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i),l=(e+t)*s,h=(n+r)*u,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var zn=new Gn,Vn=new xn;function Hn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||Hn.DefaultOrder}function qn(){this.mask=1}Hn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Hn.DefaultOrder="XYZ",Object.defineProperties(Hn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(Hn.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=_n.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],c=i[5],l=i[9],h=i[2],f=i[6],p=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return zn.makeRotationFromQuaternion(t),this.setFromRotationMatrix(zn,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return Vn.setFromEuler(this),this.setFromQuaternion(Vn,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Sn(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(qn.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!==(this.mask&t.mask)}});var Wn=0,Xn=new Sn,Yn=new xn,$n=new Gn,Jn=new Sn,Zn=new Sn,Kn=new Sn,Qn=new xn,tr=new Sn(1,0,0),er=new Sn(0,1,0),nr=new Sn(0,0,1),rr={type:"added"},ir={type:"removed"};function or(){Object.defineProperty(this,"id",{value:Wn++}),this.uuid=_n.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=or.DefaultUp.clone();var t=new Sn,e=new Hn,n=new xn,r=new Sn(1,1,1);function i(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Gn},normalMatrix:{value:new Cn}}),this.matrix=new Gn,this.matrixWorld=new Gn,this.matrixAutoUpdate=or.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function ar(){or.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}or.DefaultUp=new Sn(0,1,0),or.DefaultMatrixAutoUpdate=!0,or.prototype=Object.assign(Object.create(mn.prototype),{constructor:or,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Yn.setFromAxisAngle(t,e),this.quaternion.multiply(Yn),this},rotateOnWorldAxis:function(t,e){return Yn.setFromAxisAngle(t,e),this.quaternion.premultiply(Yn),this},rotateX:function(t){return this.rotateOnAxis(tr,t)},rotateY:function(t){return this.rotateOnAxis(er,t)},rotateZ:function(t){return this.rotateOnAxis(nr,t)},translateOnAxis:function(t,e){return Xn.copy(t).applyQuaternion(this.quaternion),this.position.add(Xn.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(tr,t)},translateY:function(t){return this.translateOnAxis(er,t)},translateZ:function(t){return this.translateOnAxis(nr,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4($n.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Jn.copy(t):Jn.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Zn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$n.lookAt(Zn,Jn,this.up):$n.lookAt(Jn,Zn,this.up),this.quaternion.setFromRotationMatrix($n),r&&($n.extractRotation(r.matrixWorld),Yn.setFromRotationMatrix($n),this.quaternion.premultiply(Yn.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(rr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(ir)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),$n.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),$n.multiply(t.parent.matrixWorld)),t.applyMatrix($n),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Sn),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new xn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zn,t,Kn),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Sn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zn,Qn,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Sn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Ae&&(r.drawMode=this.drawMode),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(t.shapes,c)}else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(t.materials,this.material[s]));r.material=l}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(e){var h=g(t.geometries),f=g(t.materials),p=g(t.textures),d=g(t.images);a=g(t.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function g(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),ar.prototype=Object.assign(Object.create(or.prototype),{constructor:ar,isScene:!0,copy:function(t,e){return or.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=or.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var sr=[new Sn,new Sn,new Sn,new Sn,new Sn,new Sn,new Sn,new Sn],ur=new Sn,cr=new br,lr=new Sn,hr=new Sn,fr=new Sn,pr=new Sn,dr=new Sn,gr=new Sn,mr=new Sn,vr=new Sn,yr=new Sn,_r=new Sn;function br(t,e){this.min=void 0!==t?t:new Sn(1/0,1/0,1/0),this.max=void 0!==e?e:new Sn(-1/0,-1/0,-1/0)}function xr(t,e,n,r,i){var o,a;for(o=0,a=t.length-3;o<=a;o+=3){_r.fromArray(t,o);var s=i.x*Math.abs(_r.x)+i.y*Math.abs(_r.y)+i.z*Math.abs(_r.z),u=e.dot(_r),c=n.dot(_r),l=r.dot(_r);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}Object.assign(br.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],h=t[s+2];c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),h=t.getZ(s);c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=ur.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Sn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Sn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),cr.copy(e.boundingBox),cr.applyMatrix4(t.matrixWorld),this.expandByPoint(cr.min),this.expandByPoint(cr.max));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Sn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,ur),ur.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(mr),vr.subVectors(this.max,mr),lr.subVectors(t.a,mr),hr.subVectors(t.b,mr),fr.subVectors(t.c,mr),pr.subVectors(hr,lr),dr.subVectors(fr,hr),gr.subVectors(lr,fr);var e=[0,-pr.z,pr.y,0,-dr.z,dr.y,0,-gr.z,gr.y,pr.z,0,-pr.x,dr.z,0,-dr.x,gr.z,0,-gr.x,-pr.y,pr.x,0,-dr.y,dr.x,0,-gr.y,gr.x,0];return!!xr(e,lr,hr,fr,vr)&&(e=[1,0,0,0,1,0,0,0,1],!!xr(e,lr,hr,fr,vr)&&(yr.crossVectors(pr,dr),e=[yr.x,yr.y,yr.z],xr(e,lr,hr,fr,vr)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Sn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=ur.copy(t).clamp(this.min,this.max);return e.sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(ur).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(sr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),sr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),sr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),sr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),sr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),sr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),sr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),sr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(sr),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var wr=new br;function Er(t,e){this.center=void 0!==t?t:new Sn,this.radius=void 0!==e?e:0}Object.assign(Er.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):wr.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Sn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new br),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var Sr=new Sn,Mr=new Sn,Tr=new Sn,Cr=new Sn,Lr=new Sn,Ar=new Sn,Ir=new Sn;function Pr(t,e){this.origin=void 0!==t?t:new Sn,this.direction=void 0!==e?e:new Sn(0,0,-1)}Object.assign(Pr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Sn),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,Sr)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Sn),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=Sr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Sr.copy(this.direction).multiplyScalar(e).add(this.origin),Sr.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,r){Mr.copy(t).add(e).multiplyScalar(.5),Tr.copy(e).sub(t).normalize(),Cr.copy(this.origin).sub(Mr);var i,o,a,s,u=.5*t.distanceTo(e),c=-this.direction.dot(Tr),l=Cr.dot(this.direction),h=-Cr.dot(Tr),f=Cr.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(i=c*h-l,o=c*l-h,s=u*p,i>=0)if(o>=-s)if(o<=s){var d=1/p;i*=d,o*=d,a=i*(i+c*o+2*l)+o*(c*i+o+2*h)+f}else o=u,i=Math.max(0,-(c*o+l)),a=-i*i+o*(o+2*h)+f;else o=-u,i=Math.max(0,-(c*o+l)),a=-i*i+o*(o+2*h)+f;else o<=-s?(i=Math.max(0,-(-c*u+l)),o=i>0?-u:Math.min(Math.max(-u,-h),u),a=-i*i+o*(o+2*h)+f):o<=s?(i=0,o=Math.min(Math.max(-u,-h),u),a=o*(o+2*h)+f):(i=Math.max(0,-(c*u+l)),o=i>0?u:Math.min(Math.max(-u,-h),u),a=-i*i+o*(o+2*h)+f);else o=c>0?-u:u,i=Math.max(0,-(c*o+l)),a=-i*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Tr).multiplyScalar(o).add(Mr),a},intersectSphere:function(t,e){Sr.subVectors(t.center,this.origin);var n=Sr.dot(this.direction),r=Sr.dot(Sr)-n*n,i=t.radius*t.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),c>=0?(i=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(t.min.z-h.z)*l,s=(t.max.z-h.z)*l):(a=(t.max.z-h.z)*l,s=(t.min.z-h.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,Sr)},intersectTriangle:function(t,e,n,r,i){Lr.subVectors(e,t),Ar.subVectors(n,t),Ir.crossVectors(Lr,Ar);var o,a=this.direction.dot(Ir);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Cr.subVectors(this.origin,t);var s=o*this.direction.dot(Ar.crossVectors(Cr,Ar));if(s<0)return null;var u=o*this.direction.dot(Lr.cross(Cr));if(u<0)return null;if(s+u>a)return null;var c=-o*Cr.dot(Ir);return c<0?null:this.at(c/a,i)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Rr=new Sn,Or=new Sn,Nr=new Cn;function Dr(t,e){this.normal=void 0!==t?t:new Sn(1,0,0),this.constant=void 0!==e?e:0}Object.assign(Dr.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var r=Rr.subVectors(n,e).cross(Or.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Sn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Sn);var n=t.delta(Rr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Sn),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||Nr.getNormalMatrix(t),r=this.coplanarPoint(Rr).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Fr=new Sn,Br=new Sn,kr=new Sn,Ur=new Sn,jr=new Sn,Gr=new Sn,zr=new Sn,Vr=new Sn,Hr=new Sn,qr=new Sn;function Wr(t,e,n){this.a=void 0!==t?t:new Sn,this.b=void 0!==e?e:new Sn,this.c=void 0!==n?n:new Sn}Object.assign(Wr,{getNormal:function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Sn),r.subVectors(n,e),Fr.subVectors(t,e),r.cross(Fr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(t,e,n,r,i){Fr.subVectors(r,e),Br.subVectors(n,e),kr.subVectors(t,e);var o=Fr.dot(Fr),a=Fr.dot(Br),s=Fr.dot(kr),u=Br.dot(Br),c=Br.dot(kr),l=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Sn),0===l)return i.set(-2,-1,-1);var h=1/l,f=(u*s-a*c)*h,p=(o*c-a*s)*h;return i.set(1-f-p,p,f)},containsPoint:function(t,e,n,r){return Wr.getBarycoord(t,e,n,r,Ur),Ur.x>=0&&Ur.y>=0&&Ur.x+Ur.y<=1},getUV:function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,Ur),s.set(0,0),s.addScaledVector(i,Ur.x),s.addScaledVector(o,Ur.y),s.addScaledVector(a,Ur.z),s},isFrontFacing:function(t,e,n,r){return Fr.subVectors(n,e),Br.subVectors(t,e),Fr.cross(Br).dot(r)<0}}),Object.assign(Wr.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Fr.subVectors(this.c,this.b),Br.subVectors(this.a,this.b),.5*Fr.cross(Br).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Sn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Wr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Dr),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Wr.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,r,i){return Wr.getUV(t,this.a,this.b,this.c,e,n,r,i)},containsPoint:function(t){return Wr.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Wr.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Sn);var n,r,i=this.a,o=this.b,a=this.c;jr.subVectors(o,i),Gr.subVectors(a,i),Vr.subVectors(t,i);var s=jr.dot(Vr),u=Gr.dot(Vr);if(s<=0&&u<=0)return e.copy(i);Hr.subVectors(t,o);var c=jr.dot(Hr),l=Gr.dot(Hr);if(c>=0&&l<=c)return e.copy(o);var h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return n=s/(s-c),e.copy(i).addScaledVector(jr,n);qr.subVectors(t,a);var f=jr.dot(qr),p=Gr.dot(qr);if(p>=0&&f<=p)return e.copy(a);var d=f*u-s*p;if(d<=0&&u>=0&&p<=0)return r=u/(u-p),e.copy(i).addScaledVector(Gr,r);var g=c*p-f*l;if(g<=0&&l-c>=0&&f-p>=0)return zr.subVectors(a,o),r=(l-c)/(l-c+(f-p)),e.copy(o).addScaledVector(zr,r);var m=1/(g+d+h);return n=d*m,r=h*m,e.copy(i).addScaledVector(jr,n).addScaledVector(Gr,r)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yr={h:0,s:0,l:0},$r={h:0,s:0,l:0};function Jr(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function Zr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Kr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Qr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function ti(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new Sn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Jr,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(Jr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=_n.euclideanModulo(t,1),e=_n.clamp(e,0,1),n=_n.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=Zr(i,r,t+1/3),this.g=Zr(i,r,t),this.b=Zr(i,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=Xr[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Kr(t.r),this.g=Kr(t.g),this.b=Kr(t.b),this},copyLinearToSRGB:function(t){return this.r=Qr(t.r),this.g=Qr(t.g),this.b=Qr(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:e=(i-o)/c+(i<o?6:0);break;case i:e=(o-r)/c+2;break;case o:e=(r-i)/c+4;break}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Yr),Yr.h+=t,Yr.s+=e,Yr.l+=n,this.setHSL(Yr.h,Yr.s,Yr.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Yr),t.getHSL($r);var n=_n.lerp(Yr.h,$r.h,e),r=_n.lerp(Yr.s,$r.s,e),i=_n.lerp(Yr.l,$r.l,e);return this.setHSL(n,r,i),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Jr.NAMES=Xr,Object.assign(ti.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var ei=0;function ni(){Object.defineProperty(this,"id",{value:ei++}),this.uuid=_n.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=M,this.side=m,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=x,this.opacity=1,this.transparent=!1,this.blendSrc=U,this.blendDst=j,this.blendEquation=I,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=an,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qe,this.stencilZFail=qe,this.stencilZPass=qe,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function ri(t){ni.call(this),this.type="MeshBasicMaterial",this.color=new Jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}function ii(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=sn,this.updateRange={offset:0,count:-1},this.version=0}function oi(t,e,n){ii.call(this,new Int8Array(t),e,n)}function ai(t,e,n){ii.call(this,new Uint8Array(t),e,n)}function si(t,e,n){ii.call(this,new Uint8ClampedArray(t),e,n)}function ui(t,e,n){ii.call(this,new Int16Array(t),e,n)}function ci(t,e,n){ii.call(this,new Uint16Array(t),e,n)}function li(t,e,n){ii.call(this,new Int32Array(t),e,n)}function hi(t,e,n){ii.call(this,new Uint32Array(t),e,n)}function fi(t,e,n){ii.call(this,new Float32Array(t),e,n)}function pi(t,e,n){ii.call(this,new Float64Array(t),e,n)}function di(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function gi(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}ni.prototype=Object.assign(Object.create(mn.prototype),{constructor:ni,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===_;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==M&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==m&&(n.side=this.side),this.vertexColors!==x&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ni.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),ri.prototype=Object.create(ni.prototype),ri.prototype.constructor=ri,ri.prototype.isMeshBasicMaterial=!0,ri.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperty(ii.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ii.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Jr),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new bn),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Sn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Pn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),oi.prototype=Object.create(ii.prototype),oi.prototype.constructor=oi,ai.prototype=Object.create(ii.prototype),ai.prototype.constructor=ai,si.prototype=Object.create(ii.prototype),si.prototype.constructor=si,ui.prototype=Object.create(ii.prototype),ui.prototype.constructor=ui,ci.prototype=Object.create(ii.prototype),ci.prototype.constructor=ci,li.prototype=Object.create(ii.prototype),li.prototype.constructor=li,hi.prototype=Object.create(ii.prototype),hi.prototype.constructor=hi,fi.prototype=Object.create(ii.prototype),fi.prototype.constructor=fi,pi.prototype=Object.create(ii.prototype),pi.prototype.constructor=pi,Object.assign(di.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var c=0;c<u;c++)e[c]={name:s[c].name,data:[]};this.morphTargets.position=e}var l,h=t.morphNormals,f=h.length;if(f>0){l=[];for(c=0;c<f;c++)l[c]={name:h[c].name,data:[]};this.morphTargets.normal=l}var p=t.skinIndices,d=t.skinWeights,g=p.length===r.length,m=d.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<n.length;c++){var v=n[c];this.vertices.push(r[v.a],r[v.b],r[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=v.normal;this.normals.push(_,_,_)}var b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var x=v.color;this.colors.push(x,x,x)}if(!0===o){var w=i[0][c];void 0!==w?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new bn,new bn,new bn))}if(!0===a){w=i[1][c];void 0!==w?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new bn,new bn,new bn))}for(var E=0;E<u;E++){var S=s[E].vertices;e[E].data.push(S[v.a],S[v.b],S[v.c])}for(E=0;E<f;E++){var M=h[E].vertexNormals[c];l[E].data.push(M.a,M.b,M.c)}g&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),m&&this.skinWeights.push(d[v.a],d[v.b],d[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var mi=1,vi=new Gn,yi=new or,_i=new Sn,bi=new br,xi=new br,wi=new Sn;function Ei(){Object.defineProperty(this,"id",{value:mi+=2}),this.uuid=_n.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ei.prototype=Object.assign(Object.create(mn.prototype),{constructor:Ei,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(gi(t)>65535?hi:ci)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Cn).getNormalMatrix(t);r.applyToBufferAttribute(n),n.needsUpdate=!0}var i=this.attributes.tangent;if(void 0!==i){r=(new Cn).getNormalMatrix(t);r.applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return vi.makeRotationX(t),this.applyMatrix(vi),this},rotateY:function(t){return vi.makeRotationY(t),this.applyMatrix(vi),this},rotateZ:function(t){return vi.makeRotationZ(t),this.applyMatrix(vi),this},translate:function(t,e,n){return vi.makeTranslation(t,e,n),this.applyMatrix(vi),this},scale:function(t,e,n){return vi.makeScale(t,e,n),this.applyMatrix(vi),this},lookAt:function(t){return yi.lookAt(t),yi.updateMatrix(),this.applyMatrix(yi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_i).negate(),this.translate(_i.x,_i.y,_i.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new fi(3*e.vertices.length,3),r=new fi(3*e.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new fi(e.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new fi(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(e=this.attributes.position,void 0!==e&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(e=this.attributes.normal,void 0!==e&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(e=this.attributes.color,void 0!==e&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(e=this.attributes.uv,void 0!==e&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(e=this.attributes.lineDistance,void 0!==e&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new di).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new ii(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new ii(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.setAttribute("color",new ii(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new ii(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new ii(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[a],c=0,l=u.length;c<l;c++){var h=u[c],f=new fi(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new fi(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var d=new fi(4*t.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new br);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];bi.setFromBufferAttribute(i),this.morphTargetsRelative?(wi.addVectors(this.boundingBox.min,bi.min),this.boundingBox.expandByPoint(wi),wi.addVectors(this.boundingBox.max,bi.max),this.boundingBox.expandByPoint(wi)):(this.boundingBox.expandByPoint(bi.min),this.boundingBox.expandByPoint(bi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Er);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(bi.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var o=e[r];xi.setFromBufferAttribute(o),this.morphTargetsRelative?(wi.addVectors(bi.min,xi.min),bi.expandByPoint(wi),wi.addVectors(bi.max,xi.max),bi.expandByPoint(wi)):(bi.expandByPoint(xi.min),bi.expandByPoint(xi.max))}bi.getCenter(n);var a=0;for(r=0,i=t.count;r<i;r++)wi.fromBufferAttribute(t,r),a=Math.max(a,n.distanceToSquared(wi));if(e)for(r=0,i=e.length;r<i;r++){o=e[r];for(var s=this.morphTargetsRelative,u=0,c=o.count;u<c;u++)wi.fromBufferAttribute(o,u),s&&(_i.fromBufferAttribute(t,u),wi.add(_i)),a=Math.max(a,n.distanceToSquared(wi))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new ii(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,c=e.normal.array,l=new Sn,h=new Sn,f=new Sn,p=new Sn,d=new Sn;if(t){var g=t.array;for(i=0,o=t.count;i<o;i+=3)a=3*g[i+0],s=3*g[i+1],u=3*g[i+2],l.fromArray(n,a),h.fromArray(n,s),f.fromArray(n,u),p.subVectors(f,h),d.subVectors(l,h),p.cross(d),c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)l.fromArray(n,i),h.fromArray(n,i+3),f.fromArray(n,i+6),p.subVectors(f,h),d.subVectors(l,h),p.cross(d),c[i]=p.x,c[i+1]=p.y,c[i+2]=p.z,c[i+3]=p.x,c[i+4]=p.y,c[i+5]=p.z,c[i+6]=p.x,c[i+7]=p.y,c[i+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r],o=i.array,a=t.attributes[r],s=a.array,u=a.itemSize*e,c=Math.min(s.length,o.length-u),l=0,h=u;l<c;l++,h++)o[h]=s[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)wi.x=t.getX(e),wi.y=t.getY(e),wi.z=t.getZ(e),wi.normalize(),t.setXYZ(e,wi.x,wi.y,wi.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=new n.constructor(e.length*r),o=0,a=0,s=0,u=e.length;s<u;s++){o=e[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new ii(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ei,n=this.index.array,r=this.attributes;for(var i in r){var o=r[i],a=t(o,n);e.setAttribute(i,a)}var s=this.morphAttributes;for(i in s){for(var u=[],c=s[i],l=0,h=c.length;l<h;l++){o=c[l],a=t(o,n);u.push(a)}e.morphAttributes[i]=u}e.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,p=(l=0,f.length);l<p;l++){var d=f[l];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=i[n],a=o.toJSON();""!==o.name&&(a.name=o.name),t.data.attributes[n]=a}var s={},u=!1;for(var n in this.morphAttributes){for(var c=this.morphAttributes[n],l=[],h=0,f=c.length;h<f;h++){o=c[h],a=o.toJSON();""!==o.name&&(a.name=o.name),l.push(a)}l.length>0&&(s[n]=l,u=!0)}u&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var d=this.boundingSphere;return null!==d&&(t.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),t},clone:function(){return(new Ei).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.setAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],c=s[e];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[e]=u}this.morphTargetsRelative=t.morphTargetsRelative;var l=t.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Si=new Gn,Mi=new Pr,Ti=new Er,Ci=new Sn,Li=new Sn,Ai=new Sn,Ii=new Sn,Pi=new Sn,Ri=new Sn,Oi=new Sn,Ni=new Sn,Di=new Sn,Fi=new bn,Bi=new bn,ki=new bn,Ui=new Sn,ji=new Sn;function Gi(t,e){or.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Ei,this.material=void 0!==e?e:new ri({color:16777215*Math.random()}),this.drawMode=Ae,this.updateMorphTargets()}function zi(t,e,n,r,i,o,a,s){var u;if(u=e.side===v?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==y,s),null===u)return null;ji.copy(s),ji.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(ji);return c<n.near||c>n.far?null:{distance:c,point:ji.clone(),object:t}}function Vi(t,e,n,r,i,o,a,s,u,c,l,h){Ci.fromBufferAttribute(i,c),Li.fromBufferAttribute(i,l),Ai.fromBufferAttribute(i,h);var f=t.morphTargetInfluences;if(e.morphTargets&&o&&f){Oi.set(0,0,0),Ni.set(0,0,0),Di.set(0,0,0);for(var p=0,d=o.length;p<d;p++){var g=f[p],m=o[p];0!==g&&(Ii.fromBufferAttribute(m,c),Pi.fromBufferAttribute(m,l),Ri.fromBufferAttribute(m,h),a?(Oi.addScaledVector(Ii,g),Ni.addScaledVector(Pi,g),Di.addScaledVector(Ri,g)):(Oi.addScaledVector(Ii.sub(Ci),g),Ni.addScaledVector(Pi.sub(Li),g),Di.addScaledVector(Ri.sub(Ai),g)))}Ci.add(Oi),Li.add(Ni),Ai.add(Di)}var v=zi(t,e,n,r,Ci,Li,Ai,Ui);if(v){s&&(Fi.fromBufferAttribute(s,c),Bi.fromBufferAttribute(s,l),ki.fromBufferAttribute(s,h),v.uv=Wr.getUV(Ui,Ci,Li,Ai,Fi,Bi,ki,new bn)),u&&(Fi.fromBufferAttribute(u,c),Bi.fromBufferAttribute(u,l),ki.fromBufferAttribute(u,h),v.uv2=Wr.getUV(Ui,Ci,Li,Ai,Fi,Bi,ki,new bn));var y=new ti(c,l,h);Wr.getNormal(Ci,Li,Ai,y.normal),v.face=y}return v}Gi.prototype=Object.assign(Object.create(or.prototype),{constructor:Gi,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return or.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Ti.copy(r.boundingSphere),Ti.applyMatrix4(o),!1!==t.ray.intersectsSphere(Ti)&&(Si.getInverse(o),Mi.copy(t.ray).applyMatrix4(Si),null===r.boundingBox||!1!==Mi.intersectsBox(r.boundingBox))))if(this.drawMode===Ae){if(r.isBufferGeometry){var a,s,u,c,l,h,f,p,d,g,m,v=r.index,y=r.attributes.position,_=r.morphAttributes.position,b=r.morphTargetsRelative,x=r.attributes.uv,w=r.attributes.uv2,E=r.groups,S=r.drawRange;if(null!==v)if(Array.isArray(i))for(c=0,h=E.length;c<h;c++)for(p=E[c],d=i[p.materialIndex],g=Math.max(p.start,S.start),m=Math.min(p.start+p.count,S.start+S.count),l=g,f=m;l<f;l+=3)a=v.getX(l),s=v.getX(l+1),u=v.getX(l+2),n=Vi(this,d,t,Mi,y,_,b,x,w,a,s,u),n&&(n.faceIndex=Math.floor(l/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(g=Math.max(0,S.start),m=Math.min(v.count,S.start+S.count),c=g,h=m;c<h;c+=3)a=v.getX(c),s=v.getX(c+1),u=v.getX(c+2),n=Vi(this,i,t,Mi,y,_,b,x,w,a,s,u),n&&(n.faceIndex=Math.floor(c/3),e.push(n));else if(void 0!==y)if(Array.isArray(i))for(c=0,h=E.length;c<h;c++)for(p=E[c],d=i[p.materialIndex],g=Math.max(p.start,S.start),m=Math.min(p.start+p.count,S.start+S.count),l=g,f=m;l<f;l+=3)a=l,s=l+1,u=l+2,n=Vi(this,d,t,Mi,y,_,b,x,w,a,s,u),n&&(n.faceIndex=Math.floor(l/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(g=Math.max(0,S.start),m=Math.min(y.count,S.start+S.count),c=g,h=m;c<h;c+=3)a=c,s=c+1,u=c+2,n=Vi(this,i,t,Mi,y,_,b,x,w,a,s,u),n&&(n.faceIndex=Math.floor(c/3),e.push(n))}else if(r.isGeometry){var M,T,C,L,A=Array.isArray(i),I=r.vertices,P=r.faces,R=r.faceVertexUvs[0];R.length>0&&(L=R);for(var O=0,N=P.length;O<N;O++){var D=P[O],F=A?i[D.materialIndex]:i;if(void 0!==F&&(M=I[D.a],T=I[D.b],C=I[D.c],n=zi(this,F,t,Mi,M,T,C,Ui),n)){if(L&&L[O]){var B=L[O];Fi.copy(B[0]),Bi.copy(B[1]),ki.copy(B[2]),n.uv=Wr.getUV(Ui,M,T,C,Fi,Bi,ki,new bn)}n.face=D,n.faceIndex=O,e.push(n)}}}}else console.warn("THREE.Mesh: TriangleStripDrawMode and TriangleFanDrawMode are not supported by .raycast().")},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Hi=0,qi=new Gn,Wi=new or,Xi=new Sn;function Yi(){Object.defineProperty(this,"id",{value:Hi+=2}),this.uuid=_n.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Yi.prototype=Object.assign(Object.create(mn.prototype),{constructor:Yi,isGeometry:!0,applyMatrix:function(t){for(var e=(new Cn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(t)}for(n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++)o.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return qi.makeRotationX(t),this.applyMatrix(qi),this},rotateY:function(t){return qi.makeRotationY(t),this.applyMatrix(qi),this},rotateZ:function(t){return qi.makeRotationZ(t),this.applyMatrix(qi),this},translate:function(t,e,n){return qi.makeTranslation(t,e,n),this.applyMatrix(qi),this},scale:function(t,e,n){return qi.makeScale(t,e,n),this.applyMatrix(qi),this},lookAt:function(t){return Wi.lookAt(t),Wi.updateMatrix(),this.applyMatrix(Wi.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var c=0;c<i.length;c+=3)e.vertices.push((new Sn).fromArray(i,c)),void 0!==a&&e.colors.push((new Jr).fromArray(a,c));function l(t,n,r,i){var c=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],l=void 0===o?[]:[(new Sn).fromArray(o,3*t),(new Sn).fromArray(o,3*n),(new Sn).fromArray(o,3*r)],h=new ti(t,n,r,l,c,i);e.faces.push(h),void 0!==s&&e.faceVertexUvs[0].push([(new bn).fromArray(s,2*t),(new bn).fromArray(s,2*n),(new bn).fromArray(s,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new bn).fromArray(u,2*t),(new bn).fromArray(u,2*n),(new bn).fromArray(u,2*r)])}var h=t.groups;if(h.length>0)for(c=0;c<h.length;c++)for(var f=h[c],p=f.start,d=f.count,g=p,m=p+d;g<m;g+=3)void 0!==n?l(n[g],n[g+1],n[g+2],f.materialIndex):l(g,g+1,g+2,f.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)l(n[c],n[c+1],n[c+2]);else for(c=0;c<i.length/3;c+=3)l(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xi).negate(),this.translate(Xi.x,Xi.y,Xi.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Gn;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new Sn,e=new Sn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new Sn;if(t){var s,u,c,l=new Sn,h=new Sn;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],c=this.vertices[o.c],l.subVectors(c,u),h.subVectors(s,u),l.cross(h),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o=this.faces[r],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var f=o.vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new Yi;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new Sn,c={a:new Sn,b:new Sn,c:new Sn},a.push(u),s.push(c)}var u,c,l=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=l.faceNormals[n],c=l.vertexNormals[n],u.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new br),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Er),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,c=this.colors,l=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new Cn).getNormalMatrix(e));for(var h=0,f=a.length;h<f;h++){var p=a[h],d=p.clone();void 0!==e&&d.applyMatrix4(e),o.push(d)}for(h=0,f=l.length;h<f;h++)c.push(l[h].clone());for(h=0,f=u.length;h<f;h++){var g,m,v,y=u[h],_=y.vertexNormals,b=y.vertexColors;g=new ti(y.a+i,y.b+i,y.c+i),g.normal.copy(y.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var x=0,w=_.length;x<w;x++)m=_[x].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),g.vertexNormals.push(m);g.color.copy(y.color);for(x=0,w=b.length;x<w;x++)v=b[x],g.vertexColors.push(v.clone());g.materialIndex=y.materialIndex+n,s.push(g)}for(h=0,f=t.faceVertexUvs.length;h<f;h++){var E=t.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(x=0,w=E.length;x<w;x++){for(var S=E[x],M=[],T=0,C=S.length;T<C;T++)M.push(S[T].clone());this.faceVertexUvs[h].push(M)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},c=[],l=[],h=4,f=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f),void 0===u[e]?(u[e]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[e]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var g=p[n];for(this.faces.splice(g,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(g,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new Sn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;function r(t,e){return t.materialIndex-e.materialIndex}t.sort(r);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),s&&s.length===e&&(o=[]);for(n=0;n<e;n++){var u=t[n]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},c=[],l={},h=[],f={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=!0,g=!1,m=void 0!==this.faceVertexUvs[0][i],v=p.normal.length()>0,y=p.vertexNormals.length>0,_=1!==p.color.r||1!==p.color.g||1!==p.color.b,b=p.vertexColors.length>0,x=0;if(x=M(x,0,0),x=M(x,1,d),x=M(x,2,g),x=M(x,3,m),x=M(x,4,v),x=M(x,5,y),x=M(x,6,_),x=M(x,7,b),a.push(x),a.push(p.a,p.b,p.c),a.push(p.materialIndex),m){var w=this.faceVertexUvs[0][i];a.push(L(w[0]),L(w[1]),L(w[2]))}if(v&&a.push(T(p.normal)),y){var E=p.vertexNormals;a.push(T(E[0]),T(E[1]),T(E[2]))}if(_&&a.push(C(p.color)),b){var S=p.vertexColors;a.push(C(S[0]),C(S[1]),C(S[2]))}}function M(t,e,n){return n?t|1<<e:t&~(1<<e)}function T(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=s.length/3,s.push(t.x,t.y,t.z),u[e])}function C(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]?l[e]:(l[e]=c.length,c.push(t.getHex()),l[e])}function L(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/2,h.push(t.x,t.y),f[e])}return t.data={},t.data.vertices=r,t.data.normals=s,c.length>0&&(t.data.colors=c),h.length>0&&(t.data.uvs=[h]),t.data.faces=a,t},clone:function(){return(new Yi).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var l=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=l.length;r<i;r++){var h=l[r],f=[];for(o=0,a=h.length;o<a;o++){var p=h[o];f.push(p.clone())}this.faceVertexUvs[e].push(f)}}var d=t.morphTargets;for(e=0,n=d.length;e<n;e++){var g={};if(g.name=d[e].name,void 0!==d[e].vertices)for(g.vertices=[],r=0,i=d[e].vertices.length;r<i;r++)g.vertices.push(d[e].vertices[r].clone());if(void 0!==d[e].normals)for(g.normals=[],r=0,i=d[e].normals.length;r<i;r++)g.normals.push(d[e].normals[r].clone());this.morphTargets.push(g)}var m=t.morphNormals;for(e=0,n=m.length;e<n;e++){var v={};if(void 0!==m[e].vertexNormals)for(v.vertexNormals=[],r=0,i=m[e].vertexNormals.length;r<i;r++){var y=m[e].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),v.vertexNormals.push(_)}if(void 0!==m[e].faceNormals)for(v.faceNormals=[],r=0,i=m[e].faceNormals.length;r<i;r++)v.faceNormals.push(m[e].faceNormals[r].clone());this.morphNormals.push(v)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++)this.skinWeights.push(b[e].clone());var x=t.skinIndices;for(e=0,n=x.length;e<n;e++)this.skinIndices.push(x[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class $i extends Yi{constructor(t,e,n,r,i,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Ji(t,e,n,r,i,o)),this.mergeVertices()}}class Ji extends Ei{constructor(t,e,n,r,i,o){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],u=[],c=[],l=[],h=0,f=0;function p(t,e,n,r,i,o,p,d,g,m,v){var y,_,b=o/g,x=p/m,w=o/2,E=p/2,S=d/2,M=g+1,T=m+1,C=0,L=0,A=new Sn;for(_=0;_<T;_++){var I=_*x-E;for(y=0;y<M;y++){var P=y*b-w;A[t]=P*r,A[e]=I*i,A[n]=S,u.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=d>0?1:-1,c.push(A.x,A.y,A.z),l.push(y/g),l.push(1-_/m),C+=1}}for(_=0;_<m;_++)for(y=0;y<g;y++){var R=h+y+M*_,O=h+y+M*(_+1),N=h+(y+1)+M*(_+1),D=h+(y+1)+M*_;s.push(R,O,D),s.push(O,N,D),L+=6}a.addGroup(f,L,v),f+=L,h+=C}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new fi(u,3)),this.setAttribute("normal",new fi(c,3)),this.setAttribute("uv",new fi(l,2))}}function Zi(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function Ki(t){for(var e={},n=0;n<t.length;n++){var r=Zi(t[n]);for(var i in r)e[i]=r[i]}return e}var Qi={clone:Zi,merge:Ki},to="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",eo="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function no(t){ni.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=to,this.fragmentShader=eo,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function ro(){or.call(this),this.type="Camera",this.matrixWorldInverse=new Gn,this.projectionMatrix=new Gn,this.projectionMatrixInverse=new Gn}function io(t,e,n,r){ro.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}no.prototype=Object.create(ni.prototype),no.prototype.constructor=no,no.prototype.isShaderMaterial=!0,no.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Zi(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},no.prototype.toJSON=function(t){var e=ni.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n],i=r.value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e},ro.prototype=Object.assign(Object.create(or.prototype),{constructor:ro,isCamera:!0,copy:function(t,e){return or.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Sn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){or.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),io.prototype=Object.assign(Object.create(ro.prototype),{constructor:io,isPerspectiveCamera:!0,copy:function(t,e){return ro.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*_n.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*_n.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*_n.RAD2DEG*Math.atan(Math.tan(.5*_n.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*_n.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=or.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var oo=90,ao=1;function so(t,e,n,r){or.call(this),this.type="CubeCamera";var i=new io(oo,ao,t,e);i.up.set(0,-1,0),i.lookAt(new Sn(1,0,0)),this.add(i);var o=new io(oo,ao,t,e);o.up.set(0,-1,0),o.lookAt(new Sn(-1,0,0)),this.add(o);var a=new io(oo,ao,t,e);a.up.set(0,0,1),a.lookAt(new Sn(0,1,0)),this.add(a);var s=new io(oo,ao,t,e);s.up.set(0,0,-1),s.lookAt(new Sn(0,-1,0)),this.add(s);var u=new io(oo,ao,t,e);u.up.set(0,-1,0),u.lookAt(new Sn(0,0,1)),this.add(u);var c=new io(oo,ao,t,e);c.up.set(0,-1,0),c.lookAt(new Sn(0,0,-1)),this.add(c),r=r||{format:Vt,magFilter:Mt,minFilter:Mt},this.renderTarget=new uo(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),r=this.renderTarget,l=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,i),t.setRenderTarget(r,1),t.render(e,o),t.setRenderTarget(r,2),t.render(e,a),t.setRenderTarget(r,3),t.render(e,s),t.setRenderTarget(r,4),t.render(e,u),r.texture.generateMipmaps=l,t.setRenderTarget(r,5),t.render(e,c),t.setRenderTarget(n)},this.clear=function(t,e,n,r){for(var i=t.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,n,r);t.setRenderTarget(i)}}function uo(t,e,n){Rn.call(this,t,e,n)}function co(t,e,n,r,i,o,a,s,u,c,l,h){In.call(this,null,o,a,s,u,c,r,i,l,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==u?u:bt,this.minFilter=void 0!==c?c:bt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}so.prototype=Object.create(or.prototype),so.prototype.constructor=so,uo.prototype=Object.create(Rn.prototype),uo.prototype.constructor=uo,uo.prototype.isWebGLRenderTargetCube=!0,uo.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new ar,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new no({type:"CubemapFromEquirect",uniforms:Zi(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:v,blending:S});i.uniforms.tEquirect.value=e;var o=new Gi(new Ji(5,5,5),i);n.add(o);var a=new so(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(t,n),o.geometry.dispose(),o.material.dispose(),this},co.prototype=Object.create(In.prototype),co.prototype.constructor=co,co.prototype.isDataTexture=!0;var lo=new Er,ho=new Sn;function fo(t,e,n,r,i,o){this.planes=[void 0!==t?t:new Dr,void 0!==e?e:new Dr,void 0!==n?n:new Dr,void 0!==r?r:new Dr,void 0!==i?i:new Dr,void 0!==o?o:new Dr]}Object.assign(fo.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],p=n[10],d=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,l-s,d-h,y-g).normalize(),e[1].setComponents(a+r,l+s,d+h,y+g).normalize(),e[2].setComponents(a+i,l+u,d+f,y+m).normalize(),e[3].setComponents(a-i,l-u,d-f,y-m).normalize(),e[4].setComponents(a-o,l-c,d-p,y-v).normalize(),e[5].setComponents(a+o,l+c,d+p,y+v).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),lo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(lo)},intersectsSprite:function(t){return lo.center.set(0,0,0),lo.radius=.7071067811865476,lo.applyMatrix4(t.matrixWorld),this.intersectsSphere(lo)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var o=e[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(ho.x=r.normal.x>0?t.max.x:t.min.x,ho.y=r.normal.y>0?t.max.y:t.min.y,ho.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(ho)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var po="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",go="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",mo="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",vo="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",yo="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",_o="vec3 transformed = vec3( position );",bo="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",xo="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",wo="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Eo="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",So="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Mo="#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",To="#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",Co="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Lo="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Ao="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Io="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Po="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",Ro="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",Oo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",No="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Do="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",Fo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Bo="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",ko="gl_FragColor = linearToOutputTexel( gl_FragColor );",Uo="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",jo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Go="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",zo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Vo="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Ho="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",qo="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",Wo="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",Xo="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Yo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",$o="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",Jo="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",Zo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Ko="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",Qo="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",ta="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",ea="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",na="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",ra="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",ia="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",oa="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",aa="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",sa="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",ua="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",ca="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",la="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",ha="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",fa="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",pa="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",da="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",ga="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",ma="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",va="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",ya="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",_a="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",ba="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",xa="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",wa="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",Ea="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",Sa="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Ma="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",Ta="#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Ca="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpack2HalfToRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",La="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Aa="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Ia="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Pa="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Ra="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Oa="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Na="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpack2HalfToRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Da="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Fa="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",Ba="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",ka="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Ua="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",ja="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",Ga="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",za="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Va="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Ha="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",qa="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",Wa="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",Xa="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",Ya="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",$a="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Ja="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",Za="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",Ka="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Qa="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ts="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",es="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ns="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",rs="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",is="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",os="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",as="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",ss="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",us="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",cs="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",ls="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",hs="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",fs="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",ps="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ds="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",gs="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",ms="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",vs="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",ys="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",_s="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",bs="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",xs="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",ws="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Es="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ss="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Ms="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",Ts="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Cs="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ls="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",As={alphamap_fragment:po,alphamap_pars_fragment:go,alphatest_fragment:mo,aomap_fragment:vo,aomap_pars_fragment:yo,begin_vertex:_o,beginnormal_vertex:bo,bsdfs:xo,bumpmap_pars_fragment:wo,clipping_planes_fragment:Eo,clipping_planes_pars_fragment:So,clipping_planes_pars_vertex:Mo,clipping_planes_vertex:To,color_fragment:Co,color_pars_fragment:Lo,color_pars_vertex:Ao,color_vertex:Io,common:Po,cube_uv_reflection_fragment:Ro,defaultnormal_vertex:Oo,displacementmap_pars_vertex:No,displacementmap_vertex:Do,emissivemap_fragment:Fo,emissivemap_pars_fragment:Bo,encodings_fragment:ko,encodings_pars_fragment:Uo,envmap_fragment:jo,envmap_common_pars_fragment:Go,envmap_pars_fragment:zo,envmap_pars_vertex:Vo,envmap_physical_pars_fragment:ta,envmap_vertex:Ho,fog_vertex:qo,fog_pars_vertex:Wo,fog_fragment:Xo,fog_pars_fragment:Yo,gradientmap_pars_fragment:$o,lightmap_fragment:Jo,lightmap_pars_fragment:Zo,lights_lambert_vertex:Ko,lights_pars_begin:Qo,lights_phong_fragment:ea,lights_phong_pars_fragment:na,lights_physical_fragment:ra,lights_physical_pars_fragment:ia,lights_fragment_begin:oa,lights_fragment_maps:aa,lights_fragment_end:sa,logdepthbuf_fragment:ua,logdepthbuf_pars_fragment:ca,logdepthbuf_pars_vertex:la,logdepthbuf_vertex:ha,map_fragment:fa,map_pars_fragment:pa,map_particle_fragment:da,map_particle_pars_fragment:ga,metalnessmap_fragment:ma,metalnessmap_pars_fragment:va,morphnormal_vertex:ya,morphtarget_pars_vertex:_a,morphtarget_vertex:ba,normal_fragment_begin:xa,normal_fragment_maps:wa,normalmap_pars_fragment:Ea,clearcoat_normal_fragment_begin:Sa,clearcoat_normal_fragment_maps:Ma,clearcoat_normalmap_pars_fragment:Ta,packing:Ca,premultiplied_alpha_fragment:La,project_vertex:Aa,dithering_fragment:Ia,dithering_pars_fragment:Pa,roughnessmap_fragment:Ra,roughnessmap_pars_fragment:Oa,shadowmap_pars_fragment:Na,shadowmap_pars_vertex:Da,shadowmap_vertex:Fa,shadowmask_pars_fragment:Ba,skinbase_vertex:ka,skinning_pars_vertex:Ua,skinning_vertex:ja,skinnormal_vertex:Ga,specularmap_fragment:za,specularmap_pars_fragment:Va,tonemapping_fragment:Ha,tonemapping_pars_fragment:qa,uv_pars_fragment:Wa,uv_pars_vertex:Xa,uv_vertex:Ya,uv2_pars_fragment:$a,uv2_pars_vertex:Ja,uv2_vertex:Za,worldpos_vertex:Ka,background_frag:Qa,background_vert:ts,cube_frag:es,cube_vert:ns,depth_frag:rs,depth_vert:is,distanceRGBA_frag:os,distanceRGBA_vert:as,equirect_frag:ss,equirect_vert:us,linedashed_frag:cs,linedashed_vert:ls,meshbasic_frag:hs,meshbasic_vert:fs,meshlambert_frag:ps,meshlambert_vert:ds,meshmatcap_frag:gs,meshmatcap_vert:ms,meshphong_frag:vs,meshphong_vert:ys,meshphysical_frag:_s,meshphysical_vert:bs,normal_frag:xs,normal_vert:ws,points_frag:Es,points_vert:Ss,shadow_frag:Ms,shadow_vert:Ts,sprite_frag:Cs,sprite_vert:Ls},Is={common:{diffuse:{value:new Jr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Cn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Jr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Cn}},sprite:{diffuse:{value:new Jr(15658734)},opacity:{value:1},center:{value:new bn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Cn}}},Ps={basic:{uniforms:Ki([Is.common,Is.specularmap,Is.envmap,Is.aomap,Is.lightmap,Is.fog]),vertexShader:As.meshbasic_vert,fragmentShader:As.meshbasic_frag},lambert:{uniforms:Ki([Is.common,Is.specularmap,Is.envmap,Is.aomap,Is.lightmap,Is.emissivemap,Is.fog,Is.lights,{emissive:{value:new Jr(0)}}]),vertexShader:As.meshlambert_vert,fragmentShader:As.meshlambert_frag},phong:{uniforms:Ki([Is.common,Is.specularmap,Is.envmap,Is.aomap,Is.lightmap,Is.emissivemap,Is.bumpmap,Is.normalmap,Is.displacementmap,Is.gradientmap,Is.fog,Is.lights,{emissive:{value:new Jr(0)},specular:{value:new Jr(1118481)},shininess:{value:30}}]),vertexShader:As.meshphong_vert,fragmentShader:As.meshphong_frag},standard:{uniforms:Ki([Is.common,Is.envmap,Is.aomap,Is.lightmap,Is.emissivemap,Is.bumpmap,Is.normalmap,Is.displacementmap,Is.roughnessmap,Is.metalnessmap,Is.fog,Is.lights,{emissive:{value:new Jr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag},matcap:{uniforms:Ki([Is.common,Is.bumpmap,Is.normalmap,Is.displacementmap,Is.fog,{matcap:{value:null}}]),vertexShader:As.meshmatcap_vert,fragmentShader:As.meshmatcap_frag},points:{uniforms:Ki([Is.points,Is.fog]),vertexShader:As.points_vert,fragmentShader:As.points_frag},dashed:{uniforms:Ki([Is.common,Is.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:As.linedashed_vert,fragmentShader:As.linedashed_frag},depth:{uniforms:Ki([Is.common,Is.displacementmap]),vertexShader:As.depth_vert,fragmentShader:As.depth_frag},normal:{uniforms:Ki([Is.common,Is.bumpmap,Is.normalmap,Is.displacementmap,{opacity:{value:1}}]),vertexShader:As.normal_vert,fragmentShader:As.normal_frag},sprite:{uniforms:Ki([Is.sprite,Is.fog]),vertexShader:As.sprite_vert,fragmentShader:As.sprite_frag},background:{uniforms:{uvTransform:{value:new Cn},t2D:{value:null}},vertexShader:As.background_vert,fragmentShader:As.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:As.cube_vert,fragmentShader:As.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:As.equirect_vert,fragmentShader:As.equirect_frag},distanceRGBA:{uniforms:Ki([Is.common,Is.displacementmap,{referencePosition:{value:new Sn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:As.distanceRGBA_vert,fragmentShader:As.distanceRGBA_frag},shadow:{uniforms:Ki([Is.lights,Is.fog,{color:{value:new Jr(0)},opacity:{value:1}}]),vertexShader:As.shadow_vert,fragmentShader:As.shadow_frag}};function Rs(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Os(t){var e=new WeakMap;function n(e,n){var r=e.array,i=e.usage,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}function r(e,n,r){var i=n.array,o=n.updateRange;t.bindBuffer(r,e),-1===o.count?t.bufferSubData(r,0,i):(t.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}function i(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)}function o(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);r&&(t.deleteBuffer(r.buffer),e.delete(n))}function a(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var o=e.get(t);void 0===o?e.set(t,n(t,i)):o.version<t.version&&(r(o.buffer,t,i),o.version=t.version)}return{get:i,remove:o,update:a}}function Ns(t,e,n,r){Yi.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Ds(t,e,n,r)),this.mergeVertices()}function Ds(t,e,n,r){Ei.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},t=t||1,e=e||1;var i,o,a=t/2,s=e/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,h=c+1,f=t/u,p=e/c,d=[],g=[],m=[],v=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<l;i++){var _=i*f-a;g.push(_,-y,0),m.push(0,0,1),v.push(i/u),v.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var b=i+l*o,x=i+l*(o+1),w=i+1+l*(o+1),E=i+1+l*o;d.push(b,x,E),d.push(x,w,E)}this.setIndex(d),this.setAttribute("position",new fi(g,3)),this.setAttribute("normal",new fi(m,3)),this.setAttribute("uv",new fi(v,2))}function Fs(t,e,n,r){var i,o,a=new Jr(0),s=0,u=null,c=0;function l(e,r,l,f){var p=r.background,d=t.vr,g=d.getSession&&d.getSession();if(g&&"additive"===g.environmentBlendMode&&(p=null),null===p?(h(a,s),u=null,c=0):p&&p.isColor&&(h(p,1),f=!0,u=null,c=0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===o&&(o=new Gi(new Ji(1,1,1),new no({type:"BackgroundCubeMaterial",uniforms:Zi(Ps.cube.uniforms),vertexShader:Ps.cube.vertexShader,fragmentShader:Ps.cube.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var y=p.isWebGLRenderTargetCube?p.texture:p;o.material.uniforms.tCube.value=y,o.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,u===p&&c===y.version||(o.material.needsUpdate=!0,u=p,c=y.version),e.unshift(o,o.geometry,o.material,0,0,null)}else p&&p.isTexture&&(void 0===i&&(i=new Gi(new Ds(2,2),new no({type:"BackgroundMaterial",uniforms:Zi(Ps.background.uniforms),vertexShader:Ps.background.vertexShader,fragmentShader:Ps.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),i.geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),i.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&c===p.version||(i.material.needsUpdate=!0,u=p,c=p.version),e.unshift(i,i.geometry,i.material,0,0,null))}function h(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),s=void 0!==e?e:1,h(a,s)},getClearAlpha:function(){return s},setClearAlpha:function(t){s=t,h(a,s)},render:l}}function Bs(t,e,n,r){var i,o=r.isWebGL2;function a(t){i=t}function s(e,r){t.drawArrays(i,e,r),n.update(r,i)}function u(r,a,s,u){if(0!==u){var c,l;if(o)c=t,l="drawArraysInstanced";else if(c=e.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](i,a,s,u),n.update(s,i,u)}}this.setMode=a,this.render=s,this.renderInstances=u}function ks(t,e,n){var r;function i(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",u=o(s);u!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",u,"instead."),s=u);var c=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),h=t.getParameter(35660),f=t.getParameter(3379),p=t.getParameter(34076),d=t.getParameter(34921),g=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),y=h>0,_=a||!!e.get("OES_texture_float"),b=y&&_,x=a?t.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:g,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:b,maxSamples:x}}function Us(){var t=this,e=null,n=0,r=!1,i=!1,o=new Dr,a=new Cn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,n,r,i){var u=null!==e?e.length:0,c=null;if(0!==u){if(c=s.value,!0!==i||null===c){var l=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<l)&&(c=new Float32Array(l));for(var f=0,p=r;f!==u;++f,p+=4)o.copy(e[f]).applyMatrix4(h,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return t.numPlanes=u,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=c(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,l,h,f){if(!r||null===t||0===t.length||i&&!a)i?c(null):u();else{var p=i?0:n,d=4*p,g=h.clippingState||null;s.value=g,g=c(t,l,d,f);for(var m=0;m!==d;++m)g[m]=e[m];h.clippingState=g,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function js(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function Gs(t,e,n){var r=new WeakMap,i=new WeakMap;function o(t){var a=t.target,s=r.get(a);for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),r.delete(a);var c=i.get(s);c&&(e.remove(c),i.delete(s)),n.memory.geometries--}function a(t,e){var i=r.get(e);return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Ei).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)}function s(t){var n=t.index,r=t.attributes;for(var i in null!==n&&e.update(n,34963),r)e.update(r[i],34962);var o=t.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)e.update(a[s],34962)}function u(t){var n=[],r=t.index,o=t.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,c=s.length;u<c;u+=3){var l=s[u+0],h=s[u+1],f=s[u+2];n.push(l,h,h,f,f,l)}}else{s=o.array;a=o.version;for(u=0,c=s.length/3-1;u<c;u+=3){l=u+0,h=u+1,f=u+2;n.push(l,h,h,f,f,l)}}var p=new(gi(n)>65535?hi:ci)(n,1);p.version=a,e.update(p,34963);var d=i.get(t);d&&e.remove(d),i.set(t,p)}function c(t){var e=i.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&u(t)}else u(t);return i.get(t)}return{get:a,update:s,getWireframeAttribute:c}}function zs(t,e,n,r){var i,o,a,s=r.isWebGL2;function u(t){i=t}function c(t){o=t.type,a=t.bytesPerElement}function l(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)}function h(r,u,c,l){if(0!==l){var h,f;if(s)h=t,f="drawElementsInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawElementsInstancedANGLE",null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](i,c,o,u*a,l),n.update(c,i,l)}}this.setMode=u,this.setIndex=c,this.render=l,this.renderInstances=h}function Vs(t){var e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(t,e,r){switch(r=r||1,n.calls++,e){case 4:n.triangles+=r*(t/3);break;case 5:case 6:n.triangles+=r*(t-2);break;case 1:n.lines+=r*(t/2);break;case 3:n.lines+=r*(t-1);break;case 2:n.lines+=r*t;break;case 0:n.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Hs(t,e){return Math.abs(e[1])-Math.abs(t[1])}function qs(t){var e={},n=new Float32Array(8);function r(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,c=e[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];e[i.id]=c}var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<u;l++){var p=c[l];0!==p[1]&&(h&&i.deleteAttribute("morphTarget"+l),f&&i.deleteAttribute("morphNormal"+l))}for(l=0;l<u;l++){p=c[l];p[0]=l,p[1]=s[l]}c.sort(Hs);var d=0;for(l=0;l<8;l++){p=c[l];if(p){var g=p[0],m=p[1];if(m){h&&i.setAttribute("morphTarget"+l,h[g]),f&&i.setAttribute("morphNormal"+l,f[g]),n[l]=m,d+=m;continue}}n[l]=0}var v=i.morphTargetsRelative?1:1-d;a.getUniforms().setValue(t,"morphTargetBaseInfluence",v),a.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:r}}function Ws(t,e,n,r){var i={};function o(t){var o=r.render.frame,a=t.geometry,s=e.get(t,a);return i[s.id]!==o&&(a.isGeometry&&s.updateFromObject(t),e.update(s),i[s.id]=o),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s}function a(){i={}}return{update:o,dispose:a}}function Xs(t,e,n,r,i,o,a,s,u,c){t=void 0!==t?t:[],e=void 0!==e?e:lt,a=void 0!==a?a:Vt,In.call(this,t,e,n,r,i,o,a,s,u,c),this.flipY=!1}function Ys(t,e,n,r){In.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=bt,this.minFilter=bt,this.wrapR=yt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function $s(t,e,n,r){In.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=bt,this.minFilter=bt,this.wrapR=yt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ps.physical={uniforms:Ki([Ps.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Jr(0)},clearcoatNormalScale:{value:new bn(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag},Ns.prototype=Object.create(Yi.prototype),Ns.prototype.constructor=Ns,Ds.prototype=Object.create(Ei.prototype),Ds.prototype.constructor=Ds,Xs.prototype=Object.create(In.prototype),Xs.prototype.constructor=Xs,Xs.prototype.isCubeTexture=!0,Object.defineProperty(Xs.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Ys.prototype=Object.create(In.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isDataTexture2DArray=!0,$s.prototype=Object.create(In.prototype),$s.prototype.constructor=$s,$s.prototype.isDataTexture3D=!0;var Js=new In,Zs=new Ys,Ks=new $s,Qs=new Xs,tu=[],eu=[],nu=new Float32Array(16),ru=new Float32Array(9),iu=new Float32Array(4);function ou(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=tu[i];if(void 0===o&&(o=new Float32Array(i),tu[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function au(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function su(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function uu(t,e){var n=eu[e];void 0===n&&(n=new Int32Array(e),eu[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function cu(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function lu(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(au(n,e))return;t.uniform2fv(this.addr,e),su(n,e)}}function hu(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(au(n,e))return;t.uniform3fv(this.addr,e),su(n,e)}}function fu(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(au(n,e))return;t.uniform4fv(this.addr,e),su(n,e)}}function pu(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(au(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),su(n,e)}else{if(au(n,r))return;iu.set(r),t.uniformMatrix2fv(this.addr,!1,iu),su(n,r)}}function du(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(au(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),su(n,e)}else{if(au(n,r))return;ru.set(r),t.uniformMatrix3fv(this.addr,!1,ru),su(n,r)}}function gu(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(au(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),su(n,e)}else{if(au(n,r))return;nu.set(r),t.uniformMatrix4fv(this.addr,!1,nu),su(n,r)}}function mu(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Js,i)}function vu(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Zs,i)}function yu(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Ks,i)}function _u(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Qs,i)}function bu(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function xu(t,e){var n=this.cache;au(n,e)||(t.uniform2iv(this.addr,e),su(n,e))}function wu(t,e){var n=this.cache;au(n,e)||(t.uniform3iv(this.addr,e),su(n,e))}function Eu(t,e){var n=this.cache;au(n,e)||(t.uniform4iv(this.addr,e),su(n,e))}function Su(t){switch(t){case 5126:return cu;case 35664:return lu;case 35665:return hu;case 35666:return fu;case 35674:return pu;case 35675:return du;case 35676:return gu;case 35678:case 36198:return mu;case 35679:return yu;case 35680:return _u;case 36289:return vu;case 5124:case 35670:return bu;case 35667:case 35671:return xu;case 35668:case 35672:return wu;case 35669:case 35673:return Eu}}function Mu(t,e){t.uniform1fv(this.addr,e)}function Tu(t,e){t.uniform1iv(this.addr,e)}function Cu(t,e){t.uniform2iv(this.addr,e)}function Lu(t,e){t.uniform3iv(this.addr,e)}function Au(t,e){t.uniform4iv(this.addr,e)}function Iu(t,e){var n=ou(e,this.size,2);t.uniform2fv(this.addr,n)}function Pu(t,e){var n=ou(e,this.size,3);t.uniform3fv(this.addr,n)}function Ru(t,e){var n=ou(e,this.size,4);t.uniform4fv(this.addr,n)}function Ou(t,e){var n=ou(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Nu(t,e){var n=ou(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Du(t,e){var n=ou(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Fu(t,e,n){var r=e.length,i=uu(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(e[o]||Js,i[o])}function Bu(t,e,n){var r=e.length,i=uu(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(e[o]||Qs,i[o])}function ku(t){switch(t){case 5126:return Mu;case 35664:return Iu;case 35665:return Pu;case 35666:return Ru;case 35674:return Ou;case 35675:return Nu;case 35676:return Du;case 35678:return Fu;case 35680:return Bu;case 5124:case 35670:return Tu;case 35667:case 35671:return Cu;case 35668:case 35672:return Lu;case 35669:case 35673:return Au}}function Uu(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Su(e.type)}function ju(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=ku(e.type)}function Gu(t){this.id=t,this.seq=[],this.map={}}ju.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),su(e,t)},Gu.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var zu=/([\w\d_]+)(\])?(\[|\.)?/g;function Vu(t,e){t.seq.push(e),t.map[e.id]=e}function Hu(t,e,n){var r=t.name,i=r.length;zu.lastIndex=0;while(1){var o=zu.exec(r),a=zu.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){Vu(n,void 0===c?new Uu(s,t,e):new ju(s,t,e));break}var l=n.map,h=l[s];void 0===h&&(h=new Gu(s),Vu(n,h)),n=h}}function qu(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r),o=t.getUniformLocation(e,i.name);Hu(i,o,this)}}function Wu(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}qu.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},qu.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},qu.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},qu.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Xu=0;function Yu(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function $u(t){switch(t){case Re:return["Linear","( value )"];case Oe:return["sRGB","( value )"];case De:return["RGBE","( value )"];case Be:return["RGBM","( value, 7.0 )"];case ke:return["RGBM","( value, 16.0 )"];case Ue:return["RGBD","( value, 256.0 )"];case Ne:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Fe:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function Ju(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";var o=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+Yu(o)}function Zu(t,e){var n=$u(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ku(t,e){var n=$u(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Qu(t,e){var n;switch(e){case it:n="Linear";break;case ot:n="Reinhard";break;case at:n="Uncharted2";break;case st:n="OptimizedCineon";break;case ut:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function tc(t,e,n){t=t||{};var r=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(rc).join("\n")}function ec(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function nc(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function rc(t){return""!==t}function ic(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oc(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var ac=/^[ \t]*#include +<([\w\d./]+)>/gm;function sc(t){return t.replace(ac,uc)}function uc(t,e){var n=As[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return sc(n)}var cc=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function lc(t){return t.replace(cc,hc)}function hc(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function fc(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function pc(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===p?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===g&&(e="SHADOWMAP_TYPE_VSM"),e}function dc(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case lt:case ht:e="ENVMAP_TYPE_CUBE";break;case gt:case mt:e="ENVMAP_TYPE_CUBE_UV";break;case ft:case pt:e="ENVMAP_TYPE_EQUIREC";break;case dt:e="ENVMAP_TYPE_SPHERE";break}return e}function gc(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ht:case pt:e="ENVMAP_MODE_REFRACTION";break}return e}function mc(t){var e="ENVMAP_BLENDING_MULTIPLY";if(t.envMap)switch(t.combine){case tt:e="ENVMAP_BLENDING_MULTIPLY";break;case et:e="ENVMAP_BLENDING_MIX";break;case nt:e="ENVMAP_BLENDING_ADD";break}return e}function vc(t,e,n,r,i,o){var a,s,u=t.getContext(),c=r.defines,l=i.vertexShader,h=i.fragmentShader,f=pc(o),p=dc(o),d=gc(o),g=mc(o),m=t.gammaFactor>0?t.gammaFactor:1,v=o.isWebGL2?"":tc(r.extensions,o,e),y=ec(c),_=u.createProgram(),b=o.numMultiviewViews;if(r.isRawShaderMaterial?(a=[y].filter(rc).join("\n"),a.length>0&&(a+="\n"),s=[v,y].filter(rc).join("\n"),s.length>0&&(s+="\n")):(a=[fc(o),"#define SHADER_NAME "+i.name,y,o.instancing?"#define USE_INSTANCING":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+f:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rc).join("\n"),s=[v,fc(o),"#define SHADER_NAME "+i.name,y,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.envMap?"#define "+g:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.sheen?"#define USE_SHEEN":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+f:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensions&&r.extensions.shaderTextureLOD||o.envMap)&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==rt?"#define TONE_MAPPING":"",o.toneMapping!==rt?As["tonemapping_pars_fragment"]:"",o.toneMapping!==rt?Qu("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?As["encodings_pars_fragment"]:"",o.mapEncoding?Zu("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?Zu("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?Zu("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Zu("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?Ku("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(rc).join("\n")),l=sc(l),l=ic(l,o),l=oc(l,o),h=sc(h),h=ic(h,o),h=oc(h,o),l=lc(l),h=lc(h),o.isWebGL2&&!r.isRawShaderMaterial){var x=!1,w=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==l.match(w)&&null!==h.match(w)&&(x=!0,l=l.replace(w,""),h=h.replace(w,"")),a=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,s=["#version 300 es\n","#define varying in",x?"":"out highp vec4 pc_fragColor;",x?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s,b>0&&(a=a.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+b+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n")),a=a.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+b+"];","uniform mat4 projectionMatrices["+b+"];","uniform mat4 viewMatrices["+b+"];","uniform mat3 normalMatrices["+b+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),s=s.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n")),s=s.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+b+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var E,S,M=a+l,T=s+h,C=Wu(u,35633,M),L=Wu(u,35632,T);if(u.attachShader(_,C),u.attachShader(_,L),void 0!==r.index0AttributeName?u.bindAttribLocation(_,0,r.index0AttributeName):!0===o.morphTargets&&u.bindAttribLocation(_,0,"position"),u.linkProgram(_),t.debug.checkShaderErrors){var A=u.getProgramInfoLog(_).trim(),I=u.getShaderInfoLog(C).trim(),P=u.getShaderInfoLog(L).trim(),R=!0,O=!0;if(!1===u.getProgramParameter(_,35714)){R=!1;var N=Ju(u,C,"vertex"),D=Ju(u,L,"fragment");console.error("THREE.WebGLProgram: shader error: ",u.getError(),"35715",u.getProgramParameter(_,35715),"gl.getProgramInfoLog",A,N,D)}else""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==I&&""!==P||(O=!1);O&&(this.diagnostics={runnable:R,material:r,programLog:A,vertexShader:{log:I,prefix:a},fragmentShader:{log:P,prefix:s}})}return u.deleteShader(C),u.deleteShader(L),this.getUniforms=function(){return void 0===E&&(E=new qu(u,_)),E},this.getAttributes=function(){return void 0===S&&(S=nc(u,_)),S},this.destroy=function(){u.deleteProgram(_),this.program=void 0},this.name=i.name,this.id=Xu++,this.cacheKey=n,this.usedTimes=1,this.program=_,this.vertexShader=C,this.fragmentShader=L,this.numMultiviewViews=b,this}function yc(t,e,n){var r=[],i=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,u=n.maxVertexUniforms,c=n.vertexTextures,l={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function f(t){var e=t.skeleton,n=e.bones;if(a)return 1024;var r=u,i=Math.floor((r-20)/4),o=Math.min(i,n.length);return o<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+o+"."),0):o}function p(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=Re,n===Re&&e&&(n=Ne),n}this.getParameters=function(e,r,u,h,d,g,m){var _=l[e.type],b=m.isSkinnedMesh?f(m):0;null!==e.precision&&(s=n.getMaxPrecision(e.precision),s!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",s,"instead."));var x=t.getRenderTarget(),w=x&&x.isWebGLMultiviewRenderTarget?x.numViews:0,E={isWebGL2:i,shaderID:_,precision:s,instancing:!0===m.isInstancedMesh,supportsVertexTextures:c,numMultiviewViews:w,outputEncoding:p(x?x.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:p(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:p(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:p(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===gt||e.envMap.mapping===mt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:p(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Ve,tangentSpaceNormalMap:e.normalMapType===ze,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!e.map||!!e.bumpMap||!!e.normalMap||!!e.specularMap||!!e.alphaMap||!!e.emissiveMap||!!e.roughnessMap||!!e.metalnessMap||!!e.clearcoatNormalMap||!!e.displacementMap,uvsVertexOnly:!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap)&&!!e.displacementMap,fog:!!h,useFog:e.fog,fogExp2:h&&h.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:o,skinning:e.skinning&&b>0,maxBones:b,useVertexTexture:a,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numDirLightShadows:r.directionalShadowMap.length,numPointLightShadows:r.pointShadowMap.length,numSpotLightShadows:r.spotShadowMap.length,numClippingPlanes:d,numClipIntersection:g,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:rt,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===y,flipSided:e.side===v,depthPacking:void 0!==e.depthPacking&&e.depthPacking};return E},this.getProgramCacheKey=function(e,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var o=0;o<h.length;o++)r.push(n[h[o]]);return r.push(e.onBeforeCompile.toString()),r.push(t.gammaOutput),r.push(t.gammaFactor),r.join()},this.acquireProgram=function(n,i,o,a){for(var s,u=0,c=r.length;u<c;u++){var l=r[u];if(l.cacheKey===a){s=l,++s.usedTimes;break}}return void 0===s&&(s=new vc(t,e,a,n,i,o),r.push(s)),s},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function _c(){var t=new WeakMap;function e(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function bc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function xc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function wc(){var t=[],e=0,n=[],r=[],i={id:-1};function o(){e=0,n.length=0,r.length=0}function a(n,r,o,a,s,u){var c=t[e];return void 0===c?(c={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},t[e]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=o,c.program=o.program||i,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=u),e++,c}function s(t,e,i,o,s,u){var c=a(t,e,i,o,s,u);(!0===i.transparent?r:n).push(c)}function u(t,e,i,o,s,u){var c=a(t,e,i,o,s,u);(!0===i.transparent?r:n).unshift(c)}function c(){n.length>1&&n.sort(bc),r.length>1&&r.sort(xc)}return{opaque:n,transparent:r,init:o,push:s,unshift:u,sort:c}}function Ec(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}function n(n,r){var i,o=t.get(n);return void 0===o?(i=new wc,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):(i=o.get(r),void 0===i&&(i=new wc,o.set(r,i))),i}function r(){t=new WeakMap}return{get:n,dispose:r}}function Sc(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Sn,color:new Jr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"SpotLight":n={position:new Sn,direction:new Sn,color:new Jr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"PointLight":n={position:new Sn,color:new Jr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new bn,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Sn,skyColor:new Jr,groundColor:new Jr};break;case"RectAreaLight":n={color:new Jr,position:new Sn,halfWidth:new Sn,halfHeight:new Sn};break}return t[e.id]=n,n}}}var Mc=0;function Tc(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Cc(){for(var t=new Sc,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)e.probe.push(new Sn);var r=new Sn,i=new Gn,o=new Gn;function a(n,a,s){for(var u=0,c=0,l=0,h=0;h<9;h++)e.probe[h].set(0,0,0);var f=0,p=0,d=0,g=0,m=0,v=0,y=0,_=0,b=s.matrixWorldInverse;n.sort(Tc);h=0;for(var x=n.length;h<x;h++){var w=n[h],E=w.color,S=w.intensity,M=w.distance,T=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)u+=E.r*S,c+=E.g*S,l+=E.b*S;else if(w.isLightProbe)for(var C=0;C<9;C++)e.probe[C].addScaledVector(w.sh.coefficients[C],S);else if(w.isDirectionalLight){var L=t.get(w);if(L.color.copy(w.color).multiplyScalar(w.intensity),L.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(b),L.shadow=w.castShadow,w.castShadow){var A=w.shadow;L.shadowBias=A.bias,L.shadowRadius=A.radius,L.shadowMapSize=A.mapSize,e.directionalShadowMap[f]=T,e.directionalShadowMatrix[f]=w.shadow.matrix,v++}e.directional[f]=L,f++}else if(w.isSpotLight){L=t.get(w);if(L.position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),L.color.copy(E).multiplyScalar(S),L.distance=M,L.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),L.direction.sub(r),L.direction.transformDirection(b),L.coneCos=Math.cos(w.angle),L.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),L.decay=w.decay,L.shadow=w.castShadow,w.castShadow){A=w.shadow;L.shadowBias=A.bias,L.shadowRadius=A.radius,L.shadowMapSize=A.mapSize,e.spotShadowMap[d]=T,e.spotShadowMatrix[d]=w.shadow.matrix,_++}e.spot[d]=L,d++}else if(w.isRectAreaLight){L=t.get(w);L.color.copy(E).multiplyScalar(S),L.position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),o.identity(),i.copy(w.matrixWorld),i.premultiply(b),o.extractRotation(i),L.halfWidth.set(.5*w.width,0,0),L.halfHeight.set(0,.5*w.height,0),L.halfWidth.applyMatrix4(o),L.halfHeight.applyMatrix4(o),e.rectArea[g]=L,g++}else if(w.isPointLight){L=t.get(w);if(L.position.setFromMatrixPosition(w.matrixWorld),L.position.applyMatrix4(b),L.color.copy(w.color).multiplyScalar(w.intensity),L.distance=w.distance,L.decay=w.decay,L.shadow=w.castShadow,w.castShadow){A=w.shadow;L.shadowBias=A.bias,L.shadowRadius=A.radius,L.shadowMapSize=A.mapSize,L.shadowCameraNear=A.camera.near,L.shadowCameraFar=A.camera.far,e.pointShadowMap[p]=T,e.pointShadowMatrix[p]=w.shadow.matrix,y++}e.point[p]=L,p++}else if(w.isHemisphereLight){L=t.get(w);L.direction.setFromMatrixPosition(w.matrixWorld),L.direction.transformDirection(b),L.direction.normalize(),L.skyColor.copy(w.color).multiplyScalar(S),L.groundColor.copy(w.groundColor).multiplyScalar(S),e.hemi[m]=L,m++}}e.ambient[0]=u,e.ambient[1]=c,e.ambient[2]=l;var I=e.hash;I.directionalLength===f&&I.pointLength===p&&I.spotLength===d&&I.rectAreaLength===g&&I.hemiLength===m&&I.numDirectionalShadows===v&&I.numPointShadows===y&&I.numSpotShadows===_||(e.directional.length=f,e.spot.length=d,e.rectArea.length=g,e.point.length=p,e.hemi.length=m,e.directionalShadowMap.length=v,e.pointShadowMap.length=y,e.spotShadowMap.length=_,e.directionalShadowMatrix.length=v,e.pointShadowMatrix.length=y,e.spotShadowMatrix.length=_,I.directionalLength=f,I.pointLength=p,I.spotLength=d,I.rectAreaLength=g,I.hemiLength=m,I.numDirectionalShadows=v,I.numPointShadows=y,I.numSpotShadows=_,e.version=Mc++)}return{setup:a,state:e}}function Lc(){var t=new Cc,e=[],n=[];function r(){e.length=0,n.length=0}function i(t){e.push(t)}function o(t){n.push(t)}function a(r){t.setup(e,n,r)}var s={lightsArray:e,shadowsArray:n,lights:t};return{init:r,state:s,setupLights:a,pushLight:i,pushShadow:o}}function Ac(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}function n(n,r){var i;return!1===t.has(n)?(i=new Lc,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):!1===t.get(n).has(r)?(i=new Lc,t.get(n).set(r,i)):i=t.get(n).get(r),i}function r(){t=new WeakMap}return{get:n,dispose:r}}function Ic(t){ni.call(this),this.type="MeshDepthMaterial",this.depthPacking=je,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Pc(t){ni.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Sn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Ic.prototype=Object.create(ni.prototype),Ic.prototype.constructor=Ic,Ic.prototype.isMeshDepthMaterial=!0,Ic.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Pc.prototype=Object.create(ni.prototype),Pc.prototype.constructor=Pc,Pc.prototype.isMeshDistanceMaterial=!0,Pc.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var Rc="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpack2HalfToRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",Oc="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Nc(t,e,n){var r=new fo,i=new bn,o=new bn,a=new Pn,s=[],u=[],c={},l={0:v,1:m,2:y},h=new no({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new bn},radius:{value:4}},vertexShader:Oc,fragmentShader:Rc}),f=h.clone();f.defines.HORIZONAL_PASS=1;var d=new Ei;d.setAttribute("position",new ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var _=new Gi(d,h),b=this;function x(n,r){var i=e.update(_);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,h,_,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,f,_,null)}function w(t,e,n){var r=t<<0|e<<1|n<<2,i=s[r];return void 0===i&&(i=new Ic({depthPacking:Ge,morphTargets:t,skinning:e}),s[r]=i),i}function E(t,e,n){var r=t<<0|e<<1|n<<2,i=u[r];return void 0===i&&(i=new Pc({morphTargets:t,skinning:e}),u[r]=i),i}function M(e,n,r,i,o,a){var s=e.geometry,u=null,h=w,f=e.customDepthMaterial;if(!0===r.isPointLight&&(h=E,f=e.customDistanceMaterial),void 0===f){var p=!1;!0===n.morphTargets&&(!0===s.isBufferGeometry?p=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(p=s.morphTargets&&s.morphTargets.length>0));var d=!1;!0===e.isSkinnedMesh&&(!0===n.skinning?d=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));var m=!0===e.isInstancedMesh;u=h(p,d,m)}else u=f;if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var v=u.uuid,y=n.uuid,_=c[v];void 0===_&&(_={},c[v]=_);var b=_[y];void 0===b&&(b=u.clone(),_[y]=b),u=b}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===g?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:l[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function T(n,i,o,a,s){if(!1!==n.visible){var u=n.layers.test(i.layers);if(u&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===g)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var c=e.update(n),l=n.material;if(Array.isArray(l))for(var h=c.groups,f=0,p=h.length;f<p;f++){var d=h[f],m=l[d.materialIndex];if(m&&m.visible){var v=M(n,m,a,o.near,o.far,s);t.renderBufferDirect(o,null,c,v,n,d)}}else if(l.visible){v=M(n,l,a,o.near,o.far,s);t.renderBufferDirect(o,null,c,v,n,null)}}for(var y=n.children,_=0,b=y.length;_<b;_++)T(y[_],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(e,s,u){if(!1!==b.enabled&&(!1!==b.autoUpdate||!1!==b.needsUpdate)&&0!==e.length){var c=t.getRenderTarget(),l=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(S),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var p=0,d=e.length;p<d;p++){var m=e[p],v=m.shadow;if(void 0!==v){i.copy(v.mapSize);var y=v.getFrameExtents();if(i.multiply(y),o.copy(v.mapSize),(i.x>n||i.y>n)&&(console.warn("THREE.WebGLShadowMap:",m,"has shadow exceeding max texture size, reducing"),i.x>n&&(o.x=Math.floor(n/y.x),i.x=o.x*y.x,v.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/y.y),i.y=o.y*y.y,v.mapSize.y=o.y)),null===v.map&&!v.isPointLightShadow&&this.type===g){var _={minFilter:Mt,magFilter:Mt,format:Ht};v.map=new Rn(i.x,i.y,_),v.map.texture.name=m.name+".shadowMap",v.mapPass=new Rn(i.x,i.y,_),v.camera.updateProjectionMatrix()}if(null===v.map){_={minFilter:bt,magFilter:bt,format:Ht};v.map=new Rn(i.x,i.y,_),v.map.texture.name=m.name+".shadowMap",v.camera.updateProjectionMatrix()}t.setRenderTarget(v.map),t.clear();for(var w=v.getViewportCount(),E=0;E<w;E++){var M=v.getViewport(E);a.set(o.x*M.x,o.y*M.y,o.x*M.z,o.y*M.w),f.viewport(a),v.updateMatrices(m,E),r=v.getFrustum(),T(s,u,v.camera,m,this.type)}v.isPointLightShadow||this.type!==g||x(v,u)}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}b.needsUpdate=!1,t.setRenderTarget(c,l,h)}}}function Dc(t,e,n){var r=n.isWebGL2;function i(){var e=!1,n=new Pn,r=null,i=new Pn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function o(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?Mt(2929):Tt(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case W:t.depthFunc(512);break;case X:t.depthFunc(519);break;case Y:t.depthFunc(513);break;case $:t.depthFunc(515);break;case J:t.depthFunc(514);break;case Z:t.depthFunc(518);break;case K:t.depthFunc(516);break;case Q:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function c(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(t){e||(t?Mt(2960):Tt(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}}var l=new i,h=new o,f=new c,p=t.getParameter(34921),d=new Uint8Array(p),g=new Uint8Array(p),m=new Uint8Array(p),_={},b=null,x=null,w=null,E=null,tt=null,et=null,nt=null,rt=null,it=null,ot=!1,at=null,st=null,ut=null,ct=null,lt=null,ht=t.getParameter(35661),ft=!1,pt=0,dt=t.getParameter(7938);-1!==dt.indexOf("WebGL")?(pt=parseFloat(/^WebGL\ ([0-9])/.exec(dt)[1]),ft=pt>=1):-1!==dt.indexOf("OpenGL ES")&&(pt=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(dt)[1]),ft=pt>=2);var gt=null,mt={},vt=new Pn,yt=new Pn;function _t(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var bt={};function xt(){for(var t=0,e=d.length;t<e;t++)d[t]=0}function wt(t){Et(t,0)}function Et(n,i){if(d[n]=1,0===g[n]&&(t.enableVertexAttribArray(n),g[n]=1),m[n]!==i){var o=r?t:e.get("ANGLE_instanced_arrays");o[r?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),m[n]=i}}function St(){for(var e=0,n=g.length;e!==n;++e)g[e]!==d[e]&&(t.disableVertexAttribArray(e),g[e]=0)}function Mt(e){!0!==_[e]&&(t.enable(e),_[e]=!0)}function Tt(e){!1!==_[e]&&(t.disable(e),_[e]=!1)}function Ct(e){return b!==e&&(t.useProgram(e),b=e,!0)}bt[3553]=_t(3553,3553,1),bt[34067]=_t(34067,34069,6),l.setClear(0,0,0,1),h.setClear(1),f.setClear(0),Mt(2929),h.setFunc($),Ot(!1),Nt(s),Mt(2884),Pt(S);var Lt={[I]:32774,[P]:32778,[R]:32779};if(r)Lt[O]=32775,Lt[N]=32776;else{var At=e.get("EXT_blend_minmax");null!==At&&(Lt[O]=At.MIN_EXT,Lt[N]=At.MAX_EXT)}var It={[D]:0,[F]:1,[B]:768,[U]:770,[q]:776,[V]:774,[G]:772,[k]:769,[j]:771,[H]:775,[z]:773};function Pt(e,n,r,i,o,a,s,u){if(e!==S){if(x||(Mt(3042),x=!0),e===A)o=o||n,a=a||r,s=s||i,n===E&&o===nt||(t.blendEquationSeparate(Lt[n],Lt[o]),E=n,nt=o),r===tt&&i===et&&a===rt&&s===it||(t.blendFuncSeparate(It[r],It[i],It[a],It[s]),tt=r,et=i,rt=a,it=s),w=e,ot=null;else if(e!==w||u!==ot){if(E===I&&nt===I||(t.blendEquation(32774),E=I,nt=I),u)switch(e){case M:t.blendFuncSeparate(1,771,1,771);break;case T:t.blendFunc(1,1);break;case C:t.blendFuncSeparate(0,0,769,771);break;case L:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case M:t.blendFuncSeparate(770,771,1,771);break;case T:t.blendFunc(770,1);break;case C:t.blendFunc(0,769);break;case L:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}tt=null,et=null,rt=null,it=null,w=e,ot=u}}else x&&(Tt(3042),x=!1)}function Rt(t,e){t.side===y?Tt(2884):Mt(2884);var n=t.side===v;e&&(n=!n),Ot(n),t.blending===M&&!1===t.transparent?Pt(S):Pt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),h.setFunc(t.depthFunc),h.setTest(t.depthTest),h.setMask(t.depthWrite),l.setMask(t.colorWrite);var r=t.stencilWrite;f.setTest(r),r&&(f.setMask(t.stencilWriteMask),f.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),f.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Ft(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function Ot(e){at!==e&&(e?t.frontFace(2304):t.frontFace(2305),at=e)}function Nt(e){e!==a?(Mt(2884),e!==st&&(e===s?t.cullFace(1029):e===u?t.cullFace(1028):t.cullFace(1032))):Tt(2884),st=e}function Dt(e){e!==ut&&(ft&&t.lineWidth(e),ut=e)}function Ft(e,n,r){e?(Mt(32823),ct===n&&lt===r||(t.polygonOffset(n,r),ct=n,lt=r)):Tt(32823)}function Bt(t){t?Mt(3089):Tt(3089)}function kt(e){void 0===e&&(e=33984+ht-1),gt!==e&&(t.activeTexture(e),gt=e)}function Ut(e,n){null===gt&&kt();var r=mt[gt];void 0===r&&(r={type:void 0,texture:void 0},mt[gt]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||bt[e]),r.type=e,r.texture=n)}function jt(){var e=mt[gt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function Gt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function zt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Vt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(e){!1===vt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),vt.copy(e))}function qt(e){!1===yt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),yt.copy(e))}function Wt(){for(var e=0;e<g.length;e++)1===g[e]&&(t.disableVertexAttribArray(e),g[e]=0);_={},gt=null,mt={},b=null,w=null,at=null,st=null,l.reset(),h.reset(),f.reset()}return{buffers:{color:l,depth:h,stencil:f},initAttributes:xt,enableAttribute:wt,enableAttributeAndDivisor:Et,disableUnusedAttributes:St,enable:Mt,disable:Tt,useProgram:Ct,setBlending:Pt,setMaterial:Rt,setFlipSided:Ot,setCullFace:Nt,setLineWidth:Dt,setPolygonOffset:Ft,setScissorTest:Bt,activeTexture:kt,bindTexture:Ut,unbindTexture:jt,compressedTexImage2D:Gt,texImage2D:zt,texImage3D:Vt,scissor:Ht,viewport:qt,reset:Wt}}function Fc(t,e,n,r,i,o,a){var s,u=i.isWebGL2,c=i.maxTextures,l=i.maxCubemapSize,h=i.maxTextureSize,f=i.maxSamples,p=new WeakMap,d="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d");function g(t,e){return d?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function m(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?_n.floorPowerOfTwo:Math.floor,a=o(i*t.width),u=o(i*t.height);void 0===s&&(s=g(a,u));var c=n?g(a,u):s;c.width=a,c.height=u;var l=c.getContext("2d");return l.drawImage(t,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+u+")."),c}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function v(t){return _n.isPowerOfTwo(t.width)&&_n.isPowerOfTwo(t.height)}function y(t){return!u&&(t.wrapS!==yt||t.wrapT!==yt||t.minFilter!==bt&&t.minFilter!==Mt)}function _(t,e){return t.generateMipmaps&&e&&t.minFilter!==bt&&t.minFilter!==Mt}function b(e,n,i,o){t.generateMipmap(e);var a=r.get(n);a.__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function x(t,n){if(!1===u)return t;var r=t;return 6403===t&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===t&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===t&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?e.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function w(t){return t===bt||t===xt||t===Et?9728:9729}function E(t){var e=t.target;e.removeEventListener("dispose",E),M(e),e.isVideoTexture&&p.delete(e),a.memory.textures--}function S(t){var e=t.target;e.removeEventListener("dispose",S),T(e),a.memory.textures--}function M(e){var n=r.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),r.remove(e))}function T(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);if(e.isWebGLMultiviewRenderTarget){t.deleteTexture(n.__webglColorTexture),t.deleteTexture(n.__webglDepthStencilTexture),a.memory.textures-=2;o=0;for(var s=n.__webglViewFramebuffers.length;o<s;o++)t.deleteFramebuffer(n.__webglViewFramebuffers[o])}r.remove(e.texture),r.remove(e)}}var C=0;function L(){C=0}function A(){var t=C;return t>=c&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+c),C+=1,t}function I(t,e){var i=r.get(t);if(t.isVideoTexture&&Y(t),t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void U(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function P(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?U(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))}function R(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?U(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))}function O(e,i){if(6===e.image.length){var a=r.get(e);if(e.version>0&&a.__version!==e.version){k(a,e),n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&e.isCompressedTexture,c=e.image[0]&&e.image[0].isDataTexture,h=[],f=0;f<6;f++)h[f]=s||c?c?e.image[f].image:e.image[f]:m(e.image[f],!1,!0,l);var p,d=h[0],g=v(d)||u,y=o.convert(e.format),w=o.convert(e.type),E=x(y,w);if(B(34067,e,g),s){for(f=0;f<6;f++){p=h[f].mipmaps;for(var S=0;S<p.length;S++){var M=p[S];e.format!==Ht&&e.format!==Vt?null!==y?n.compressedTexImage2D(34069+f,S,E,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+f,S,E,M.width,M.height,0,y,w,M.data)}}a.__maxMipLevel=p.length-1}else{p=e.mipmaps;for(f=0;f<6;f++)if(c){n.texImage2D(34069+f,0,E,h[f].width,h[f].height,0,y,w,h[f].data);for(S=0;S<p.length;S++){M=p[S];var T=M.image[f].image;n.texImage2D(34069+f,S+1,E,T.width,T.height,0,y,w,T.data)}}else{n.texImage2D(34069+f,0,E,y,w,h[f]);for(S=0;S<p.length;S++){M=p[S];n.texImage2D(34069+f,S+1,E,y,w,M.image[f])}}a.__maxMipLevel=p.length}_(e,g)&&b(34067,e,d.width,d.height),a.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture)}}function N(t,e){n.activeTexture(33984+e),n.bindTexture(34067,r.get(t).__webglTexture)}var D={[vt]:10497,[yt]:33071,[_t]:33648},F={[bt]:9728,[xt]:9984,[Et]:9986,[Mt]:9729,[Tt]:9985,[Lt]:9987};function B(n,o,a){a?(t.texParameteri(n,10242,D[o.wrapS]),t.texParameteri(n,10243,D[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,D[o.wrapR]),t.texParameteri(n,10240,F[o.magFilter]),t.texParameteri(n,10241,F[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===yt&&o.wrapT===yt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,w(o.magFilter)),t.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==bt&&o.minFilter!==Mt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=e.get("EXT_texture_filter_anisotropic");if(s){if(o.type===Ft&&null===e.get("OES_texture_float_linear"))return;if(o.type===Bt&&null===(u||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function k(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",E),e.__webglTexture=t.createTexture(),a.memory.textures++)}function U(e,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),k(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);var s=y(r)&&!1===v(r.image),c=m(r.image,s,!1,h),l=v(c)||u,f=o.convert(r.format),p=o.convert(r.type),d=x(f,p);B(a,r,l);var g,w=r.mipmaps;if(r.isDepthTexture){if(d=6402,r.type===Ft){if(!1===u)throw new Error("Float Depth Texture only supported in WebGL2.0");d=36012}else u&&(d=33189);r.format===Yt&&6402===d&&r.type!==Ot&&r.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ot,p=o.convert(r.type)),r.format===$t&&(d=34041,r.type!==Gt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Gt,p=o.convert(r.type))),n.texImage2D(3553,0,d,c.width,c.height,0,f,p,null)}else if(r.isDataTexture)if(w.length>0&&l){for(var E=0,S=w.length;E<S;E++)g=w[E],n.texImage2D(3553,E,d,g.width,g.height,0,f,p,g.data);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,d,c.width,c.height,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(E=0,S=w.length;E<S;E++)g=w[E],r.format!==Ht&&r.format!==Vt?null!==f?n.compressedTexImage2D(3553,E,d,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,E,d,g.width,g.height,0,f,p,g.data);e.__maxMipLevel=w.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,d,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,d,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(w.length>0&&l){for(E=0,S=w.length;E<S;E++)g=w[E],n.texImage2D(3553,E,d,f,p,g);r.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,d,f,p,c),e.__maxMipLevel=0;_(r,l)&&b(3553,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function j(e,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type),l=x(u,c);n.texImage2D(s,0,l,i.width,i.height,0,u,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function G(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(r){var i=X(n);t.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=X(n);t.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var a=o.convert(n.texture.format),s=o.convert(n.texture.type),u=x(a,s);if(r){i=X(n);t.renderbufferStorageMultisample(36161,i,u,n.width,n.height)}else t.renderbufferStorage(36161,u,n.width,n.height)}t.bindRenderbuffer(36161,null)}function z(e,n){var i=n&&n.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),I(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Yt)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(n.depthTexture.format!==$t)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}function V(e){var n=r.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");z(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),G(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),G(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function H(i){var s=r.get(i),c=r.get(i.texture);i.addEventListener("dispose",S),c.__webglTexture=t.createTexture(),a.memory.textures++;var l=!0===i.isWebGLRenderTargetCube,h=!0===i.isWebGLMultisampleRenderTarget,f=!0===i.isWebGLMultiviewRenderTarget,p=v(i)||u;if(l){s.__webglFramebuffer=[];for(var d=0;d<6;d++)s.__webglFramebuffer[d]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),h)if(u){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var g=o.convert(i.texture.format),m=o.convert(i.texture.type),y=x(g,m),w=X(i);t.renderbufferStorageMultisample(36161,w,y,i.width,i.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),i.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),G(s.__webglDepthRenderbuffer,i,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(f){var E=i.width,M=i.height,T=i.numViews;t.bindFramebuffer(36160,s.__webglFramebuffer);var C=e.get("OVR_multiview2");a.memory.textures+=2;var L=t.createTexture();t.bindTexture(35866,L),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,32856,E,M,T,0,6408,5121,null),C.framebufferTextureMultiviewOVR(36160,36064,L,0,0,T);var A=t.createTexture();t.bindTexture(35866,A),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,35056,E,M,T,0,34041,34042,null),C.framebufferTextureMultiviewOVR(36160,33306,A,0,0,T);var I=new Array(T);for(d=0;d<T;++d)I[d]=t.createFramebuffer(),t.bindFramebuffer(36160,I[d]),t.framebufferTextureLayer(36160,36064,L,0,d);s.__webglColorTexture=L,s.__webglDepthStencilTexture=A,s.__webglViewFramebuffers=I,t.bindFramebuffer(36160,null),t.bindTexture(35866,null)}if(l){n.bindTexture(34067,c.__webglTexture),B(34067,i.texture,p);for(d=0;d<6;d++)j(s.__webglFramebuffer[d],i,36064,34069+d);_(i.texture,p)&&b(34067,i.texture,i.width,i.height),n.bindTexture(34067,null)}else f||(n.bindTexture(3553,c.__webglTexture),B(3553,i.texture,p),j(s.__webglFramebuffer,i,36064,3553),_(i.texture,p)&&b(3553,i.texture,i.width,i.height),n.bindTexture(3553,null));i.depthBuffer&&V(i)}function q(t){var e=t.texture,i=v(t)||u;if(_(e,i)){var o=t.isWebGLRenderTargetCube?34067:3553,a=r.get(e).__webglTexture;n.bindTexture(o,a),b(o,e,t.width,t.height),n.bindTexture(o,null)}}function W(e){if(e.isWebGLMultisampleRenderTarget)if(u){var n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var i=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function X(t){return u&&t.isWebGLMultisampleRenderTarget?Math.min(f,t.samples):0}function Y(t){var e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}var $=!1,J=!1;function Z(t,e){t&&t.isWebGLRenderTarget&&(!1===$&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),$=!0),t=t.texture),I(t,e)}function K(t,e){t&&t.isWebGLRenderTargetCube&&(!1===J&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),J=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?O(t,e):N(t,e)}this.allocateTextureUnit=A,this.resetTextureUnits=L,this.setTexture2D=I,this.setTexture2DArray=P,this.setTexture3D=R,this.setTextureCube=O,this.setTextureCubeDynamic=N,this.setupRenderTarget=H,this.updateRenderTargetMipmap=q,this.updateMultisampleRenderTarget=W,this.safeSetTexture2D=Z,this.safeSetTextureCube=K}function Bc(t,e,n){var r=n.isWebGL2;function i(t){var n;if(t===It)return 5121;if(t===kt)return 32819;if(t===Ut)return 32820;if(t===jt)return 33635;if(t===Pt)return 5120;if(t===Rt)return 5122;if(t===Ot)return 5123;if(t===Nt)return 5124;if(t===Dt)return 5125;if(t===Ft)return 5126;if(t===Bt)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===zt)return 6406;if(t===Vt)return 6407;if(t===Ht)return 6408;if(t===qt)return 6409;if(t===Wt)return 6410;if(t===Yt)return 6402;if(t===$t)return 34041;if(t===Jt)return 6403;if(t===Zt||t===Kt||t===Qt||t===te){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===Zt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Kt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Qt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===te)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===ee||t===ne||t===re||t===ie){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===ee)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ne)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===re)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ie)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return t===oe?(n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null):t===ae||t===se||t===ue||t===ce||t===le||t===he||t===fe||t===pe||t===de||t===ge||t===me||t===ve||t===ye||t===_e?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===Gt?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:i}}function kc(t,e,n,r){Rn.call(this,t,e,r),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}function Uc(t,e){var n,r,i,o,a,s,u,c=2,l=t.extensions,h=t.properties,f=0;function p(){if(void 0===u){var t=l.get("OVR_multiview2");if(u=null!==t&&!1===e.getContextAttributes().antialias,u){f=e.getParameter(t.MAX_VIEWS_OVR),n=new kc(0,0,c),s=new bn,o=[],i=[],a=[];for(var r=0;r<f;r++)o[r]=new Gn,i[r]=new Cn}}return u}function d(t){return t.isArrayCamera?t.cameras:(a[0]=t,a)}function g(t,n){for(var r=d(t),i=0;i<r.length;i++)o[i].copy(r[i].projectionMatrix);n.setValue(e,"projectionMatrices",o)}function m(t,n){for(var r=d(t),i=0;i<r.length;i++)o[i].copy(r[i].matrixWorldInverse);n.setValue(e,"viewMatrices",o)}function v(t,n,r){for(var a=d(n),s=0;s<a.length;s++)o[s].multiplyMatrices(a[s].matrixWorldInverse,t.matrixWorld),i[s].getNormalMatrix(o[s]);r.setValue(e,"modelViewMatrices",o),r.setValue(e,"normalMatrices",i)}function y(t){if(void 0===t.isArrayCamera)return!0;var e=t.cameras;if(e.length>f)return!1;for(var n=1,r=e.length;n<r;n++)if(e[0].viewport.z!==e[n].viewport.z||e[0].viewport.w!==e[n].viewport.w)return!1;return!0}function _(e){if(r?s.set(r.width,r.height):t.getDrawingBufferSize(s),e.isArrayCamera){var i=e.cameras[0].viewport;n.setSize(i.z,i.w),n.setNumViews(e.cameras.length)}else n.setSize(s.x,s.y),n.setNumViews(c)}function b(e){!1!==y(e)&&(r=t.getRenderTarget(),_(e),t.setRenderTarget(n))}function x(e){n===t.getRenderTarget()&&(t.setRenderTarget(r),w(e))}function w(t){var r=n,i=r.numViews,o=h.get(r).__webglViewFramebuffers,a=r.width,u=r.height;if(t.isArrayCamera)for(var c=0;c<i;c++){var l=t.cameras[c].viewport,f=l.x,p=l.y,d=f+l.z,g=p+l.w;e.bindFramebuffer(36008,o[c]),e.blitFramebuffer(0,0,a,u,f,p,d,g,16384,9728)}else e.bindFramebuffer(36008,o[0]),e.blitFramebuffer(0,0,a,u,0,0,s.x,s.y,16384,9728)}this.isAvailable=p,this.attachCamera=b,this.detachCamera=x,this.updateCameraProjectionMatricesUniform=g,this.updateCameraViewMatricesUniform=m,this.updateObjectMatricesUniforms=v}function jc(){or.call(this),this.type="Group"}function Gc(t){io.call(this),this.cameras=t||[]}kc.prototype=Object.assign(Object.create(Rn.prototype),{constructor:kc,isWebGLMultiviewRenderTarget:!0,copy:function(t){return Rn.prototype.copy.call(this,t),this.numViews=t.numViews,this},setNumViews:function(t){return this.numViews!==t&&(this.numViews=t,this.dispose()),this}}),jc.prototype=Object.assign(Object.create(or.prototype),{constructor:jc,isGroup:!0}),Gc.prototype=Object.assign(Object.create(io.prototype),{constructor:Gc,isArrayCamera:!0});var zc,Vc=new Sn,Hc=new Sn;function qc(t,e,n){Vc.setFromMatrixPosition(e.matrixWorld),Hc.setFromMatrixPosition(n.matrixWorld);var r=Vc.distanceTo(Hc),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*l,p=a*h,d=r/(-l+h),g=d*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(g),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var m=a+d,v=s+d,y=f-g,_=p+(r-g),b=u*s/v*m,x=c*s/v*m;t.projectionMatrix.makePerspective(y,_,b,x,m,v)}function Wc(t){var e,n,r=this,i=null,o=null,a=[],s=new Gn,u=new Gn,c=1,l="local-floor";"undefined"!==typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",x,!1));var h=new Gn,f=new xn,p=new Sn,d=new io,g=new io;g.viewport=new Pn,g.layers.enable(1);var m=new io;m.viewport=new Pn,m.layers.enable(2);var v=new Gc([g,m]);function y(){return null!==i&&!0===i.isPresenting}v.layers.enable(1),v.layers.enable(2);var _,b=new bn;function x(){if(y()){var o=i.getEyeParameters("left");e=2*o.renderWidth*c,n=o.renderHeight*c,_=t.getPixelRatio(),t.getSize(b),t.setDrawingBufferSize(e,n,1),g.viewport.set(0,0,e/2,n),m.viewport.set(e/2,0,e/2,n),C.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&t.setDrawingBufferSize(b.width,b.height,_),C.stop(),r.dispatchEvent({type:"sessionend"})}var w=[],E=[];function S(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,r=e.length;n<r;n++){var i=e[n];if(i&&("Daydream Controller"===i.id||"Gear VR Controller"===i.id||"Oculus Go Controller"===i.id||"OpenVR Gamepad"===i.id||i.id.startsWith("Oculus Touch")||i.id.startsWith("HTC Vive Focus")||i.id.startsWith("Spatial Controller"))){var o=i.hand;if(0===t&&(""===o||"right"===o))return i;if(1===t&&"left"===o)return i}}}function M(){for(var t=0;t<a.length;t++){var e=a[t],n=S(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&e.position.set(.2,-.6,-.05),null!==r.position&&e.position.fromArray(r.position),null!==r.orientation&&e.quaternion.fromArray(r.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(s),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var i="Daydream Controller"===n.id?0:1;void 0===w[t]&&(w[t]=!1),w[t]!==n.buttons[i].pressed&&(w[t]=n.buttons[i].pressed,!0===w[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"}))),i=2,void 0===E[t]&&(E[t]=!1),void 0!==n.buttons[i]&&E[t]!==n.buttons[i].pressed&&(E[t]=n.buttons[i].pressed,!0===E[t]?e.dispatchEvent({type:"squeezestart"}):(e.dispatchEvent({type:"squeezeend"}),e.dispatchEvent({type:"squeeze"})))}else e.visible=!1}}function T(t,r){null!==r&&4===r.length&&t.set(r[0]*e,r[1]*n,r[2]*e,r[3]*n)}this.enabled=!1,this.getController=function(t){var e=a[t];return void 0===e&&(e=new jc,e.matrixAutoUpdate=!1,e.visible=!1,a[t]=e),e},this.getDevice=function(){return i},this.setDevice=function(t){void 0!==t&&(i=t),C.setContext(t)},this.setFramebufferScaleFactor=function(t){c=t},this.setReferenceSpaceType=function(t){l=t},this.getCamera=function(t){var e="local-floor"===l?1.6:0;if(i.depthNear=t.near,i.depthFar=t.far,i.getFrameData(o),"local-floor"===l){var n=i.stageParameters;n?s.fromArray(n.sittingToStandingTransform):s.makeTranslation(0,e,0)}var r=o.pose;d.matrix.copy(s),d.matrix.decompose(d.position,d.quaternion,d.scale),null!==r.orientation&&(f.fromArray(r.orientation),d.quaternion.multiply(f)),null!==r.position&&(f.setFromRotationMatrix(s),p.fromArray(r.position),p.applyQuaternion(f),d.position.add(p)),d.updateMatrixWorld(),t.matrixWorld.copy(d.matrixWorld);for(var a=t.children,c=0,y=a.length;c<y;c++)a[c].updateMatrixWorld(!0);g.near=t.near,m.near=t.near,g.far=t.far,m.far=t.far,g.matrixWorldInverse.fromArray(o.leftViewMatrix),m.matrixWorldInverse.fromArray(o.rightViewMatrix),u.getInverse(s),"local-floor"===l&&(g.matrixWorldInverse.multiply(u),m.matrixWorldInverse.multiply(u));var _=t.parent;null!==_&&(h.getInverse(_.matrixWorld),g.matrixWorldInverse.multiply(h),m.matrixWorldInverse.multiply(h)),g.matrixWorld.getInverse(g.matrixWorldInverse),m.matrixWorld.getInverse(m.matrixWorldInverse),g.projectionMatrix.fromArray(o.leftProjectionMatrix),m.projectionMatrix.fromArray(o.rightProjectionMatrix),qc(v,g,m);var b=i.getLayers();if(b.length){var x=b[0];T(g.viewport,x.leftBounds),T(m.viewport,x.rightBounds)}return M(),v},this.getStandingMatrix=function(){return s},this.isPresenting=y;var C=new Rs;this.setAnimationLoop=function(t){C.setAnimationLoop(t),y()&&C.start()},this.submitFrame=function(){y()&&i.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",x)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Xc(t,e){var n=this,r=null,i=null,o="local-floor",a=null,s=[],u=[];function c(){return null!==r&&null!==i}var l=new io;l.layers.enable(1),l.viewport=new Pn;var h=new io;h.layers.enable(2),h.viewport=new Pn;var f=new Gc([l,h]);function p(t){for(var e=0;e<s.length;e++)u[e]===t.inputSource&&s[e].dispatchEvent({type:t.type})}function d(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),x.stop(),n.dispatchEvent({type:"sessionend"})}function g(t){i=t,x.setContext(r),x.start(),n.dispatchEvent({type:"sessionstart"})}function m(){for(var t=0;t<s.length;t++)u[t]=v(t)}function v(t){for(var e=r.inputSources,n=0;n<e.length;n++){var i=e[n],o=i.handedness;if(0===t&&("none"===o||"right"===o))return i;if(1===t&&"left"===o)return i}}function y(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&(e=new jc,e.matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(t){o=t},this.getSession=function(){return r},this.setSession=function(t){r=t,null!==r&&(r.addEventListener("select",p),r.addEventListener("selectstart",p),r.addEventListener("selectend",p),r.addEventListener("squeeze",p),r.addEventListener("squeezestart",p),r.addEventListener("squeezeend",p),r.addEventListener("end",d),r.updateRenderState({baseLayer:new XRWebGLLayer(r,e)}),r.requestReferenceSpace(o).then(g),r.addEventListener("inputsourceschange",m),m())},this.getCamera=function(t){var e=t.parent,n=f.cameras;y(f,e);for(var r=0;r<n.length;r++)y(n[r],e);t.matrixWorld.copy(f.matrixWorld);for(var i=t.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return qc(f,l,h),f},this.isPresenting=c;var _=null;function b(e,n){if(a=n.getViewerPose(i),null!==a){var o=a.views,c=r.renderState.baseLayer;t.setFramebuffer(c.framebuffer);for(var l=0;l<o.length;l++){var h=o[l],p=c.getViewport(h),d=h.transform.inverse.matrix,g=f.cameras[l];g.matrix.fromArray(d).getInverse(g.matrix),g.projectionMatrix.fromArray(h.projectionMatrix),g.viewport.set(p.x,p.y,p.width,p.height),0===l&&f.matrix.copy(g.matrix)}}for(l=0;l<s.length;l++){var m=s[l],v=u[l];if(v){var y=n.getPose(v.targetRaySpace,i);if(null!==y){m.matrix.fromArray(y.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}_&&_(e)}var x=new Rs;x.setAnimationLoop(b),this.setAnimationLoop=function(t){_=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Gn},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Yc(t){t=t||{};var e=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",l=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,f=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=it,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,g,m,y,_,b,x,w,E,S,M,T,C,L,A,I,P,R=this,O=!1,N=null,D=0,F=0,B=null,k=null,U=-1,j={geometry:null,program:null,wireframe:!1},G=null,z=null,V=new Pn,H=new Pn,q=null,W=e.width,X=e.height,Y=1,$=new Pn(0,0,W,X),J=new Pn(0,0,W,X),Z=!1,K=new fo,Q=new Us,tt=!1,et=!1,nt=new Gn,rt=new Sn;function ot(){return null===B?Y:1}try{var at={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",ft,!1),p=n||e.getContext("webgl",at)||e.getContext("experimental-webgl",at),null===p)throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Xt){throw console.error("THREE.WebGLRenderer: "+Xt.message),Xt}function st(){d=new js(p),g=new ks(p,d,t),!1===g.isWebGL2&&(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),P=new Bc(p,d,g),m=new Dc(p,d,g),m.scissor(H.copy(J).multiplyScalar(Y).floor()),m.viewport(V.copy($).multiplyScalar(Y).floor()),y=new Vs(p),_=new _c,b=new Fc(p,d,m,_,g,P,y),x=new Os(p),w=new Gs(p,x,y),E=new Ws(p,w,x,y),L=new qs(p),S=new yc(R,d,g),M=new Ec,T=new Ac,C=new Fs(R,m,E,s),A=new Bs(p,d,y,g),I=new zs(p,d,y,g),y.programs=S.programs,R.capabilities=g,R.extensions=d,R.properties=_,R.renderLists=M,R.state=m,R.info=y}st();var ut="undefined"!==typeof navigator&&"xr"in navigator?new Xc(R,p):new Wc(R);this.vr=ut;var ct=new Uc(R,p),lt=new Nc(R,E,g.maxTextureSize);function ht(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1,st()}function pt(t){var e=t.target;e.removeEventListener("dispose",pt),dt(e)}function dt(t){gt(t),_.remove(t)}function gt(t){var e=_.get(t).program;t.program=void 0,void 0!==e&&S.releaseProgram(e)}function mt(t,e){t.render((function(t){R.renderBufferImmediate(t,e)}))}function vt(t,e,n,r){if(!1!==g.isWebGL2||!t.isInstancedMesh&&!e.isInstancedBufferGeometry||null!==d.get("ANGLE_instanced_arrays")){m.initAttributes();var i=e.attributes,o=r.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var c=i[s];if(void 0!==c){var l=c.normalized,h=c.itemSize,f=x.get(c);if(void 0===f)continue;var v=f.buffer,y=f.type,_=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var b=c.data,w=b.stride,E=c.offset;b&&b.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(u,b.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=b.meshPerAttribute*b.count)):m.enableAttribute(u),p.bindBuffer(34962,v),p.vertexAttribPointer(u,h,y,l,w*_,E*_)}else c.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(u,c.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=c.meshPerAttribute*c.count)):m.enableAttribute(u),p.bindBuffer(34962,v),p.vertexAttribPointer(u,h,y,l,0,0)}else if("instanceMatrix"===s){f=x.get(t.instanceMatrix);if(void 0===f)continue;v=f.buffer,y=f.type;m.enableAttributeAndDivisor(u+0,1),m.enableAttributeAndDivisor(u+1,1),m.enableAttributeAndDivisor(u+2,1),m.enableAttributeAndDivisor(u+3,1),p.bindBuffer(34962,v),p.vertexAttribPointer(u+0,4,y,!1,64,0),p.vertexAttribPointer(u+1,4,y,!1,64,16),p.vertexAttribPointer(u+2,4,y,!1,64,32),p.vertexAttribPointer(u+3,4,y,!1,64,48)}else if(void 0!==a){var S=a[s];if(void 0!==S)switch(S.length){case 2:p.vertexAttrib2fv(u,S);break;case 3:p.vertexAttrib3fv(u,S);break;case 4:p.vertexAttrib4fv(u,S);break;default:p.vertexAttrib1fv(u,S)}}}}m.disableUnusedAttributes()}}this.shadowMap=lt,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=d.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=d.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(t){void 0!==t&&(Y=t,this.setSize(W,X,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new bn),t.set(W,X)},this.setSize=function(t,n,r){ut.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=t,X=n,e.width=Math.floor(t*Y),e.height=Math.floor(n*Y),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new bn),t.set(W*Y,X*Y).floor()},this.setDrawingBufferSize=function(t,n,r){W=t,X=n,Y=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Pn),t.copy(V)},this.getViewport=function(t){return t.copy($)},this.setViewport=function(t,e,n,r){t.isVector4?$.set(t.x,t.y,t.z,t.w):$.set(t,e,n,r),m.viewport(V.copy($).multiplyScalar(Y).floor())},this.getScissor=function(t){return t.copy(J)},this.setScissor=function(t,e,n,r){t.isVector4?J.set(t.x,t.y,t.z,t.w):J.set(t,e,n,r),m.scissor(H.copy(J).multiplyScalar(Y).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(t){m.setScissorTest(Z=t)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",ft,!1),M.dispose(),T.dispose(),_.dispose(),E.dispose(),ut.dispose(),bt.stop()},this.renderBufferImmediate=function(t,e){m.initAttributes();var n=_.get(t);t.hasPositions&&!n.position&&(n.position=p.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),t.hasColors&&!n.color&&(n.color=p.createBuffer());var r=e.getAttributes();t.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,t.positionArray,35048),m.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,t.normalArray,35048),m.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,t.uvArray,35048),m.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,t.colorArray,35048),m.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),m.disableUnusedAttributes(),p.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;m.setMaterial(r,a);var s=Mt(t,e,r,i),u=!1;j.geometry===n.id&&j.program===s.id&&j.wireframe===(!0===r.wireframe)||(j.geometry=n.id,j.program=s.id,j.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(L.update(i,n,r,s),u=!0);var c=n.index,l=n.attributes.position;if((null===c||0!==c.count)&&void 0!==l&&0!==l.count){var h,f=1;!0===r.wireframe&&(c=w.getWireframeAttribute(n),f=2);var d=A;null!==c&&(h=x.get(c),d=I,d.setIndex(h)),u&&(vt(i,n,r,s),null!==c&&p.bindBuffer(34963,h.buffer));var g=1/0;null!==c?g=c.count:void 0!==l&&(g=l.count);var v=n.drawRange.start*f,y=n.drawRange.count*f,_=null!==o?o.start*f:0,b=null!==o?o.count*f:1/0,E=Math.max(v,_),S=Math.min(g,v+y,_+b)-1,M=Math.max(0,S-E+1);if(0!==M){if(i.isMesh)if(!0===r.wireframe)m.setLineWidth(r.wireframeLinewidth*ot()),d.setMode(1);else switch(i.drawMode){case Ae:d.setMode(4);break;case Ie:d.setMode(5);break;case Pe:d.setMode(6);break}else if(i.isLine){var T=r.linewidth;void 0===T&&(T=1),m.setLineWidth(T*ot()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);i.isInstancedMesh?d.renderInstances(n,E,M,i.count):n.isInstancedBufferGeometry?d.renderInstances(n,E,M,n.maxInstancedCount):d.render(E,M)}}},this.compile=function(t,e){f=T.get(t,e),f.init(),t.traverse((function(t){t.isLight&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)St(e.material[n],t.fog,e);else St(e.material,t.fog,e)}))};var yt=null;function _t(t){ut.isPresenting()||yt&&yt(t)}var bt=new Rs;function xt(t,e,n,r){if(!1!==t.visible){var i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||K.intersectsSprite(t)){r&&rt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);var o=E.update(t),a=t.material;a.visible&&h.push(t,o,a,n,rt.z,null)}}else if(t.isImmediateRenderObject)r&&rt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt),h.push(t,null,t.material,n,rt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==y.render.frame&&(t.skeleton.update(),t.skeleton.frame=y.render.frame),!t.frustumCulled||K.intersectsObject(t))){r&&rt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(nt);o=E.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,u=0,c=s.length;u<c;u++){var l=s[u],p=a[l.materialIndex];p&&p.visible&&h.push(t,o,p,n,rt.z,l)}else a.visible&&h.push(t,o,a,n,rt.z,null)}var d=t.children;for(u=0,c=d.length;u<c;u++)xt(d[u],e,n,r)}}function wt(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera)if(z=n,ut.enabled&&ct.isAvailable())Et(s,e,n,u,c,l);else for(var h=n.cameras,p=0,d=h.length;p<d;p++){var g=h[p];s.layers.test(g.layers)&&(m.viewport(V.copy(g.viewport)),f.setupLights(g),Et(s,e,g,u,c,l))}else z=null,Et(s,e,n,u,c,l)}}function Et(t,e,n,r,i,o){if(t.onBeforeRender(R,e,n,r,i,o),f=T.get(e,z||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){m.setMaterial(i);var a=Mt(n,e.fog,i,t);j.geometry=null,j.program=null,j.wireframe=!1,mt(t,a)}else R.renderBufferDirect(n,e.fog,r,i,t,o);t.onAfterRender(R,e,n,r,i,o),f=T.get(e,z||n)}function St(t,e,n){var r=_.get(t),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=S.getParameters(t,i.state,o,e,Q.numPlanes,Q.numIntersection,n),u=S.getProgramCacheKey(t,s),c=r.program,l=!0;if(void 0===c)t.addEventListener("dispose",pt);else if(c.cacheKey!==u)gt(t);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,l=!1;else{if(void 0!==s.shaderID)return;l=!1}if(l){if(s.shaderID){var h=Ps[s.shaderID];r.shader={name:t.type,uniforms:Zi(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(r.shader,R),u=S.getProgramCacheKey(t,s),c=S.acquireProgram(t,r.shader,s,u),r.program=c,t.program=c}var p=c.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<R.maxMorphTargets;d++)p["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(d=0;d<R.maxMorphNormals;d++)p["morphNormal"+d]>=0&&t.numSupportedMorphNormals++}var g=r.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=Q.numPlanes,r.numIntersection=Q.numIntersection,g.clippingPlanes=Q.uniform),r.fog=e,r.needsLights=Wt(t),r.lightsStateVersion=a,r.needsLights&&(g.ambientLightColor.value=i.state.ambient,g.lightProbe.value=i.state.probe,g.directionalLights.value=i.state.directional,g.spotLights.value=i.state.spot,g.rectAreaLights.value=i.state.rectArea,g.pointLights.value=i.state.point,g.hemisphereLights.value=i.state.hemi,g.directionalShadowMap.value=i.state.directionalShadowMap,g.directionalShadowMatrix.value=i.state.directionalShadowMatrix,g.spotShadowMap.value=i.state.spotShadowMap,g.spotShadowMatrix.value=i.state.spotShadowMatrix,g.pointShadowMap.value=i.state.pointShadowMap,g.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),v=qu.seqWithValue(m.seq,g);r.uniformsList=v}function Mt(t,e,n,r){b.resetTextureUnits();var i=_.get(n),o=f.state.lights;if(tt&&(et||t!==G)){var a=t===G&&n.id===U;Q.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,i,a)}n.version===i.__version&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:i.needsLights&&i.lightsStateVersion!==o.state.version?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Q.numPlanes&&i.numIntersection===Q.numIntersection||(n.needsUpdate=!0)),n.version!==i.__version&&(St(n,e,r),i.__version=n.version);var s=!1,u=!1,c=!1,l=i.program,h=l.getUniforms(),d=i.shader.uniforms;if(m.useProgram(l.program)&&(s=!0,u=!0,c=!0),n.id!==U&&(U=n.id,u=!0),s||G!==t){if(l.numMultiviewViews>0?ct.updateCameraProjectionMatricesUniform(t,h):h.setValue(p,"projectionMatrix",t.projectionMatrix),g.logarithmicDepthBuffer&&h.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),G!==t&&(G=t,u=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var v=h.map.cameraPosition;void 0!==v&&v.setValue(p,rt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&h.setValue(p,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(l.numMultiviewViews>0?ct.updateCameraViewMatricesUniform(t,h):h.setValue(p,"viewMatrix",t.matrixWorldInverse))}if(n.skinning){h.setOptional(p,r,"bindMatrix"),h.setOptional(p,r,"bindMatrixInverse");var y=r.skeleton;if(y){var x=y.bones;if(g.floatVertexTextures){if(void 0===y.boneTexture){var w=Math.sqrt(4*x.length);w=_n.ceilPowerOfTwo(w),w=Math.max(w,4);var E=new Float32Array(w*w*4);E.set(y.boneMatrices);var S=new co(E,w,w,Ht,Ft);y.boneMatrices=E,y.boneTexture=S,y.boneTextureSize=w}h.setValue(p,"boneTexture",y.boneTexture,b),h.setValue(p,"boneTextureSize",y.boneTextureSize)}else h.setOptional(p,y,"boneMatrices")}}return(u||i.receiveShadow!==r.receiveShadow)&&(i.receiveShadow=r.receiveShadow,h.setValue(p,"receiveShadow",r.receiveShadow)),u&&(h.setValue(p,"toneMappingExposure",R.toneMappingExposure),h.setValue(p,"toneMappingWhitePoint",R.toneMappingWhitePoint),i.needsLights&&qt(d,c),e&&n.fog&&Rt(d,e),n.isMeshBasicMaterial?Tt(d,n):n.isMeshLambertMaterial?(Tt(d,n),Ot(d,n)):n.isMeshPhongMaterial?(Tt(d,n),n.isMeshToonMaterial?Dt(d,n):Nt(d,n)):n.isMeshStandardMaterial?(Tt(d,n),n.isMeshPhysicalMaterial?Ut(d,n):kt(d,n)):n.isMeshMatcapMaterial?(Tt(d,n),jt(d,n)):n.isMeshDepthMaterial?(Tt(d,n),Gt(d,n)):n.isMeshDistanceMaterial?(Tt(d,n),zt(d,n)):n.isMeshNormalMaterial?(Tt(d,n),Vt(d,n)):n.isLineBasicMaterial?(Ct(d,n),n.isLineDashedMaterial&&Lt(d,n)):n.isPointsMaterial?At(d,n):n.isSpriteMaterial?Pt(d,n):n.isShadowMaterial&&(d.color.value.copy(n.color),d.opacity.value=n.opacity),void 0!==d.ltc_1&&(d.ltc_1.value=Is.LTC_1),void 0!==d.ltc_2&&(d.ltc_2.value=Is.LTC_2),qu.upload(p,i.uniformsList,d,b),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(qu.upload(p,i.uniformsList,d,b),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&h.setValue(p,"center",r.center),l.numMultiviewViews>0?ct.updateObjectMatricesUniforms(r,t,h):(h.setValue(p,"modelViewMatrix",r.modelViewMatrix),h.setValue(p,"normalMatrix",r.normalMatrix)),h.setValue(p,"modelMatrix",r.matrixWorld),l}function Tt(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=_.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function Ct(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function Lt(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function At(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*Y,t.scale.value=.5*X,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function Pt(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function Rt(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function Ot(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function Nt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===v&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===v&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Dt(t,e){Nt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function kt(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===v&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===v&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function Ut(t,e){kt(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===v&&t.clearcoatNormalScale.value.negate()),t.transparency.value=e.transparency}function jt(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===v&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===v&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Gt(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function zt(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function Vt(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===v&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===v&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function qt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Wt(t){return t.isMeshLambertMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}bt.setAnimationLoop(_t),"undefined"!==typeof window&&bt.setContext(window),this.setAnimationLoop=function(t){yt=t,ut.setAnimationLoop(t),bt.start()},this.render=function(t,e){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),e&&e.isCamera){if(!O){j.geometry=null,j.program=null,j.wireframe=!1,U=-1,G=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ut.enabled&&ut.isPresenting()&&(e=ut.getCamera(e)),f=T.get(t,e),f.init(),t.onBeforeRender(R,t,e,n||B),nt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),K.setFromMatrix(nt),et=this.localClippingEnabled,tt=Q.init(this.clippingPlanes,et,e),h=M.get(t,e),h.init(),xt(t,e,0,R.sortObjects),!0===R.sortObjects&&h.sort(),tt&&Q.beginShadows();var i=f.state.shadowsArray;lt.render(i,t,e),f.setupLights(e),tt&&Q.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),ut.enabled&&ct.isAvailable()&&ct.attachCamera(e),C.render(h,t,e,r);var o=h.opaque,a=h.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&wt(o,t,e,s),a.length&&wt(a,t,e,s)}else o.length&&wt(o,t,e),a.length&&wt(a,t,e);t.onAfterRender(R,t,e),null!==B&&(b.updateRenderTargetMipmap(B),b.updateMultisampleRenderTarget(B)),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),ut.enabled&&(ct.isAvailable()&&ct.detachCamera(e),ut.submitFrame()),h=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){N!==t&&null===B&&p.bindFramebuffer(36160,t),N=t},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return B},this.setRenderTarget=function(t,e,n){B=t,D=e,F=n,t&&void 0===_.get(t).__webglFramebuffer&&b.setupRenderTarget(t);var r=N,i=!1;if(t){var o=_.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(r=o[e||0],i=!0):r=t.isWebGLMultisampleRenderTarget?_.get(t).__webglMultisampledFramebuffer:o,V.copy(t.viewport),H.copy(t.scissor),q=t.scissorTest}else V.copy($).multiplyScalar(Y).floor(),H.copy(J).multiplyScalar(Y).floor(),q=Z;if(k!==r&&(p.bindFramebuffer(36160,r),k=r),m.viewport(V),m.scissor(H),m.setScissorTest(q),i){var a=_.get(t.texture);p.framebufferTexture2D(36160,36064,34069+(e||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){var s=_.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var u=!1;s!==k&&(p.bindFramebuffer(36160,s),u=!0);try{var c=t.texture,l=c.format,h=c.type;if(l!==Ht&&P.convert(l)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(h!==It&&P.convert(h)!==p.getParameter(35738)&&(h!==Ft||!(g.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float")))&&(h!==Bt||(g.isWebGL2?!d.get("EXT_color_buffer_float"):!d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&p.readPixels(e,n,r,i,P.convert(l),P.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&p.bindFramebuffer(36160,k)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=P.convert(e.format);b.setTexture2D(e,0),p.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),m.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r){var i=e.image.width,o=e.image.height,a=P.convert(n.format),s=P.convert(n.type);b.setTexture2D(n,0),e.isDataTexture?p.texSubImage2D(3553,r||0,t.x,t.y,i,o,a,s,e.image.data):p.texSubImage2D(3553,r||0,t.x,t.y,a,s,e.image),m.unbindTexture()},this.initTexture=function(t){b.setTexture2D(t,0),m.unbindTexture()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function $c(t,e){this.name="",this.color=new Jr(t),this.density=void 0!==e?e:25e-5}function Jc(t,e,n){this.name="",this.color=new Jr(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Zc(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=sn,this.updateRange={offset:0,count:-1},this.version=0}function Kc(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Qc(t){ni.call(this),this.type="SpriteMaterial",this.color=new Jr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.assign(Wc.prototype,mn.prototype),Object.assign(Xc.prototype,mn.prototype),Object.assign($c.prototype,{isFogExp2:!0,clone:function(){return new $c(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Jc.prototype,{isFog:!0,clone:function(){return new Jc(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Zc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Zc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(Kc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Kc.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),Qc.prototype=Object.create(ni.prototype),Qc.prototype.constructor=Qc,Qc.prototype.isSpriteMaterial=!0,Qc.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var tl=new Sn,el=new Sn,nl=new Sn,rl=new bn,il=new bn,ol=new Gn,al=new Sn,sl=new Sn,ul=new Sn,cl=new bn,ll=new bn,hl=new bn;function fl(t){if(or.call(this),this.type="Sprite",void 0===zc){zc=new Ei;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Zc(e,5);zc.setIndex([0,1,2,0,2,3]),zc.setAttribute("position",new Kc(n,3,0,!1)),zc.setAttribute("uv",new Kc(n,2,3,!1))}this.geometry=zc,this.material=void 0!==t?t:new Qc,this.center=new bn(.5,.5)}function pl(t,e,n,r,i,o){rl.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(il.x=o*rl.x-i*rl.y,il.y=i*rl.x+o*rl.y):il.copy(rl),t.copy(e),t.x+=il.x,t.y+=il.y,t.applyMatrix4(ol)}fl.prototype=Object.assign(Object.create(or.prototype),{constructor:fl,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),el.setFromMatrixScale(this.matrixWorld),ol.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),nl.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&el.multiplyScalar(-nl.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;pl(al.set(-.5,-.5,0),nl,o,el,n,r),pl(sl.set(.5,-.5,0),nl,o,el,n,r),pl(ul.set(.5,.5,0),nl,o,el,n,r),cl.set(0,0),ll.set(1,0),hl.set(1,1);var a=t.ray.intersectTriangle(al,sl,ul,!1,tl);if(null!==a||(pl(sl.set(-.5,.5,0),nl,o,el,n,r),ll.set(0,1),a=t.ray.intersectTriangle(al,ul,sl,!1,tl),null!==a)){var s=t.ray.origin.distanceTo(tl);s<t.near||s>t.far||e.push({distance:s,point:tl.clone(),uv:Wr.getUV(tl,al,sl,ul,cl,ll,hl,new bn),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return or.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var dl=new Sn,gl=new Sn;function ml(){or.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function vl(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Gi.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Gn,this.bindMatrixInverse=new Gn}ml.prototype=Object.assign(Object.create(or.prototype),{constructor:ml,isLOD:!0,copy:function(t){or.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length;r++)if(e<n[r].distance)break;return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){for(var n=1,r=e.length;n<r;n++)if(t<e[n].distance)break;return e[n-1].object}return null},raycast:function(t,e){var n=this.levels;if(n.length>0){dl.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(dl);this.getObjectForDistance(r).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){dl.setFromMatrixPosition(t.matrixWorld),gl.setFromMatrixPosition(this.matrixWorld);var n=dl.distanceTo(gl);e[0].object.visible=!0;for(var r=1,i=e.length;r<i;r++){if(!(n>=e[r].distance))break;e[r-1].object.visible=!1,e[r].object.visible=!0}for(;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){var e=or.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),vl.prototype=Object.assign(Object.create(Gi.prototype),{constructor:vl,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Pn,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Gi.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var yl=new Gn,_l=new Gn;function bl(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Gn)}}function xl(){or.call(this),this.type="Bone"}Object.assign(bl.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Gn;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++){var a=t[i]?t[i].matrixWorld:_l;yl.multiplyMatrices(a,e[i]),yl.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new bl(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}}}),xl.prototype=Object.assign(Object.create(or.prototype),{constructor:xl,isBone:!0});var wl=new Gn,El=new Gn,Sl=[],Ml=new Gi;function Tl(t,e,n){Gi.call(this,t,e),this.instanceMatrix=new ii(new Float32Array(16*n),16),this.count=n}function Cl(t){ni.call(this),this.type="LineBasicMaterial",this.color=new Jr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}Tl.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Tl,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,r=this.count;if(Ml.geometry=this.geometry,Ml.material=this.material,void 0!==Ml.material)for(var i=0;i<r;i++)this.getMatrixAt(i,wl),El.multiplyMatrices(n,wl),Ml.matrixWorld=El,Ml.raycast(t,Sl),Sl.length>0&&(Sl[0].instanceId=i,Sl[0].object=this,e.push(Sl[0]),Sl.length=0)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),Cl.prototype=Object.create(ni.prototype),Cl.prototype.constructor=Cl,Cl.prototype.isLineBasicMaterial=!0,Cl.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Ll=new Sn,Al=new Sn,Il=new Gn,Pl=new Pr,Rl=new Er;function Ol(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),or.call(this),this.type="Line",this.geometry=void 0!==t?t:new Ei,this.material=void 0!==e?e:new Cl({color:16777215*Math.random()})}Ol.prototype=Object.assign(Object.create(or.prototype),{constructor:Ol,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)Ll.fromBufferAttribute(e,r-1),Al.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=Ll.distanceTo(Al);t.setAttribute("lineDistance",new fi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;n=t.lineDistances;n[0]=0;for(r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(t,e){var n=t.linePrecision,r=this.geometry,i=this.matrixWorld;if(null===r.boundingSphere&&r.computeBoundingSphere(),Rl.copy(r.boundingSphere),Rl.applyMatrix4(i),Rl.radius+=n,!1!==t.ray.intersectsSphere(Rl)){Il.getInverse(i),Pl.copy(t.ray).applyMatrix4(Il);var o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Sn,u=new Sn,c=new Sn,l=new Sn,h=this&&this.isLineSegments?2:1;if(r.isBufferGeometry){var f=r.index,p=r.attributes,d=p.position.array;if(null!==f)for(var g=f.array,m=0,v=g.length-1;m<v;m+=h){var y=g[m],_=g[m+1];s.fromArray(d,3*y),u.fromArray(d,3*_);var b=Pl.distanceSqToSegment(s,u,l,c);if(!(b>a)){l.applyMatrix4(this.matrixWorld);var x=t.ray.origin.distanceTo(l);x<t.near||x>t.far||e.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(m=0,v=d.length/3-1;m<v;m+=h){s.fromArray(d,3*m),u.fromArray(d,3*m+3);b=Pl.distanceSqToSegment(s,u,l,c);if(!(b>a)){l.applyMatrix4(this.matrixWorld);x=t.ray.origin.distanceTo(l);x<t.near||x>t.far||e.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}else if(r.isGeometry){var w=r.vertices,E=w.length;for(m=0;m<E-1;m+=h){b=Pl.distanceSqToSegment(w[m],w[m+1],l,c);if(!(b>a)){l.applyMatrix4(this.matrixWorld);x=t.ray.origin.distanceTo(l);x<t.near||x>t.far||e.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Nl=new Sn,Dl=new Sn;function Fl(t,e){Ol.call(this,t,e),this.type="LineSegments"}function Bl(t,e){Ol.call(this,t,e),this.type="LineLoop"}function kl(t){ni.call(this),this.type="PointsMaterial",this.color=new Jr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Fl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Fl,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)Nl.fromBufferAttribute(e,r),Dl.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Nl.distanceTo(Dl);t.setAttribute("lineDistance",new fi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for(n=t.lineDistances,r=0,i=o.length;r<i;r+=2)Nl.copy(o[r]),Dl.copy(o[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Nl.distanceTo(Dl)}return this}}),Bl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Bl,isLineLoop:!0}),kl.prototype=Object.create(ni.prototype),kl.prototype.constructor=kl,kl.prototype.isPointsMaterial=!0,kl.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Ul=new Gn,jl=new Pr,Gl=new Er,zl=new Sn;function Vl(t,e){or.call(this),this.type="Points",this.geometry=void 0!==t?t:new Ei,this.material=void 0!==e?e:new kl({color:16777215*Math.random()}),this.updateMorphTargets()}function Hl(t,e,n,r,i,o,a){var s=jl.distanceSqToPoint(t);if(s<n){var u=new Sn;jl.closestPointToPoint(t,u),u.applyMatrix4(r);var c=i.ray.origin.distanceTo(u);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:a})}}function ql(t,e,n,r,i,o,a,s,u){In.call(this,t,e,n,r,i,o,a,s,u),this.format=void 0!==a?a:Vt,this.minFilter=void 0!==o?o:Mt,this.magFilter=void 0!==i?i:Mt,this.generateMipmaps=!1}function Wl(t,e,n,r,i,o,a,s,u,c,l,h){In.call(this,null,o,a,s,u,c,r,i,l,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Xl(t,e,n,r,i,o,a,s,u){In.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function Yl(t,e,n,r,i,o,a,s,u,c){if(c=void 0!==c?c:Yt,c!==Yt&&c!==$t)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Yt&&(n=Ot),void 0===n&&c===$t&&(n=Gt),In.call(this,null,r,i,o,a,s,c,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:bt,this.minFilter=void 0!==s?s:bt,this.flipY=!1,this.generateMipmaps=!1}function $l(t){Ei.call(this),this.type="WireframeGeometry";var e,n,r,i,o,a,s,u,c,l,h=[],f=[0,0],p={},d=["a","b","c"];if(t&&t.isGeometry){var g=t.faces;for(e=0,r=g.length;e<r;e++){var m=g[e];for(n=0;n<3;n++)s=m[d[n]],u=m[d[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]})}for(c in p)a=p[c],l=t.vertices[a.index1],h.push(l.x,l.y,l.z),l=t.vertices[a.index2],h.push(l.x,l.y,l.z)}else if(t&&t.isBufferGeometry){var v,y,_,b,x,w,E,S;if(l=new Sn,null!==t.index){for(v=t.attributes.position,y=t.index,_=t.groups,0===_.length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(b=_[i],x=b.start,w=b.count,e=x,r=x+w;e<r;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),u=y.getX(e+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),c=f[0]+","+f[1],void 0===p[c]&&(p[c]={index1:f[0],index2:f[1]});for(c in p)a=p[c],l.fromBufferAttribute(v,a.index1),h.push(l.x,l.y,l.z),l.fromBufferAttribute(v,a.index2),h.push(l.x,l.y,l.z)}else for(v=t.attributes.position,e=0,r=v.count/3;e<r;e++)for(n=0;n<3;n++)E=3*e+n,l.fromBufferAttribute(v,E),h.push(l.x,l.y,l.z),S=3*e+(n+1)%3,l.fromBufferAttribute(v,S),h.push(l.x,l.y,l.z)}this.setAttribute("position",new fi(h,3))}function Jl(t,e,n){Yi.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Zl(t,e,n)),this.mergeVertices()}function Zl(t,e,n){Ei.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,o=[],a=[],s=[],u=[],c=1e-5,l=new Sn,h=new Sn,f=new Sn,p=new Sn,d=new Sn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var g=e+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=e;i++){var v=i/e;t(v,m,h),a.push(h.x,h.y,h.z),v-c>=0?(t(v-c,m,f),p.subVectors(h,f)):(t(v+c,m,f),p.subVectors(f,h)),m-c>=0?(t(v,m-c,f),d.subVectors(h,f)):(t(v,m+c,f),d.subVectors(f,h)),l.crossVectors(p,d).normalize(),s.push(l.x,l.y,l.z),u.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var y=r*g+i,_=r*g+i+1,b=(r+1)*g+i+1,x=(r+1)*g+i;o.push(y,_,x),o.push(_,b,x)}this.setIndex(o),this.setAttribute("position",new fi(a,3)),this.setAttribute("normal",new fi(s,3)),this.setAttribute("uv",new fi(u,2))}function Kl(t,e,n,r){Yi.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Ql(t,e,n,r)),this.mergeVertices()}function Ql(t,e,n,r){Ei.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;var i=[],o=[];function a(t){for(var n=new Sn,r=new Sn,i=new Sn,o=0;o<e.length;o+=3)f(e[o+0],n),f(e[o+1],r),f(e[o+2],i),s(n,r,i,t)}function s(t,e,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var u=t.clone().lerp(n,i/a),c=e.clone().lerp(n,i/a),l=a-i;for(o=0;o<=l;o++)s[i][o]=0===o&&i===a?u:u.clone().lerp(c,o/l)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2===0?(h(s[i][f+1]),h(s[i+1][f]),h(s[i][f])):(h(s[i][f+1]),h(s[i+1][f+1]),h(s[i+1][f]))}}function u(t){for(var e=new Sn,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}function c(){for(var t=new Sn,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=g(t)/2/Math.PI+.5,r=m(t)/Math.PI+.5;o.push(n,1-r)}p(),l()}function l(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}function h(t){i.push(t.x,t.y,t.z)}function f(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function p(){for(var t=new Sn,e=new Sn,n=new Sn,r=new Sn,a=new bn,s=new bn,u=new bn,c=0,l=0;c<i.length;c+=9,l+=6){t.set(i[c+0],i[c+1],i[c+2]),e.set(i[c+3],i[c+4],i[c+5]),n.set(i[c+6],i[c+7],i[c+8]),a.set(o[l+0],o[l+1]),s.set(o[l+2],o[l+3]),u.set(o[l+4],o[l+5]),r.copy(t).add(e).add(n).divideScalar(3);var h=g(r);d(a,l+0,t,h),d(s,l+2,e,h),d(u,l+4,n,h)}}function d(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function g(t){return Math.atan2(t.z,-t.x)}function m(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}a(r),u(n),c(),this.setAttribute("position",new fi(i,3)),this.setAttribute("normal",new fi(i.slice(),3)),this.setAttribute("uv",new fi(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function th(t,e){Yi.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new eh(t,e)),this.mergeVertices()}function eh(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ql.call(this,n,r,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function nh(t,e){Yi.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new rh(t,e)),this.mergeVertices()}function rh(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ql.call(this,n,r,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ih(t,e){Yi.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new oh(t,e)),this.mergeVertices()}function oh(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ql.call(this,r,i,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ah(t,e){Yi.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new sh(t,e)),this.mergeVertices()}function sh(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ql.call(this,i,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function uh(t,e,n,r,i,o){Yi.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new ch(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function ch(t,e,n,r,i){Ei.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8,i=i||!1;var o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new Sn,c=new Sn,l=new bn,h=new Sn,f=[],p=[],d=[],g=[];function m(){for(a=0;a<e;a++)v(a);v(!1===i?e:0),_(),y()}function v(i){h=t.getPointAt(i/e,h);var a=o.normals[i],l=o.binormals[i];for(s=0;s<=r;s++){var d=s/r*Math.PI*2,g=Math.sin(d),m=-Math.cos(d);c.x=m*a.x+g*l.x,c.y=m*a.y+g*l.y,c.z=m*a.z+g*l.z,c.normalize(),p.push(c.x,c.y,c.z),u.x=h.x+n*c.x,u.y=h.y+n*c.y,u.z=h.z+n*c.z,f.push(u.x,u.y,u.z)}}function y(){for(s=1;s<=e;s++)for(a=1;a<=r;a++){var t=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;g.push(t,n,o),g.push(n,i,o)}}function _(){for(a=0;a<=e;a++)for(s=0;s<=r;s++)l.x=a/e,l.y=s/r,d.push(l.x,l.y)}m(),this.setIndex(g),this.setAttribute("position",new fi(f,3)),this.setAttribute("normal",new fi(p,3)),this.setAttribute("uv",new fi(d,2))}function lh(t,e,n,r,i,o,a){Yi.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new hh(t,e,n,r,i,o)),this.mergeVertices()}function hh(t,e,n,r,i,o){Ei.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],c=[],l=[],h=[],f=new Sn,p=new Sn,d=new Sn,g=new Sn,m=new Sn,v=new Sn,y=new Sn;for(a=0;a<=n;++a){var _=a/n*i*Math.PI*2;for(C(_,i,o,t,d),C(_+.01,i,o,t,g),v.subVectors(g,d),y.addVectors(g,d),m.crossVectors(v,y),y.crossVectors(m,v),m.normalize(),y.normalize(),s=0;s<=r;++s){var b=s/r*Math.PI*2,x=-e*Math.cos(b),w=e*Math.sin(b);f.x=d.x+(x*y.x+w*m.x),f.y=d.y+(x*y.y+w*m.y),f.z=d.z+(x*y.z+w*m.z),c.push(f.x,f.y,f.z),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*(s-1)+(a-1),S=(r+1)*s+(a-1),M=(r+1)*s+a,T=(r+1)*(s-1)+a;u.push(E,S,T),u.push(S,M,T)}function C(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.setAttribute("position",new fi(c,3)),this.setAttribute("normal",new fi(l,3)),this.setAttribute("uv",new fi(h,2))}function fh(t,e,n,r,i){Yi.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new ph(t,e,n,r,i)),this.mergeVertices()}function ph(t,e,n,r,i){Ei.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],c=[],l=[],h=new Sn,f=new Sn,p=new Sn;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var d=a/r*i,g=o/n*Math.PI*2;f.x=(t+e*Math.cos(g))*Math.cos(d),f.y=(t+e*Math.cos(g))*Math.sin(d),f.z=e*Math.sin(g),u.push(f.x,f.y,f.z),h.x=t*Math.cos(d),h.y=t*Math.sin(d),p.subVectors(f,h).normalize(),c.push(p.x,p.y,p.z),l.push(a/r),l.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var m=(r+1)*o+a-1,v=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,_=(r+1)*o+a;s.push(m,v,_),s.push(v,y,_)}this.setIndex(s),this.setAttribute("position",new fi(u,3)),this.setAttribute("normal",new fi(c,3)),this.setAttribute("uv",new fi(l,2))}Vl.prototype=Object.assign(Object.create(or.prototype),{constructor:Vl,isPoints:!0,raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Gl.copy(n.boundingSphere),Gl.applyMatrix4(r),Gl.radius+=i,!1!==t.ray.intersectsSphere(Gl)){Ul.getInverse(r),jl.copy(t.ray).applyMatrix4(Ul);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,u=n.attributes,c=u.position.array;if(null!==s)for(var l=s.array,h=0,f=l.length;h<f;h++){var p=l[h];zl.fromArray(c,3*p),Hl(zl,p,a,r,t,e,this)}else{h=0;for(var d=c.length/3;h<d;h++)zl.fromArray(c,3*h),Hl(zl,h,a,r,t,e,this)}}else{var g=n.vertices;for(h=0,d=g.length;h<d;h++)Hl(g[h],h,a,r,t,e,this)}}},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ql.prototype=Object.assign(Object.create(In.prototype),{constructor:ql,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Wl.prototype=Object.create(In.prototype),Wl.prototype.constructor=Wl,Wl.prototype.isCompressedTexture=!0,Xl.prototype=Object.create(In.prototype),Xl.prototype.constructor=Xl,Xl.prototype.isCanvasTexture=!0,Yl.prototype=Object.create(In.prototype),Yl.prototype.constructor=Yl,Yl.prototype.isDepthTexture=!0,$l.prototype=Object.create(Ei.prototype),$l.prototype.constructor=$l,Jl.prototype=Object.create(Yi.prototype),Jl.prototype.constructor=Jl,Zl.prototype=Object.create(Ei.prototype),Zl.prototype.constructor=Zl,Kl.prototype=Object.create(Yi.prototype),Kl.prototype.constructor=Kl,Ql.prototype=Object.create(Ei.prototype),Ql.prototype.constructor=Ql,th.prototype=Object.create(Yi.prototype),th.prototype.constructor=th,eh.prototype=Object.create(Ql.prototype),eh.prototype.constructor=eh,nh.prototype=Object.create(Yi.prototype),nh.prototype.constructor=nh,rh.prototype=Object.create(Ql.prototype),rh.prototype.constructor=rh,ih.prototype=Object.create(Yi.prototype),ih.prototype.constructor=ih,oh.prototype=Object.create(Ql.prototype),oh.prototype.constructor=oh,ah.prototype=Object.create(Yi.prototype),ah.prototype.constructor=ah,sh.prototype=Object.create(Ql.prototype),sh.prototype.constructor=sh,uh.prototype=Object.create(Yi.prototype),uh.prototype.constructor=uh,ch.prototype=Object.create(Ei.prototype),ch.prototype.constructor=ch,ch.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},lh.prototype=Object.create(Yi.prototype),lh.prototype.constructor=lh,hh.prototype=Object.create(Ei.prototype),hh.prototype.constructor=hh,fh.prototype=Object.create(Yi.prototype),fh.prototype.constructor=fh,ph.prototype=Object.create(Ei.prototype),ph.prototype.constructor=ph;var dh={triangulate:function(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,h=l?e[0]*n:t.length,f=gh(t,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(l&&(f=wh(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)s=t[d],u=t[d+1],s<r&&(r=s),u<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=Math.max(o-r,a-i),c=0!==c?1/c:0}return vh(f,p,n,r,i,c),p}};function gh(t,e,n,r,i){var o,a;if(i===zh(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Uh(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Uh(o,t[o],t[o+1],a);return a&&Oh(a,a.next)&&(jh(a),a=a.next),a}function mh(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Oh(r,r.next)&&0!==Rh(r.prev,r,r.next))r=r.next;else{if(jh(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function vh(t,e,n,r,i,o,a){if(t){!a&&o&&Th(t,r,i,o);var s,u,c=t;while(t.prev!==t.next)if(s=t.prev,u=t.next,o?_h(t,r,i,o):yh(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),jh(t),t=u.next,c=u.next;else if(t=u,t===c){a?1===a?(t=bh(t,e,n),vh(t,e,n,r,i,o,2)):2===a&&xh(t,e,n,r,i,o):vh(mh(t),e,n,r,i,o,1);break}}}function yh(t){var e=t.prev,n=t,r=t.next;if(Rh(e,n,r)>=0)return!1;var i=t.next.next;while(i!==t.prev){if(Ih(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Rh(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function _h(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Rh(i,o,a)>=0)return!1;var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Lh(s,u,e,n,r),f=Lh(c,l,e,n,r),p=t.prevZ,d=t.nextZ;while(p&&p.z>=h&&d&&d.z<=f){if(p!==t.prev&&p!==t.next&&Ih(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Rh(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Ih(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Rh(d.prev,d,d.next)>=0)return!1;d=d.nextZ}while(p&&p.z>=h){if(p!==t.prev&&p!==t.next&&Ih(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Rh(p.prev,p,p.next)>=0)return!1;p=p.prevZ}while(d&&d.z<=f){if(d!==t.prev&&d!==t.next&&Ih(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Rh(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function bh(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Oh(i,o)&&Nh(i,r,r.next,o)&&Fh(i,o)&&Fh(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),jh(r),jh(r.next),r=t=o),r=r.next}while(r!==t);return r}function xh(t,e,n,r,i,o){var a=t;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&Ph(a,s)){var u=kh(a,s);return a=mh(a,a.next),u=mh(u,u.next),vh(a,e,n,r,i,o),void vh(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function wh(t,e,n,r){var i,o,a,s,u,c=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,u=gh(t,a,s,r,!1),u===u.next&&(u.steiner=!0),c.push(Ah(u));for(c.sort(Eh),i=0;i<c.length;i++)Sh(c[i],n),n=mh(n,n.next);return n}function Eh(t,e){return t.x-e.x}function Sh(t,e){if(e=Mh(t,e),e){var n=kh(e,t);mh(n,n.next)}}function Mh(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;r=n.next;while(r!==c)i>=r.x&&r.x>=l&&i!==r.x&&Ih(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(u<f||u===f&&r.x>n.x)&&Fh(r,t)&&(n=r,f=u)),r=r.next;return n}function Th(t,e,n,r){var i=t;do{null===i.z&&(i.z=Lh(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Ch(i)}function Ch(t){var e,n,r,i,o,a,s,u,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,r=n,s=0,e=0;e<c;e++)if(s++,r=r.nextZ,!r)break;u=c;while(s>0||u>0&&r)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function Lh(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Ah(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ih(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Ph(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Dh(t,e)&&Fh(t,e)&&Fh(e,t)&&Bh(t,e)}function Rh(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Oh(t,e){return t.x===e.x&&t.y===e.y}function Nh(t,e,n,r){return!!(Oh(t,n)&&Oh(e,r)||Oh(t,r)&&Oh(n,e))||Rh(t,e,n)>0!==Rh(t,e,r)>0&&Rh(n,r,t)>0!==Rh(n,r,e)>0}function Dh(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Nh(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Fh(t,e){return Rh(t.prev,t,t.next)<0?Rh(t,e,t.next)>=0&&Rh(t,t.prev,e)>=0:Rh(t,e,t.prev)<0||Rh(t,t.next,e)<0}function Bh(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function kh(t,e){var n=new Gh(t.i,t.x,t.y),r=new Gh(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Uh(t,e,n,r){var i=new Gh(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function jh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Gh(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zh(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}var Vh={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Vh.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];Hh(t),qh(n,t);var o=t.length;e.forEach(Hh);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,qh(n,e[a]);var s=dh.triangulate(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Hh(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function qh(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Wh(t,e){Yi.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Xh(t,e)),this.mergeVertices()}function Xh(t,e){Ei.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,r=[],i=[],o=0,a=t.length;o<a;o++){var s=t[o];u(s)}function u(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:l-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3,d=e.extrudePath,g=void 0!==e.UVGenerator?e.UVGenerator:Yh;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);var m,v,y,_,b,x,w,E,S=!1;d&&(m=d.getSpacedPoints(s),S=!0,c=!1,v=d.computeFrenetFrames(s,!1),y=new Sn,_=new Sn,b=new Sn),c||(p=0,l=0,h=0,f=0);var M=t.extractPoints(a),T=M.shape,C=M.holes,L=!Vh.isClockWise(T);if(L)for(T=T.reverse(),w=0,E=C.length;w<E;w++)x=C[w],Vh.isClockWise(x)&&(C[w]=x.reverse());var A=Vh.triangulateShape(T,C),I=T;for(w=0,E=C.length;w<E;w++)x=C[w],T=T.concat(x);function P(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var R,O,N,D,F,B,k=T.length,U=A.length;function j(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,c=n.y-t.y,l=a*a+s*s,h=a*c-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(l),p=Math.sqrt(u*u+c*c),d=e.x-s/f,g=e.y+a/f,m=n.x-c/p,v=n.y+u/p,y=((m-d)*c-(v-g)*u)/(a*c-s*u);r=d+a*y-t.x,i=g+s*y-t.y;var _=r*r+i*i;if(_<=2)return new bn(r,i);o=Math.sqrt(_/2)}else{var b=!1;a>Number.EPSILON?u>Number.EPSILON&&(b=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(b=!0):Math.sign(s)===Math.sign(c)&&(b=!0),b?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new bn(r/o,i/o)}for(var G=[],z=0,V=I.length,H=V-1,q=z+1;z<V;z++,H++,q++)H===V&&(H=0),q===V&&(q=0),G[z]=j(I[z],I[H],I[q]);var W,X,Y=[],$=G.concat();for(w=0,E=C.length;w<E;w++){for(x=C[w],W=[],z=0,V=x.length,H=V-1,q=z+1;z<V;z++,H++,q++)H===V&&(H=0),q===V&&(q=0),W[z]=j(x[z],x[H],x[q]);Y.push(W),$=$.concat(W)}for(R=0;R<p;R++){for(N=R/p,D=l*Math.cos(N*Math.PI/2),O=h*Math.sin(N*Math.PI/2)+f,z=0,V=I.length;z<V;z++)F=P(I[z],G[z],O),Q(F.x,F.y,-D);for(w=0,E=C.length;w<E;w++)for(x=C[w],W=Y[w],z=0,V=x.length;z<V;z++)F=P(x[z],W[z],O),Q(F.x,F.y,-D)}for(O=h+f,z=0;z<k;z++)F=c?P(T[z],$[z],O):T[z],S?(_.copy(v.normals[0]).multiplyScalar(F.x),y.copy(v.binormals[0]).multiplyScalar(F.y),b.copy(m[0]).add(_).add(y),Q(b.x,b.y,b.z)):Q(F.x,F.y,0);for(X=1;X<=s;X++)for(z=0;z<k;z++)F=c?P(T[z],$[z],O):T[z],S?(_.copy(v.normals[X]).multiplyScalar(F.x),y.copy(v.binormals[X]).multiplyScalar(F.y),b.copy(m[X]).add(_).add(y),Q(b.x,b.y,b.z)):Q(F.x,F.y,u/s*X);for(R=p-1;R>=0;R--){for(N=R/p,D=l*Math.cos(N*Math.PI/2),O=h*Math.sin(N*Math.PI/2)+f,z=0,V=I.length;z<V;z++)F=P(I[z],G[z],O),Q(F.x,F.y,u+D);for(w=0,E=C.length;w<E;w++)for(x=C[w],W=Y[w],z=0,V=x.length;z<V;z++)F=P(x[z],W[z],O),S?Q(F.x,F.y+m[s-1].y,m[s-1].x+D):Q(F.x,F.y,u+D)}function J(){var t=r.length/3;if(c){var e=0,i=k*e;for(z=0;z<U;z++)B=A[z],tt(B[2]+i,B[1]+i,B[0]+i);for(e=s+2*p,i=k*e,z=0;z<U;z++)B=A[z],tt(B[0]+i,B[1]+i,B[2]+i)}else{for(z=0;z<U;z++)B=A[z],tt(B[2],B[1],B[0]);for(z=0;z<U;z++)B=A[z],tt(B[0]+k*s,B[1]+k*s,B[2]+k*s)}n.addGroup(t,r.length/3-t,0)}function Z(){var t=r.length/3,e=0;for(K(I,e),e+=I.length,w=0,E=C.length;w<E;w++)x=C[w],K(x,e),e+=x.length;n.addGroup(t,r.length/3-t,1)}function K(t,e){var n,r;z=t.length;while(--z>=0){n=z,r=z-1,r<0&&(r=t.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=k*i,u=k*(i+1),c=e+n+a,l=e+r+a,h=e+r+u,f=e+n+u;et(c,l,h,f)}}}function Q(t,e,n){o.push(t),o.push(e),o.push(n)}function tt(t,e,i){nt(t),nt(e),nt(i);var o=r.length/3,a=g.generateTopUV(n,r,o-3,o-2,o-1);rt(a[0]),rt(a[1]),rt(a[2])}function et(t,e,i,o){nt(t),nt(e),nt(o),nt(e),nt(i),nt(o);var a=r.length/3,s=g.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);rt(s[0]),rt(s[1]),rt(s[3]),rt(s[1]),rt(s[2]),rt(s[3])}function nt(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function rt(t){i.push(t.x),i.push(t.y)}J(),Z()}this.setAttribute("position",new fi(r,3)),this.setAttribute("uv",new fi(i,2)),this.computeVertexNormals()}Wh.prototype=Object.create(Yi.prototype),Wh.prototype.constructor=Wh,Wh.prototype.toJSON=function(){var t=Yi.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return $h(e,n,t)},Xh.prototype=Object.create(Ei.prototype),Xh.prototype.constructor=Xh,Xh.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return $h(e,n,t)};var Yh={generateTopUV:function(t,e,n,r,i){var o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],c=e[3*i],l=e[3*i+1];return[new bn(o,a),new bn(s,u),new bn(c,l)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],c=e[3*r],l=e[3*r+1],h=e[3*r+2],f=e[3*i],p=e[3*i+1],d=e[3*i+2],g=e[3*o],m=e[3*o+1],v=e[3*o+2];return Math.abs(s-l)<.01?[new bn(a,1-u),new bn(c,1-h),new bn(f,1-d),new bn(g,1-v)]:[new bn(s,1-u),new bn(l,1-h),new bn(p,1-d),new bn(m,1-v)]}};function $h(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Jh(t,e){Yi.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Zh(t,e)),this.mergeVertices()}function Zh(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Yi;var r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Xh.call(this,r,e),this.type="TextBufferGeometry"}function Kh(t,e,n,r,i,o,a){Yi.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Qh(t,e,n,r,i,o,a)),this.mergeVertices()}function Qh(t,e,n,r,i,o,a){Ei.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,c=Math.min(o+a,Math.PI),l=0,h=[],f=new Sn,p=new Sn,d=[],g=[],m=[],v=[];for(u=0;u<=n;u++){var y=[],_=u/n,b=0;for(0==u&&0==o?b=.5/e:u==n&&c==Math.PI&&(b=-.5/e),s=0;s<=e;s++){var x=s/e;f.x=-t*Math.cos(r+x*i)*Math.sin(o+_*a),f.y=t*Math.cos(o+_*a),f.z=t*Math.sin(r+x*i)*Math.sin(o+_*a),g.push(f.x,f.y,f.z),p.copy(f).normalize(),m.push(p.x,p.y,p.z),v.push(x+b,1-_),y.push(l++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++){var w=h[u][s+1],E=h[u][s],S=h[u+1][s],M=h[u+1][s+1];(0!==u||o>0)&&d.push(w,E,M),(u!==n-1||c<Math.PI)&&d.push(E,S,M)}this.setIndex(d),this.setAttribute("position",new fi(g,3)),this.setAttribute("normal",new fi(m,3)),this.setAttribute("uv",new fi(v,2))}function tf(t,e,n,r,i,o){Yi.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new ef(t,e,n,r,i,o)),this.mergeVertices()}function ef(t,e,n,r,i,o){Ei.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},t=t||.5,e=e||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var a,s,u,c=[],l=[],h=[],f=[],p=t,d=(e-t)/r,g=new Sn,m=new bn;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,g.x=p*Math.cos(a),g.y=p*Math.sin(a),l.push(g.x,g.y,g.z),h.push(0,0,1),m.x=(g.x/e+1)/2,m.y=(g.y/e+1)/2,f.push(m.x,m.y);p+=d}for(s=0;s<r;s++){var v=s*(n+1);for(u=0;u<n;u++){a=u+v;var y=a,_=a+n+1,b=a+n+2,x=a+1;c.push(y,_,x),c.push(_,b,x)}}this.setIndex(c),this.setAttribute("position",new fi(l,3)),this.setAttribute("normal",new fi(h,3)),this.setAttribute("uv",new fi(f,2))}function nf(t,e,n,r){Yi.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new rf(t,e,n,r)),this.mergeVertices()}function rf(t,e,n,r){Ei.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=_n.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],c=[],l=1/e,h=new Sn,f=new bn;for(o=0;o<=e;o++){var p=n+o*l*r,d=Math.sin(p),g=Math.cos(p);for(a=0;a<=t.length-1;a++)h.x=t[a].x*d,h.y=t[a].y,h.z=t[a].x*g,u.push(h.x,h.y,h.z),f.x=o/e,f.y=a/(t.length-1),c.push(f.x,f.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){i=a+o*t.length;var m=i,v=i+t.length,y=i+t.length+1,_=i+1;s.push(m,v,_),s.push(v,y,_)}if(this.setIndex(s),this.setAttribute("position",new fi(u,3)),this.setAttribute("uv",new fi(c,2)),this.computeVertexNormals(),r===2*Math.PI){var b=this.attributes.normal.array,x=new Sn,w=new Sn,E=new Sn;for(i=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)x.x=b[a+0],x.y=b[a+1],x.z=b[a+2],w.x=b[i+a+0],w.y=b[i+a+1],w.z=b[i+a+2],E.addVectors(x,w).normalize(),b[a+0]=b[i+a+0]=E.x,b[a+1]=b[i+a+1]=E.y,b[a+2]=b[i+a+2]=E.z}}function of(t,e){Yi.call(this),this.type="ShapeGeometry","object"===typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new af(t,e)),this.mergeVertices()}function af(t,e){Ei.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(t))c(t);else for(var u=0;u<t.length;u++)c(t[u]),this.addGroup(a,s,u),a+=s,s=0;function c(t){var a,u,c,l=r.length/3,h=t.extractPoints(e),f=h.shape,p=h.holes;for(!1===Vh.isClockWise(f)&&(f=f.reverse()),a=0,u=p.length;a<u;a++)c=p[a],!0===Vh.isClockWise(c)&&(p[a]=c.reverse());var d=Vh.triangulateShape(f,p);for(a=0,u=p.length;a<u;a++)c=p[a],f=f.concat(c);for(a=0,u=f.length;a<u;a++){var g=f[a];r.push(g.x,g.y,0),i.push(0,0,1),o.push(g.x,g.y)}for(a=0,u=d.length;a<u;a++){var m=d[a],v=m[0]+l,y=m[1]+l,_=m[2]+l;n.push(v,y,_),s+=3}}this.setIndex(n),this.setAttribute("position",new fi(r,3)),this.setAttribute("normal",new fi(i,3)),this.setAttribute("uv",new fi(o,2))}function sf(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function uf(t,e){Ei.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(_n.DEG2RAD*e),u=[0,0],c={},l=["a","b","c"];t.isBufferGeometry?(o=new Yi,o.fromBufferGeometry(t)):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,p=0,d=f.length;p<d;p++)for(var g=f[p],m=0;m<3;m++)n=g[l[m]],r=g[l[(m+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),i=u[0]+","+u[1],void 0===c[i]?c[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:c[i].face2=p;for(i in c){var v=c[i];if(void 0===v.face2||f[v.face1].normal.dot(f[v.face2].normal)<=s){var y=h[v.index1];a.push(y.x,y.y,y.z),y=h[v.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new fi(a,3))}function cf(t,e,n,r,i,o,a,s){Yi.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new lf(t,e,n,r,i,o,a,s)),this.mergeVertices()}function lf(t,e,n,r,i,o,a,s){Ei.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],l=[],h=[],f=[],p=0,d=[],g=n/2,m=0;function v(){var o,v,y=new Sn,_=new Sn,b=0,x=(e-t)/n;for(v=0;v<=i;v++){var w=[],E=v/i,S=E*(e-t)+t;for(o=0;o<=r;o++){var M=o/r,T=M*s+a,C=Math.sin(T),L=Math.cos(T);_.x=S*C,_.y=-E*n+g,_.z=S*L,l.push(_.x,_.y,_.z),y.set(C,x,L).normalize(),h.push(y.x,y.y,y.z),f.push(M,1-E),w.push(p++)}d.push(w)}for(o=0;o<r;o++)for(v=0;v<i;v++){var A=d[v][o],I=d[v+1][o],P=d[v+1][o+1],R=d[v][o+1];c.push(A,I,R),c.push(I,P,R),b+=6}u.addGroup(m,b,0),m+=b}function y(n){var i,o,d,v=new bn,y=new Sn,_=0,b=!0===n?t:e,x=!0===n?1:-1;for(o=p,i=1;i<=r;i++)l.push(0,g*x,0),h.push(0,x,0),f.push(.5,.5),p++;for(d=p,i=0;i<=r;i++){var w=i/r,E=w*s+a,S=Math.cos(E),M=Math.sin(E);y.x=b*M,y.y=g*x,y.z=b*S,l.push(y.x,y.y,y.z),h.push(0,x,0),v.x=.5*S+.5,v.y=.5*M*x+.5,f.push(v.x,v.y),p++}for(i=0;i<r;i++){var T=o+i,C=d+i;!0===n?c.push(C,C+1,T):c.push(C+1,C,T),_+=3}u.addGroup(m,_,!0===n?1:2),m+=_}v(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new fi(l,3)),this.setAttribute("normal",new fi(h,3)),this.setAttribute("uv",new fi(f,2))}function hf(t,e,n,r,i,o,a){cf.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ff(t,e,n,r,i,o,a){lf.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function pf(t,e,n,r){Yi.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new df(t,e,n,r)),this.mergeVertices()}function df(t,e,n,r){Ei.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],c=[],l=new Sn,h=new bn;for(s.push(0,0,0),u.push(0,0,1),c.push(.5,.5),o=0,i=3;o<=e;o++,i+=3){var f=n+o/e*r;l.x=t*Math.cos(f),l.y=t*Math.sin(f),s.push(l.x,l.y,l.z),u.push(0,0,1),h.x=(s[i]/t+1)/2,h.y=(s[i+1]/t+1)/2,c.push(h.x,h.y)}for(i=1;i<=e;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new fi(s,3)),this.setAttribute("normal",new fi(u,3)),this.setAttribute("uv",new fi(c,2))}Jh.prototype=Object.create(Yi.prototype),Jh.prototype.constructor=Jh,Zh.prototype=Object.create(Xh.prototype),Zh.prototype.constructor=Zh,Kh.prototype=Object.create(Yi.prototype),Kh.prototype.constructor=Kh,Qh.prototype=Object.create(Ei.prototype),Qh.prototype.constructor=Qh,tf.prototype=Object.create(Yi.prototype),tf.prototype.constructor=tf,ef.prototype=Object.create(Ei.prototype),ef.prototype.constructor=ef,nf.prototype=Object.create(Yi.prototype),nf.prototype.constructor=nf,rf.prototype=Object.create(Ei.prototype),rf.prototype.constructor=rf,of.prototype=Object.create(Yi.prototype),of.prototype.constructor=of,of.prototype.toJSON=function(){var t=Yi.prototype.toJSON.call(this),e=this.parameters.shapes;return sf(e,t)},af.prototype=Object.create(Ei.prototype),af.prototype.constructor=af,af.prototype.toJSON=function(){var t=Ei.prototype.toJSON.call(this),e=this.parameters.shapes;return sf(e,t)},uf.prototype=Object.create(Ei.prototype),uf.prototype.constructor=uf,cf.prototype=Object.create(Yi.prototype),cf.prototype.constructor=cf,lf.prototype=Object.create(Ei.prototype),lf.prototype.constructor=lf,hf.prototype=Object.create(cf.prototype),hf.prototype.constructor=hf,ff.prototype=Object.create(lf.prototype),ff.prototype.constructor=ff,pf.prototype=Object.create(Yi.prototype),pf.prototype.constructor=pf,df.prototype=Object.create(Ei.prototype),df.prototype.constructor=df;var gf=Object.freeze({__proto__:null,WireframeGeometry:$l,ParametricGeometry:Jl,ParametricBufferGeometry:Zl,TetrahedronGeometry:th,TetrahedronBufferGeometry:eh,OctahedronGeometry:nh,OctahedronBufferGeometry:rh,IcosahedronGeometry:ih,IcosahedronBufferGeometry:oh,DodecahedronGeometry:ah,DodecahedronBufferGeometry:sh,PolyhedronGeometry:Kl,PolyhedronBufferGeometry:Ql,TubeGeometry:uh,TubeBufferGeometry:ch,TorusKnotGeometry:lh,TorusKnotBufferGeometry:hh,TorusGeometry:fh,TorusBufferGeometry:ph,TextGeometry:Jh,TextBufferGeometry:Zh,SphereGeometry:Kh,SphereBufferGeometry:Qh,RingGeometry:tf,RingBufferGeometry:ef,PlaneGeometry:Ns,PlaneBufferGeometry:Ds,LatheGeometry:nf,LatheBufferGeometry:rf,ShapeGeometry:of,ShapeBufferGeometry:af,ExtrudeGeometry:Wh,ExtrudeBufferGeometry:Xh,EdgesGeometry:uf,ConeGeometry:hf,ConeBufferGeometry:ff,CylinderGeometry:cf,CylinderBufferGeometry:lf,CircleGeometry:pf,CircleBufferGeometry:df,BoxGeometry:$i,BoxBufferGeometry:Ji});function mf(t){ni.call(this),this.type="ShadowMaterial",this.color=new Jr(0),this.transparent=!0,this.setValues(t)}function vf(t){no.call(this,t),this.type="RawShaderMaterial"}function yf(t){ni.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Jr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ze,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _f(t){yf.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new bn(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function bf(t){ni.call(this),this.type="MeshPhongMaterial",this.color=new Jr(16777215),this.specular=new Jr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ze,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function xf(t){bf.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function wf(t){ni.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ze,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ef(t){ni.call(this),this.type="MeshLambertMaterial",this.color=new Jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=tt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Sf(t){ni.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Jr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ze,this.normalScale=new bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Mf(t){Cl.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}mf.prototype=Object.create(ni.prototype),mf.prototype.constructor=mf,mf.prototype.isShadowMaterial=!0,mf.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this},vf.prototype=Object.create(no.prototype),vf.prototype.constructor=vf,vf.prototype.isRawShaderMaterial=!0,yf.prototype=Object.create(ni.prototype),yf.prototype.constructor=yf,yf.prototype.isMeshStandardMaterial=!0,yf.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_f.prototype=Object.create(yf.prototype),_f.prototype.constructor=_f,_f.prototype.isMeshPhysicalMaterial=!0,_f.prototype.copy=function(t){return yf.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new Jr).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},bf.prototype=Object.create(ni.prototype),bf.prototype.constructor=bf,bf.prototype.isMeshPhongMaterial=!0,bf.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},xf.prototype=Object.create(bf.prototype),xf.prototype.constructor=xf,xf.prototype.isMeshToonMaterial=!0,xf.prototype.copy=function(t){return bf.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},wf.prototype=Object.create(ni.prototype),wf.prototype.constructor=wf,wf.prototype.isMeshNormalMaterial=!0,wf.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ef.prototype=Object.create(ni.prototype),Ef.prototype.constructor=Ef,Ef.prototype.isMeshLambertMaterial=!0,Ef.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Sf.prototype=Object.create(ni.prototype),Sf.prototype.constructor=Sf,Sf.prototype.isMeshMatcapMaterial=!0,Sf.prototype.copy=function(t){return ni.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Mf.prototype=Object.create(Cl.prototype),Mf.prototype.constructor=Mf,Mf.prototype.isLineDashedMaterial=!0,Mf.prototype.copy=function(t){return Cl.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Tf=Object.freeze({__proto__:null,ShadowMaterial:mf,SpriteMaterial:Qc,RawShaderMaterial:vf,ShaderMaterial:no,PointsMaterial:kl,MeshPhysicalMaterial:_f,MeshStandardMaterial:yf,MeshPhongMaterial:bf,MeshToonMaterial:xf,MeshNormalMaterial:wf,MeshLambertMaterial:Ef,MeshDepthMaterial:Ic,MeshDistanceMaterial:Pc,MeshBasicMaterial:ri,MeshMatcapMaterial:Sf,LineDashedMaterial:Mf,LineBasicMaterial:Cl,Material:ni}),Cf={arraySlice:function(t,e,n){return Cf.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){var i=1,o=t[0];while(void 0!==o&&void 0===o[r])o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}},subclip:function(t,e,n,r,i){i=i||30;var o=t.clone();o.name=e;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],c=u.getValueSize(),l=[],h=[],f=0;f<u.times.length;++f){var p=u.times[f]*i;if(!(p<n||p>=r)){l.push(u.times[f]);for(var d=0;d<c;++d)h.push(u.values[f*c+d])}}0!==l.length&&(u.times=Cf.convertArray(l,u.times.constructor),u.values=Cf.convertArray(h,u.values.constructor),a.push(u))}o.tracks=a;var g=1/0;for(s=0;s<o.tracks.length;++s)g>o.tracks[s].times[0]&&(g=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*g);return o.resetDuration(),o}};function Lf(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Af(t,e,n,r){Lf.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function If(t,e,n,r){Lf.call(this,t,e,n,r)}function Pf(t,e,n,r){Lf.call(this,t,e,n,r)}function Rf(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Cf.convertArray(e,this.TimeBufferType),this.values=Cf.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Of(t,e,n){Rf.call(this,t,e,n)}function Nf(t,e,n,r){Rf.call(this,t,e,n,r)}function Df(t,e,n,r){Rf.call(this,t,e,n,r)}function Ff(t,e,n,r){Lf.call(this,t,e,n,r)}function Bf(t,e,n,r){Rf.call(this,t,e,n,r)}function kf(t,e,n,r){Rf.call(this,t,e,n,r)}function Uf(t,e,n,r){Rf.call(this,t,e,n,r)}function jf(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=_n.generateUUID(),this.duration<0&&this.resetDuration()}function Gf(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Df;case"vector":case"vector2":case"vector3":case"vector4":return Uf;case"color":return Nf;case"quaternion":return Bf;case"bool":case"boolean":return Of;case"string":return kf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function zf(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=Gf(t.type);if(void 0===t.times){var n=[],r=[];Cf.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Lf.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}while(n<o){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Lf.prototype,{beforeStart_:Lf.prototype.copySampleValue_,afterEnd_:Lf.prototype.copySampleValue_}),Af.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Af,DefaultSettings_:{endingStart:Te,endingEnd:Te},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ce:i=t,a=2*e-n;break;case Le:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ce:o=t,s=2*n-e;break;case Le:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(r-e),d=p*p,g=d*p,m=-h*g+2*h*d-h*p,v=(1+h)*g+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*g+(1.5+f)*d+.5*p,_=f*g-f*d,b=0;b!==a;++b)i[b]=m*o[c+b]+v*o[u+b]+y*o[s+b]+_*o[l+b];return i}}),If.prototype=Object.assign(Object.create(Lf.prototype),{constructor:If,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),l=1-c,h=0;h!==a;++h)i[h]=o[u+h]*l+o[s+h]*c;return i}}),Pf.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Pf,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Rf,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Cf.convertArray(t.times,Array),values:Cf.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(Rf.prototype,{constructor:Rf,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Se,InterpolantFactoryMethodDiscrete:function(t){return new Pf(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new If(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Af(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Ee:e=this.InterpolantFactoryMethodDiscrete;break;case Se:e=this.InterpolantFactoryMethodLinear;break;case Me:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ee;case this.InterpolantFactoryMethodLinear:return Se;case this.InterpolantFactoryMethodSmooth:return Me}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){var n=this.times,r=n.length,i=0,o=r-1;while(i!==r&&n[i]<t)++i;while(-1!==o&&n[o]>e)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);var a=this.getValueSize();this.times=Cf.arraySlice(n,i,o),this.values=Cf.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&Cf.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=this.getInterpolation()===Me,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a],c=t[a+1];if(u!==c&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,h=l-n,f=l+n,p=0;p!==n;++p){var d=e[l+p];if(d!==e[h+p]||d!==e[f+p]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];var g=a*n,m=i*n;for(p=0;p!==n;++p)e[m+p]=e[g+p]}++i}}if(o>0){t[i]=t[o];for(g=o*n,m=i*n,p=0;p!==n;++p)e[m+p]=e[g+p];++i}return i!==t.length&&(this.times=Cf.arraySlice(t,0,i),this.values=Cf.arraySlice(e,0,i*n)),this},clone:function(){var t=Cf.arraySlice(this.times,0),e=Cf.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}),Of.prototype=Object.assign(Object.create(Rf.prototype),{constructor:Of,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nf.prototype=Object.assign(Object.create(Rf.prototype),{constructor:Nf,ValueTypeName:"color"}),Df.prototype=Object.assign(Object.create(Rf.prototype),{constructor:Df,ValueTypeName:"number"}),Ff.prototype=Object.assign(Object.create(Lf.prototype),{constructor:Ff,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=(n-e)/(r-e),c=s+a;s!==c;s+=4)xn.slerpFlat(i,0,o,s-a,o,s,u);return i}}),Bf.prototype=Object.assign(Object.create(Rf.prototype),{constructor:Bf,ValueTypeName:"quaternion",DefaultInterpolation:Se,InterpolantFactoryMethodLinear:function(t){return new Ff(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),kf.prototype=Object.assign(Object.create(Rf.prototype),{constructor:kf,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ee,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Uf.prototype=Object.assign(Object.create(Rf.prototype),{constructor:Uf,ValueTypeName:"vector"}),Object.assign(jf,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(zf(n[i]).scale(r));return new jf(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},i=0,o=n.length;i!==o;++i)e.push(Rf.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=Cf.getKeyframeOrder(s);s=Cf.sortedArray(s,1,c),u=Cf.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Df(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new jf(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(s)}}var h=[];for(var c in r)h.push(jf.CreateFromMorphTargetSequence(c,r[c],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];Cf.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)l[c[h].morphTargets[f]]=-1;for(var p in l){var d=[],g=[];for(f=0;f!==c[h].morphTargets.length;++f){var m=c[h];d.push(m.time),g.push(m.morphTarget===p?1:0)}r.push(new Df(".morphTargetInfluence["+p+"]",d,g))}o=l.length*(a||1)}else{var v=".bones["+e[u].name+"]";n(Uf,v+".position",c,"pos",r),n(Bf,v+".quaternion",c,"rot",r),n(Uf,v+".scale",c,"scl",r)}}if(0===r.length)return null;var y=new jf(i,o,r);return y}}),Object.assign(jf.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new jf(this.name,this.duration,t)}});var Vf={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Hf(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var r=u[e],i=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}}var qf=new Hf;function Wf(t){this.manager=void 0!==t?t:qf,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Wf.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}});var Xf={};function Yf(t){Wf.call(this,t)}function $f(t){Wf.call(this,t)}function Jf(t){Wf.call(this,t)}function Zf(t){Wf.call(this,t)}function Kf(t){Wf.call(this,t)}function Qf(t){Wf.call(this,t)}function tp(t){Wf.call(this,t)}function ep(){this.type="Curve",this.arcLengthDivisions=200}function np(t,e,n,r,i,o,a,s){ep.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function rp(t,e,n,r,i,o){np.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function ip(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(r-e)/(a+s)+(r-n)/s;u*=a,c*=a,i(e,n,u,c)},calc:function(i){var o=i*i,a=o*i;return t+e*i+n*o+r*a}}}Yf.prototype=Object.assign(Object.create(Wf.prototype),{constructor:Yf,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Vf.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0===Xf[t]){var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var u=s[1],c=!!s[2],l=s[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var p=new Uint8Array(l.length),d=0;d<l.length;d++)p[d]=l.charCodeAt(d);h="blob"===f?new Blob([p.buffer],{type:u}):p.buffer;break;case"document":var g=new DOMParser;h=g.parseFromString(l,u);break;case"json":h=JSON.parse(l);break;default:h=l;break}setTimeout((function(){e&&e(h),i.manager.itemEnd(t)}),0)}catch(y){setTimeout((function(){r&&r(y),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Xf[t]=[],Xf[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",(function(e){var n=this.response,r=Xf[t];if(delete Xf[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Vf.add(t,n);for(var o=0,a=r.length;o<a;o++){var s=r[o];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++){s=r[o];s.onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),m.addEventListener("progress",(function(e){for(var n=Xf[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}}),!1),m.addEventListener("error",(function(e){var n=Xf[t];delete Xf[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),m.addEventListener("abort",(function(e){var n=Xf[t];delete Xf[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(t),m}Xf[t].push({onLoad:e,onProgress:n,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),$f.prototype=Object.assign(Object.create(Wf.prototype),{constructor:$f,load:function(t,e,n,r){var i=this,o=new Yf(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=jf.parse(t[n]);e.push(r)}return e}}),Jf.prototype=Object.assign(Object.create(Wf.prototype),{constructor:Jf,load:function(t,e,n,r){var i=this,o=[],a=new Wl;a.image=o;var s=new Yf(this.manager);function u(u){s.load(t[u],(function(t){var n=i.parse(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=Mt),a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,l=0,h=t.length;l<h;++l)u(l);else s.load(t,(function(t){var n=i.parse(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Mt),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a}}),Zf.prototype=Object.assign(Object.create(Wf.prototype),{constructor:Zf,load:function(t,e,n,r){var i=this,o=new co,a=new Yf(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,(function(t){var n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:yt,o.wrapT=void 0!==n.wrapT?n.wrapT:yt,o.magFilter=void 0!==n.magFilter?n.magFilter:Mt,o.minFilter=void 0!==n.minFilter?n.minFilter:Mt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Lt),1===n.mipmapCount&&(o.minFilter=Mt),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}),Kf.prototype=Object.assign(Object.create(Wf.prototype),{constructor:Kf,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Vf.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Vf.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}),Qf.prototype=Object.assign(Object.create(Wf.prototype),{constructor:Qf,load:function(t,e,n,r){var i=new Xs,o=new Kf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,a++,6===a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i}}),tp.prototype=Object.assign(Object.create(Wf.prototype),{constructor:tp,load:function(t,e,n,r){var i=new In,o=new Kf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?Vt:Ht,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(ep.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];var a,s=0,u=o-1;while(s<=u)if(i=Math.floor(s+(u-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n)return i/(o-1);var c=r[i],l=r[i+1],h=l-c,f=(n-c)/h,p=(i+f)/(o-1);return p},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,r,i,o=new Sn,a=[],s=[],u=[],c=new Sn,l=new Gn;for(n=0;n<=t;n++)r=n/t,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new Sn,u[0]=new Sn;var h=Number.MAX_VALUE,f=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(f<=h&&(h=f,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),d<=h&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),u[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),i=Math.acos(_n.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(c,i))),u[n].crossVectors(a[n],s[n]);if(!0===e)for(i=Math.acos(_n.clamp(s[0].dot(s[t]),-1,1)),i/=t,a[0].dot(c.crossVectors(s[0],s[t]))>0&&(i=-i),n=1;n<=t;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),u[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),np.prototype=Object.create(ep.prototype),np.prototype.constructor=np,np.prototype.isEllipseCurve=!0,np.prototype.getPoint=function(t,e){var n=e||new bn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*c-f*l+this.aX,u=h*l+f*c+this.aY}return n.set(s,u)},np.prototype.copy=function(t){return ep.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},np.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},np.prototype.fromJSON=function(t){return ep.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},rp.prototype=Object.create(np.prototype),rp.prototype.constructor=rp,rp.prototype.isArcCurve=!0;var op=new Sn,ap=new ip,sp=new ip,up=new ip;function cp(t,e,n,r){ep.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function lp(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t,u=t*s;return(2*n-2*r+o+a)*u+(-3*n+3*r-2*o-a)*s+o*t+n}function hp(t,e){var n=1-t;return n*n*e}function fp(t,e){return 2*(1-t)*t*e}function pp(t,e){return t*t*e}function dp(t,e,n,r){return hp(t,e)+fp(t,n)+pp(t,r)}function gp(t,e){var n=1-t;return n*n*n*e}function mp(t,e){var n=1-t;return 3*n*n*t*e}function vp(t,e){return 3*(1-t)*t*t*e}function yp(t,e){return t*t*t*e}function _p(t,e,n,r,i){return gp(t,e)+mp(t,n)+vp(t,r)+yp(t,i)}function bp(t,e,n,r){ep.call(this),this.type="CubicBezierCurve",this.v0=t||new bn,this.v1=e||new bn,this.v2=n||new bn,this.v3=r||new bn}function xp(t,e,n,r){ep.call(this),this.type="CubicBezierCurve3",this.v0=t||new Sn,this.v1=e||new Sn,this.v2=n||new Sn,this.v3=r||new Sn}function wp(t,e){ep.call(this),this.type="LineCurve",this.v1=t||new bn,this.v2=e||new bn}function Ep(t,e){ep.call(this),this.type="LineCurve3",this.v1=t||new Sn,this.v2=e||new Sn}function Sp(t,e,n){ep.call(this),this.type="QuadraticBezierCurve",this.v0=t||new bn,this.v1=e||new bn,this.v2=n||new bn}function Mp(t,e,n){ep.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Sn,this.v1=e||new Sn,this.v2=n||new Sn}function Tp(t){ep.call(this),this.type="SplineCurve",this.points=t||[]}cp.prototype=Object.create(ep.prototype),cp.prototype.constructor=cp,cp.prototype.isCatmullRomCurve3=!0,cp.prototype.getPoint=function(t,e){var n,r,i,o,a=e||new Sn,s=this.points,u=s.length,c=(u-(this.closed?0:1))*t,l=Math.floor(c),h=c-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/u)+1)*u:0===h&&l===u-1&&(l=u-2,h=1),this.closed||l>0?n=s[(l-1)%u]:(op.subVectors(s[0],s[1]).add(s[0]),n=op),r=s[l%u],i=s[(l+1)%u],this.closed||l+2<u?o=s[(l+2)%u]:(op.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=op),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),d=Math.pow(r.distanceToSquared(i),f),g=Math.pow(i.distanceToSquared(o),f);d<1e-4&&(d=1),p<1e-4&&(p=d),g<1e-4&&(g=d),ap.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,d,g),sp.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,d,g),up.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,d,g)}else"catmullrom"===this.curveType&&(ap.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),sp.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),up.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(ap.calc(h),sp.calc(h),up.calc(h)),a},cp.prototype.copy=function(t){ep.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},cp.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},cp.prototype.fromJSON=function(t){ep.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new Sn).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},bp.prototype=Object.create(ep.prototype),bp.prototype.constructor=bp,bp.prototype.isCubicBezierCurve=!0,bp.prototype.getPoint=function(t,e){var n=e||new bn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(_p(t,r.x,i.x,o.x,a.x),_p(t,r.y,i.y,o.y,a.y)),n},bp.prototype.copy=function(t){return ep.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},bp.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},bp.prototype.fromJSON=function(t){return ep.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},xp.prototype=Object.create(ep.prototype),xp.prototype.constructor=xp,xp.prototype.isCubicBezierCurve3=!0,xp.prototype.getPoint=function(t,e){var n=e||new Sn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(_p(t,r.x,i.x,o.x,a.x),_p(t,r.y,i.y,o.y,a.y),_p(t,r.z,i.z,o.z,a.z)),n},xp.prototype.copy=function(t){return ep.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},xp.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},xp.prototype.fromJSON=function(t){return ep.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},wp.prototype=Object.create(ep.prototype),wp.prototype.constructor=wp,wp.prototype.isLineCurve=!0,wp.prototype.getPoint=function(t,e){var n=e||new bn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},wp.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},wp.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()},wp.prototype.copy=function(t){return ep.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},wp.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},wp.prototype.fromJSON=function(t){return ep.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Ep.prototype=Object.create(ep.prototype),Ep.prototype.constructor=Ep,Ep.prototype.isLineCurve3=!0,Ep.prototype.getPoint=function(t,e){var n=e||new Sn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Ep.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Ep.prototype.copy=function(t){return ep.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ep.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ep.prototype.fromJSON=function(t){return ep.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Sp.prototype=Object.create(ep.prototype),Sp.prototype.constructor=Sp,Sp.prototype.isQuadraticBezierCurve=!0,Sp.prototype.getPoint=function(t,e){var n=e||new bn,r=this.v0,i=this.v1,o=this.v2;return n.set(dp(t,r.x,i.x,o.x),dp(t,r.y,i.y,o.y)),n},Sp.prototype.copy=function(t){return ep.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Sp.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Sp.prototype.fromJSON=function(t){return ep.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Mp.prototype=Object.create(ep.prototype),Mp.prototype.constructor=Mp,Mp.prototype.isQuadraticBezierCurve3=!0,Mp.prototype.getPoint=function(t,e){var n=e||new Sn,r=this.v0,i=this.v1,o=this.v2;return n.set(dp(t,r.x,i.x,o.x),dp(t,r.y,i.y,o.y),dp(t,r.z,i.z,o.z)),n},Mp.prototype.copy=function(t){return ep.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Mp.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Mp.prototype.fromJSON=function(t){return ep.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Tp.prototype=Object.create(ep.prototype),Tp.prototype.constructor=Tp,Tp.prototype.isSplineCurve=!0,Tp.prototype.getPoint=function(t,e){var n=e||new bn,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(lp(a,s.x,u.x,c.x,l.x),lp(a,s.y,u.y,c.y,l.y)),n},Tp.prototype.copy=function(t){ep.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},Tp.prototype.toJSON=function(){var t=ep.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},Tp.prototype.fromJSON=function(t){ep.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new bn).fromArray(r))}return this};var Cp=Object.freeze({__proto__:null,ArcCurve:rp,CatmullRomCurve3:cp,CubicBezierCurve:bp,CubicBezierCurve3:xp,EllipseCurve:np,LineCurve:wp,LineCurve3:Ep,QuadraticBezierCurve:Sp,QuadraticBezierCurve3:Mp,SplineCurve:Tp});function Lp(){ep.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ap(t){Lp.call(this),this.type="Path",this.currentPoint=new bn,t&&this.setFromPoints(t)}function Ip(t){Ap.call(this,t),this.uuid=_n.generateUUID(),this.type="Shape",this.holes=[]}function Pp(t,e){or.call(this),this.type="Light",this.color=new Jr(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Rp(t,e,n){Pp.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(or.DefaultUp),this.updateMatrix(),this.groundColor=new Jr(e)}function Op(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new bn(512,512),this.map=null,this.mapPass=null,this.matrix=new Gn,this._frustum=new fo,this._frameExtents=new bn(1,1),this._viewportCount=1,this._viewports=[new Pn(0,0,1,1)]}function Np(){Op.call(this,new io(50,1,.5,500))}function Dp(t,e,n,r,i,o){Pp.call(this,t,e),this.type="SpotLight",this.position.copy(or.DefaultUp),this.updateMatrix(),this.target=new or,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Np}function Fp(){Op.call(this,new io(90,1,.5,500)),this._frameExtents=new bn(4,2),this._viewportCount=6,this._viewports=[new Pn(2,1,1,1),new Pn(0,1,1,1),new Pn(3,1,1,1),new Pn(1,1,1,1),new Pn(3,0,1,1),new Pn(1,0,1,1)],this._cubeDirections=[new Sn(1,0,0),new Sn(-1,0,0),new Sn(0,0,1),new Sn(0,0,-1),new Sn(0,1,0),new Sn(0,-1,0)],this._cubeUps=[new Sn(0,1,0),new Sn(0,1,0),new Sn(0,1,0),new Sn(0,1,0),new Sn(0,0,1),new Sn(0,0,-1)]}function Bp(t,e,n,r){Pp.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Fp}function kp(t,e,n,r,i,o){ro.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Up(){Op.call(this,new kp(-5,5,5,-5,.5,500))}function jp(t,e){Pp.call(this,t,e),this.type="DirectionalLight",this.position.copy(or.DefaultUp),this.updateMatrix(),this.target=new or,this.shadow=new Up}function Gp(t,e){Pp.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function zp(t,e,n,r){Pp.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Vp(t){Wf.call(this,t),this.textures={}}Lp.prototype=Object.assign(Object.create(ep.prototype),{constructor:Lp,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new wp(e,t))},getPoint:function(t){var e=t*this.getLength(),n=this.getCurveLengths(),r=0;while(r<n.length){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){ep.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=ep.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){ep.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new Cp[r.type]).fromJSON(r))}return this}}),Ap.prototype=Object.assign(Object.create(Lp.prototype),{constructor:Ap,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new wp(this.currentPoint.clone(),new bn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){var i=new Sp(this.currentPoint.clone(),new bn(t,e),new bn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){var a=new bp(this.currentPoint.clone(),new bn(t,e),new bn(n,r),new bn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Tp(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,n,r,i,o,a,s),this},absellipse:function(t,e,n,r,i,o,a,s){var u=new np(t,e,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this},copy:function(t){return Lp.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Lp.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Lp.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Ip.prototype=Object.assign(Object.create(Ap.prototype),{constructor:Ip,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Ap.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=Ap.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){Ap.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new Ap).fromJSON(r))}return this}}),Pp.prototype=Object.assign(Object.create(or.prototype),{constructor:Pp,isLight:!0,copy:function(t){return or.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=or.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Rp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Rp,isHemisphereLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Op.prototype,{_projScreenMatrix:new Gn,_lightPositionWorld:new Sn,_lookTarget:new Sn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Np.prototype=Object.assign(Object.create(Op.prototype),{constructor:Np,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*_n.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),Op.prototype.updateMatrices.call(this,t)}}),Dp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Dp,isSpotLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Fp.prototype=Object.assign(Object.create(Op.prototype),{constructor:Fp,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromMatrix(a)}}),Bp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Bp,isPointLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),kp.prototype=Object.assign(Object.create(ro.prototype),{constructor:kp,isOrthographicCamera:!0,copy:function(t,e){return ro.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u),o=i+l*(this.view.width/u),a-=h*(this.view.offsetY/c),s=a-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=or.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Up.prototype=Object.assign(Object.create(Op.prototype),{constructor:Up,isDirectionalLightShadow:!0,updateMatrices:function(t){Op.prototype.updateMatrices.call(this,t)}}),jp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:jp,isDirectionalLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Gp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:Gp,isAmbientLight:!0}),zp.prototype=Object.assign(Object.create(Pp.prototype),{constructor:zp,isRectAreaLight:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Pp.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Vp.prototype=Object.assign(Object.create(Wf.prototype),{constructor:Vp,load:function(t,e,n,r){var i=this,o=new Yf(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var r=new Tf[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new Jr).setHex(t.sheen)),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.uniforms)for(var i in t.uniforms){var o=t.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new Jr).setHex(o.value);break;case"v2":r.uniforms[i].value=(new bn).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new Sn).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new Pn).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new Cn).fromArray(o.value);case"m4":r.uniforms[i].value=(new Gn).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var a in t.extensions)r.extensions[a]=t.extensions[a];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new bn).fromArray(s)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new bn).fromArray(t.clearcoatNormalScale)),r},setTextures:function(t){return this.textures=t,this}});var Hp={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(i){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function qp(){Ei.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Wp(t,e,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),ii.call(this,t,e,n),this.meshPerAttribute=r||1}function Xp(t){Wf.call(this,t)}qp.prototype=Object.assign(Object.create(Ei.prototype),{constructor:qp,isInstancedBufferGeometry:!0,copy:function(t){return Ei.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Ei.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Wp.prototype=Object.assign(Object.create(ii.prototype),{constructor:Wp,isInstancedBufferAttribute:!0,copy:function(t){return ii.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=ii.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Xp.prototype=Object.assign(Object.create(Wf.prototype),{constructor:Xp,load:function(t,e,n,r){var i=this,o=new Yf(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=t.isInstancedBufferGeometry?new qp:new Ei,n=t.data.index;if(void 0!==n){var r=new Yp[n.type](n.array);e.setIndex(new ii(r,1))}var i=t.data.attributes;for(var o in i){var a=i[o],s=(r=new Yp[a.type](a.array),a.isInstancedBufferAttribute?Wp:ii),u=new s(r,a.itemSize,a.normalized);void 0!==a.name&&(u.name=a.name),e.setAttribute(o,u)}var c=t.data.morphAttributes;if(c)for(var o in c){for(var l=c[o],h=[],f=0,p=l.length;f<p;f++){a=l[f],r=new Yp[a.type](a.array),u=new ii(r,a.itemSize,a.normalized);void 0!==a.name&&(u.name=a.name),h.push(u)}e.morphAttributes[o]=h}var d=t.data.morphTargetsRelative;d&&(e.morphTargetsRelative=!0);var g=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==g){f=0;for(var m=g.length;f!==m;++f){var v=g[f];e.addGroup(v.start,v.count,v.materialIndex)}}var y=t.data.boundingSphere;if(void 0!==y){var _=new Sn;void 0!==y.center&&_.fromArray(y.center),e.boundingSphere=new Er(_,y.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Yp={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function $p(t){Wf.call(this,t)}$p.prototype=Object.assign(Object.create(Wf.prototype),{constructor:$p,load:function(t,e,n,r){var i=this,o=""===this.path?Hp.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new Yf(i.manager);a.setPath(this.path),a.load(t,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+t+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new Ip).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new Xp,i=0,o=t.length;i<o;i++){var a,s=t[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new gf[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new gf[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new gf[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new gf[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new gf[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new gf[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new gf[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new gf[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new gf[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new gf[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new gf[s.type]((new Cp[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new gf[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new gf[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,l=s.shapes.length;c<l;c++){var h=e[s.shapes[c]];u.push(h)}a=new gf[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],c=0,l=s.shapes.length;c<l;c++){h=e[s.shapes[c]];u.push(h)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new Cp[f.type]).fromJSON(f)),a=new gf[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var p=new THREE.LegacyJSONLoader;a=p.parse(s,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var i=new Vp;i.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),u.push(n[l.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=jf.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var o=new Hf(e),a=new Kf(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,u=t.length;s<u;s++){var c=t[s],l=c.url;if(Array.isArray(l)){r[c.uuid]=[];for(var h=0,f=l.length;h<f;h++){var p=l[h],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;r[c.uuid].push(i(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;r[c.uuid]=i(d)}}}return r},parseTextures:function(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),a=Array.isArray(e[s.image])?new Xs(e[s.image]):new In(e[s.image]),a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,Zp)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Kp),a.wrapT=n(s.wrap[1],Kp)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Qp)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Qp)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(t,e,n){var r;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new ar,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new Jr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new Jc(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new $c(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new io(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new kp(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new Gp(t.color,t.intensity);break;case"DirectionalLight":r=new jp(t.color,t.intensity);break;case"PointLight":r=new Bp(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new zp(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new Dp(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new Rp(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(t.geometry),s=o(t.material);r=a.bones&&a.bones.length>0?new vl(a,s):new Gi(a,s);break;case"InstancedMesh":a=i(t.geometry),s=o(t.material);var u=t.count,c=t.instanceMatrix;r=new Tl(a,s,u),r.instanceMatrix=new ii(new Float32Array(c.array),16);break;case"LOD":r=new ml;break;case"Line":r=new Ol(i(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new Bl(i(t.geometry),o(t.material));break;case"LineSegments":r=new Fl(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new Vl(i(t.geometry),o(t.material));break;case"Sprite":r=new fl(o(t.material));break;case"Group":r=new jc;break;default:r=new or}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.drawMode&&r.setDrawMode(t.drawMode),void 0!==t.children)for(var l=t.children,h=0;h<l.length;h++)r.add(this.parseObject(l[h],e,n));if("LOD"===t.type){void 0!==t.autoUpdate&&(r.autoUpdate=t.autoUpdate);for(var f=t.levels,p=0;p<f.length;p++){var d=f[p],g=r.getObjectByProperty("uuid",d.object);void 0!==g&&r.addLevel(g,d.distance)}}return r}});var Jp,Zp={UVMapping:ct,CubeReflectionMapping:lt,CubeRefractionMapping:ht,EquirectangularReflectionMapping:ft,EquirectangularRefractionMapping:pt,SphericalReflectionMapping:dt,CubeUVReflectionMapping:gt,CubeUVRefractionMapping:mt},Kp={RepeatWrapping:vt,ClampToEdgeWrapping:yt,MirroredRepeatWrapping:_t},Qp={NearestFilter:bt,NearestMipmapNearestFilter:xt,NearestMipmapLinearFilter:Et,LinearFilter:Mt,LinearMipmapNearestFilter:Tt,LinearMipmapLinearFilter:Lt};function td(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Wf.call(this,t),this.options=void 0}function ed(){this.type="ShapePath",this.color=new Jr,this.subPaths=[],this.currentPath=null}function nd(t){this.type="Font",this.data=t}function rd(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=o;else{var h=id(l,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}function id(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,c,l,h,f,p,d=new ed;if(o.o)for(var g=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),m=0,v=g.length;m<v;){var y=g[m++];switch(y){case"m":a=g[m++]*e+n,s=g[m++]*e+r,d.moveTo(a,s);break;case"l":a=g[m++]*e+n,s=g[m++]*e+r,d.lineTo(a,s);break;case"q":u=g[m++]*e+n,c=g[m++]*e+r,l=g[m++]*e+n,h=g[m++]*e+r,d.quadraticCurveTo(l,h,u,c);break;case"b":u=g[m++]*e+n,c=g[m++]*e+r,l=g[m++]*e+n,h=g[m++]*e+r,f=g[m++]*e+n,p=g[m++]*e+r,d.bezierCurveTo(l,h,f,p,u,c);break}}return{offsetX:o.ha*e,path:d}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}function od(t){Wf.call(this,t)}td.prototype=Object.assign(Object.create(Wf.prototype),{constructor:td,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Vf.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===i.options?createImageBitmap(t):createImageBitmap(t,i.options)})).then((function(n){Vf.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(ed.prototype,{moveTo:function(t,e){return this.currentPath=new Ap,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new Ip;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],u=-u,s=e[i],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var l=c*(t.x-a.x)-u*(t.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=Vh.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,u,c=[];if(1===o.length)return s=o[0],u=new Ip,u.curves=s.curves,c.push(u),c;var l=!i(o[0].getPoints());l=t?!l:l;var h,f,p=[],d=[],g=[],m=0;d[m]=void 0,g[m]=[];for(var v=0,y=o.length;v<y;v++)s=o[v],h=s.getPoints(),a=i(h),a=t?!a:a,a?(!l&&d[m]&&m++,d[m]={s:new Ip,p:h},d[m].s.curves=s.curves,l&&m++,g[m]=[]):g[m].push({h:s,p:h[0]});if(!d[0])return n(o);if(d.length>1){for(var _=!1,b=[],x=0,w=d.length;x<w;x++)p[x]=[];for(x=0,w=d.length;x<w;x++)for(var E=g[x],S=0;S<E.length;S++){for(var M=E[S],T=!0,C=0;C<d.length;C++)r(M.p,d[C].p)&&(x!==C&&b.push({froms:x,tos:C,hole:S}),T?(T=!1,p[C].push(M)):_=!0);T&&p[x].push(M)}b.length>0&&(_||(g=p))}v=0;for(var L=d.length;v<L;v++){u=d[v].s,c.push(u),f=g[v];for(var A=0,I=f.length;A<I;A++)u.holes.push(f[A].h)}return c}}),Object.assign(nd.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=rd(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),od.prototype=Object.assign(Object.create(Wf.prototype),{constructor:od,load:function(t,e,n,r){var i=this,o=new Yf(this.manager);o.setPath(this.path),o.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new nd(t)}});var ad={getContext:function(){return void 0===Jp&&(Jp=new(window.AudioContext||window.webkitAudioContext)),Jp},setContext:function(t){Jp=t}};function sd(t){Wf.call(this,t)}function ud(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Sn)}function cd(t,e){Pp.call(this,void 0,e),this.sh=void 0!==t?t:new ud}function ld(t,e,n){cd.call(this,void 0,n);var r=(new Jr).set(t),i=(new Jr).set(e),o=new Sn(r.r,r.g,r.b),a=new Sn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function hd(t,e){cd.call(this,void 0,e);var n=(new Jr).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}sd.prototype=Object.assign(Object.create(Wf.prototype),{constructor:sd,load:function(t,e,n,r){var i=new Yf(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(t,(function(t){var n=t.slice(0),r=ad.getContext();r.decodeAudioData(n,(function(t){e(t)}))}),n,r)}}),Object.assign(ud.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScale(o[1],.488603*r),e.addScale(o[2],.488603*i),e.addScale(o[3],.488603*n),e.addScale(o[4],n*r*1.092548),e.addScale(o[5],r*i*1.092548),e.addScale(o[6],.315392*(3*i*i-1)),e.addScale(o[7],n*i*1.092548),e.addScale(o[8],.546274*(n*n-r*r)),e},getIrradianceAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScale(o[1],1.023328*r),e.addScale(o[2],1.023328*i),e.addScale(o[3],1.023328*n),e.addScale(o[4],.858086*n*r),e.addScale(o[5],.858086*r*i),e.addScale(o[6],.743125*i*i-.247708),e.addScale(o[7],.858086*n*i),e.addScale(o[8],.429043*(n*n-r*r)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}),Object.assign(ud,{getBasisAt:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}),cd.prototype=Object.assign(Object.create(Pp.prototype),{constructor:cd,isLightProbe:!0,copy:function(t){return Pp.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){var e=Pp.prototype.toJSON.call(this,t);return e}}),ld.prototype=Object.assign(Object.create(cd.prototype),{constructor:ld,isHemisphereLightProbe:!0,copy:function(t){return cd.prototype.copy.call(this,t),this},toJSON:function(t){var e=cd.prototype.toJSON.call(this,t);return e}}),hd.prototype=Object.assign(Object.create(cd.prototype),{constructor:hd,isAmbientLightProbe:!0,copy:function(t){return cd.prototype.copy.call(this,t),this},toJSON:function(t){var e=cd.prototype.toJSON.call(this,t);return e}});var fd=new Gn,pd=new Gn;function dd(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new io,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new io,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function gd(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(dd.prototype,{update:function(t){var e=this._cache,n=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(n){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var r,i,o=t.projectionMatrix.clone(),a=e.eyeSep/2,s=a*e.near/e.focus,u=e.near*Math.tan(_n.DEG2RAD*e.fov*.5)/e.zoom;pd.elements[12]=-a,fd.elements[12]=a,r=-u*e.aspect+s,i=u*e.aspect+s,o.elements[0]=2*e.near/(i-r),o.elements[8]=(i+r)/(i-r),this.cameraL.projectionMatrix.copy(o),r=-u*e.aspect-s,i=u*e.aspect-s,o.elements[0]=2*e.near/(i-r),o.elements[8]=(i+r)/(i-r),this.cameraR.projectionMatrix.copy(o)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(pd),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(fd)}}),Object.assign(gd.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var md=new Sn,vd=new xn,yd=new Sn,_d=new Sn;function bd(){or.call(this),this.type="AudioListener",this.context=ad.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gd}function xd(t){or.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}bd.prototype=Object.assign(Object.create(or.prototype),{constructor:bd,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){or.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(md,vd,yd),_d.set(0,0,-1).applyQuaternion(vd),e.positionX){var r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(md.x,r),e.positionY.linearRampToValueAtTime(md.y,r),e.positionZ.linearRampToValueAtTime(md.z,r),e.forwardX.linearRampToValueAtTime(_d.x,r),e.forwardY.linearRampToValueAtTime(_d.y,r),e.forwardZ.linearRampToValueAtTime(_d.z,r),e.upX.linearRampToValueAtTime(n.x,r),e.upY.linearRampToValueAtTime(n.y,r),e.upZ.linearRampToValueAtTime(n.z,r)}else e.setPosition(md.x,md.y,md.z),e.setOrientation(_d.x,_d.y,_d.z,n.x,n.y,n.z)}}),xd.prototype=Object.assign(Object.create(or.prototype),{constructor:xd,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var wd=new Sn,Ed=new xn,Sd=new Sn,Md=new Sn;function Td(t){xd.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Cd(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Ld(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Td.prototype=Object.assign(Object.create(xd.prototype),{constructor:Td,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(or.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(wd,Ed,Sd),Md.set(0,0,1).applyQuaternion(Ed);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(wd.x,n),e.positionY.linearRampToValueAtTime(wd.y,n),e.positionZ.linearRampToValueAtTime(wd.z,n),e.orientationX.linearRampToValueAtTime(Md.x,n),e.orientationY.linearRampToValueAtTime(Md.y,n),e.orientationZ.linearRampToValueAtTime(Md.z,n)}else e.setPosition(wd.x,wd.y,wd.z),e.setOrientation(Md.x,Md.y,Md.z)}}}),Object.assign(Cd.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Ld.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*e;this._mixBufferRegion(n,r,a,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){xn.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}});var Ad="\\[\\]\\.:\\/",Id=new RegExp("["+Ad+"]","g"),Pd="[^"+Ad+"]",Rd="[^"+Ad.replace("\\.","")+"]",Od=/((?:WC+[\/:])*)/.source.replace("WC",Pd),Nd=/(WCOD+)?/.source.replace("WCOD",Rd),Dd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Pd),Fd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Pd),Bd=new RegExp("^"+Od+Nd+Dd+Fd+"$"),kd=["material","materials","bones"];function Ud(t,e,n){var r=n||jd.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function jd(t,e,n){this.path=e,this.parsedPath=n||jd.parseTrackName(e),this.node=jd.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Gd(){this.uuid=_n.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function zd(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),a={endingStart:Te,endingEnd:Te},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Vd(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Hd(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function qd(t,e,n){Zc.call(this,t,e),this.meshPerAttribute=n||1}function Wd(t,e,n,r){this.ray=new Pr(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Xd(t,e){return t.distance-e.distance}function Yd(t,e,n,r){if(!1!==t.visible&&(t.raycast(e,n),!0===r))for(var i=t.children,o=0,a=i.length;o<a;o++)Yd(i[o],e,n,!0)}function $d(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Jd(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}Object.assign(Ud.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(jd,{Composite:Ud,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new jd.Composite(t,e,n):new jd(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Id,"")},parseTrackName:function(t){var e=Bd.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==kd.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var o=r(i.children);if(o)return o}return null},i=r(t.children);if(i)return i}return null}}),Object.assign(jd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=jd.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(jd.prototype,{_getValue_unbound:jd.prototype.getValue,_setValue_unbound:jd.prototype.setValue}),Object.assign(Gd.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,p=r[f];if(void 0===p){p=e++,r[f]=p,t.push(h);for(var d=0,g=s;d!==g;++d)a[d].push(new jd(h,i[d],o[d]))}else if(p<n){u=t[p];var m=--n,v=t[m];r[v.uuid]=p,t[p]=v,r[f]=m,t[m]=h;for(d=0,g=s;d!==g;++d){var y=a[d],_=y[m],b=y[p];y[p]=_,void 0===b&&(b=new jd(h,i[d],o[d])),y[m]=b}}else t[p]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=e){var l=e++,h=t[l];n[h.uuid]=c,t[c]=h,n[u]=l,t[l]=s;for(var f=0,p=i;f!==p;++f){var d=r[f],g=d[l],m=d[c];d[c]=g,d[l]=m}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var h=--n,f=t[h],p=--e,d=t[p];r[f.uuid]=l,t[l]=f,r[d.uuid]=h,t[h]=d,t.pop();for(var g=0,m=o;g!==m;++g){var v=i[g],y=v[h],_=v[p];v[l]=y,v[h]=_,v.pop()}}else{p=--e,d=t[p];r[d.uuid]=l,t[l]=d,t.pop();for(g=0,m=o;g!==m;++g){v=i[g];v[l]=v[p],v.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(l);for(var h=c,f=s.length;h!==f;++h){var p=s[h];l[h]=new jd(p,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],u=t[a];e[u]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(zd.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,h=u.length;l!==h;++l)u[l].evaluate(a),c[l].accumulate(r,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===we;if(0===t)return-1===i?e:o&&1===(1&i)?n-e:e;if(r===be){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=e;if(o&&1===(1&i))return n-e}return e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=Ce,r.endingEnd=Ce):(r.endingStart=t?this.zeroSlopeAtStart?Ce:Te:Le,r.endingEnd=e?this.zeroSlopeAtEnd?Ce:Te:Le)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),Vd.prototype=Object.assign(Object.create(mn.prototype),{constructor:Vd,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var h=r[l],f=h.name,p=c[f];if(void 0!==p)o[l]=p;else{if(p=o[l],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var d=e&&e._propertyBindings[l].binding.parsedPath;p=new Ld(jd.create(n,f,d),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,f),o[l]=p}a[l].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null;var l=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete l[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new If(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"===typeof t?jf.findByName(n,t):t,o=null!==i?i.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new zd(this,i,e);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"===typeof t?jf.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){var s=e[a];s._update(r,t,i,o)}var u=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)u[a].apply(o);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,e[c]=l,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Hd.prototype.clone=function(){return new Hd(void 0===this.value.clone?this.value:this.value.clone())},qd.prototype=Object.assign(Object.create(Zc.prototype),{constructor:qd,isInstancedInterleavedBuffer:!0,copy:function(t){return Zc.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Wd.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return Yd(t,this,r,e),r.sort(Xd),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)Yd(t[i],this,r,e);return r.sort(Xd),r}}),Object.assign($d.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(_n.clamp(e/this.radius,-1,1))),this}}),Object.assign(Jd.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var Zd=new bn;function Kd(t,e){this.min=void 0!==t?t:new bn(1/0,1/0),this.max=void 0!==e?e:new bn(-1/0,-1/0)}Object.assign(Kd.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Zd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new bn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new bn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new bn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new bn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=Zd.copy(t).clamp(this.min,this.max);return e.sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Qd=new Sn,tg=new Sn;function eg(t,e){this.start=void 0!==t?t:new Sn,this.end=void 0!==e?e:new Sn}function ng(t){or.call(this),this.material=t,this.render=function(){}}Object.assign(eg.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Sn),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Sn),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Sn),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){Qd.subVectors(t,this.start),tg.subVectors(this.end,this.start);var n=tg.dot(tg),r=tg.dot(Qd),i=r/n;return e&&(i=_n.clamp(i,0,1)),i},closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Sn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),ng.prototype=Object.create(or.prototype),ng.prototype.constructor=ng,ng.prototype.isImmediateRenderObject=!0;var rg=new Sn,ig=new Sn,og=new Cn,ag=["a","b","c"];function sg(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new Ei,c=new fi(2*a*3,3);u.setAttribute("position",c),Fl.call(this,u,new Cl({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}sg.prototype=Object.create(Fl.prototype),sg.prototype.constructor=sg,sg.prototype.update=function(){this.object.updateMatrixWorld(!0),og.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,i=n.faces,o=0,a=0,s=i.length;a<s;a++)for(var u=i[a],c=0,l=u.vertexNormals.length;c<l;c++){var h=r[u[ag[c]]],f=u.vertexNormals[c];rg.copy(h).applyMatrix4(t),ig.copy(f).applyMatrix3(og).normalize().multiplyScalar(this.size).add(rg),e.setXYZ(o,rg.x,rg.y,rg.z),o+=1,e.setXYZ(o,ig.x,ig.y,ig.z),o+=1}else if(n&&n.isBufferGeometry){var p=n.attributes.position,d=n.attributes.normal;for(o=0,c=0,l=p.count;c<l;c++)rg.set(p.getX(c),p.getY(c),p.getZ(c)).applyMatrix4(t),ig.set(d.getX(c),d.getY(c),d.getZ(c)),ig.applyMatrix3(og).normalize().multiplyScalar(this.size).add(rg),e.setXYZ(o,rg.x,rg.y,rg.z),o+=1,e.setXYZ(o,ig.x,ig.y,ig.z),o+=1}e.needsUpdate=!0};var ug=new Sn;function cg(t,e){or.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new Ei,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1,a=32;i<a;i++,o++){var s=i/a*Math.PI*2,u=o/a*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}n.setAttribute("position",new fi(r,3));var c=new Cl({fog:!1});this.cone=new Fl(n,c),this.add(this.cone),this.update()}cg.prototype=Object.create(or.prototype),cg.prototype.constructor=cg,cg.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},cg.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),ug.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ug),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var lg=new Sn,hg=new Gn,fg=new Gn;function pg(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,pg(t.children[n]));return e}function dg(t){for(var e=pg(t),n=new Ei,r=[],i=[],o=new Jr(0,0,1),a=new Jr(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new fi(r,3)),n.setAttribute("color",new fi(i,3));var c=new Cl({vertexColors:E,depthTest:!1,depthWrite:!1,transparent:!0});Fl.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function gg(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new Qh(e,4,2),i=new ri({wireframe:!0,fog:!1});Gi.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function mg(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new Ei;r.setAttribute("position",new fi(n,3)),r.computeBoundingSphere();var i=new Cl({fog:!1});Ol.call(this,r,i);var o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new Ei;a.setAttribute("position",new fi(o,3)),a.computeBoundingSphere(),this.add(new Gi(a,new ri({side:v,fog:!1}))),this.update()}dg.prototype=Object.create(Fl.prototype),dg.prototype.constructor=dg,dg.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,r=n.getAttribute("position");fg.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<e.length;i++){var a=e[i];a.parent&&a.parent.isBone&&(hg.multiplyMatrices(fg,a.matrixWorld),lg.setFromMatrixPosition(hg),r.setXYZ(o,lg.x,lg.y,lg.z),hg.multiplyMatrices(fg,a.parent.matrixWorld),lg.setFromMatrixPosition(hg),r.setXYZ(o+1,lg.x,lg.y,lg.z),o+=2)}n.getAttribute("position").needsUpdate=!0,or.prototype.updateMatrixWorld.call(this,t)},gg.prototype=Object.create(Gi.prototype),gg.prototype.constructor=gg,gg.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},gg.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},mg.prototype=Object.create(Ol.prototype),mg.prototype.constructor=mg,mg.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},mg.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var vg=new Sn,yg=new Jr,_g=new Jr;function bg(t,e,n){or.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new rh(e);r.rotateY(.5*Math.PI),this.material=new ri({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=E);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new ii(o,3)),this.add(new Gi(r,this.material)),this.update()}function xg(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:""},r=new no({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),i=new Qh(1,32,16);Gi.call(this,i,r),this.onBeforeRender()}function wg(t,e,n,r){t=t||10,e=e||10,n=new Jr(void 0!==n?n:4473924),r=new Jr(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],c=0,l=0,h=-a;c<=e;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=c===i?n:r;f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3}var p=new Ei;p.setAttribute("position",new fi(s,3)),p.setAttribute("color",new fi(u,3));var d=new Cl({vertexColors:E});Fl.call(this,p,d)}function Eg(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new Jr(void 0!==i?i:4473924),o=new Jr(void 0!==o?o:8947848);var a,s,u,c,l,h,f,p=[],d=[];for(c=0;c<=e;c++)u=c/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,p.push(0,0,0),p.push(a,0,s),f=1&c?i:o,d.push(f.r,f.g,f.b),d.push(f.r,f.g,f.b);for(c=0;c<=n;c++)for(f=1&c?i:o,h=t-t/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),d.push(f.r,f.g,f.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),d.push(f.r,f.g,f.b);var g=new Ei;g.setAttribute("position",new fi(p,3)),g.setAttribute("color",new fi(d,3));var m=new Cl({vertexColors:E});Fl.call(this,g,m)}function Sg(t,e,n,r){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new Ei,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));i.setAttribute("position",new ii(a,3));var s=new Cl({color:65280}),u=new Cl({color:16776960});Ol.call(this,i,[u,s]),this.update()}bg.prototype=Object.create(or.prototype),bg.prototype.constructor=bg,bg.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},bg.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");yg.copy(this.light.color),_g.copy(this.light.groundColor);for(var n=0,r=e.count;n<r;n++){var i=n<r/2?yg:_g;e.setXYZ(n,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(vg.setFromMatrixPosition(this.light.matrixWorld).negate())},xg.prototype=Object.create(Gi.prototype),xg.prototype.constructor=xg,xg.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},xg.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},wg.prototype=Object.assign(Object.create(Fl.prototype),{constructor:wg,copy:function(t){return Fl.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),Eg.prototype=Object.create(Fl.prototype),Eg.prototype.constructor=Eg,Sg.prototype=Object.create(Ol.prototype),Sg.prototype.constructor=Sg,Sg.prototype.update=function(){var t,e,n=this.audio,r=this.range,i=this.divisionsInnerAngle,o=this.divisionsOuterAngle,a=_n.degToRad(n.panner.coneInnerAngle),s=_n.degToRad(n.panner.coneOuterAngle),u=a/2,c=s/2,l=0,h=0,f=this.geometry,p=f.attributes.position;function d(n,i,o,a){var s=(i-n)/o;for(p.setXYZ(l,0,0,0),h++,t=n;t<i;t+=s)e=l+h,p.setXYZ(e,Math.sin(t)*r,0,Math.cos(t)*r),p.setXYZ(e+1,Math.sin(Math.min(t+s,i))*r,0,Math.cos(Math.min(t+s,i))*r),p.setXYZ(e+2,0,0,0),h+=3;f.addGroup(l,h,a),l+=h,h=0}f.clearGroups(),d(-c,-u,o,0),d(-u,u,i,1),d(u,c,o,0),p.needsUpdate=!0,a===s&&(this.material[0].visible=!1)},Sg.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var Mg=new Sn,Tg=new Sn,Cg=new Cn;function Lg(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Ei,c=new fi(2*a*3,3);u.setAttribute("position",c),Fl.call(this,u,new Cl({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}Lg.prototype=Object.create(Fl.prototype),Lg.prototype.constructor=Lg,Lg.prototype.update=function(){this.object.updateMatrixWorld(!0),Cg.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry,r=n.vertices,i=n.faces,o=0,a=0,s=i.length;a<s;a++){var u=i[a],c=u.normal;Mg.copy(r[u.a]).add(r[u.b]).add(r[u.c]).divideScalar(3).applyMatrix4(t),Tg.copy(c).applyMatrix3(Cg).normalize().multiplyScalar(this.size).add(Mg),e.setXYZ(o,Mg.x,Mg.y,Mg.z),o+=1,e.setXYZ(o,Tg.x,Tg.y,Tg.z),o+=1}e.needsUpdate=!0};var Ag=new Sn,Ig=new Sn,Pg=new Sn;function Rg(t,e,n){or.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new Ei;r.setAttribute("position",new fi([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new Cl({fog:!1});this.lightPlane=new Ol(r,i),this.add(this.lightPlane),r=new Ei,r.setAttribute("position",new fi([0,0,0,0,0,1],3)),this.targetLine=new Ol(r,i),this.add(this.targetLine),this.update()}Rg.prototype=Object.create(or.prototype),Rg.prototype.constructor=Rg,Rg.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Rg.prototype.update=function(){Ag.setFromMatrixPosition(this.light.matrixWorld),Ig.setFromMatrixPosition(this.light.target.matrixWorld),Pg.subVectors(Ig,Ag),this.lightPlane.lookAt(Ig),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ig),this.targetLine.scale.z=Pg.length()};var Og=new Sn,Ng=new ro;function Dg(t){var e=new Ei,n=new Cl({color:16777215,vertexColors:w}),r=[],i=[],o={},a=new Jr(16755200),s=new Jr(16711680),u=new Jr(43775),c=new Jr(16777215),l=new Jr(3355443);function h(t,e,n){f(t,n),f(e,n)}function f(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",c),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),e.setAttribute("position",new fi(r,3)),e.setAttribute("color",new fi(i,3)),Fl.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Fg(t,e,n,r,i,o,a){Og.set(i,o,a).unproject(r);var s=e[t];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,l=s.length;c<l;c++)u.setXYZ(s[c],Og.x,Og.y,Og.z)}Dg.prototype=Object.create(Fl.prototype),Dg.prototype.constructor=Dg,Dg.prototype.update=function(){var t=this.geometry,e=this.pointMap,n=1,r=1;Ng.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Fg("c",e,t,Ng,0,0,-1),Fg("t",e,t,Ng,0,0,1),Fg("n1",e,t,Ng,-n,-r,-1),Fg("n2",e,t,Ng,n,-r,-1),Fg("n3",e,t,Ng,-n,r,-1),Fg("n4",e,t,Ng,n,r,-1),Fg("f1",e,t,Ng,-n,-r,1),Fg("f2",e,t,Ng,n,-r,1),Fg("f3",e,t,Ng,-n,r,1),Fg("f4",e,t,Ng,n,r,1),Fg("u1",e,t,Ng,.7*n,1.1*r,-1),Fg("u2",e,t,Ng,.7*-n,1.1*r,-1),Fg("u3",e,t,Ng,0,2*r,-1),Fg("cf1",e,t,Ng,-n,0,1),Fg("cf2",e,t,Ng,n,0,1),Fg("cf3",e,t,Ng,0,-r,1),Fg("cf4",e,t,Ng,0,r,1),Fg("cn1",e,t,Ng,-n,0,-1),Fg("cn2",e,t,Ng,n,0,-1),Fg("cn3",e,t,Ng,0,-r,-1),Fg("cn4",e,t,Ng,0,r,-1),t.getAttribute("position").needsUpdate=!0};var Bg=new br;function kg(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Ei;i.setIndex(new ii(n,1)),i.setAttribute("position",new ii(r,3)),Fl.call(this,i,new Cl({color:e})),this.matrixAutoUpdate=!1,this.update()}function Ug(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new Ei;i.setIndex(new ii(n,1)),i.setAttribute("position",new fi(r,3)),Fl.call(this,i,new Cl({color:e})),this.geometry.computeBoundingSphere()}function jg(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new Ei;o.setAttribute("position",new fi(i,3)),o.computeBoundingSphere(),Ol.call(this,o,new Cl({color:r}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new Ei;s.setAttribute("position",new fi(a,3)),s.computeBoundingSphere(),this.add(new Gi(s,new ri({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}kg.prototype=Object.create(Fl.prototype),kg.prototype.constructor=kg,kg.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Bg.setFromObject(this.object),!Bg.isEmpty()){var e=Bg.min,n=Bg.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},kg.prototype.setFromObject=function(t){return this.object=t,this.update(),this},kg.prototype.copy=function(t){return Fl.prototype.copy.call(this,t),this.object=t.object,this},kg.prototype.clone=function(){return(new this.constructor).copy(this)},Ug.prototype=Object.create(Fl.prototype),Ug.prototype.constructor=Ug,Ug.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),or.prototype.updateMatrixWorld.call(this,t))},jg.prototype=Object.create(Ol.prototype),jg.prototype.constructor=jg,jg.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?v:m,this.lookAt(this.plane.normal),or.prototype.updateMatrixWorld.call(this,t)};var Gg,zg,Vg=new Sn;function Hg(t,e,n,r,i,o){or.call(this),void 0===t&&(t=new Sn(0,0,1)),void 0===e&&(e=new Sn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Gg&&(Gg=new Ei,Gg.setAttribute("position",new fi([0,0,0,0,1,0],3)),zg=new lf(0,.5,1,5,1),zg.translate(0,-.5,0)),this.position.copy(e),this.line=new Ol(Gg,new Cl({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gi(zg,new ri({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function qg(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Ei;r.setAttribute("position",new fi(e,3)),r.setAttribute("color",new fi(n,3));var i=new Cl({vertexColors:E});Fl.call(this,r,i)}function Wg(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ti(t,e,n,i,o,a)}Hg.prototype=Object.create(or.prototype),Hg.prototype.constructor=Hg,Hg.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Vg.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Vg,e)}},Hg.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Hg.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Hg.prototype.copy=function(t){return or.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Hg.prototype.clone=function(){return(new this.constructor).copy(this)},qg.prototype=Object.create(Fl.prototype),qg.prototype.constructor=qg;var Xg=0,Yg=1;function $g(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Jg(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Zg(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Vl(t,e)}function Kg(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new fl(t)}function Qg(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Vl(t,e)}function tm(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new kl(t)}function em(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new kl(t)}function nm(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new kl(t)}function rm(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Sn(t,e,n)}function im(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ii(t,e).setDynamic(!0)}function om(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new oi(t,e)}function am(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ai(t,e)}function sm(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new si(t,e)}function um(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ui(t,e)}function cm(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ci(t,e)}function lm(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new li(t,e)}function hm(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new hi(t,e)}function fm(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new fi(t,e)}function pm(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new pi(t,e)}function dm(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),cp.call(this,t),this.type="catmullrom",this.closed=!0}function gm(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),cp.call(this,t),this.type="catmullrom"}function mm(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),cp.call(this,t),this.type="catmullrom"}function vm(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new qg(t)}function ym(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new kg(t,e)}function _m(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Fl(new uf(t.geometry),new Cl({color:void 0!==e?e:16777215}))}function bm(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Fl(new $l(t.geometry),new Cl({color:void 0!==e?e:16777215}))}function xm(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Yf(t)}function wm(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Zf(t)}ep.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(ep.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Lp.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Yi,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new Sn(i.x,i.y,i.z||0))}return e}}),Object.assign(Ap.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),dm.prototype=Object.create(cp.prototype),gm.prototype=Object.create(cp.prototype),mm.prototype=Object.create(cp.prototype),Object.assign(mm.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),wg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},dg.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Wf.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Hp.extractUrlBase(t)}}),Wf.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign($p.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Kd.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(br.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),eg.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(_n,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),_n.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),_n.ceilPowerOfTwo(t)}}),Object.assign(Cn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Gn.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Sn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),Dr.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},xn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Pr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Wr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Wr,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Wr.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Wr.getNormal(t,e,n,r)}}),Object.assign(Ip.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Wh(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new of(this,t)}}),Object.assign(bn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Sn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Yi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(or.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(or.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ml.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(bl.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),vl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(ep.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),io.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Pp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(ii.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===un},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(un)}}}),Object.assign(ii.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?un:sn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ei.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new ii(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)}}),Object.defineProperties(Ei.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Zc.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===un},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Zc.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?un:sn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Xh.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Hd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ni.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Jr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===_}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(bf.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(no.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Yc.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Yc.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(Nc.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(uo.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Rn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Wc.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Object.defineProperties(xd.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,n=new sd;return n.load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Cd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},so.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var Em={merge:function(t,e,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function Sm(){console.error("THREE.CanvasRenderer has been removed")}function Mm(){console.error("THREE.JSONLoader has been removed.")}Ln.crossOrigin=void 0,Ln.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new tp;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Ln.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Qf;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Ln.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ln.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Tm={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Cm(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}))},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"60ae":function(t,e,n){var r,i,o=n("da84"),a=n("b39a"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),a=n("7418"),s=n("d1e7"),u=n("7b0b"),c=n("44ad"),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,h=a.f,f=s.f;while(i>l){var p,d=c(arguments[l++]),g=h?o(d).concat(h(d)):o(d),m=g.length,v=0;while(m>v)p=g[v++],r&&!f.call(d,p)||(n[p]=d[p])}return n}:l},"621a":function(t,e,n){"use strict";var r=n("da84"),i=n("83ab"),o=n("ebb5").NATIVE_ARRAY_BUFFER,a=n("9112"),s=n("e2cc"),u=n("d039"),c=n("19aa"),l=n("a691"),h=n("50c4"),f=n("0b25"),p=n("77a7"),d=n("241c").f,g=n("9bf2").f,m=n("81d5"),v=n("d44e"),y=n("69f3"),_=y.get,b=y.set,x="ArrayBuffer",w="DataView",E="prototype",S="Wrong length",M="Wrong index",T=r[x],C=T,L=r[w],A=r.RangeError,I=p.pack,P=p.unpack,R=function(t){return[255&t]},O=function(t){return[255&t,t>>8&255]},N=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},D=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},F=function(t){return I(t,23,4)},B=function(t){return I(t,52,8)},k=function(t,e){g(t[E],e,{get:function(){return _(this)[e]}})},U=function(t,e,n,r){var i=f(n),o=_(t);if(i+e>o.byteLength)throw A(M);var a=_(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},j=function(t,e,n,r,i,o){var a=f(n),s=_(t);if(a+e>s.byteLength)throw A(M);for(var u=_(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),h=0;h<e;h++)u[c+h]=l[o?h:e-h-1]};if(o){if(!u((function(){T(1)}))||!u((function(){new T(-1)}))||u((function(){return new T,new T(1.5),new T(NaN),T.name!=x}))){C=function(t){return c(this,C),new T(f(t))};for(var G,z=C[E]=T[E],V=d(T),H=0;V.length>H;)(G=V[H++])in C||a(C,G,T[G]);z.constructor=C}var q=new L(new C(2)),W=L[E].setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||s(L[E],{setInt8:function(t,e){W.call(this,t,e<<24>>24)},setUint8:function(t,e){W.call(this,t,e<<24>>24)}},{unsafe:!0})}else C=function(t){c(this,C,x);var e=f(t);b(this,{bytes:m.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},L=function(t,e,n){c(this,L,w),c(t,C,w);var r=_(t).byteLength,o=l(e);if(o<0||o>r)throw A("Wrong offset");if(n=void 0===n?r-o:h(n),o+n>r)throw A(S);b(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(k(C,"byteLength"),k(L,"buffer"),k(L,"byteLength"),k(L,"byteOffset")),s(L[E],{getInt8:function(t){return U(this,1,t)[0]<<24>>24},getUint8:function(t){return U(this,1,t)[0]},getInt16:function(t){var e=U(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=U(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return D(U(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return D(U(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return P(U(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return P(U(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){j(this,1,t,R,e)},setUint8:function(t,e){j(this,1,t,R,e)},setInt16:function(t,e){j(this,2,t,O,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){j(this,2,t,O,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){j(this,4,t,N,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){j(this,4,t,N,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){j(this,4,t,F,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){j(this,8,t,B,e,arguments.length>2?arguments[2]:void 0)}});v(C,x),v(L,w),t.exports={ArrayBuffer:C,DataView:L}},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),a=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"662a":function(t,e,n){},"69f3":function(t,e,n){var r,i,o,a=n("7f9a"),s=n("da84"),u=n("861d"),c=n("9112"),l=n("5135"),h=n("f772"),f=n("d012"),p=s.WeakMap,d=function(t){return o(t)?i(t):r(t,{})},g=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var m=new p,v=m.get,y=m.has,_=m.set;r=function(t,e){return _.call(m,t,e),e},i=function(t){return v.call(m,t)||{}},o=function(t){return y.call(m,t)}}else{var b=h("state");f[b]=!0,r=function(t,e){return c(t,b,e),e},i=function(t){return l(t,b)?t[b]:{}},o=function(t){return l(t,b)}}t.exports={set:r,get:i,has:o,enforce:d,getterFor:g}},"6b7c":function(t,e,n){"use strict";e.__esModule=!0;var r=n("4897");e.default={methods:{t:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.t.apply(this,e)}}}},"6ed5":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=77)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},10:function(t,e){t.exports=n("f3ad")},13:function(t,e){t.exports=n("eedf")},15:function(t,e){t.exports=n("5128")},19:function(t,e){t.exports=n("4897")},2:function(t,e){t.exports=n("5924")},23:function(t,e){t.exports=n("41f8")},47:function(t,e){t.exports=n("722f")},6:function(t,e){t.exports=n("6b7c")},7:function(t,e){t.exports=n("8bbf")},77:function(t,e,n){"use strict";n.r(e);var r=n(7),i=n.n(r),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":t.title||"dialog"},on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[n("div",{staticClass:"el-message-box",class:[t.customClass,t.center&&"el-message-box--center"]},[null!==t.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[t.icon&&t.center?n("div",{class:["el-message-box__status",t.icon]}):t._e(),n("span",[t._v(t._s(t.title))])]),t.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.handleAction(t.distinguishCancelAndClose?"close":"cancel")},keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction(t.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):t._e()]):t._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[t.icon&&!t.center&&""!==t.message?n("div",{class:["el-message-box__status",t.icon]}):t._e(),""!==t.message?n("div",{staticClass:"el-message-box__message"},[t._t("default",[t.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:t._s(t.message)}}):n("p",[t._v(t._s(t.message))])])],2):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:t.inputType,placeholder:t.inputPlaceholder},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputEnter(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:t.editorErrorMessage?"visible":"hidden"}},[t._v(t._s(t.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[t.showCancelButton?n("el-button",{class:[t.cancelButtonClasses],attrs:{loading:t.cancelButtonLoading,round:t.roundButton,size:"small"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction("cancel")}},nativeOn:{click:function(e){t.handleAction("cancel")}}},[t._v("\n          "+t._s(t.cancelButtonText||t.t("el.messagebox.cancel"))+"\n        ")]):t._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[t.confirmButtonClasses],attrs:{loading:t.confirmButtonLoading,round:t.roundButton,size:"small"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction("confirm")}},nativeOn:{click:function(e){t.handleAction("confirm")}}},[t._v("\n          "+t._s(t.confirmButtonText||t.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},a=[];o._withStripped=!0;var s=n(15),u=n.n(s),c=n(6),l=n.n(c),h=n(10),f=n.n(h),p=n(13),d=n.n(p),g=n(2),m=n(19),v=n(47),y=n.n(v),_=void 0,b={success:"success",info:"info",warning:"warning",error:"error"},x={mixins:[u.a,l.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:f.a,ElButton:d.a},computed:{icon:function(){var t=this.type,e=this.iconClass;return e||(t&&b[t]?"el-icon-"+b[t]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var t=this,e=this.uid;return function(){t.$nextTick((function(){e===t.uid&&t.doClose()}))}},doClose:function(){var t=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),_.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){t.action&&t.callback(t.action,t)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(t){("prompt"!==this.$type||"confirm"!==t||this.validate())&&(this.action=t,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(t,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var t=this.inputPattern;if(t&&!t.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(m["t"])("el.messagebox.error"),Object(g["addClass"])(this.getInputElement(),"invalid"),!1;var e=this.inputValidator;if("function"===typeof e){var n=e(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(m["t"])("el.messagebox.error"),Object(g["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof n)return this.editorErrorMessage=n,Object(g["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(g["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var t=this.$el.querySelector(".el-message-box__btns .el-button"),e=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return t||e},getInputElement:function(){var t=this.$refs.input.$refs;return t.input||t.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(t){var e=this;this.$nextTick((function(n){"prompt"===e.$type&&null!==t&&e.validate()}))}},visible:function(t){var e=this;t&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){e.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,_=new y.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(t?setTimeout((function(){e.$refs.input&&e.$refs.input.$el&&e.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(g["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var t=this;this.$nextTick((function(){t.closeOnHashChange&&window.addEventListener("hashchange",t.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){_.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},w=x,E=n(0),S=Object(E["a"])(w,o,a,!1,null,null,null);S.options.__file="packages/message-box/src/main.vue";var M=S.exports,T=n(9),C=n.n(T),L=n(23),A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},P=i.a.extend(M),R=void 0,O=void 0,N=[],D=function(t){if(R){var e=R.callback;"function"===typeof e&&(O.showInput?e(O.inputValue,t):e(t)),R.resolve&&("confirm"===t?O.showInput?R.resolve({value:O.inputValue,action:t}):R.resolve(t):!R.reject||"cancel"!==t&&"close"!==t||R.reject(t))}},F=function(){O=new P({el:document.createElement("div")}),O.callback=D},B=function t(){if(O||F(),O.action="",(!O.visible||O.closeTimer)&&N.length>0){R=N.shift();var e=R.options;for(var n in e)e.hasOwnProperty(n)&&(O[n]=e[n]);void 0===e.callback&&(O.callback=D);var r=O.callback;O.callback=function(e,n){r(e,n),t()},Object(L["isVNode"])(O.message)?(O.$slots.default=[O.message],O.message=null):delete O.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(t){void 0===O[t]&&(O[t]=!0)})),document.body.appendChild(O.$el),i.a.nextTick((function(){O.visible=!0}))}},k=function t(e,n){if(!i.a.prototype.$isServer){if("string"===typeof e||Object(L["isVNode"])(e)?(e={message:e},"string"===typeof arguments[1]&&(e.title=arguments[1])):e.callback&&!n&&(n=e.callback),"undefined"!==typeof Promise)return new Promise((function(r,i){N.push({options:C()({},I,t.defaults,e),callback:n,resolve:r,reject:i}),B()}));N.push({options:C()({},I,t.defaults,e),callback:n}),B()}};k.setDefaults=function(t){k.defaults=t},k.alert=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":A(e))?(n=e,e=""):void 0===e&&(e=""),k(C()({title:e,message:t,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},k.confirm=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":A(e))?(n=e,e=""):void 0===e&&(e=""),k(C()({title:e,message:t,$type:"confirm",showCancelButton:!0},n))},k.prompt=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":A(e))?(n=e,e=""):void 0===e&&(e=""),k(C()({title:e,message:t,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},k.close=function(){O.doClose(),O.visible=!1,N=[],R=null};var U=k;e["default"]=U},9:function(t,e){t.exports=n("7f4d")}})},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),o=n("5135"),a=n("ce4e"),s=n("8925"),u=n("69f3"),c=u.get,l=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),l(n).source=h.join("string"==typeof e?e:"")),t!==r?(u?!f&&t[e]&&(c=!0):delete t[e],c?t[e]=n:i(t,e,n)):c?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"6fe5":function(t,e,n){var r=n("da84"),i=n("58a8").trim,o=n("5899"),a=r.parseFloat,s=1/a(o+"-0")!==-1/0;t.exports=s?function(t){var e=i(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},7156:function(t,e,n){var r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},"722f":function(t,e,n){"use strict";e.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n("e452"),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}var s,u=u||{};u.Dialog=function(t,e,n){var i=this;if(this.dialogNode=t,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"===typeof e?this.focusAfterClosed=document.getElementById(e):"object"===("undefined"===typeof e?"undefined":r(e))?this.focusAfterClosed=e:this.focusAfterClosed=null,"string"===typeof n?this.focusFirst=document.getElementById(n):"object"===("undefined"===typeof n?"undefined":r(n))?this.focusFirst=n:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():o.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,s=function(t){i.trapFocus(t)},this.addListeners()},u.Dialog.prototype.addListeners=function(){document.addEventListener("focus",s,!0)},u.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",s,!0)},u.Dialog.prototype.closeDialog=function(){var t=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){t.focusAfterClosed.focus()}))},u.Dialog.prototype.trapFocus=function(t){o.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(t.target)?this.lastFocus=t.target:(o.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&o.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},e.default=u.Dialog},7285:function(t,e,n){"use strict";var r=n("662a"),i=n.n(r);i.a},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),o=n("c032"),a=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},"746fb":function(t,e,n){"use strict";n("7db0"),n("e260"),n("c19f"),n("ace4"),n("d3b7"),n("e6cf"),n("3ca3"),n("9911"),n("159b"),n("ddb0"),n("2b3d");var r=n("3835"),i=n("d4ec"),o=n("bee2"),a=n("ade3"),s=n("5a89"),u=function(){var t=0,e=document.createElement("div");function n(t){return e.appendChild(t.dom),t}function r(n){for(var r=0;r<e.children.length;r++)e.children[r].style.display=r===n?"block":"none";t=n}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",(function(n){n.preventDefault(),r(++t%e.children.length)}),!1);var i=(performance||Date).now(),o=i,a=0,s=n(new u.Panel("FPS","#0ff","#002")),c=n(new u.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=n(new u.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:e,addPanel:n,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(c.update(t-i,200),t>=o+1e3&&(s.update(1e3*a/(t-o),100),o=t,a=0,l)){var e=performance.memory;l.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){i=this.end()},domElement:e,setMode:r}};u.Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,u=48*a,c=3*a,l=2*a,h=3*a,f=15*a,p=74*a,d=30*a,g=document.createElement("canvas");g.width=s,g.height=u,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*a+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,s,u),m.fillStyle=e,m.fillText(t,c,l),m.fillRect(h,f,p,d),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(h,f,p,d),{dom:g,update:function(u,v){r=Math.min(r,u),i=Math.max(i,u),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,s,f),m.fillStyle=e,m.fillText(o(u)+" "+t+" ("+o(r)+"-"+o(i)+")",c,l),m.drawImage(g,h+a,f,p-a,d,h,f,p-a,d),m.fillRect(h+p-a,f,a,d),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(h+p-a,f,a,o((1-u/v)*d))}}};var c=u,l=function(t,e){void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new s["Vector3"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:s["MOUSE"].ROTATE,MIDDLE:s["MOUSE"].DOLLY,RIGHT:s["MOUSE"].PAN},this.touches={ONE:s["TOUCH"].ROTATE,TWO:s["TOUCH"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),u=a.NONE},this.update=function(){var e=new s["Vector3"],i=(new s["Quaternion"]).setFromUnitVectors(t.up,new s["Vector3"](0,1,0)),o=i.clone().inverse(),g=new s["Vector3"],m=new s["Quaternion"];return function(){var t=n.object.position;return e.copy(t).sub(n.target),e.applyQuaternion(i),l.setFromVector3(e),n.autoRotate&&u===a.NONE&&T(S()),n.enableDamping?(l.theta+=h.theta*n.dampingFactor,l.phi+=h.phi*n.dampingFactor):(l.theta+=h.theta,l.phi+=h.phi),l.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=f,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),e.setFromSpherical(l),e.applyQuaternion(o),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),f=1,!!(d||g.distanceToSquared(n.object.position)>c||8*(1-m.dot(n.object.quaternion))>c)&&(n.dispatchEvent(r),g.copy(n.object.position),m.copy(n.object.quaternion),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",st,!1),n.domElement.removeEventListener("mousedown",Q,!1),n.domElement.removeEventListener("wheel",nt,!1),n.domElement.removeEventListener("touchstart",it,!1),n.domElement.removeEventListener("touchend",at,!1),n.domElement.removeEventListener("touchmove",ot,!1),document.removeEventListener("mousemove",tt,!1),document.removeEventListener("mouseup",et,!1),n.domElement.removeEventListener("keydown",rt,!1)};var n=this,r={type:"change"},i={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},u=a.NONE,c=1e-6,l=new s["Spherical"],h=new s["Spherical"],f=1,p=new s["Vector3"],d=!1,g=new s["Vector2"],m=new s["Vector2"],v=new s["Vector2"],y=new s["Vector2"],_=new s["Vector2"],b=new s["Vector2"],x=new s["Vector2"],w=new s["Vector2"],E=new s["Vector2"];function S(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function T(t){h.theta-=t}function C(t){h.phi-=t}var L=function(){var t=new s["Vector3"];return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),p.add(t)}}(),A=function(){var t=new s["Vector3"];return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),p.add(t)}}(),I=function(){var t=new s["Vector3"];return function(e,r){var i=n.domElement;if(n.object.isPerspectiveCamera){var o=n.object.position;t.copy(o).sub(n.target);var a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),L(2*e*a/i.clientHeight,n.object.matrix),A(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),A(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function P(t){n.object.isPerspectiveCamera?f/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){n.object.isPerspectiveCamera?f*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(t){g.set(t.clientX,t.clientY)}function N(t){x.set(t.clientX,t.clientY)}function D(t){y.set(t.clientX,t.clientY)}function F(t){m.set(t.clientX,t.clientY),v.subVectors(m,g).multiplyScalar(n.rotateSpeed);var e=n.domElement;T(2*Math.PI*v.x/e.clientHeight),C(2*Math.PI*v.y/e.clientHeight),g.copy(m),n.update()}function B(t){w.set(t.clientX,t.clientY),E.subVectors(w,x),E.y>0?P(M()):E.y<0&&R(M()),x.copy(w),n.update()}function k(t){_.set(t.clientX,t.clientY),b.subVectors(_,y).multiplyScalar(n.panSpeed),I(b.x,b.y),y.copy(_),n.update()}function U(){}function j(t){t.deltaY<0?R(M()):t.deltaY>0&&P(M()),n.update()}function G(t){var e=!1;switch(t.keyCode){case n.keys.UP:I(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:I(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:I(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:I(-n.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),n.update())}function z(t){if(1==t.touches.length)g.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);g.set(e,n)}}function V(t){if(1==t.touches.length)y.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);y.set(e,n)}}function H(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);x.set(0,r)}function q(t){n.enableZoom&&H(t),n.enablePan&&V(t)}function W(t){n.enableZoom&&H(t),n.enableRotate&&z(t)}function X(t){if(1==t.touches.length)m.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),r=.5*(t.touches[0].pageY+t.touches[1].pageY);m.set(e,r)}v.subVectors(m,g).multiplyScalar(n.rotateSpeed);var i=n.domElement;T(2*Math.PI*v.x/i.clientHeight),C(2*Math.PI*v.y/i.clientHeight),g.copy(m)}function Y(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),r=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,r)}b.subVectors(_,y).multiplyScalar(n.panSpeed),I(b.x,b.y),y.copy(_)}function $(t){var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+r*r);w.set(0,i),E.set(0,Math.pow(w.y/x.y,n.zoomSpeed)),P(E.y),x.copy(w)}function J(t){n.enableZoom&&$(t),n.enablePan&&Y(t)}function Z(t){n.enableZoom&&$(t),n.enableRotate&&X(t)}function K(){}function Q(t){if(!1!==n.enabled){switch(t.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),t.button){case 0:switch(n.mouseButtons.LEFT){case s["MOUSE"].ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;D(t),u=a.PAN}else{if(!1===n.enableRotate)return;O(t),u=a.ROTATE}break;case s["MOUSE"].PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;O(t),u=a.ROTATE}else{if(!1===n.enablePan)return;D(t),u=a.PAN}break;default:u=a.NONE}break;case 1:switch(n.mouseButtons.MIDDLE){case s["MOUSE"].DOLLY:if(!1===n.enableZoom)return;N(t),u=a.DOLLY;break;default:u=a.NONE}break;case 2:switch(n.mouseButtons.RIGHT){case s["MOUSE"].ROTATE:if(!1===n.enableRotate)return;O(t),u=a.ROTATE;break;case s["MOUSE"].PAN:if(!1===n.enablePan)return;D(t),u=a.PAN;break;default:u=a.NONE}break}u!==a.NONE&&(document.addEventListener("mousemove",tt,!1),document.addEventListener("mouseup",et,!1),n.dispatchEvent(i))}}function tt(t){if(!1!==n.enabled)switch(t.preventDefault(),u){case a.ROTATE:if(!1===n.enableRotate)return;F(t);break;case a.DOLLY:if(!1===n.enableZoom)return;B(t);break;case a.PAN:if(!1===n.enablePan)return;k(t);break}}function et(t){!1!==n.enabled&&(U(t),document.removeEventListener("mousemove",tt,!1),document.removeEventListener("mouseup",et,!1),n.dispatchEvent(o),u=a.NONE)}function nt(t){!1===n.enabled||!1===n.enableZoom||u!==a.NONE&&u!==a.ROTATE||(t.preventDefault(),t.stopPropagation(),n.dispatchEvent(i),j(t),n.dispatchEvent(o))}function rt(t){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&G(t)}function it(t){if(!1!==n.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(n.touches.ONE){case s["TOUCH"].ROTATE:if(!1===n.enableRotate)return;z(t),u=a.TOUCH_ROTATE;break;case s["TOUCH"].PAN:if(!1===n.enablePan)return;V(t),u=a.TOUCH_PAN;break;default:u=a.NONE}break;case 2:switch(n.touches.TWO){case s["TOUCH"].DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;q(t),u=a.TOUCH_DOLLY_PAN;break;case s["TOUCH"].DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;W(t),u=a.TOUCH_DOLLY_ROTATE;break;default:u=a.NONE}break;default:u=a.NONE}u!==a.NONE&&n.dispatchEvent(i)}}function ot(t){if(!1!==n.enabled)switch(t.preventDefault(),t.stopPropagation(),u){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;X(t),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;Y(t),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;J(t),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;Z(t),n.update();break;default:u=a.NONE}}function at(t){!1!==n.enabled&&(K(t),n.dispatchEvent(o),u=a.NONE)}function st(t){!1!==n.enabled&&t.preventDefault()}n.domElement.addEventListener("contextmenu",st,!1),n.domElement.addEventListener("mousedown",Q,!1),n.domElement.addEventListener("wheel",nt,!1),n.domElement.addEventListener("touchstart",it,!1),n.domElement.addEventListener("touchend",at,!1),n.domElement.addEventListener("touchmove",ot,!1),n.domElement.addEventListener("keydown",rt,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};l.prototype=Object.create(s["EventDispatcher"].prototype),l.prototype.constructor=l;var h=function(t,e){l.call(this,t,e),this.mouseButtons.LEFT=s["MOUSE"].PAN,this.mouseButtons.RIGHT=s["MOUSE"].ROTATE,this.touches.ONE=s["TOUCH"].PAN,this.touches.TWO=s["TOUCH"].DOLLY_ROTATE};h.prototype=Object.create(s["EventDispatcher"].prototype),h.prototype.constructor=h;var f=function(t){s["Object3D"].call(this),this.element=t,this.element.style.position="absolute",this.addEventListener("removed",(function(){this.traverse((function(t){t.element instanceof Element&&null!==t.element.parentNode&&t.element.parentNode.removeChild(t.element)}))}))};f.prototype=Object.create(s["Object3D"].prototype),f.prototype.constructor=f;var p=function(){var t,e,n,r,i=new s["Vector3"],o=new s["Matrix4"],a=new s["Matrix4"],u={objects:new WeakMap},c=document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:t,height:e}},this.setSize=function(i,o){t=i,e=o,n=t/2,r=e/2,c.style.width=i+"px",c.style.height=o+"px"};var l=function(t,e){if(t instanceof f){i.setFromMatrixPosition(t.matrixWorld),i.applyMatrix4(a);var o=t.element,s="translate(-50%,-50%) translate("+(i.x*n+n)+"px,"+(-i.y*r+r)+"px)";o.style.WebkitTransform=s,o.style.MozTransform=s,o.style.oTransform=s,o.style.transform=s,o.style.display=t.visible&&i.z>=-1&&i.z<=1?"":"none";var p={distanceToCameraSquared:h(e,t)};u.objects.set(t,p),o.parentNode!==c&&c.appendChild(o)}for(var d=0,g=t.children.length;d<g;d++)l(t.children[d],e)},h=function(){var t=new s["Vector3"],e=new s["Vector3"];return function(n,r){return t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(r.matrixWorld),t.distanceToSquared(e)}}(),p=function(t){var e=[];return t.traverse((function(t){t instanceof f&&e.push(t)})),e},d=function(t){for(var e=p(t).sort((function(t,e){var n=u.objects.get(t).distanceToCameraSquared,r=u.objects.get(e).distanceToCameraSquared;return n-r})),n=e.length,r=0,i=e.length;r<i;r++)e[r].element.style.zIndex=n-r};this.render=function(t,e){t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),o.copy(e.matrixWorldInverse),a.multiplyMatrices(e.projectionMatrix,o),l(t,e),d(t)}},d=function(){function t(t){s["Loader"].call(this,t),this.dracoLoader=null,this.ddsLoader=null}function e(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype=Object.assign(Object.create(s["Loader"].prototype),{constructor:t,load:function(t,e,n,r){var i,o=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:s["LoaderUtils"].extractUrlBase(t),o.manager.itemStart(t);var a=function(e){r?r(e):console.error(e),o.manager.itemError(t),o.manager.itemEnd(t)},u=new s["FileLoader"](o.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),"use-credentials"===o.crossOrigin&&u.setWithCredentials(!0),u.load(t,(function(n){try{o.parse(n,i,(function(n){e(n),o.manager.itemEnd(t)}),a)}catch(r){a(r)}}),n,a)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},parse:function(t,e,u,c){var g,m={};if("string"===typeof t)g=t;else{var v=s["LoaderUtils"].decodeText(new Uint8Array(t,0,4));if(v===a){try{m[n.KHR_BINARY_GLTF]=new l(t)}catch(E){return void(c&&c(E))}g=m[n.KHR_BINARY_GLTF].content}else g=s["LoaderUtils"].decodeText(new Uint8Array(t))}var y=JSON.parse(g);if(void 0===y.asset||y.asset.version[0]<2)c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(y.extensionsUsed)for(var _=0;_<y.extensionsUsed.length;++_){var b=y.extensionsUsed[_],x=y.extensionsRequired||[];switch(b){case n.KHR_LIGHTS_PUNCTUAL:m[b]=new i(y);break;case n.KHR_MATERIALS_UNLIT:m[b]=new o;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[b]=new p;break;case n.KHR_DRACO_MESH_COMPRESSION:m[b]=new h(y,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:m[b]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:m[b]=new f;break;case n.KHR_MESH_QUANTIZATION:m[b]=new d;break;default:x.indexOf(b)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}var w=new D(y,m,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});w.parse(u,c)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=t}function i(t){this.name=n.KHR_LIGHTS_PUNCTUAL;var e=t.extensions&&t.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=e.lights||[]}function o(){this.name=n.KHR_MATERIALS_UNLIT}i.prototype.loadLight=function(t){var e,n=this.lightDefs[t],r=new s["Color"](16777215);void 0!==n.color&&r.fromArray(n.color);var i=void 0!==n.range?n.range:0;switch(n.type){case"directional":e=new s["DirectionalLight"](r),e.target.position.set(0,0,-1),e.add(e.target);break;case"point":e=new s["PointLight"](r),e.distance=i;break;case"spot":e=new s["SpotLight"](r),e.distance=i,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,e.angle=n.spot.outerConeAngle,e.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,e.target.position.set(0,0,-1),e.add(e.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return e.position.set(0,0,0),e.decay=2,void 0!==n.intensity&&(e.intensity=n.intensity),e.name=n.name||"light_"+t,Promise.resolve(e)},o.prototype.getMaterialType=function(){return s["MeshBasicMaterial"]},o.prototype.extendParams=function(t,e,n){var r=[];t.color=new s["Color"](1,1,1),t.opacity=1;var i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var o=i.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(t,"map",i.baseColorTexture))}return Promise.all(r)};var a="glTF",u=12,c={JSON:1313821514,BIN:5130562};function l(t){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,u);if(this.header={magic:s["LoaderUtils"].decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==a)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var r=new DataView(t,u),i=0;while(i<r.byteLength){var o=r.getUint32(i,!0);i+=4;var l=r.getUint32(i,!0);if(i+=4,l===c.JSON){var h=new Uint8Array(t,u+i,o);this.content=s["LoaderUtils"].decodeText(h)}else if(l===c.BIN){var f=u+i;this.body=t.slice(f,f+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e}function f(){this.name=n.KHR_TEXTURE_TRANSFORM}function p(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return s["ShaderMaterial"]},extendParams:function(t,e,n){var r=e.extensions[this.name],i=s["ShaderLib"]["standard"],o=s["UniformsUtils"].clone(i.uniforms),a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),u=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),f=i.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",u).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",h);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new s["Color"]).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},t.vertexShader=i.vertexShader,t.fragmentShader=f,t.uniforms=o,t.defines={STANDARD:""},t.color=new s["Color"](1,1,1),t.opacity=1;var p=[];if(Array.isArray(r.diffuseFactor)){var d=r.diffuseFactor;t.color.fromArray(d),t.opacity=d[3]}if(void 0!==r.diffuseTexture&&p.push(n.assignTexture(t,"map",r.diffuseTexture)),t.emissive=new s["Color"](0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new s["Color"](1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var g=r.specularGlossinessTexture;p.push(n.assignTexture(t,"glossinessMap",g)),p.push(n.assignTexture(t,"specularMap",g))}return Promise.all(p)},createMaterial:function(t){var e=new s["ShaderMaterial"]({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return e.isGLTFSpecularGlossinessMaterial=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e.extensions.derivatives=!0,e},cloneMaterial:function(t){var e=t.clone();e.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++){var o=t[n[r]];e[n[r]]=o&&o.isColor?o.clone():o}return e},refreshUniforms:function(t,e,n,r,i){if(!0===i.isGLTFSpecularGlossinessMaterial){var o,a=i.uniforms,s=i.defines;a.opacity.value=i.opacity,a.diffuse.value.copy(i.color),a.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),a.map.value=i.map,a.specularMap.value=i.specularMap,a.alphaMap.value=i.alphaMap,a.lightMap.value=i.lightMap,a.lightMapIntensity.value=i.lightMapIntensity,a.aoMap.value=i.aoMap,a.aoMapIntensity.value=i.aoMapIntensity,i.map?o=i.map:i.specularMap?o=i.specularMap:i.displacementMap?o=i.displacementMap:i.normalMap?o=i.normalMap:i.bumpMap?o=i.bumpMap:i.glossinessMap?o=i.glossinessMap:i.alphaMap?o=i.alphaMap:i.emissiveMap&&(o=i.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),a.uvTransform.value.copy(o.matrix)),i.envMap&&(a.envMap.value=i.envMap,a.envMapIntensity.value=i.envMapIntensity,a.flipEnvMap.value=i.envMap.isCubeTexture?-1:1,a.reflectivity.value=i.reflectivity,a.refractionRatio.value=i.refractionRatio,a.maxMipLevel.value=t.properties.get(i.envMap).__maxMipLevel),a.specular.value.copy(i.specular),a.glossiness.value=i.glossiness,a.glossinessMap.value=i.glossinessMap,a.emissiveMap.value=i.emissiveMap,a.bumpMap.value=i.bumpMap,a.normalMap.value=i.normalMap,a.displacementMap.value=i.displacementMap,a.displacementScale.value=i.displacementScale,a.displacementBias.value=i.displacementBias,null!==a.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===a.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function d(){this.name=n.KHR_MESH_QUANTIZATION}function g(t,e,n,r){s["Interpolant"].call(this,t,e,n,r)}h.prototype.decodePrimitive=function(t,e){var n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},u={};for(var c in o){var l=w[c]||c.toLowerCase();a[l]=o[c]}for(c in t.attributes){l=w[c]||c.toLowerCase();if(void 0!==o[c]){var h=n.accessors[t.attributes[c]],f=y[h.componentType];u[l]=f,s[l]=!0===h.normalized}}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(var n in t.attributes){var r=t.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}e(t)}),a,u)}))}))},f.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},g.prototype=Object.create(s["Interpolant"].prototype),g.prototype.constructor=g,g.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r,o=0;o!==r;o++)e[o]=n[i+o];return e},g.prototype.beforeStart_=g.prototype.copySampleValue_,g.prototype.afterEnd_=g.prototype.copySampleValue_,g.prototype.interpolate_=function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,c=r-e,l=(n-e)/c,h=l*l,f=h*l,p=t*u,d=p-u,g=-2*f+3*h,m=f-h,v=1-g,y=m-h+l,_=0;_!==a;_++){var b=o[d+_+a],x=o[d+_+s]*c,w=o[p+_+a],E=o[p+_]*c;i[_]=v*b+y*x+g*w+m*E}return i};var m,v={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},y={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_={9728:s["NearestFilter"],9729:s["LinearFilter"],9984:s["NearestMipmapNearestFilter"],9985:s["LinearMipmapNearestFilter"],9986:s["NearestMipmapLinearFilter"],9987:s["LinearMipmapLinearFilter"]},b={33071:s["ClampToEdgeWrapping"],33648:s["MirroredRepeatWrapping"],10497:s["RepeatWrapping"]},x={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},w={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},E={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},S={CUBICSPLINE:void 0,LINEAR:s["InterpolateLinear"],STEP:s["InterpolateDiscrete"]},M={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},T={"image/png":s["RGBAFormat"],"image/jpeg":s["RGBFormat"]};function C(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:e+t)}function L(){return m=m||new s["MeshStandardMaterial"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:s["FrontSide"]}),m}function A(t,e,n){for(var r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function I(t,e){void 0!==e.extras&&("object"===typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function P(t,e,n){for(var r=!1,i=!1,o=0,a=e.length;o<a;o++){var s=e[o];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(t);var u=[],c=[];for(o=0,a=e.length;o<a;o++){s=e[o];if(r){var l=void 0!==s.POSITION?n.getDependency("accessor",s.POSITION):t.attributes.position;u.push(l)}if(i){l=void 0!==s.NORMAL?n.getDependency("accessor",s.NORMAL):t.attributes.normal;c.push(l)}}return Promise.all([Promise.all(u),Promise.all(c)]).then((function(e){var n=e[0],o=e[1];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=o),t.morphTargetsRelative=!0,t}))}function R(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length){t.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)t.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function O(t){var e,r=t.extensions&&t.extensions[n.KHR_DRACO_MESH_COMPRESSION];return e=r?"draco:"+r.bufferView+":"+r.indices+":"+N(r.attributes):t.indices+":"+N(t.attributes)+":"+t.mode,e}function N(t){for(var e="",n=Object.keys(t).sort(),r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function D(t,n,r){this.json=t||{},this.extensions=n||{},this.options=r||{},this.cache=new e,this.primitiveCache={},this.textureLoader=new s["TextureLoader"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new s["FileLoader"](this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function F(t,e,n){var r=e.attributes,i=new s["Box3"];if(void 0!==r.POSITION){var o=n.json.accessors[r.POSITION],a=o.min,u=o.max;i.set(new s["Vector3"](a[0],a[1],a[2]),new s["Vector3"](u[0],u[1],u[2]));var c=e.targets;if(void 0!==c)for(var l=new s["Vector3"],h=0,f=c.length;h<f;h++){var p=c[h];if(void 0!==p.POSITION){o=n.json.accessors[p.POSITION],a=o.min,u=o.max;l.setX(Math.max(Math.abs(a[0]),Math.abs(u[0]))),l.setY(Math.max(Math.abs(a[1]),Math.abs(u[1]))),l.setZ(Math.max(Math.abs(a[2]),Math.abs(u[2]))),i.expandByVector(l)}}t.boundingBox=i;var d=new s["Sphere"];i.getCenter(d.center),d.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=d}}function B(t,e,n){var r=e.attributes,i=[];function o(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(var a in r){var s=w[a]||a.toLowerCase();s in t.attributes||i.push(o(r[a],s))}if(void 0!==e.indices&&!t.index){var u=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));i.push(u)}return I(t,e),F(t,e,n),Promise.all(i).then((function(){return void 0!==e.targets?P(t,e.targets,n):t}))}return D.prototype.parse=function(t,e){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var o={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};A(i,o,r),I(o,r),t(o)})).catch(e)},D.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=e.length;o<a;o++)for(var s=e[o].joints,u=0,c=s.length;u<c;u++)t[s[u]].isBone=!0;for(var l=0,h=t.length;l<h;l++){var f=t[l];void 0!==f.mesh&&(void 0===r[f.mesh]&&(r[f.mesh]=i[f.mesh]=0),r[f.mesh]++,void 0!==f.skin&&(n[f.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},D.prototype.getDependency=function(t,e){var r=t+":"+e,i=this.cache.get(r);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this.loadMesh(e);break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this.loadBufferView(e);break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this.loadMaterial(e);break;case"texture":i=this.loadTexture(e);break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;case"light":i=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(r,i)}return i},D.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e},D.prototype.loadBuffer=function(t){var e=this.json.buffers[t],r=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(t,n){r.load(C(e.uri,i.path),t,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))},D.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))},D.prototype.loadAccessor=function(t){var e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(t){var i,o,a=t[0],u=x[r.type],c=y[r.componentType],l=c.BYTES_PER_ELEMENT,h=l*u,f=r.byteOffset||0,p=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(p&&p!==h){var g=Math.floor(f/p),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count,v=e.cache.get(m);v||(i=new c(a,g*p,r.count*p/l),v=new s["InterleavedBuffer"](i,p/l),e.cache.add(m,v)),o=new s["InterleavedBufferAttribute"](v,u,f%p/l,d)}else i=null===a?new c(r.count*u):new c(a,f,r.count*u),o=new s["BufferAttribute"](i,u,d);if(void 0!==r.sparse){var _=x.SCALAR,b=y[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,S=new b(t[1],w,r.sparse.count*_),M=new c(t[2],E,r.sparse.count*u);null!==a&&(o=new s["BufferAttribute"](o.array.slice(),o.itemSize,o.normalized));for(var T=0,C=S.length;T<C;T++){var L=S[T];if(o.setX(L,M[T*u]),u>=2&&o.setY(L,M[T*u+1]),u>=3&&o.setZ(L,M[T*u+2]),u>=4&&o.setW(L,M[T*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},D.prototype.loadTexture=function(t){var e,r=this,i=this.json,o=this.options,a=this.textureLoader,u=window.URL||window.webkitURL,c=i.textures[t],l=c.extensions||{};e=l[n.MSFT_TEXTURE_DDS]?i.images[l[n.MSFT_TEXTURE_DDS].source]:i.images[c.source];var h=e.uri,f=!1;return void 0!==e.bufferView&&(h=r.getDependency("bufferView",e.bufferView).then((function(t){f=!0;var n=new Blob([t],{type:e.mimeType});return h=u.createObjectURL(n),h}))),Promise.resolve(h).then((function(t){var e=o.manager.getHandler(t);return e||(e=l[n.MSFT_TEXTURE_DDS]?r.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise((function(n,r){e.load(C(t,o.path),n,void 0,r)}))})).then((function(t){!0===f&&u.revokeObjectURL(h),t.flipY=!1,void 0!==c.name&&(t.name=c.name),e.mimeType in T&&(t.format=T[e.mimeType]);var n=i.samplers||{},r=n[c.sampler]||{};return t.magFilter=_[r.magFilter]||s["LinearFilter"],t.minFilter=_[r.minFilter]||s["LinearMipmapLinearFilter"],t.wrapS=b[r.wrapS]||s["RepeatWrapping"],t.wrapT=b[r.wrapT]||s["RepeatWrapping"],t}))},D.prototype.assignTexture=function(t,e,r){var i=this;return this.getDependency("texture",r.index).then((function(o){if(!o.isCompressedTexture)switch(e){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=s["RGBFormat"];break}if(i.extensions[n.KHR_TEXTURE_TRANSFORM]){var a=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;a&&(o=i.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a))}t[e]=o}))},D.prototype.assignFinalMaterial=function(t){var e=t.geometry,r=t.material,i=this.extensions,o=void 0!==e.attributes.tangent,a=void 0!==e.attributes.color,u=void 0===e.attributes.normal,c=!0===t.isSkinnedMesh,l=Object.keys(e.morphAttributes).length>0,h=l&&void 0!==e.morphAttributes.normal;if(t.isPoints){var f="PointsMaterial:"+r.uuid,p=this.cache.get(f);p||(p=new s["PointsMaterial"],s["Material"].prototype.copy.call(p,r),p.color.copy(r.color),p.map=r.map,p.sizeAttenuation=!1,this.cache.add(f,p)),r=p}else if(t.isLine){f="LineBasicMaterial:"+r.uuid;var d=this.cache.get(f);d||(d=new s["LineBasicMaterial"],s["Material"].prototype.copy.call(d,r),d.color.copy(r.color),this.cache.add(f,d)),r=d}if(o||a||u||c||l){f="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(f+="specular-glossiness:"),c&&(f+="skinning:"),o&&(f+="vertex-tangents:"),a&&(f+="vertex-colors:"),u&&(f+="flat-shading:"),l&&(f+="morph-targets:"),h&&(f+="morph-normals:");var g=this.cache.get(f);g||(g=r.isGLTFSpecularGlossinessMaterial?i[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(r):r.clone(),c&&(g.skinning=!0),o&&(g.vertexTangents=!0),a&&(g.vertexColors=s["VertexColors"]),u&&(g.flatShading=!0),l&&(g.morphTargets=!0),h&&(g.morphNormals=!0),this.cache.add(f,g)),r=g}r.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),e.setAttribute("uv2",new s["BufferAttribute"](e.attributes.uv.array,2))),r.isGLTFSpecularGlossinessMaterial&&(t.onBeforeRender=i[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),t.material=r},D.prototype.loadMaterial=function(t){var e,r=this,i=this.json,o=this.extensions,a=i.materials[t],u={},c=a.extensions||{},l=[];if(c[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=h.getMaterialType(),l.push(h.extendParams(u,a,r))}else if(c[n.KHR_MATERIALS_UNLIT]){var f=o[n.KHR_MATERIALS_UNLIT];e=f.getMaterialType(),l.push(f.extendParams(u,a,r))}else{e=s["MeshStandardMaterial"];var p=a.pbrMetallicRoughness||{};if(u.color=new s["Color"](1,1,1),u.opacity=1,Array.isArray(p.baseColorFactor)){var d=p.baseColorFactor;u.color.fromArray(d),u.opacity=d[3]}void 0!==p.baseColorTexture&&l.push(r.assignTexture(u,"map",p.baseColorTexture)),u.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,u.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(l.push(r.assignTexture(u,"metalnessMap",p.metallicRoughnessTexture)),l.push(r.assignTexture(u,"roughnessMap",p.metallicRoughnessTexture)))}!0===a.doubleSided&&(u.side=s["DoubleSide"]);var g=a.alphaMode||M.OPAQUE;return g===M.BLEND?u.transparent=!0:(u.transparent=!1,g===M.MASK&&(u.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&e!==s["MeshBasicMaterial"]&&(l.push(r.assignTexture(u,"normalMap",a.normalTexture)),u.normalScale=new s["Vector2"](1,1),void 0!==a.normalTexture.scale&&u.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&e!==s["MeshBasicMaterial"]&&(l.push(r.assignTexture(u,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(u.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&e!==s["MeshBasicMaterial"]&&(u.emissive=(new s["Color"]).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&e!==s["MeshBasicMaterial"]&&l.push(r.assignTexture(u,"emissiveMap",a.emissiveTexture)),Promise.all(l).then((function(){var t;return t=e===s["ShaderMaterial"]?o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(u):new e(u),void 0!==a.name&&(t.name=a.name),t.map&&(t.map.encoding=s["sRGBEncoding"]),t.emissiveMap&&(t.emissiveMap.encoding=s["sRGBEncoding"]),t.specularMap&&(t.specularMap.encoding=s["sRGBEncoding"]),I(t,a),a.extensions&&A(o,t,a),t}))},D.prototype.loadGeometries=function(t){var e=this,r=this.extensions,i=this.primitiveCache;function o(t){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return B(n,t,e)}))}for(var a=[],u=0,c=t.length;u<c;u++){var l,h=t[u],f=O(h),p=i[f];if(p)a.push(p.promise);else l=h.extensions&&h.extensions[n.KHR_DRACO_MESH_COMPRESSION]?o(h):B(new s["BufferGeometry"],h,e),i[f]={primitive:h,promise:l},a.push(l)}return Promise.all(a)},D.prototype.loadMesh=function(t){for(var e=this,n=this.json,r=n.meshes[t],i=r.primitives,o=[],a=0,u=i.length;a<u;a++){var c=void 0===i[a].material?L():this.getDependency("material",i[a].material);o.push(c)}return Promise.all(o).then((function(n){return e.loadGeometries(i).then((function(o){for(var a=[],u=0,c=o.length;u<c;u++){var l,h=o[u],f=i[u],p=n[u];if(f.mode===v.TRIANGLES||f.mode===v.TRIANGLE_STRIP||f.mode===v.TRIANGLE_FAN||void 0===f.mode)l=!0===r.isSkinnedMesh?new s["SkinnedMesh"](h,p):new s["Mesh"](h,p),!0!==l.isSkinnedMesh||l.geometry.attributes.skinWeight.normalized||l.normalizeSkinWeights(),f.mode===v.TRIANGLE_STRIP?l.drawMode=s["TriangleStripDrawMode"]:f.mode===v.TRIANGLE_FAN&&(l.drawMode=s["TriangleFanDrawMode"]);else if(f.mode===v.LINES)l=new s["LineSegments"](h,p);else if(f.mode===v.LINE_STRIP)l=new s["Line"](h,p);else if(f.mode===v.LINE_LOOP)l=new s["LineLoop"](h,p);else{if(f.mode!==v.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);l=new s["Points"](h,p)}Object.keys(l.geometry.morphAttributes).length>0&&R(l,r),l.name=r.name||"mesh_"+t,o.length>1&&(l.name+="_"+u),I(l,r),e.assignFinalMaterial(l),a.push(l)}if(1===a.length)return a[0];var d=new s["Group"];for(u=0,c=a.length;u<c;u++)d.add(a[u]);return d}))}))},D.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new s["PerspectiveCamera"](s["Math"].radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new s["OrthographicCamera"](r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==n.name&&(e.name=n.name),I(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},D.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))},D.prototype.loadAnimation=function(t){for(var e=this.json,n=e.animations[t],r=[],i=[],o=[],a=[],u=[],c=0,l=n.channels.length;c<l;c++){var h=n.channels[c],f=n.samplers[h.sampler],p=h.target,d=void 0!==p.node?p.node:p.id,m=void 0!==n.parameters?n.parameters[f.input]:f.input,v=void 0!==n.parameters?n.parameters[f.output]:f.output;r.push(this.getDependency("node",d)),i.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",v)),a.push(f),u.push(p)}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(u)]).then((function(e){for(var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],c=[],l=0,h=r.length;l<h;l++){var f=r[l],p=i[l],d=o[l],m=a[l],v=u[l];if(void 0!==f){var y;switch(f.updateMatrix(),f.matrixAutoUpdate=!0,E[v.path]){case E.weights:y=s["NumberKeyframeTrack"];break;case E.rotation:y=s["QuaternionKeyframeTrack"];break;case E.position:case E.scale:default:y=s["VectorKeyframeTrack"];break}var _=f.name?f.name:f.uuid,b=void 0!==m.interpolation?S[m.interpolation]:s["InterpolateLinear"],x=[];E[v.path]===E.weights?f.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&x.push(t.name?t.name:t.uuid)})):x.push(_);var w=d.array;if(d.normalized){var M;if(w.constructor===Int8Array)M=1/127;else if(w.constructor===Uint8Array)M=1/255;else if(w.constructor==Int16Array)M=1/32767;else{if(w.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");M=1/65535}for(var T=new Float32Array(w.length),C=0,L=w.length;C<L;C++)T[C]=w[C]*M;w=T}for(C=0,L=x.length;C<L;C++){var A=new y(x[C]+"."+E[v.path],p.array,w,b);"CUBICSPLINE"===m.interpolation&&(A.createInterpolant=function(t){return new g(this.times,this.values,this.getValueSize()/3,t)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(A)}}}var I=void 0!==n.name?n.name:"animation_"+t;return new s["AnimationClip"](I,void 0,c)}))},D.prototype.loadNode=function(t){var e=this.json,r=this.extensions,i=this,o=e.meshReferences,a=e.meshUses,u=e.nodes[t];return function(){var t=[];return void 0!==u.mesh&&t.push(i.getDependency("mesh",u.mesh).then((function(t){var e;if(o[u.mesh]>1){var n=a[u.mesh]++;e=t.clone(),e.name+="_instance_"+n,e.onBeforeRender=t.onBeforeRender;for(var r=0,i=e.children.length;r<i;r++)e.children[r].name+="_instance_"+n,e.children[r].onBeforeRender=t.children[r].onBeforeRender}else e=t;return void 0!==u.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,n=u.weights.length;e<n;e++)t.morphTargetInfluences[e]=u.weights[e]})),e}))),void 0!==u.camera&&t.push(i.getDependency("camera",u.camera)),u.extensions&&u.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==u.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&t.push(i.getDependency("light",u.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)}().then((function(t){var e;if(e=!0===u.isBone?new s["Bone"]:t.length>1?new s["Group"]:1===t.length?t[0]:new s["Object3D"],e!==t[0])for(var n=0,i=t.length;n<i;n++)e.add(t[n]);if(void 0!==u.name&&(e.userData.name=u.name,e.name=s["PropertyBinding"].sanitizeNodeName(u.name)),I(e,u),u.extensions&&A(r,e,u),void 0!==u.matrix){var o=new s["Matrix4"];o.fromArray(u.matrix),e.applyMatrix(o)}else void 0!==u.translation&&e.position.fromArray(u.translation),void 0!==u.rotation&&e.quaternion.fromArray(u.rotation),void 0!==u.scale&&e.scale.fromArray(u.scale);return e}))},D.prototype.loadScene=function(){function t(e,n,r,i){var o=r.nodes[e];return i.getDependency("node",e).then((function(t){return void 0===o.skin?t:i.getDependency("skin",o.skin).then((function(t){e=t;for(var n=[],r=0,o=e.joints.length;r<o;r++)n.push(i.getDependency("node",e.joints[r]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(t.isMesh){for(var r=[],i=[],o=0,a=n.length;o<a;o++){var u=n[o];if(u){r.push(u);var c=new s["Matrix4"];void 0!==e.inverseBindMatrices&&c.fromArray(e.inverseBindMatrices.array,16*o),i.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[o])}t.bind(new s["Skeleton"](r,i),t.matrixWorld)}})),t}));var e})).then((function(e){n.add(e);var a=[];if(o.children)for(var s=o.children,u=0,c=s.length;u<c;u++){var l=s[u];a.push(t(l,e,r,i))}return Promise.all(a)}))}return function(e){var n=this.json,r=this.extensions,i=this.json.scenes[e],o=this,a=new s["Scene"];void 0!==i.name&&(a.name=i.name),I(a,i),i.extensions&&A(r,a,i);for(var u=i.nodes||[],c=[],l=0,h=u.length;l<h;l++)c.push(t(u[l],a,n,o));return Promise.all(c).then((function(){return a}))}}(),t}(),g={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},m={};m[s["NearestFilter"]]=g.NEAREST,m[s["NearestMipmapNearestFilter"]]=g.NEAREST_MIPMAP_NEAREST,m[s["NearestMipmapLinearFilter"]]=g.NEAREST_MIPMAP_LINEAR,m[s["LinearFilter"]]=g.LINEAR,m[s["LinearMipmapNearestFilter"]]=g.LINEAR_MIPMAP_NEAREST,m[s["LinearMipmapLinearFilter"]]=g.LINEAR_MIPMAP_LINEAR,m[s["ClampToEdgeWrapping"]]=g.CLAMP_TO_EDGE,m[s["RepeatWrapping"]]=g.REPEAT,m[s["MirroredRepeatWrapping"]]=g.MIRRORED_REPEAT;var v={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},y=function(){};y.prototype={constructor:y,parse:function(t,e,n){var r={binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],forceIndices:!1,forcePowerOfTwoTextures:!1,includeCustomExtensions:!1};n=Object.assign({},r,n),n.animations.length>0&&(n.trs=!0);var i,o={asset:{version:"2.0",generator:"GLTFExporter"}},a=0,u=[],c=[],l=new Map,h=[],f={},p={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},d=new Map,_=0;function b(t){return d.has(t)||d.set(t,_++),d.get(t)}function x(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}function w(t){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(t).buffer;for(var e=new Uint8Array(new ArrayBuffer(t.length)),n=0,r=t.length;n<r;n++){var i=t.charCodeAt(n);e[n]=i>255?32:i}return e.buffer}function E(t,e,n){for(var r={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)},i=e;i<e+n;i++)for(var o=0;o<t.itemSize;o++){var a=t.array[i*t.itemSize+o];r.min[o]=Math.min(r.min[o],a),r.max[o]=Math.max(r.max[o],a)}return r}function S(t){return s["Math"].isPowerOfTwo(t.width)&&s["Math"].isPowerOfTwo(t.height)}function M(t){if(p.attributesNormalized.has(t))return!1;for(var e=new s["Vector3"],n=0,r=t.count;n<r;n++)if(Math.abs(e.fromArray(t.array,3*n).length()-1)>5e-4)return!1;return!0}function T(t){if(p.attributesNormalized.has(t))return p.attributesNormalized.get(t);for(var e=t.clone(),n=new s["Vector3"],r=0,i=e.count;r<i;r++)n.fromArray(e.array,3*r),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),n.toArray(e.array,3*r);return p.attributesNormalized.set(t,e),e}function C(t){return 4*Math.ceil(t/4)}function L(t,e){e=e||0;var n=C(t.byteLength);if(n!==t.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(t)),0!==e)for(var i=t.byteLength;i<n;i++)r[i]=e;return r.buffer}return t}function A(t,e){if(0!==Object.keys(t.userData).length)try{var r=JSON.parse(JSON.stringify(t.userData));if(n.includeCustomExtensions&&r.gltfExtensions){for(var i in void 0===e.extensions&&(e.extensions={}),r.gltfExtensions)e.extensions[i]=r.gltfExtensions[i],f[i]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(e.extras=r)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}function I(t,e){var n=!1,r={};0===e.offset.x&&0===e.offset.y||(r.offset=e.offset.toArray(),n=!0),0!==e.rotation&&(r.rotation=e.rotation,n=!0),1===e.repeat.x&&1===e.repeat.y||(r.scale=e.repeat.toArray(),n=!0),n&&(t.extensions=t.extensions||{},t.extensions["KHR_texture_transform"]=r,f["KHR_texture_transform"]=!0)}function P(t){return o.buffers||(o.buffers=[{byteLength:0}]),u.push(t),0}function R(t,e,n,r,i){var s;o.bufferViews||(o.bufferViews=[]),s=e===g.UNSIGNED_BYTE?1:e===g.UNSIGNED_SHORT?2:4;for(var u=C(r*t.itemSize*s),c=new DataView(new ArrayBuffer(u)),l=0,h=n;h<n+r;h++)for(var f=0;f<t.itemSize;f++){var p=t.array[h*t.itemSize+f];e===g.FLOAT?c.setFloat32(l,p,!0):e===g.UNSIGNED_INT?c.setUint32(l,p,!0):e===g.UNSIGNED_SHORT?c.setUint16(l,p,!0):e===g.UNSIGNED_BYTE&&c.setUint8(l,p),l+=s}var d={buffer:P(c.buffer),byteOffset:a,byteLength:u};void 0!==i&&(d.target=i),i===g.ARRAY_BUFFER&&(d.byteStride=t.itemSize*s),a+=u,o.bufferViews.push(d);var m={id:o.bufferViews.length-1,byteLength:0};return m}function O(t){return o.bufferViews||(o.bufferViews=[]),new Promise((function(e){var n=new window.FileReader;n.readAsArrayBuffer(t),n.onloadend=function(){var t=L(n.result),r={buffer:P(t),byteOffset:a,byteLength:t.byteLength};a+=t.byteLength,o.bufferViews.push(r),e(o.bufferViews.length-1)}}))}function N(t,e,r,i){var a,s={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};if(t.array.constructor===Float32Array)a=g.FLOAT;else if(t.array.constructor===Uint32Array)a=g.UNSIGNED_INT;else if(t.array.constructor===Uint16Array)a=g.UNSIGNED_SHORT;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");a=g.UNSIGNED_BYTE}if(void 0===r&&(r=0),void 0===i&&(i=t.count),n.truncateDrawRange&&void 0!==e&&null===e.index){var u=r+i,c=e.drawRange.count===1/0?t.count:e.drawRange.start+e.drawRange.count;r=Math.max(r,e.drawRange.start),i=Math.min(u,c)-r,i<0&&(i=0)}if(0===i)return null;var l,h=E(t,r,i);void 0!==e&&(l=t===e.index?g.ELEMENT_ARRAY_BUFFER:g.ARRAY_BUFFER);var f=R(t,a,r,i,l),p={bufferView:f.id,byteOffset:f.byteOffset,componentType:a,count:i,max:h.max,min:h.min,type:s[t.itemSize]};return o.accessors||(o.accessors=[]),o.accessors.push(p),o.accessors.length-1}function D(t,e,r){p.images.has(t)||p.images.set(t,{});var a=p.images.get(t),u=e===s["RGBAFormat"]?"image/png":"image/jpeg",l=u+":flipY/"+r.toString();if(void 0!==a[l])return a[l];o.images||(o.images=[]);var h={mimeType:u};if(n.embedImages){var f=i=i||document.createElement("canvas");f.width=Math.min(t.width,n.maxTextureSize),f.height=Math.min(t.height,n.maxTextureSize),n.forcePowerOfTwoTextures&&!S(f)&&(console.warn("GLTFExporter: Resized non-power-of-two image.",t),f.width=s["Math"].floorPowerOfTwo(f.width),f.height=s["Math"].floorPowerOfTwo(f.height));var d=f.getContext("2d");!0===r&&(d.translate(0,f.height),d.scale(1,-1)),d.drawImage(t,0,0,f.width,f.height),!0===n.binary?c.push(new Promise((function(t){f.toBlob((function(e){O(e).then((function(e){h.bufferView=e,t()}))}),u)}))):h.uri=f.toDataURL(u)}else h.uri=t.src;o.images.push(h);var g=o.images.length-1;return a[l]=g,g}function F(t){o.samplers||(o.samplers=[]);var e={magFilter:m[t.magFilter],minFilter:m[t.minFilter],wrapS:m[t.wrapS],wrapT:m[t.wrapT]};return o.samplers.push(e),o.samplers.length-1}function B(t){if(p.textures.has(t))return p.textures.get(t);o.textures||(o.textures=[]);var e={sampler:F(t),source:D(t.image,t.format,t.flipY)};t.name&&(e.name=t.name),o.textures.push(e);var n=o.textures.length-1;return p.textures.set(t,n),n}function k(t){if(p.materials.has(t))return p.materials.get(t);if(o.materials||(o.materials=[]),t.isShaderMaterial&&!t.isGLTFSpecularGlossinessMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;var e={pbrMetallicRoughness:{}};t.isMeshBasicMaterial?(e.extensions={KHR_materials_unlit:{}},f["KHR_materials_unlit"]=!0):t.isGLTFSpecularGlossinessMaterial?(e.extensions={KHR_materials_pbrSpecularGlossiness:{}},f["KHR_materials_pbrSpecularGlossiness"]=!0):t.isMeshStandardMaterial||console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var n=t.color.toArray().concat([t.opacity]);if(x(n,[1,1,1,1])||(e.pbrMetallicRoughness.baseColorFactor=n),t.isMeshStandardMaterial?(e.pbrMetallicRoughness.metallicFactor=t.metalness,e.pbrMetallicRoughness.roughnessFactor=t.roughness):t.isMeshBasicMaterial?(e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9):(e.pbrMetallicRoughness.metallicFactor=.5,e.pbrMetallicRoughness.roughnessFactor=.5),t.isGLTFSpecularGlossinessMaterial){e.pbrMetallicRoughness.baseColorFactor&&(e.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor=e.pbrMetallicRoughness.baseColorFactor);var r=[1,1,1];t.specular.toArray(r,0),e.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor=r,e.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor=t.glossiness}if(t.metalnessMap||t.roughnessMap)if(t.metalnessMap===t.roughnessMap){var i={index:B(t.metalnessMap)};I(i,t.metalnessMap),e.pbrMetallicRoughness.metallicRoughnessTexture=i}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(t.map){var a={index:B(t.map)};I(a,t.map),t.isGLTFSpecularGlossinessMaterial&&(e.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture=a),e.pbrMetallicRoughness.baseColorTexture=a}if(t.isGLTFSpecularGlossinessMaterial&&t.specularMap){var u={index:B(t.specularMap)};I(u,t.specularMap),e.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture=u}if(t.isMeshBasicMaterial||t.isLineBasicMaterial||t.isPointsMaterial);else{var c=t.emissive.clone().multiplyScalar(t.emissiveIntensity).toArray();if(x(c,[0,0,0])||(e.emissiveFactor=c),t.emissiveMap){var l={index:B(t.emissiveMap)};I(l,t.emissiveMap),e.emissiveTexture=l}}if(t.normalMap){var h={index:B(t.normalMap)};t.normalScale&&-1!==t.normalScale.x&&(t.normalScale.x!==t.normalScale.y&&console.warn("THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),h.scale=t.normalScale.x),I(h,t.normalMap),e.normalTexture=h}if(t.aoMap){var d={index:B(t.aoMap),texCoord:1};1!==t.aoMapIntensity&&(d.strength=t.aoMapIntensity),I(d,t.aoMap),e.occlusionTexture=d}t.transparent?e.alphaMode="BLEND":t.alphaTest>0&&(e.alphaMode="MASK",e.alphaCutoff=t.alphaTest),t.side===s["DoubleSide"]&&(e.doubleSided=!0),""!==t.name&&(e.name=t.name),A(t,e),o.materials.push(e);var g=o.materials.length-1;return p.materials.set(t,g),g}function U(t){var e=t.geometry.uuid+":"+t.material.uuid;if(p.meshes.has(e))return p.meshes.get(e);var r,i=t.geometry;if(t.isLineSegments)r=g.LINES;else if(t.isLineLoop)r=g.LINE_LOOP;else if(t.isLine)r=g.LINE_STRIP;else if(t.isPoints)r=g.POINTS;else{if(!i.isBufferGeometry){console.warn("GLTFExporter: Exporting THREE.Geometry will increase file size. Use BufferGeometry instead.");var a=new s["BufferGeometry"];a.fromGeometry(i),i=a}t.drawMode===s["TriangleFanDrawMode"]?(console.warn("GLTFExporter: TriangleFanDrawMode and wireframe incompatible."),r=g.TRIANGLE_FAN):r=t.drawMode===s["TriangleStripDrawMode"]?t.material.wireframe?g.LINE_STRIP:g.TRIANGLE_STRIP:t.material.wireframe?g.LINES:g.TRIANGLES}var u={},c={},l=[],h=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=i.getAttribute("normal");void 0===d||M(d)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),i.setAttribute("normal",T(d)));var m=null;for(var v in i.attributes)if("morph"!==v.substr(0,5)){var y=i.attributes[v];v=f[v]||v.toUpperCase();var _=/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/;if(_.test(v)||(v="_"+v),p.attributes.has(b(y)))c[v]=p.attributes.get(b(y));else{m=null;var x=y.array;"JOINTS_0"!==v||x instanceof Uint16Array||x instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new s["BufferAttribute"](new Uint16Array(x),y.itemSize,y.normalized));var w=N(m||y,i);null!==w&&(c[v]=w,p.attributes.set(b(y),w))}}if(void 0!==d&&i.setAttribute("normal",d),0===Object.keys(c).length)return null;if(void 0!==t.morphTargetInfluences&&t.morphTargetInfluences.length>0){var E=[],S=[],C={};if(void 0!==t.morphTargetDictionary)for(var L in t.morphTargetDictionary)C[t.morphTargetDictionary[L]]=L;for(var I=0;I<t.morphTargetInfluences.length;++I){var P={},R=!1;for(var v in i.morphAttributes)if("position"===v||"normal"===v){y=i.morphAttributes[v][I];var O=v.toUpperCase(),D=i.attributes[v];if(p.attributes.has(b(y)))P[O]=p.attributes.get(b(y));else{var F=y.clone();if(!i.morphTargetsRelative)for(var B=0,U=y.count;B<U;B++)F.setXYZ(B,y.getX(B)-D.getX(B),y.getY(B)-D.getY(B),y.getZ(B)-D.getZ(B));P[O]=N(F,i),p.attributes.set(b(D),P[O])}}else R||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),R=!0);h.push(P),E.push(t.morphTargetInfluences[I]),void 0!==t.morphTargetDictionary&&S.push(C[I])}u.weights=E,S.length>0&&(u.extras={},u.extras.targetNames=S)}var j=n.forceIndices,G=Array.isArray(t.material);if(G&&0===i.groups.length)return null;!j&&null===i.index&&G&&(console.warn("THREE.GLTFExporter: Creating index for non-indexed multi-material mesh."),j=!0);var z=!1;if(null===i.index&&j){for(var V=[],H=(I=0,i.attributes.position.count);I<H;I++)V[I]=I;i.setIndex(V),z=!0}var q=G?t.material:[t.material],W=G?i.groups:[{materialIndex:0,start:void 0,count:void 0}];for(I=0,H=W.length;I<H;I++){var X={mode:r,attributes:c};if(A(i,X),h.length>0&&(X.targets=h),null!==i.index){e=b(i.index);void 0===W[I].start&&void 0===W[I].count||(e+=":"+W[I].start+":"+W[I].count),p.attributes.has(e)?X.indices=p.attributes.get(e):(X.indices=N(i.index,i,W[I].start,W[I].count),p.attributes.set(e,X.indices)),null===X.indices&&delete X.indices}var Y=k(q[W[I].materialIndex]);null!==Y&&(X.material=Y),l.push(X)}z&&i.setIndex(null),u.primitives=l,o.meshes||(o.meshes=[]),o.meshes.push(u);var $=o.meshes.length-1;return p.meshes.set(e,$),$}function j(t){o.cameras||(o.cameras=[]);var e=t.isOrthographicCamera,n={type:e?"orthographic":"perspective"};return e?n.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:n.perspective={aspectRatio:t.aspect,yfov:s["Math"].degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(n.name=t.type),o.cameras.push(n),o.cameras.length-1}function G(t,e){o.animations||(o.animations=[]),t=y.Utils.mergeMorphTargetTracks(t.clone(),e);for(var n=t.tracks,r=[],i=[],a=0;a<n.length;++a){var u=n[a],c=s["PropertyBinding"].parseTrackName(u.name),h=s["PropertyBinding"].findNode(e,c.nodeName),f=v[c.propertyName];if("bones"===c.objectName&&(h=!0===h.isSkinnedMesh?h.skeleton.getBoneByName(c.objectIndex):void 0),!h||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;var p,d=1,g=u.values.length/u.times.length;f===v.morphTargetInfluences&&(g/=h.morphTargetInfluences.length),!0===u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(p="CUBICSPLINE",g/=3):p=u.getInterpolation()===s["InterpolateDiscrete"]?"STEP":"LINEAR",i.push({input:N(new s["BufferAttribute"](u.times,d)),output:N(new s["BufferAttribute"](u.values,g)),interpolation:p}),r.push({sampler:i.length-1,target:{node:l.get(h),path:f}})}return o.animations.push({name:t.name||"clip_"+o.animations.length,samplers:i,channels:r}),o.animations.length-1}function z(t){var e=o.nodes[l.get(t)],n=t.skeleton,r=t.skeleton.bones[0];if(void 0===r)return null;for(var i=[],a=new Float32Array(16*n.bones.length),u=0;u<n.bones.length;++u)i.push(l.get(n.bones[u])),n.boneInverses[u].toArray(a,16*u);void 0===o.skins&&(o.skins=[]),o.skins.push({inverseBindMatrices:N(new s["BufferAttribute"](a,16)),joints:i,skeleton:l.get(r)});var c=e.skin=o.skins.length-1;return c}function V(t){var e={};t.name&&(e.name=t.name),e.color=t.color.toArray(),e.intensity=t.intensity,t.isDirectionalLight?e.type="directional":t.isPointLight?(e.type="point",t.distance>0&&(e.range=t.distance)):t.isSpotLight&&(e.type="spot",t.distance>0&&(e.range=t.distance),e.spot={},e.spot.innerConeAngle=(t.penumbra-1)*t.angle*-1,e.spot.outerConeAngle=t.angle),void 0!==t.decay&&2!==t.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!t.target||t.target.parent===t&&0===t.target.position.x&&0===t.target.position.y&&-1===t.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");var n=o.extensions["KHR_lights_punctual"].lights;return n.push(e),n.length-1}function H(t){o.nodes||(o.nodes=[]);var e={};if(n.trs){var r=t.quaternion.toArray(),i=t.position.toArray(),a=t.scale.toArray();x(r,[0,0,0,1])||(e.rotation=r),x(i,[0,0,0])||(e.translation=i),x(a,[1,1,1])||(e.scale=a)}else t.matrixAutoUpdate&&t.updateMatrix(),x(t.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])||(e.matrix=t.matrix.elements);if(""!==t.name&&(e.name=String(t.name)),A(t,e),t.isMesh||t.isLine||t.isPoints){var s=U(t);null!==s&&(e.mesh=s)}else if(t.isCamera)e.camera=j(t);else if(t.isDirectionalLight||t.isPointLight||t.isSpotLight)f["KHR_lights_punctual"]||(o.extensions=o.extensions||{},o.extensions["KHR_lights_punctual"]={lights:[]},f["KHR_lights_punctual"]=!0),e.extensions=e.extensions||{},e.extensions["KHR_lights_punctual"]={light:V(t)};else if(t.isLight)return console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t),null;if(t.isSkinnedMesh&&h.push(t),t.children.length>0){for(var u=[],c=0,p=t.children.length;c<p;c++){var d=t.children[c];if(d.visible||!1===n.onlyVisible){var g=H(d);null!==g&&u.push(g)}}u.length>0&&(e.children=u)}o.nodes.push(e);var m=o.nodes.length-1;return l.set(t,m),m}function q(t){o.scenes||(o.scenes=[],o.scene=0);var e={nodes:[]};""!==t.name&&(e.name=t.name),t.userData&&Object.keys(t.userData).length>0&&(e.extras=A(t)),o.scenes.push(e);for(var r=[],i=0,a=t.children.length;i<a;i++){var s=t.children[i];if(s.visible||!1===n.onlyVisible){var u=H(s);null!==u&&r.push(u)}}r.length>0&&(e.nodes=r),A(t,e)}function W(t){var e=new s["Scene"];e.name="AuxScene";for(var n=0;n<t.length;n++)e.children.push(t[n]);q(e)}function X(t){t=t instanceof Array?t:[t];for(var e=[],r=0;r<t.length;r++)t[r]instanceof s["Scene"]?q(t[r]):e.push(t[r]);e.length>0&&W(e);for(r=0;r<h.length;++r)z(h[r]);for(r=0;r<n.animations.length;++r)G(n.animations[r],t[0])}X(t),Promise.all(c).then((function(){var t=new Blob(u,{type:"application/octet-stream"}),r=Object.keys(f);if(r.length>0&&(o.extensionsUsed=r),o.buffers&&o.buffers.length>0){o.buffers[0].byteLength=t.size;var i=new window.FileReader;if(!0===n.binary){var a=12,s=1179937895,c=2,l=8,h=1313821514,p=5130562;i.readAsArrayBuffer(t),i.onloadend=function(){var t=L(i.result),n=new DataView(new ArrayBuffer(l));n.setUint32(0,t.byteLength,!0),n.setUint32(4,p,!0);var r=L(w(JSON.stringify(o)),32),u=new DataView(new ArrayBuffer(l));u.setUint32(0,r.byteLength,!0),u.setUint32(4,h,!0);var f=new ArrayBuffer(a),d=new DataView(f);d.setUint32(0,s,!0),d.setUint32(4,c,!0);var g=a+u.byteLength+r.byteLength+n.byteLength+t.byteLength;d.setUint32(8,g,!0);var m=new Blob([f,u,r,n,t],{type:"application/octet-stream"}),v=new window.FileReader;v.readAsArrayBuffer(m),v.onloadend=function(){e(v.result)}}}else i.readAsDataURL(t),i.onloadend=function(){var t=i.result;o.buffers[0].uri=t,e(o)}}else e(o)}))}},y.Utils={insertKeyframe:function(t,e){var n,r=.001,i=t.getValueSize(),o=new t.TimeBufferType(t.times.length+1),a=new t.ValueBufferType(t.values.length+i),s=t.createInterpolant(new t.ValueBufferType(i));if(0===t.times.length){o[0]=e;for(var u=0;u<i;u++)a[u]=0;n=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<r)return 0;o[0]=e,o.set(t.times,1),a.set(s.evaluate(e),0),a.set(t.values,i),n=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<r)return t.times.length-1;o[o.length-1]=e,o.set(t.times,0),a.set(t.values,0),a.set(s.evaluate(e),t.values.length),n=o.length-1}else for(u=0;u<t.times.length;u++){if(Math.abs(t.times[u]-e)<r)return u;if(t.times[u]<e&&t.times[u+1]>e){o.set(t.times.slice(0,u+1),0),o[u+1]=e,o.set(t.times.slice(u+1),u+2),a.set(t.values.slice(0,(u+1)*i),0),a.set(s.evaluate(e),(u+1)*i),a.set(t.values.slice((u+1)*i),(u+2)*i),n=u+1;break}}return t.times=o,t.values=a,n},mergeMorphTargetTracks:function(t,e){for(var n=[],r={},i=t.tracks,o=0;o<i.length;++o){var a=i[o],u=s["PropertyBinding"].parseTrackName(a.name),c=s["PropertyBinding"].findNode(e,u.nodeName);if("morphTargetInfluences"===u.propertyName&&void 0!==u.propertyIndex){if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(s["InterpolateLinear"])}var l,h=c.morphTargetInfluences.length,f=c.morphTargetDictionary[u.propertyIndex];if(void 0===f)throw new Error("THREE.GLTFExporter: Morph target name not found: "+u.propertyIndex);if(void 0!==r[c.uuid]){var p=a.createInterpolant(new a.ValueBufferType(1));l=r[c.uuid];for(m=0;m<l.times.length;m++)l.values[m*h+f]=p.evaluate(l.times[m]);for(m=0;m<a.times.length;m++){var d=this.insertKeyframe(l,a.times[m]);l.values[d*h+f]=a.values[m]}}else{l=a.clone();for(var g=new l.ValueBufferType(h*l.times.length),m=0;m<l.times.length;m++)g[m*h+f]=l.values[m];l.name=".morphTargetInfluences",l.values=g,r[c.uuid]=l,n.push(l)}}else n.push(a)}return t.tracks=n,t}},n.d(e,"a",(function(){return _})),window.THREE=s;var _=function(){function t(e){var n=this;Object(i["a"])(this,t),Object(a["a"])(this,"mouseMoveHandle",(function(t){n.mousePosition=new s["Vector2"];var e=n.renderer.domElement,r=e.getBoundingClientRect(),i=r.left,o=r.top;n.mousePosition.x=(t.clientX-i)/e.offsetWidth*2-1,n.mousePosition.y=-(t.clientY-o)/e.offsetHeight*2+1})),this.set=e,this.init()}return Object(o["a"])(t,[{key:"init",value:function(){this.sceneUpdateArr=[],this.mousePosition=null,this.raycaster=new s["Raycaster"],this.raycaster2=new s["Raycaster"],this.INTERSECTED=null,this.link=this.createLink(),this.gltfLoader=new d,this.scene=new s["Scene"],this.renderer=new s["WebGLRenderer"]({antialias:!0,alpha:!0}),this.renderer.setClearColor("#232937",1),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.set.renderWidth,this.set.renderHeight),this.set.root.appendChild(this.renderer.domElement),this.labelRenderer=new p,this.labelRenderer.setSize(this.set.renderWidth,this.set.renderHeight),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top="0",this.labelRenderer.domElement.style.color="#fff",this.set.root.appendChild(this.labelRenderer.domElement),this.textureLoader=new s["TextureLoader"],this.camera=this.setCamera({x:0,y:-50,z:100}),this.scene.add(this.camera),this.axesHelper=this.setHelper(100),this.scene.add(this.axesHelper),this.ambientLight=this.setLight("#fff"),this.scene.add(this.ambientLight),this.orbitControls=this.setControl(this.camera,this.labelRenderer.domElement),this.sceneUpdateArr.push(this.orbitControls),this.set.isStatsWatch&&(this.statsInstance=this.statsWatch(),this.sceneUpdateArr.push(this.statsInstance)),this.animate(),window.addEventListener("keyup",this.keyUpHandle.bind(this),!1)}},{key:"keyUpHandle",value:function(t){this.INTERSECTED&&81===t.keyCode&&this.editEvent&&this.editEvent(this.INTERSECTED)}},{key:"addEvent",value:function(t){var e=this;this.raycaster._customId="raycaster1",this.raycaster.update=function(){e.mousePosition&&e.raycaster.setFromCamera(e.mousePosition,e.camera);var n=e.raycaster.intersectObjects(t);n.length>0?e.INTERSECTED!==n[0].object&&(e.INTERSECTED&&e.INTERSECTED.material.color.set(e.INTERSECTED.userData.preColor),e.INTERSECTED=n[0].object,e.INTERSECTED.material.color.setHex(16711680)):(e.INTERSECTED&&e.INTERSECTED.material.color.set(e.INTERSECTED.userData.preColor),e.INTERSECTED=null)};var n=this.sceneUpdateArr.find((function(t){return t._customId&&"raycaster1"===t._customId}));n||(this.sceneUpdateArr.push(this.raycaster),this.labelRenderer.domElement.addEventListener("mousemove",this.mouseMoveHandle,!1))}},{key:"getDistanceFromCamera",value:function(t,e){var n=this,r=new s["Vector2"](0,0);this.raycaster2._customId="raycaster2",this.raycaster2.update=function(){n.raycaster.setFromCamera(r,n.camera);var i=n.raycaster.intersectObjects(t);i[0]&&(n.camera.far=i[0].distance+100,n.camera.updateProjectionMatrix(),e&&e(i[0].distance))};var i=this.sceneUpdateArr.find((function(t){return t._customId&&"raycaster2"===t._customId}));i||this.sceneUpdateArr.push(this.raycaster2)}},{key:"createLink",value:function(){var t=document.createElement("a");return t.style.display="none",document.body.appendChild(t),t}},{key:"setCamera",value:function(t){var e=new s["PerspectiveCamera"](30,this.set.renderWidth/this.set.renderHeight,.1,2e4);e.up.x=0,e.up.y=0,e.up.z=1;var n=t.x,r=t.y,i=t.z;return e.position.set(n,r,i),e.lookAt(0,0,0),e}},{key:"setHelper",value:function(t){var e=new s["AxesHelper"](t);return e}},{key:"setLight",value:function(t){var e=new s["AmbientLight"](t);return e}},{key:"setControl",value:function(t,e){var n=new l(t,e);return n.update(),n}},{key:"statsWatch",value:function(){var t=new c;return this.set.root.appendChild(t.dom),t}},{key:"animate",value:function(){requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.scene,this.camera),this.labelRenderer.render(this.scene,this.camera),this.sceneUpdateArr.forEach((function(t){t.update()}))}},{key:"drawText",value:function(t,e){var n=document.createElement("div");n.style.fontSize="12px",n.className="label",n.textContent=e;var i=new f(n),o=Object(r["a"])(t,3),a=o[0],s=o[1],u=o[2];return i.position.set(a,s,u),i}},{key:"exportGLTF",value:function(t){var e=this,n=new y,r={trs:!1,onlyVisible:!0,truncateDrawRange:!0,binary:!0,forceIndices:!1,forcePowerOfTwoTextures:!1,maxTextureSize:4096};n.parse(t,(function(t){if(t instanceof ArrayBuffer)e.saveArrayBuffer(t,"scene.glb");else{var n=JSON.stringify(t,null,2);e.saveString(n,"scene.gltf")}}),r)}},{key:"saveArrayBuffer",value:function(t,e){this.save(new Blob([t],{type:"application/octet-stream"}),e)}},{key:"saveString",value:function(t,e){this.save(new Blob([t],{type:"text/plain"}),e)}},{key:"save",value:function(t,e){this.link.href=URL.createObjectURL(t),this.link.download=e,this.link.click()}},{key:"importGLTF",value:function(t){var e=this;return new Promise((function(n,r){e.gltfLoader.load(t,(function(t){e.scene.add(t.scene),n(t)}),(function(t){if(t){var e=t.total,n=e?"".concat(t.loaded/e*100," + % loaded"):"".concat(t.loaded," byte loaded");console.log(n)}}),(function(t){r(t)}))}))}}]),t}()},"77a7":function(t,e){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2,u=function(t,e,u){var c,l,h,f=new Array(u),p=8*u-e-1,d=(1<<p)-1,g=d>>1,m=23===e?i(2,-24)-i(2,-77):0,v=t<0||0===t&&1/t<0?1:0,y=0;for(t=r(t),t!=t||t===n?(l=t!=t?1:0,c=d):(c=o(a(t)/s),t*(h=i(2,-c))<1&&(c--,h*=2),t+=c+g>=1?m/h:m*i(2,1-g),t*h>=2&&(c++,h/=2),c+g>=d?(l=0,c=d):c+g>=1?(l=(t*h-1)*i(2,e),c+=g):(l=t*i(2,g-1)*i(2,e),c=0));e>=8;f[y++]=255&l,l/=256,e-=8);for(c=c<<e|l,p+=e;p>0;f[y++]=255&c,c/=256,p-=8);return f[--y]|=128*v,f},c=function(t,e){var r,o=t.length,a=8*o-e-1,s=(1<<a)-1,u=s>>1,c=a-7,l=o-1,h=t[l--],f=127&h;for(h>>=7;c>0;f=256*f+t[l],l--,c-=8);for(r=f&(1<<-c)-1,f>>=-c,c+=e;c>0;r=256*r+t[l],l--,c-=8);if(0===f)f=1-u;else{if(f===s)return r?NaN:h?-n:n;r+=i(2,e),f-=u}return(h?-1:1)*r*i(2,f-e)};t.exports={pack:u,unpack:c}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a0f":function(t,e,n){},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r=n("825a"),i=n("37e8"),o=n("7839"),a=n("d012"),s=n("1be4"),u=n("cc12"),c=n("f772"),l=c("IE_PROTO"),h="prototype",f=function(){},p=function(){var t,e=u("iframe"),n=o.length,r="<",i="script",a=">",c="java"+i+":";e.style.display="none",s.appendChild(e),e.src=String(c),t=e.contentWindow.document,t.open(),t.write(r+i+a+"document.F=Object"+r+"/"+i+a),t.close(),p=t.F;while(n--)delete p[h][o[n]];return p()};t.exports=Object.create||function(t,e){var n;return null!==t?(f[h]=r(t),n=new f,f[h]=null,n[l]=t):n=p(),void 0===e?n:i(n,e)},a[l]=!0},"7db0":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").find,o=n("44d2"),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),a=n("d2bb"),s=n("d44e"),u=n("9112"),c=n("6eeb"),l=n("b622"),h=n("c430"),f=n("3f8c"),p=n("ae93"),d=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=l("iterator"),v="keys",y="values",_="entries",b=function(){return this};t.exports=function(t,e,n,l,p,x,w){i(n,e,l);var E,S,M,T=function(t){if(t===p&&P)return P;if(!g&&t in A)return A[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case _:return function(){return new n(this,t)}}return function(){return new n(this)}},C=e+" Iterator",L=!1,A=t.prototype,I=A[m]||A["@@iterator"]||p&&A[p],P=!g&&I||T(p),R="Array"==e&&A.entries||I;if(R&&(E=o(R.call(new t)),d!==Object.prototype&&E.next&&(h||o(E)===d||(a?a(E,d):"function"!=typeof E[m]&&u(E,m,b)),s(E,C,!0,!0),h&&(f[C]=b))),p==y&&I&&I.name!==y&&(L=!0,P=function(){return I.call(this)}),h&&!w||A[m]===P||u(A,m,P),f[e]=P,p)if(S={values:T(y),keys:x?P:T(v),entries:T(_)},w)for(M in S)!g&&!L&&M in A||c(A,M,S[M]);else r({target:e,proto:!0,forced:g||L},S);return S}},"7e84":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("3410"),n("131a");function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}},"7f4d":function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e]||{};for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];void 0!==o&&(t[i]=o)}}return t}},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},8122:function(t,e,n){"use strict";e.__esModule=!0,e.isEmpty=e.isEqual=e.arrayEquals=e.looseEqual=e.capitalize=e.kebabCase=e.autoprefixer=e.isFirefox=e.isEdge=e.isIE=e.coerceTruthyValueToArray=e.arrayFind=e.arrayFindIndex=e.escapeRegexpString=e.valueEquals=e.generateId=e.getValueByPath=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.noop=c,e.hasOwn=l,e.toObject=f,e.getPropByPath=p,e.rafThrottle=y,e.objToArray=_;var i=n("8bbf"),o=s(i),a=n("a742");function s(t){return t&&t.__esModule?t:{default:t}}var u=Object.prototype.hasOwnProperty;function c(){}function l(t,e){return u.call(t,e)}function h(t,e){for(var n in e)t[n]=e[n];return t}function f(t){for(var e={},n=0;n<t.length;n++)t[n]&&h(e,t[n]);return e}e.getValueByPath=function(t,e){e=e||"";for(var n=e.split("."),r=t,i=null,o=0,a=n.length;o<a;o++){var s=n[o];if(!r)break;if(o===a-1){i=r[s];break}r=r[s]}return i};function p(t,e,n){var r=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var i=e.split("."),o=0,a=i.length;o<a-1;++o){if(!r&&!n)break;var s=i[o];if(!(s in r)){if(n)throw new Error("please transfer a valid prop path to form item!");break}r=r[s]}return{o:r,k:i[o],v:r?r[i[o]]:null}}e.generateId=function(){return Math.floor(1e4*Math.random())},e.valueEquals=function(t,e){if(t===e)return!0;if(!(t instanceof Array))return!1;if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(var n=0;n!==t.length;++n)if(t[n]!==e[n])return!1;return!0},e.escapeRegexpString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var d=e.arrayFindIndex=function(t,e){for(var n=0;n!==t.length;++n)if(e(t[n]))return n;return-1},g=(e.arrayFind=function(t,e){var n=d(t,e);return-1!==n?t[n]:void 0},e.coerceTruthyValueToArray=function(t){return Array.isArray(t)?t:t?[t]:[]},e.isIE=function(){return!o.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},e.isEdge=function(){return!o.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},e.isFirefox=function(){return!o.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},e.autoprefixer=function(t){if("object"!==("undefined"===typeof t?"undefined":r(t)))return t;var e=["transform","transition","animation"],n=["ms-","webkit-"];return e.forEach((function(e){var r=t[e];e&&r&&n.forEach((function(n){t[n+e]=r}))})),t},e.kebabCase=function(t){var e=/([^-])([A-Z])/g;return t.replace(e,"$1-$2").replace(e,"$1-$2").toLowerCase()},e.capitalize=function(t){return(0,a.isString)(t)?t.charAt(0).toUpperCase()+t.slice(1):t},e.looseEqual=function(t,e){var n=(0,a.isObject)(t),r=(0,a.isObject)(e);return n&&r?JSON.stringify(t)===JSON.stringify(e):!n&&!r&&String(t)===String(e)}),m=e.arrayEquals=function(t,e){if(t=t||[],e=e||[],t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!g(t[n],e[n]))return!1;return!0},v=(e.isEqual=function(t,e){return Array.isArray(t)&&Array.isArray(e)?m(t,e):g(t,e)},e.isEmpty=function(t){if(null==t)return!0;if("boolean"===typeof t)return!1;if("number"===typeof t)return!t;if(t instanceof Error)return""===t.message;switch(Object.prototype.toString.call(t)){case"[object String]":case"[object Array]":return!t.length;case"[object File]":case"[object Map]":case"[object Set]":return!t.size;case"[object Object]":return!Object.keys(t).length}return!1});function y(t){var e=!1;return function(){for(var n=this,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];e||(e=!0,window.requestAnimationFrame((function(r){t.apply(n,i),e=!1})))}}function _(t){return Array.isArray(t)?t:v(t)?[]:[t]}},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("50c4");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);while(c>s)e[s++]=t;return e}},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},8418:function(t,e,n){"use strict";var r=n("c04e"),i=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},"857a":function(t,e,n){var r=n("1d80"),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},"85ec":function(t,e,n){},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},"896a":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=68)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},15:function(t,e){t.exports=n("5128")},2:function(t,e){t.exports=n("5924")},41:function(t,e){t.exports=n("c56a")},68:function(t,e,n){"use strict";n.r(e);var r=n(7),i=n.n(r),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[t.customClass,{"is-fullscreen":t.fullscreen}],style:{backgroundColor:t.background||""}},[n("div",{staticClass:"el-loading-spinner"},[t.spinner?n("i",{class:t.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),t.text?n("p",{staticClass:"el-loading-text"},[t._v(t._s(t.text))]):t._e()])])])},a=[];o._withStripped=!0;var s={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(t){this.text=t}}},u=s,c=n(0),l=Object(c["a"])(u,o,a,!1,null,null,null);l.options.__file="packages/loading/src/loading.vue";var h=l.exports,f=n(2),p=n(15),d=n(41),g=n.n(d),m=i.a.extend(h),v={install:function(t){if(!t.prototype.$isServer){var e=function(e,r){r.value?t.nextTick((function(){r.modifiers.fullscreen?(e.originalPosition=Object(f["getStyle"])(document.body,"position"),e.originalOverflow=Object(f["getStyle"])(document.body,"overflow"),e.maskStyle.zIndex=p["PopupManager"].nextZIndex(),Object(f["addClass"])(e.mask,"is-fullscreen"),n(document.body,e,r)):(Object(f["removeClass"])(e.mask,"is-fullscreen"),r.modifiers.body?(e.originalPosition=Object(f["getStyle"])(document.body,"position"),["top","left"].forEach((function(t){var n="top"===t?"scrollTop":"scrollLeft";e.maskStyle[t]=e.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-parseInt(Object(f["getStyle"])(document.body,"margin-"+t),10)+"px"})),["height","width"].forEach((function(t){e.maskStyle[t]=e.getBoundingClientRect()[t]+"px"})),n(document.body,e,r)):(e.originalPosition=Object(f["getStyle"])(e,"position"),n(e,e,r)))})):(g()(e.instance,(function(t){if(e.instance.hiding){e.domVisible=!1;var n=r.modifiers.fullscreen||r.modifiers.body?document.body:e;Object(f["removeClass"])(n,"el-loading-parent--relative"),Object(f["removeClass"])(n,"el-loading-parent--hidden"),e.instance.hiding=!1}}),300,!0),e.instance.visible=!1,e.instance.hiding=!0)},n=function(e,n,r){n.domVisible||"none"===Object(f["getStyle"])(n,"display")||"hidden"===Object(f["getStyle"])(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach((function(t){n.mask.style[t]=n.maskStyle[t]})),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(f["addClass"])(e,"el-loading-parent--relative"),r.modifiers.fullscreen&&r.modifiers.lock&&Object(f["addClass"])(e,"el-loading-parent--hidden"),n.domVisible=!0,e.appendChild(n.mask),t.nextTick((function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0})),n.domInserted=!0)};t.directive("loading",{bind:function(t,n,r){var i=t.getAttribute("element-loading-text"),o=t.getAttribute("element-loading-spinner"),a=t.getAttribute("element-loading-background"),s=t.getAttribute("element-loading-custom-class"),u=r.context,c=new m({el:document.createElement("div"),data:{text:u&&u[i]||i,spinner:u&&u[o]||o,background:u&&u[a]||a,customClass:u&&u[s]||s,fullscreen:!!n.modifiers.fullscreen}});t.instance=c,t.mask=c.$el,t.maskStyle={},n.value&&e(t,n)},update:function(t,n){t.instance.setText(t.getAttribute("element-loading-text")),n.oldValue!==n.value&&e(t,n)},unbind:function(t,n){t.domInserted&&(t.mask&&t.mask.parentNode&&t.mask.parentNode.removeChild(t.mask),e(t,{value:!1,modifiers:n.modifiers})),t.instance&&t.instance.$destroy()}})}}},y=v,_=n(9),b=n.n(_),x=i.a.extend(h),w={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},E=void 0;x.prototype.originalPosition="",x.prototype.originalOverflow="",x.prototype.close=function(){var t=this;this.fullscreen&&(E=void 0),g()(this,(function(e){var n=t.fullscreen||t.body?document.body:t.target;Object(f["removeClass"])(n,"el-loading-parent--relative"),Object(f["removeClass"])(n,"el-loading-parent--hidden"),t.$el&&t.$el.parentNode&&t.$el.parentNode.removeChild(t.$el),t.$destroy()}),300),this.visible=!1};var S=function(t,e,n){var r={};t.fullscreen?(n.originalPosition=Object(f["getStyle"])(document.body,"position"),n.originalOverflow=Object(f["getStyle"])(document.body,"overflow"),r.zIndex=p["PopupManager"].nextZIndex()):t.body?(n.originalPosition=Object(f["getStyle"])(document.body,"position"),["top","left"].forEach((function(e){var n="top"===e?"scrollTop":"scrollLeft";r[e]=t.target.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]+"px"})),["height","width"].forEach((function(e){r[e]=t.target.getBoundingClientRect()[e]+"px"}))):n.originalPosition=Object(f["getStyle"])(e,"position"),Object.keys(r).forEach((function(t){n.$el.style[t]=r[t]}))},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.a.prototype.$isServer){if(t=b()({},w,t),"string"===typeof t.target&&(t.target=document.querySelector(t.target)),t.target=t.target||document.body,t.target!==document.body?t.fullscreen=!1:t.body=!0,t.fullscreen&&E)return E;var e=t.body?document.body:t.target,n=new x({el:document.createElement("div"),data:t});return S(t,e,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(f["addClass"])(e,"el-loading-parent--relative"),t.fullscreen&&t.lock&&Object(f["addClass"])(e,"el-loading-parent--hidden"),e.appendChild(n.$el),i.a.nextTick((function(){n.visible=!0})),t.fullscreen&&(E=n),n}},T=M;e["default"]={install:function(t){t.use(y),t.prototype.$loading=T},directive:y,service:T}},7:function(t,e){t.exports=n("8bbf")},9:function(t,e){t.exports=n("7f4d")}})},"89a9":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=57)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=n("2bb5")},26:function(t,e){t.exports=n("92fa")},42:function(t,e){t.exports=n("c284")},57:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{class:["el-upload-list","el-upload-list--"+t.listType,{"is-disabled":t.disabled}],attrs:{tag:"ul",name:"el-list"}},t._l(t.files,(function(e){return n("li",{key:e.uid,class:["el-upload-list__item","is-"+e.status,t.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(n){if(!("button"in n)&&t._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"]))return null;!t.disabled&&t.$emit("remove",e)},focus:function(e){t.focusing=!0},blur:function(e){t.focusing=!1},click:function(e){t.focusing=!1}}},[t._t("default",["uploading"!==e.status&&["picture-card","picture"].indexOf(t.listType)>-1?n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.url,alt:""}}):t._e(),n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){t.handleClick(e)}}},[n("i",{staticClass:"el-icon-document"}),t._v(t._s(e.name)+"\n      ")]),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===t.listType,"el-icon-check":["picture-card","picture"].indexOf(t.listType)>-1}})]),t.disabled?t._e():n("i",{staticClass:"el-icon-close",on:{click:function(n){t.$emit("remove",e)}}}),t.disabled?t._e():n("i",{staticClass:"el-icon-close-tip"},[t._v(t._s(t.t("el.upload.deleteTip")))]),"uploading"===e.status?n("el-progress",{attrs:{type:"picture-card"===t.listType?"circle":"line","stroke-width":"picture-card"===t.listType?6:2,percentage:t.parsePercentage(e.percentage)}}):t._e(),"picture-card"===t.listType?n("span",{staticClass:"el-upload-list__item-actions"},[t.handlePreview&&"picture-card"===t.listType?n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(n){t.handlePreview(e)}}},[n("i",{staticClass:"el-icon-zoom-in"})]):t._e(),t.disabled?t._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(n){t.$emit("remove",e)}}},[n("i",{staticClass:"el-icon-delete"})])]):t._e()],{file:e})],2)})),0)},i=[];r._withStripped=!0;var o=n(6),a=n.n(o),s=n(42),u=n.n(s),c={name:"ElUploadList",mixins:[a.a],data:function(){return{focusing:!1}},components:{ElProgress:u.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(t){return parseInt(t,10)},handleClick:function(t){this.handlePreview&&this.handlePreview(t)}}},l=c,h=n(0),f=Object(h["a"])(l,r,i,!1,null,null,null);f.options.__file="packages/upload/src/upload-list.vue";var p=f.exports,d=n(26),g=n.n(d);function m(t,e,n){var r=void 0;r=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+t+" "+n.status;var i=new Error(r);return i.status=n.status,i.method="post",i.url=t,i}function v(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(n){return e}}function y(t){if("undefined"!==typeof XMLHttpRequest){var e=new XMLHttpRequest,n=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var r=new FormData;t.data&&Object.keys(t.data).forEach((function(e){r.append(e,t.data[e])})),r.append(t.filename,t.file,t.file.name),e.onerror=function(e){t.onError(e)},e.onload=function(){if(e.status<200||e.status>=300)return t.onError(m(n,t,e));t.onSuccess(v(e))},e.open("post",n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var i=t.headers||{};for(var o in i)i.hasOwnProperty(o)&&null!==i[o]&&e.setRequestHeader(o,i[o]);return e.send(r),e}}var _=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-upload-dragger",class:{"is-dragover":t.dragover},on:{drop:function(e){return e.preventDefault(),t.onDrop(e)},dragover:function(e){return e.preventDefault(),t.onDragover(e)},dragleave:function(e){e.preventDefault(),t.dragover=!1}}},[t._t("default")],2)},b=[];_._withStripped=!0;var x={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(t){if(!this.disabled&&this.uploader){var e=this.uploader.accept;this.dragover=!1,e?this.$emit("file",[].slice.call(t.dataTransfer.files).filter((function(t){var n=t.type,r=t.name,i=r.indexOf(".")>-1?"."+r.split(".").pop():"",o=n.replace(/\/.*$/,"");return e.split(",").map((function(t){return t.trim()})).filter((function(t){return t})).some((function(t){return/\..+$/.test(t)?i===t:/\/\*$/.test(t)?o===t.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(t)&&n===t}))}))):this.$emit("file",t.dataTransfer.files)}}}},w=x,E=Object(h["a"])(w,_,b,!1,null,null,null);E.options.__file="packages/upload/src/upload-dragger.vue";var S,M,T=E.exports,C={inject:["uploader"],components:{UploadDragger:T},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:y},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(t){return-1!==t.indexOf("image")},handleChange:function(t){var e=t.target.files;e&&this.uploadFiles(e)},uploadFiles:function(t){var e=this;if(this.limit&&this.fileList.length+t.length>this.limit)this.onExceed&&this.onExceed(t,this.fileList);else{var n=Array.prototype.slice.call(t);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach((function(t){e.onStart(t),e.autoUpload&&e.upload(t)}))}},upload:function(t){var e=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(t);var n=this.beforeUpload(t);n&&n.then?n.then((function(n){var r=Object.prototype.toString.call(n);if("[object File]"===r||"[object Blob]"===r){for(var i in"[object Blob]"===r&&(n=new File([n],t.name,{type:t.type})),t)t.hasOwnProperty(i)&&(n[i]=t[i]);e.post(n)}else e.post(t)}),(function(){e.onRemove(null,t)})):!1!==n?this.post(t):this.onRemove(null,t)},abort:function(t){var e=this.reqs;if(t){var n=t;t.uid&&(n=t.uid),e[n]&&e[n].abort()}else Object.keys(e).forEach((function(t){e[t]&&e[t].abort(),delete e[t]}))},post:function(t){var e=this,n=t.uid,r={headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(n){e.onProgress(n,t)},onSuccess:function(r){e.onSuccess(r,t),delete e.reqs[n]},onError:function(r){e.onError(r,t),delete e.reqs[n]}},i=this.httpRequest(r);this.reqs[n]=i,i&&i.then&&i.then(r.onSuccess,r.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(t){t.target===t.currentTarget&&(13!==t.keyCode&&32!==t.keyCode||this.handleClick())}},render:function(t){var e=this.handleClick,n=this.drag,r=this.name,i=this.handleChange,o=this.multiple,a=this.accept,s=this.listType,u=this.uploadFiles,c=this.disabled,l=this.handleKeydown,h={class:{"el-upload":!0},on:{click:e,keydown:l}};return h.class["el-upload--"+s]=!0,t("div",g()([h,{attrs:{tabindex:"0"}}]),[n?t("upload-dragger",{attrs:{disabled:c},on:{file:u}},[this.$slots.default]):this.$slots.default,t("input",{class:"el-upload__input",attrs:{type:"file",name:r,multiple:o,accept:a},ref:"input",on:{change:i}})])}},L=C,A=Object(h["a"])(L,S,M,!1,null,null,null);A.options.__file="packages/upload/src/upload.vue";var I=A.exports,P=n(11),R=n.n(P);function O(){}var N,D,F={name:"ElUpload",mixins:[R.a],components:{ElProgress:u.a,UploadList:p,Upload:I},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:O},onChange:{type:Function,default:O},onPreview:{type:Function},onSuccess:{type:Function,default:O},onProgress:{type:Function,default:O},onError:{type:Function,default:O},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:O}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(t){"picture-card"!==t&&"picture"!==t||(this.uploadFiles=this.uploadFiles.map((function(t){if(!t.url&&t.raw)try{t.url=URL.createObjectURL(t.raw)}catch(e){console.error("[Element Error][Upload]",e)}return t})))},fileList:{immediate:!0,handler:function(t){var e=this;this.uploadFiles=t.map((function(t){return t.uid=t.uid||Date.now()+e.tempIndex++,t.status=t.status||"success",t}))}}},methods:{handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"ready",name:t.name,size:t.size,percentage:0,uid:t.uid,raw:t};if("picture-card"===this.listType||"picture"===this.listType)try{e.url=URL.createObjectURL(t)}catch(n){return void console.error("[Element Error][Upload]",n)}this.uploadFiles.push(e),this.onChange(e,this.uploadFiles)},handleProgress:function(t,e){var n=this.getFile(e);this.onProgress(t,n,this.uploadFiles),n.status="uploading",n.percentage=t.percent||0},handleSuccess:function(t,e){var n=this.getFile(e);n&&(n.status="success",n.response=t,this.onSuccess(t,n,this.uploadFiles),this.onChange(n,this.uploadFiles))},handleError:function(t,e){var n=this.getFile(e),r=this.uploadFiles;n.status="fail",r.splice(r.indexOf(n),1),this.onError(t,n,this.uploadFiles),this.onChange(n,this.uploadFiles)},handleRemove:function(t,e){var n=this;e&&(t=this.getFile(e));var r=function(){n.abort(t);var e=n.uploadFiles;e.splice(e.indexOf(t),1),n.onRemove(t,e)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var i=this.beforeRemove(t,this.uploadFiles);i&&i.then?i.then((function(){r()}),O):!1!==i&&r()}}else r()},getFile:function(t){var e=this.uploadFiles,n=void 0;return e.every((function(e){return n=t.uid===e.uid?e:null,!n})),n},abort:function(t){this.$refs["upload-inner"].abort(t)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var t=this;this.uploadFiles.filter((function(t){return"ready"===t.status})).forEach((function(e){t.$refs["upload-inner"].upload(e.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(t){t.url&&0===t.url.indexOf("blob:")&&URL.revokeObjectURL(t.url)}))},render:function(t){var e=this,n=void 0;this.showFileList&&(n=t(p,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(t){if(e.$scopedSlots.file)return e.$scopedSlots.file({file:t.file})}]));var r={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},i=this.$slots.trigger||this.$slots.default,o=t("upload",r,[i]);return t("div",["picture-card"===this.listType?n:"",this.$slots.trigger?[o,this.$slots.default]:o,this.$slots.tip,"picture-card"!==this.listType?n:""])}},B=F,k=Object(h["a"])(B,N,D,!1,null,null,null);k.options.__file="packages/upload/src/index.vue";var U=k.exports;U.install=function(t){t.component(U.name,U)};e["default"]=U},6:function(t,e){t.exports=n("6b7c")}})},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"8ad9":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("acd8"),n("e25e");var r=n("5a89");function i(t){var e=Math.PI/180,n=48,i=57,o=44,a=32,s=46,u=45;t.transformSVGPath=function(t){var c,l,h,f,p=new r["ShapePath"],d=1,g=t.length,m=0,v=0,y=0,_=0,b=null,x=null,w=0,E=0,S=0,M=0,T=0,C=0,L=0,A=0,I=0;function P(){var e,r,c,l=!1;while(d<g){if(r=t.charCodeAt(d),r!==o&&r!==a)break;d++}e=r===u?d++:d;while(d<g)if(r=t.charCodeAt(d),n<=r&&r<=i)d++;else{if(r!==s)return c=t.substring(e,d),l?parseFloat(c):parseInt(c);d++,l=!0}return c=t.substring(e),l?parseFloat(c):parseInt(c)}function R(){var e;while(d<g){if(e=t.charCodeAt(d),e!==o&&e!==a)break;d++}return e=t.charCodeAt(d),e===u||n<=e&&e<=i}c=t[0];while(d<=g){switch(f=!0,c){case"M":m=P(),v=P(),p.moveTo(m,v),c="L",b=m,x=v;break;case"m":m+=P(),v+=P(),p.moveTo(m,v),c="l",b=m,x=v;break;case"Z":case"z":f=!1,m===b&&v===x||p.lineTo(b,x);break;case"L":case"H":case"V":y="V"===c?m:P(),_="H"===c?v:P(),p.lineTo(y,_),m=y,v=_;break;case"l":case"h":case"v":y="v"===c?m:m+P(),_="h"===c?v:v+P(),p.lineTo(y,_),m=y,v=_;break;case"C":w=P(),S=P();case"S":"S"===c&&(w=2*m-E,S=2*v-M),E=P(),M=P(),y=P(),_=P(),p.bezierCurveTo(w,S,E,M,y,_),m=y,v=_;break;case"c":w=m+P(),S=v+P();case"s":"s"===c&&(w=2*m-E,S=2*v-M),E=m+P(),M=v+P(),y=m+P(),_=v+P(),p.bezierCurveTo(w,S,E,M,y,_),m=y,v=_;break;case"Q":w=P(),S=P();case"T":"T"===c&&(w=2*m-w,S=2*v-S),y=P(),_=P(),p.quadraticCurveTo(w,S,y,_),m=y,v=_;break;case"q":w=m+P(),S=v+P();case"t":"t"===c&&(w=2*m-w,S=2*v-S),y=m+P(),_=v+P(),p.quadraticCurveTo(w,S,y,_),m=y,v=_;break;case"A":T=P(),C=P(),L=P()*e,A=P(),I=P(),y=P(),_=P(),T!==C&&console.warn("Forcing elliptical arc to be a circular one:",T,C),w=Math.cos(L)*(m-y)/2+Math.sin(L)*(v-_)/2,S=-Math.sin(L)*(m-y)/2+Math.cos(L)*(v-_)/2;var O=Math.sqrt((T*T*C*C-T*T*S*S-C*C*w*w)/(T*T*S*S+C*C*w*w));A===I&&(O=-O),E=O*T*S/C,M=O*-C*w/T,l=Math.cos(L)*E-Math.sin(L)*M+(m+y)/2,h=Math.sin(L)*E+Math.cos(L)*M+(v+_)/2;var N=new r["Vector2"](1,0),D=new r["Vector2"]((w-E)/T,(S-M)/C),F=Math.acos(N.dot(D)/N.length()/D.length());N.x*D.y-N.y*D.x<0&&(F=-F),N.x=(-w-E)/T,N.y=(-S-M)/C;var B=Math.acos(D.dot(N)/D.length()/N.length());D.x*N.y-D.y*N.x<0&&(B=-B),!I&&B>0&&(B-=2*Math.PI),I&&B<0&&(B+=2*Math.PI),p.absarc(l,h,T,F,F+B,I),m=y,v=_;break;default:throw new Error("Wrong path command: "+c)}f&&R()||(c=t[d++])}return p}}},"8bbf":function(e,n){e.exports=t},"8d86":function(t,e,n){"use strict";var r=n("5a89"),i=n("5639"),o=n("4b2f"),a=function(t,e){r["Mesh"].call(this),this.type="LineSegments2",this.geometry=void 0!==t?t:new i["a"],this.material=void 0!==e?e:new o["a"]({color:16777215*Math.random()})};a.prototype=Object.assign(Object.create(r["Mesh"].prototype),{constructor:a,isLineSegments2:!0,computeLineDistances:function(){var t=new r["Vector3"],e=new r["Vector3"];return function(){for(var n=this.geometry,i=n.attributes.instanceStart,o=n.attributes.instanceEnd,a=new Float32Array(2*i.data.count),s=0,u=0,c=i.data.count;s<c;s++,u+=2)t.fromBufferAttribute(i,s),e.fromBufferAttribute(o,s),a[u]=0===u?0:a[u-1],a[u+1]=a[u]+t.distanceTo(e);var l=new r["InstancedInterleavedBuffer"](a,2,1);return n.setAttribute("instanceDistanceStart",new r["InterleavedBufferAttribute"](l,1,0)),n.setAttribute("instanceDistanceEnd",new r["InterleavedBufferAttribute"](l,1,1)),this}}()});var s=n("1355");n.d(e,"a",(function(){return u}));var u=function(t,e){a.call(this),this.type="Line2",this.geometry=void 0!==t?t:new s["a"],this.material=void 0!==e?e:new o["a"]({color:16777215*Math.random()})};u.prototype=Object.assign(Object.create(a.prototype),{constructor:u,isLine2:!0})},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9152:function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*g}},9263:function(t,e,n){"use strict";var r=n("ad6d"),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=void 0!==/()??/.exec("")[1],c=s||u;c&&(a=function(t){var e,n,a,c,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),s&&(e=l.lastIndex),a=i.call(l,t),s&&a&&(l.lastIndex=l.global?a.index+a[0].length:e),u&&a&&a.length>1&&o.call(a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a}),t.exports=a},"92fa":function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function r(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(t,e){var i,o,a,s,u;for(a in e)if(i=t[a],o=e[a],i&&n.test(a))if("class"===a&&("string"===typeof i&&(u=i,t[a]=i={},i[u]=!0),"string"===typeof o&&(u=o,e[a]=o={},o[u]=!0)),"on"===a||"nativeOn"===a||"hook"===a)for(s in o)i[s]=r(i[s],o[s]);else if(Array.isArray(i))t[a]=i.concat(o);else if(Array.isArray(o))t[a]=[i].concat(o);else for(s in o)i[s]=o[s];else t[a]=e[a];return t}),{})}},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},9861:function(t,e,n){"use strict";n("e260");var r=n("23e7"),i=n("d066"),o=n("0d3b"),a=n("6eeb"),s=n("e2cc"),u=n("d44e"),c=n("9ed3"),l=n("69f3"),h=n("19aa"),f=n("5135"),p=n("f8c2"),d=n("f5df"),g=n("825a"),m=n("861d"),v=n("7c73"),y=n("5c6c"),_=n("9a1f"),b=n("35a1"),x=n("b622"),w=i("fetch"),E=i("Headers"),S=x("iterator"),M="URLSearchParams",T=M+"Iterator",C=l.set,L=l.getterFor(M),A=l.getterFor(T),I=/\+/g,P=Array(4),R=function(t){return P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},O=function(t){try{return decodeURIComponent(t)}catch(e){return t}},N=function(t){var e=t.replace(I," "),n=4;try{return decodeURIComponent(e)}catch(r){while(n)e=e.replace(R(n--),O);return e}},D=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(t){return F[t]},k=function(t){return encodeURIComponent(t).replace(D,B)},U=function(t,e){if(e){var n,r,i=e.split("&"),o=0;while(o<i.length)n=i[o++],n.length&&(r=n.split("="),t.push({key:N(r.shift()),value:N(r.join("="))}))}},j=function(t){this.entries.length=0,U(this.entries,t)},G=function(t,e){if(t<e)throw TypeError("Not enough arguments")},z=c((function(t,e){C(this,{type:T,iterator:_(L(t).entries),kind:e})}),"Iterator",(function(){var t=A(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),V=function(){h(this,V,M);var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(C(l,{type:M,entries:p,updateURL:function(){},updateSearchParams:j}),void 0!==c)if(m(c))if(t=b(c),"function"===typeof t){e=t.call(c),n=e.next;while(!(r=n.call(e)).done){if(i=_(g(r.value)),o=i.next,(a=o.call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:s.value+""})}}else for(u in c)f(c,u)&&p.push({key:u,value:c[u]+""});else U(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},H=V.prototype;s(H,{append:function(t,e){G(arguments.length,2);var n=L(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){G(arguments.length,1);var e=L(this),n=e.entries,r=t+"",i=0;while(i<n.length)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){G(arguments.length,1);for(var e=L(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){G(arguments.length,1);for(var e=L(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){G(arguments.length,1);var e=L(this).entries,n=t+"",r=0;while(r<e.length)if(e[r++].key===n)return!0;return!1},set:function(t,e){G(arguments.length,1);for(var n,r=L(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)n=i[u],n.key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=L(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){var e,n=L(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),i=0;while(i<n.length)e=n[i++],r(e.value,e.key,this)},keys:function(){return new z(this,"keys")},values:function(){return new z(this,"values")},entries:function(){return new z(this,"entries")}},{enumerable:!0}),a(H,S,H.entries),a(H,"toString",(function(){var t,e=L(this).entries,n=[],r=0;while(r<e.length)t=e[r++],n.push(k(t.key)+"="+k(t.value));return n.join("&")}),{enumerable:!0}),u(V,M),r({global:!0,forced:!o},{URLSearchParams:V}),o||"function"!=typeof w||"function"!=typeof E||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(e=arguments[1],m(e)&&(n=e.body,d(n)===M&&(r=e.headers?new E(e.headers):new E,r.has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=v(e,{body:y(0,String(n)),headers:y(0,r)}))),i.push(e)),w.apply(this,i)}}),t.exports={URLSearchParams:V,getState:L}},"98f3":function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},9911:function(t,e,n){"use strict";var r=n("23e7"),i=n("857a"),o=n("eae9");r({target:"String",proto:!0,forced:o("link")},{link:function(t){return i(this,"a","href",t)}})},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("e8b5"),a=n("861d"),s=n("7b0b"),u=n("50c4"),c=n("8418"),l=n("65f0"),h=n("1dde"),f=n("b622"),p=n("60ae"),d=f("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=p>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=h("concat"),_=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)},b=!v||!y;r({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,r,i,o,a=s(this),h=l(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],_(o)){if(i=u(o.length),f+i>g)throw TypeError(m);for(n=0;n<i;n++,f++)n in o&&c(h,f,o[n])}else{if(f>=g)throw TypeError(m);c(h,f++,o)}return h.length=f,h}})},"99de":function(t,e,n){"use strict";n("a4d3"),n("e01a"),n("d28b"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t){return i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},i(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?o(t):e}n.d(e,"a",(function(){return a}))},"9a1f":function(t,e,n){var r=n("825a"),i=n("35a1");t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},"9bdd":function(t,e,n){var r=n("825a");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),a=n("c04e"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9d7e":function(t,e,n){"use strict";e.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){function e(t){for(var e=arguments.length,n=Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return 1===n.length&&"object"===r(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),t.replace(o,(function(e,r,o,a){var s=void 0;return"{"===t[a-1]&&"}"===t[a+e.length]?o:(s=(0,i.hasOwn)(n,o)?n[o]:null,null===s||void 0===s?"":s)}))}return e};var i=n("8122"),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},"9e1f":function(t,e,n){},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),a=n("c430"),s=n("83ab"),u=n("4930"),c=n("fdbf"),l=n("d039"),h=n("5135"),f=n("e8b5"),p=n("861d"),d=n("825a"),g=n("7b0b"),m=n("fc6a"),v=n("c04e"),y=n("5c6c"),_=n("7c73"),b=n("df75"),x=n("241c"),w=n("057f"),E=n("7418"),S=n("06cf"),M=n("9bf2"),T=n("d1e7"),C=n("9112"),L=n("6eeb"),A=n("5692"),I=n("f772"),P=n("d012"),R=n("90e3"),O=n("b622"),N=n("c032"),D=n("746f"),F=n("d44e"),B=n("69f3"),k=n("b727").forEach,U=I("hidden"),j="Symbol",G="prototype",z=O("toPrimitive"),V=B.set,H=B.getterFor(j),q=Object[G],W=i.Symbol,X=o("JSON","stringify"),Y=S.f,$=M.f,J=w.f,Z=T.f,K=A("symbols"),Q=A("op-symbols"),tt=A("string-to-symbol-registry"),et=A("symbol-to-string-registry"),nt=A("wks"),rt=i.QObject,it=!rt||!rt[G]||!rt[G].findChild,ot=s&&l((function(){return 7!=_($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(q,e);r&&delete q[e],$(t,e,n),r&&t!==q&&$(q,e,r)}:$,at=function(t,e){var n=K[t]=_(W[G]);return V(n,{type:j,tag:t,description:e}),s||(n.description=e),n},st=u&&"symbol"==typeof W.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},ut=function(t,e,n){t===q&&ut(Q,e,n),d(t);var r=v(e,!0);return d(n),h(K,r)?(n.enumerable?(h(t,U)&&t[U][r]&&(t[U][r]=!1),n=_(n,{enumerable:y(0,!1)})):(h(t,U)||$(t,U,y(1,{})),t[U][r]=!0),ot(t,r,n)):$(t,r,n)},ct=function(t,e){d(t);var n=m(e),r=b(n).concat(dt(n));return k(r,(function(e){s&&!ht.call(n,e)||ut(t,e,n[e])})),t},lt=function(t,e){return void 0===e?_(t):ct(_(t),e)},ht=function(t){var e=v(t,!0),n=Z.call(this,e);return!(this===q&&h(K,e)&&!h(Q,e))&&(!(n||!h(this,e)||!h(K,e)||h(this,U)&&this[U][e])||n)},ft=function(t,e){var n=m(t),r=v(e,!0);if(n!==q||!h(K,r)||h(Q,r)){var i=Y(n,r);return!i||!h(K,r)||h(n,U)&&n[U][r]||(i.enumerable=!0),i}},pt=function(t){var e=J(m(t)),n=[];return k(e,(function(t){h(K,t)||h(P,t)||n.push(t)})),n},dt=function(t){var e=t===q,n=J(e?Q:m(t)),r=[];return k(n,(function(t){!h(K,t)||e&&!h(q,t)||r.push(K[t])})),r};if(u||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),n=function(t){this===q&&n.call(Q,t),h(this,U)&&h(this[U],e)&&(this[U][e]=!1),ot(this,e,y(1,t))};return s&&it&&ot(q,e,{configurable:!0,set:n}),at(e,t)},L(W[G],"toString",(function(){return H(this).tag})),T.f=ht,M.f=ut,S.f=ft,x.f=w.f=pt,E.f=dt,s&&($(W[G],"description",{configurable:!0,get:function(){return H(this).description}}),a||L(q,"propertyIsEnumerable",ht,{unsafe:!0}))),c||(N.f=function(t){return at(O(t),t)}),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:W}),k(b(nt),(function(t){D(t)})),r({target:j,stat:!0,forced:!u},{for:function(t){var e=String(t);if(h(tt,e))return tt[e];var n=W(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(h(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:lt,defineProperty:ut,defineProperties:ct,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:pt,getOwnPropertySymbols:dt}),r({target:"Object",stat:!0,forced:l((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(g(t))}}),X){var gt=!u||l((function(){var t=W();return"[null]"!=X([t])||"{}"!=X({a:t})||"{}"!=X(Object(t))}));r({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(p(e)||void 0!==t)&&!st(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,X.apply(null,i)}})}W[G][z]||C(W[G],z,W[G].valueOf),F(W,j),P[U]=!0},a630:function(t,e,n){var r=n("23e7"),i=n("4df4"),o=n("1c7e"),a=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:i})},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a6a9:function(t,e,n){},a742:function(t,e,n){"use strict";function r(t){return"[object String]"===Object.prototype.toString.call(t)}function i(t){return"[object Object]"===Object.prototype.toString.call(t)}function o(t){return t&&t.nodeType===Node.ELEMENT_NODE}e.__esModule=!0,e.isString=r,e.isObject=i,e.isHtmlElement=o;e.isFunction=function(t){var e={};return t&&"[object Function]"===e.toString.call(t)},e.isUndefined=function(t){return void 0===t},e.isDefined=function(t){return void 0!==t&&null!==t}},a794:function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,h,f,p,d,g,m,v,y,_=n("474c"),b=n("98f3"),x=n("b5ea"),w={sphere:b["a"],point:E,lineStart:M,lineEnd:L,polygonStart:function(){w.lineStart=A,w.lineEnd=I},polygonEnd:function(){w.lineStart=M,w.lineEnd=L}};function E(t,e){t*=_["o"],e*=_["o"];var n=Object(_["f"])(e);S(n*Object(_["f"])(t),n*Object(_["q"])(t),Object(_["q"])(e))}function S(t,e,n){++r,o+=(t-o)/r,a+=(e-a)/r,s+=(n-s)/r}function M(){w.point=T}function T(t,e){t*=_["o"],e*=_["o"];var n=Object(_["f"])(e);m=n*Object(_["f"])(t),v=n*Object(_["q"])(t),y=Object(_["q"])(e),w.point=C,S(m,v,y)}function C(t,e){t*=_["o"],e*=_["o"];var n=Object(_["f"])(e),r=n*Object(_["f"])(t),o=n*Object(_["q"])(t),a=Object(_["q"])(e),s=Object(_["e"])(Object(_["r"])((s=v*a-y*o)*s+(s=y*r-m*a)*s+(s=m*o-v*r)*s),m*r+v*o+y*a);i+=s,u+=s*(m+(m=r)),c+=s*(v+(v=o)),l+=s*(y+(y=a)),S(m,v,y)}function L(){w.point=E}function A(){w.point=P}function I(){R(d,g),w.point=E}function P(t,e){d=t,g=e,t*=_["o"],e*=_["o"],w.point=R;var n=Object(_["f"])(e);m=n*Object(_["f"])(t),v=n*Object(_["q"])(t),y=Object(_["q"])(e),S(m,v,y)}function R(t,e){t*=_["o"],e*=_["o"];var n=Object(_["f"])(e),r=n*Object(_["f"])(t),o=n*Object(_["q"])(t),a=Object(_["q"])(e),s=v*a-y*o,d=y*r-m*a,g=m*o-v*r,b=Object(_["r"])(s*s+d*d+g*g),x=Object(_["c"])(b),w=b&&-x/b;h+=w*s,f+=w*d,p+=w*g,i+=x,u+=x*(m+(m=r)),c+=x*(v+(v=o)),l+=x*(y+(y=a)),S(m,v,y)}e["a"]=function(t){r=i=o=a=s=u=c=l=h=f=p=0,Object(x["a"])(t,w);var e=h,n=f,d=p,g=e*e+n*n+d*d;return g<_["i"]&&(e=u,n=c,d=l,i<_["h"]&&(e=o,n=a,d=s),g=e*e+n*n+d*d,g<_["i"])?[NaN,NaN]:[Object(_["e"])(n,e)*_["g"],Object(_["c"])(d/Object(_["r"])(g))*_["g"]]}},a7cc:function(t,e,n){},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("5135"),u=n("c6b6"),c=n("7156"),l=n("c04e"),h=n("d039"),f=n("7c73"),p=n("241c").f,d=n("06cf").f,g=n("9bf2").f,m=n("58a8").trim,v="Number",y=i[v],_=y.prototype,b=u(f(_))==v,x=function(t){var e,n,r,i,o,a,s,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(o=c.slice(2),a=o.length,s=0;s<a;s++)if(u=o.charCodeAt(s),u<48||u>i)return NaN;return parseInt(o,r)}return+c};if(o(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var w,E=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof E&&(b?h((function(){_.valueOf.call(n)})):u(n)!=v)?c(new y(x(e)),n,E):x(e)},S=r?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),M=0;S.length>M;M++)s(y,w=S[M])&&!s(E,w)&&g(E,w,d(y,w));E.prototype=_,_.constructor=E,a(i,v,E)}},acd8:function(t,e,n){var r=n("23e7"),i=n("6fe5");r({global:!0,forced:parseFloat!=i},{parseFloat:i})},ace4:function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),o=n("621a"),a=n("825a"),s=n("23cb"),u=n("50c4"),c=n("4840"),l=o.ArrayBuffer,h=o.DataView,f=l.prototype.slice,p=i((function(){return!new l(2).slice(1,void 0).byteLength}));r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:p},{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(a(this),t);var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(c(this,l))(u(i-r)),p=new h(this),d=new h(o),g=0;while(r<i)d.setUint8(g++,p.getUint8(r++));return o}})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ade3:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},adec:function(t,e,n){},ae93:function(t,e,n){"use strict";var r,i,o,a=n("e163"),s=n("9112"),u=n("5135"),c=n("b622"),l=n("c430"),h=c("iterator"),f=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)),i!==Object.prototype&&(r=i)):f=!0),void 0==r&&(r={}),l||u(r,h)||s(r,h,p),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,u="name";!r||u in o||i(o,u,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},b301:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!n||!r((function(){n.call(null,e||function(){throw 1},1)}))}},b39a:function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},b575:function(t,e,n){var r,i,o,a,s,u,c,l,h=n("da84"),f=n("06cf").f,p=n("c6b6"),d=n("2cf4").set,g=n("b629"),m=h.MutationObserver||h.WebKitMutationObserver,v=h.process,y=h.Promise,_="process"==p(v),b=f(h,"queueMicrotask"),x=b&&b.value;x||(r=function(){var t,e;_&&(t=v.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},_?a=function(){v.nextTick(r)}:m&&!g?(s=!0,u=document.createTextNode(""),new m(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){d.call(h,r)}),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},b5ea:function(t,e,n){"use strict";function r(t,e){t&&o.hasOwnProperty(t.type)&&o[t.type](t,e)}var i={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,i=-1,o=n.length;while(++i<o)r(n[i].geometry,e)}},o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)a(n[r],e,0)},Polygon:function(t,e){s(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)s(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,i=-1,o=n.length;while(++i<o)r(n[i],e)}};function a(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function s(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)a(t[n],e,1);e.polygonEnd()}e["a"]=function(t,e){t&&i.hasOwnProperty(t.type)?i[t.type](t,e):r(t,e)}},b622:function(t,e,n){var r=n("da84"),i=n("5692"),o=n("5135"),a=n("90e3"),s=n("4930"),u=n("fdbf"),c=i("wks"),l=r.Symbol,h=u?l:a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=h("Symbol."+t)),c[t]}},b629:function(t,e,n){var r=n("b39a");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n("1fb5"),i=n("9152"),o=n("e3db");function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?m(t,e,n,r):"string"===typeof e?d(t,e,n):v(t,e)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,r){return h(e),e<=0?u(t,e):void 0!==n?"string"===typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}function p(t,e){if(h(e),t=u(t,e<0?0:0|y(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|b(e,n);t=u(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function g(t,e){var n=e.length<0?0:0|y(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function m(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=g(t,e),t}function v(t,e){if(c.isBuffer(e)){var n=0|y(e.length);return t=u(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?u(t,0):g(t,e);if("Buffer"===e.type&&o(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),c.alloc(+t)}function b(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(t).length;default:if(r)return J(t).length;e=(""+e).toLowerCase(),r=!0}}function x(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return B(this,e,n);case"utf8":case"utf-8":return R(this,e,n);case"ascii":return D(this,e,n);case"latin1":case"binary":return F(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function w(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function E(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:S(t,e,n,r,i);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):S(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function S(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function M(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function T(t,e,n,r){return tt(J(e,t.length-n),t,n,r)}function C(t,e,n,r){return tt(Z(e),t,n,r)}function L(t,e,n,r){return C(t,e,n,r)}function A(t,e,n,r){return tt(Q(e),t,n,r)}function I(t,e,n,r){return tt(K(e,t.length-n),t,n,r)}function P(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function R(t,e,n){n=Math.min(t.length,n);var r=[],i=e;while(i<n){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:o=t[i+1],128===(192&o)&&(u=(31&c)<<6|63&o,u>127&&(l=u));break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a,u>2047&&(u<55296||u>57343)&&(l=u));break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(l=u))}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return N(r)}e.Buffer=c,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:a(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return f(null,t,e,n)},c.allocUnsafe=function(t){return p(null,t)},c.allocUnsafeSlow=function(t){return p(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=b,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):x.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(u[h]!==l[h]){o=u[h],a=l[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return E(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return E(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return M(this,t,e,n);case"utf8":case"utf-8":return T(this,t,e,n);case"ascii":return C(this,t,e,n);case"latin1":case"binary":return L(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function N(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}function D(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function F(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function B(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=$(t[o]);return i}function k(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function G(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function z(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function V(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(t,e,n,r,o){return o||V(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function q(t,e,n,r,o){return o||V(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);var r=e,i=1,o=this[t+--r];while(r>0&&(i*=256))o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;j(this,t,e,n,i,0)}var o=1,a=0;this[e]=255&t;while(++a<n&&(o*=256))this[e+a]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;j(this,t,e,n,i,0)}var o=n-1,a=1;this[e+o]=255&t;while(--o>=0&&(a*=256))this[e+o]=t/a&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):z(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;this[e]=255&t;while(++o<n&&(a*=256))t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;this[e+o]=255&t;while(--o>=0&&(a*=256))t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):G(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):G(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):z(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return H(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return H(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return q(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return q(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:J(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function X(t){if(t=Y(t).replace(W,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function $(t){return t<16?"0"+t.toString(16):t.toString(16)}function J(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function K(t,e){for(var n,r,i,o=[],a=0;a<t.length;++a){if((e-=2)<0)break;n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function Q(t){return r.toByteArray(X(t))}function tt(t,e,n,r){for(var i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function et(t){return t!==t}}).call(this,n("c8ba"))},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),a=n("d039"),s=a((function(){o(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return o(i(t))}})},b727:function(t,e,n){var r=n("f8c2"),i=n("44ad"),o=n("7b0b"),a=n("50c4"),s=n("65f0"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h;return function(p,d,g,m){for(var v,y,_=o(p),b=i(_),x=r(d,g,3),w=a(b.length),E=0,S=m||s,M=e?S(p,w):n?S(p,0):void 0;w>E;E++)if((f||E in b)&&(v=b[E],y=x(v,E,_),t))if(e)M[E]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return E;case 2:u.call(M,v)}else if(l)return!1;return h?-1:c||l?l:M}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},b82a:function(t,e,n){"use strict";function r(){this.reset()}e["a"]=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){o(i,t,this.t),o(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new r;function o(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}},b9d8:function(t,e,n){"use strict";function r(t){if(t&&"undefined"!==typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}function i(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),o=Math.round(t.b),a=t.a,s=Math.round(t.h),u=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){var l=t.hex.toString(16);while(l.length<6)l="0"+l;return"#"+l}return"CSS_RGB"===n?"rgb("+r+","+i+","+o+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+o+","+a+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+o+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+",a:"+a+"}":"unknown format"}n.d(e,"a",(function(){return wt}));var o=Array.prototype.forEach,a=Array.prototype.slice,s={BREAK:{},extend:function(t){return this.each(a.call(arguments,1),(function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(a.call(arguments,1),(function(e){var n=this.isObject(e)?Object.keys(e):[];n.forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=a.call(arguments);return function(){for(var e=a.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(t)if(o&&t.forEach&&t.forEach===o)t.forEach(e,n);else if(t.length===t.length+0){var r=void 0,i=void 0;for(r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===this.BREAK)return}else for(var a in t)if(e.call(n,t[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var i=this,o=arguments;function a(){r=null,n||t.apply(i,o)}var s=n||!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}},toArray:function(t){return t.toArray?t.toArray():a.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}},u=[{litmus:s.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:i},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:i},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:i},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:i}}},{litmus:s.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:s.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:s.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(s.isNumber(t.r)&&s.isNumber(t.g)&&s.isNumber(t.b)&&s.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(s.isNumber(t.r)&&s.isNumber(t.g)&&s.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(s.isNumber(t.h)&&s.isNumber(t.s)&&s.isNumber(t.v)&&s.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(s.isNumber(t.h)&&s.isNumber(t.s)&&s.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],c=void 0,l=void 0,h=function(){l=!1;var t=arguments.length>1?s.toArray(arguments):arguments[0];return s.each(u,(function(e){if(e.litmus(t))return s.each(e.conversions,(function(e,n){if(c=e.read(t),!1===l&&!1!==c)return l=c,c.conversionName=n,c.conversion=e,s.BREAK})),s.BREAK})),l},f=void 0,p={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),i=Math.max(t,e,n),o=i-r,a=void 0,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=o/i,a=t===i?(e-n)/o:e===i?2+(n-t)/o:4+(t-e)/o,a/=6,a<0&&(a+=1),{h:360*a,s:s,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n),r},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(f=8*e)|t&~(255<<f)}},d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),v=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},y=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},_=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},b=function(){function t(){if(g(this,t),this.__state=h.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(t,[{key:"toString",value:function(){return i(this)}},{key:"toHexString",value:function(){return i(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function x(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(b.recalculateRGB(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(b.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function w(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(b.recalculateHSV(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(b.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}b.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=p.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");s.extend(t.__state,p.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},b.recalculateHSV=function(t){var e=p.rgb_to_hsv(t.r,t.g,t.b);s.extend(t.__state,{s:e.s,v:e.v}),s.isNaN(e.h)?s.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},b.COMPONENTS=["r","g","b","h","s","v","hex","a"],x(b.prototype,"r",2),x(b.prototype,"g",1),x(b.prototype,"b",0),w(b.prototype,"h"),w(b.prototype,"s"),w(b.prototype,"v"),Object.defineProperty(b.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(b.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=p.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var E=function(){function t(e,n){g(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),S={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},M={};s.each(S,(function(t,e){s.each(t,(function(t){M[t]=e}))}));var T=/(\d+(\.\d+)?)px/;function C(t){if("0"===t||s.isUndefined(t))return 0;var e=t.match(T);return s.isNull(e)?0:parseFloat(e[1])}var L={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,i=e;s.isUndefined(i)&&(i=!0),s.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var i=n||{},o=M[e];if(!o)throw new Error("Event type "+e+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var u=i.x||i.clientX||0,c=i.y||i.clientY||0;a.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=a.initKeyboardEvent||a.initKeyEvent;s.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(e,i.bubbles||!1,i.cancelable||!0);break}s.defaults(a,r),t.dispatchEvent(a)},bind:function(t,e,n,r){var i=r||!1;return t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n),L},unbind:function(t,e,n,r){var i=r||!1;return t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on"+e,n),L},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return L},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return L},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return C(e["border-left-width"])+C(e["border-right-width"])+C(e["padding-left"])+C(e["padding-right"])+C(e.width)},getHeight:function(t){var e=getComputedStyle(t);return C(e["border-top-width"])+C(e["border-bottom-width"])+C(e["padding-top"])+C(e["padding-bottom"])+C(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},A=function(t){function e(t,n){g(this,e);var r=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function o(){i.setValue(!i.__prev)}return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),L.bind(r.__checkbox,"change",o,!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return y(e,t),m(e,[{key:"setValue",value:function(t){var n=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(E),I=function(t){function e(t,n,r){g(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r,a=i;if(i.__select=document.createElement("select"),s.isArray(o)){var u={};s.each(o,(function(t){u[t]=t})),o=u}return s.each(o,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)})),i.updateDisplay(),L.bind(i.__select,"change",(function(){var t=this.options[this.selectedIndex].value;a.setValue(t)})),i.domElement.appendChild(i.__select),i}return y(e,t),m(e,[{key:"setValue",value:function(t){var n=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return L.isActive(this.__select)?this:(this.__select.value=this.getValue(),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(E),P=function(t){function e(t,n){g(this,e);var r=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r;function o(){i.setValue(i.__input.value)}function a(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),L.bind(r.__input,"keyup",o),L.bind(r.__input,"change",o),L.bind(r.__input,"blur",a),L.bind(r.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return y(e,t),m(e,[{key:"updateDisplay",value:function(){return L.isActive(this.__input)||(this.__input.value=this.getValue()),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(E);function R(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var O=function(t){function e(t,n,r){g(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,s.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=R(i.__impliedStep),i}return y(e,t),m(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!==0&&(n=Math.round(n/this.__step)*this.__step),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=R(t),this}}]),e}(E);function N(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var D=function(t){function e(t,n,r){g(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.__truncationSuspended=!1;var o=i,a=void 0;function u(){var t=parseFloat(o.__input.value);s.isNaN(t)||o.setValue(t)}function c(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function l(){c()}function h(t){var e=a-t.clientY;o.setValue(o.getValue()+e*o.__impliedStep),a=t.clientY}function f(){L.unbind(window,"mousemove",h),L.unbind(window,"mouseup",f),c()}function p(t){L.bind(window,"mousemove",h),L.bind(window,"mouseup",f),a=t.clientY}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),L.bind(i.__input,"change",u),L.bind(i.__input,"blur",l),L.bind(i.__input,"mousedown",p),L.bind(i.__input,"keydown",(function(t){13===t.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,c())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return y(e,t),m(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():N(this.getValue(),this.__precision),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(O);function F(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}var B=function(t){function e(t,n,r,i,o){g(this,e);var a=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:i,step:o})),s=a;function u(t){document.activeElement.blur(),L.bind(window,"mousemove",c),L.bind(window,"mouseup",l),c(t)}function c(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(F(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function l(){L.unbind(window,"mousemove",c),L.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function h(t){1===t.touches.length&&(L.bind(window,"touchmove",f),L.bind(window,"touchend",p),f(t))}function f(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(F(e,n.left,n.right,s.__min,s.__max))}function p(){L.unbind(window,"touchmove",f),L.unbind(window,"touchend",p),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),L.bind(a.__background,"mousedown",u),L.bind(a.__background,"touchstart",h),L.addClass(a.__background,"slider"),L.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return y(e,t),m(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(O),k=function(t){function e(t,n,r){g(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,L.bind(i.__button,"click",(function(t){return t.preventDefault(),o.fire(),!1})),L.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return y(e,t),m(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(E),U=function(t){function e(t,n){g(this,e);var r=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new b(r.getValue()),r.__temp=new b(0);var i=r;r.domElement=document.createElement("div"),L.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",L.bind(r.__input,"keydown",(function(t){13===t.keyCode&&f.call(this)})),L.bind(r.__input,"blur",f),L.bind(r.__selector,"mousedown",(function(){L.addClass(this,"drag").bind(window,"mouseup",(function(){L.removeClass(i.__selector,"drag")}))})),L.bind(r.__selector,"touchstart",(function(){L.addClass(this,"drag").bind(window,"touchend",(function(){L.removeClass(i.__selector,"drag")}))}));var o=document.createElement("div");function a(t){d(t),L.bind(window,"mousemove",d),L.bind(window,"touchmove",d),L.bind(window,"mouseup",c),L.bind(window,"touchend",c)}function u(t){m(t),L.bind(window,"mousemove",m),L.bind(window,"touchmove",m),L.bind(window,"mouseup",l),L.bind(window,"touchend",l)}function c(){L.unbind(window,"mousemove",d),L.unbind(window,"touchmove",d),L.unbind(window,"mouseup",c),L.unbind(window,"touchend",c),p()}function l(){L.unbind(window,"mousemove",m),L.unbind(window,"touchmove",m),L.unbind(window,"mouseup",l),L.unbind(window,"touchend",l),p()}function f(){var t=h(this.value);!1!==t?(i.__color.__state=t,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function p(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function d(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,o=n.clientY,a=(r-e.left)/(e.right-e.left),s=1-(o-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function m(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=i.__hue_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientY,o=1-(r-e.top)/(e.bottom-e.top);return o>1?o=1:o<0&&(o=0),i.__color.h=360*o,i.setValue(i.__color.toOriginal()),!1}return s.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),s.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),s.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),s.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),s.extend(o.style,{width:"100%",height:"100%",background:"none"}),G(o,"top","rgba(0,0,0,0)","#000"),s.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),z(r.__hue_field),s.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),L.bind(r.__saturation_field,"mousedown",a),L.bind(r.__saturation_field,"touchstart",a),L.bind(r.__field_knob,"mousedown",a),L.bind(r.__field_knob,"touchstart",a),L.bind(r.__hue_field,"mousedown",u),L.bind(r.__hue_field,"touchstart",u),r.__saturation_field.appendChild(o),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return y(e,t),m(e,[{key:"updateDisplay",value:function(){var t=h(this.getValue());if(!1!==t){var e=!1;s.each(b.COMPONENTS,(function(n){if(!s.isUndefined(t[n])&&!s.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&s.extend(this.__color.__state,t)}s.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;s.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,G(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),s.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(E),j=["-moz-","-o-","-webkit-","-ms-",""];function G(t,e,n,r){t.style.background="",s.each(j,(function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}function z(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var V={load:function(t,e){var n=e||document,r=n.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=t,n.getElementsByTagName("head")[0].appendChild(r)},inject:function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(o){}}},H='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',q=function(t,e){var n=t[e];return s.isArray(arguments[2])||s.isObject(arguments[2])?new I(t,e,arguments[2]):s.isNumber(n)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?s.isNumber(arguments[4])?new B(t,e,arguments[2],arguments[3],arguments[4]):new B(t,e,arguments[2],arguments[3]):s.isNumber(arguments[4])?new D(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new D(t,e,{min:arguments[2],max:arguments[3]}):s.isString(n)?new P(t,e):s.isFunction(n)?new k(t,e,""):s.isBoolean(n)?new A(t,e):null};function W(t){setTimeout(t,1e3/60)}var X=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||W,Y=function(){function t(){g(this,t),this.backgroundElement=document.createElement("div"),s.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),L.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),s.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;L.bind(this.backgroundElement,"click",(function(){e.hide()}))}return m(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),s.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",L.unbind(t.domElement,"webkitTransitionEnd",e),L.unbind(t.domElement,"transitionend",e),L.unbind(t.domElement,"oTransitionEnd",e)};L.bind(this.domElement,"webkitTransitionEnd",e),L.bind(this.domElement,"transitionend",e),L.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-L.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-L.getHeight(this.domElement)/2+"px"}}]),t}(),$=r(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");V.inject($);var J="dg",Z=72,K=20,Q="Default",tt=function(){try{return!!window.localStorage}catch(t){return!1}}(),et=void 0,nt=!0,rt=void 0,it=!1,ot=[],at=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),L.addClass(this.domElement,J),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=s.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=s.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),s.isUndefined(r.load)?r.load={preset:Q}:r.preset&&(r.load.preset=r.preset),s.isUndefined(r.parent)&&r.hideable&&ot.push(this),r.resizable=s.isUndefined(r.parent)&&r.resizable,r.autoPlace&&s.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=tt&&"true"===localStorage.getItem(pt(this,"isLocal")),o=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,bt(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,yt(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,a&&(a.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?L.addClass(n.__ul,t.CLASS_CLOSED):L.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(t){tt&&(i=t,t?L.bind(window,"unload",o):L.unbind(window,"unload",o),localStorage.setItem(pt(n,"isLocal"),t))}}}),s.isUndefined(r.parent)){if(this.closed=r.closed||!1,L.addClass(this.domElement,t.CLASS_MAIN),L.makeSelectable(this.domElement,!1),tt&&i){n.useLocalStorage=!0;var u=localStorage.getItem(pt(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,L.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(L.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(L.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),L.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var c=document.createTextNode(r.name);L.addClass(c,"controller-name"),a=st(n,c);var l=function(t){return t.preventDefault(),n.closed=!n.closed,!1};L.addClass(this.__ul,t.CLASS_CLOSED),L.addClass(a,"title"),L.bind(a,"click",l),r.closed||(this.closed=!1)}function h(){var t=n.getRoot();t.width+=1,s.defer((function(){t.width-=1}))}r.autoPlace&&(s.isUndefined(r.parent)&&(nt&&(rt=document.createElement("div"),L.addClass(rt,J),L.addClass(rt,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(rt),nt=!1),rt.appendChild(this.domElement),L.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||yt(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},L.bind(window,"resize",this.__resizeHandler),L.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),L.bind(this.__ul,"transitionend",this.__resizeHandler),L.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&vt(this),o=function(){tt&&"true"===localStorage.getItem(pt(n,"isLocal"))&&localStorage.setItem(pt(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o,r.parent||h()};function st(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function ut(t){L.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&L.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function ct(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function lt(t,e,n){if(n.__li=e,n.__gui=t,s.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),ft(t,n.object,n.property,{before:r,factoryArgs:[s.toArray(arguments)]})}if(s.isArray(e)||s.isObject(e)){var i=n.__li.nextElementSibling;return n.remove(),ft(t,n.object,n.property,{before:i,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof B){var r=new D(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});s.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return i.apply(r,t),e.apply(n,t)}})),L.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof D){var i=function(e){if(s.isNumber(n.__min)&&s.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=ft(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(r),i&&o.listen(),o}return e};n.min=s.compose(i,n.min),n.max=s.compose(i,n.max)}else n instanceof A?(L.bind(e,"click",(function(){L.fakeEvent(n.__checkbox,"click")})),L.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof k?(L.bind(e,"click",(function(){L.fakeEvent(n.__button,"click")})),L.bind(e,"mouseover",(function(){L.addClass(n.__button,"hover")})),L.bind(e,"mouseout",(function(){L.removeClass(n.__button,"hover")}))):n instanceof U&&(L.addClass(e,"color"),n.updateDisplay=s.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=s.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&ct(t.getRoot(),!0),e}),n.setValue)}function ht(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[t.preset])a=o[t.preset];else{if(!o[Q])return;a=o[Q]}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function ft(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new U(e,n);else{var o=[e,n].concat(r.factoryArgs);i=q.apply(t,o)}r.before instanceof E&&(r.before=r.before.__li),ht(t,i),L.addClass(i.domElement,"c");var a=document.createElement("span");L.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var u=st(t,s,r.before);return L.addClass(u,at.CLASS_CONTROLLER_ROW),i instanceof U?L.addClass(u,"color"):L.addClass(u,d(i.getValue())),lt(t,u,i),t.__controllers.push(i),i}function pt(t,e){return document.location.href+"."+e}function dt(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function gt(t,e){e.style.display=t.useLocalStorage?"block":"none"}function mt(t){var e=t.__save_row=document.createElement("li");L.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),L.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",L.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",L.addClass(r,"button"),L.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",L.addClass(i,"button"),L.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",L.addClass(o,"button"),L.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?s.each(t.load.remembered,(function(e,n){dt(t,n,n===t.preset)})):dt(t,Q,!1),L.bind(a,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),tt){var u=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage"),l=document.getElementById("dg-save-locally");l.style.display="block","true"===localStorage.getItem(pt(t,"isLocal"))&&c.setAttribute("checked","checked"),gt(t,u),L.bind(c,"change",(function(){t.useLocalStorage=!t.useLocalStorage,gt(t,u)}))}var h=document.getElementById("dg-new-constructor");L.bind(h,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||et.hide()})),L.bind(n,"click",(function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),et.show(),h.focus(),h.select()})),L.bind(r,"click",(function(){t.save()})),L.bind(i,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),L.bind(o,"click",(function(){t.revert()}))}function vt(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){L.removeClass(t.__closeButton,at.CLASS_DRAG),L.unbind(window,"mousemove",n),L.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),e=i.clientX,L.addClass(t.__closeButton,at.CLASS_DRAG),L.bind(window,"mousemove",n),L.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),s.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),L.bind(t.__resize_handle,"mousedown",i),L.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function yt(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function _t(t,e){var n={};return s.each(t.__rememberedObjects,(function(r,i){var o={},a=t.__rememberedObjectIndecesToControllers[i];s.each(a,(function(t,n){o[n]=e?t.initialValue:t.getValue()})),n[i]=o})),n}function bt(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}function xt(t){0!==t.length&&X.call(window,(function(){xt(t)})),s.each(t,(function(t){t.updateDisplay()}))}at.toggleHide=function(){it=!it,s.each(ot,(function(t){t.domElement.style.display=it?"none":""}))},at.CLASS_AUTO_PLACE="a",at.CLASS_AUTO_PLACE_CONTAINER="ac",at.CLASS_MAIN="main",at.CLASS_CONTROLLER_ROW="cr",at.CLASS_TOO_TALL="taller-than-window",at.CLASS_CLOSED="closed",at.CLASS_CLOSE_BUTTON="close-button",at.CLASS_CLOSE_TOP="close-top",at.CLASS_CLOSE_BOTTOM="close-bottom",at.CLASS_DRAG="drag",at.DEFAULT_WIDTH=245,at.TEXT_CLOSED="Close Controls",at.TEXT_OPEN="Open Controls",at._keydownHandler=function(t){"text"===document.activeElement.type||t.which!==Z&&t.keyCode!==Z||at.toggleHide()},L.bind(window,"keydown",at._keydownHandler,!1),s.extend(at.prototype,{add:function(t,e){return ft(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return ft(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;s.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&rt.removeChild(this.domElement);var t=this;s.each(this.__folders,(function(e){t.removeFolder(e)})),L.unbind(window,"keydown",at._keydownHandler,!1),ut(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new at(e);this.__folders[t]=n;var r=st(this,n.domElement);return L.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],ut(t);var e=this;s.each(t.__folders,(function(e){t.removeFolder(e)})),s.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=L.getOffset(t.__ul).top,n=0;s.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=L.getHeight(e))})),window.innerHeight-e-K<n?(L.addClass(t.domElement,at.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-K+"px"):(L.removeClass(t.domElement,at.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&s.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:s.debounce((function(){this.onResize()}),50),remember:function(){if(s.isUndefined(et)&&(et=new Y,et.domElement.innerHTML=H),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;s.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&mt(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&yt(this,this.width)},getRoot:function(){var t=this;while(t.parent)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=_t(this)),t.folders={},s.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=_t(this),ct(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[Q]=_t(this,!0)),this.load.remembered[t]=_t(this),this.preset=t,dt(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){s.each(this.__controllers,(function(e){this.getRoot().load.remembered?ht(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),s.each(this.__folders,(function(t){t.revert(t)})),t||ct(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&xt(this.__listening)},updateDisplay:function(){s.each(this.__controllers,(function(t){t.updateDisplay()})),s.each(this.__folders,(function(t){t.updateDisplay()}))}});var wt=at},ba9c:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return S}));n("a4d3"),n("99af"),n("4de4"),n("d81d"),n("b0c0"),n("a9e3"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("2909"),i=n("ade3"),o=n("3835"),a=n("d4ec"),s=n("bee2"),u=n("99de"),c=n("7e84"),l=n("262e"),h=n("746fb"),f=n("a794"),p=n("2d9e"),d=n("bc71"),g=n("595b"),m=n("5a89"),v=n("8ad9"),y=n("b9d8"),_=n("8d86"),b=n("4b2f"),x=n("1355");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S=function(e){function n(t){var e;return Object(a["a"])(this,n),e=Object(u["a"])(this,Object(c["a"])(n).call(this,t)),e.initMapProperty(),e.d3threeD={},Object(v["a"])(e.d3threeD),e.GUIPanel||(e.GUIPanel=new y["a"]({width:250,autoPlace:!1}),e.GUIPanel.domElement.style.position="absolute",e.GUIPanel.domElement.style.right="0",e.GUIPanel.domElement.style.top="0",e.GUIPanel.domElement.style.zIndex="1001",e.set.root.appendChild(e.GUIPanel.domElement)),e}return Object(l["a"])(n,e),Object(s["a"])(n,[{key:"initMapProperty",value:function(){this.vector3Json=[],this.extrudeHeight=.5,this.baseExtrudeHeight=.5,this.baseColor="#328496",this.baseLineColor="#00b4cd",this.baseLineWidth=3,this.areaGroup=new m["Group"],this.areaLineGroup=new m["Group"],this.areaLabelGroup=new m["Group"],this.areaGroup.userData.baseExtrudeHeight=this.baseExtrudeHeight,this.areaGroup.userData.baseLineColor=this.baseLineColor,this.areaGroup.userData.baseLineWidth=this.baseLineWidth,this.areaGroup.userData.baseColor=this.baseColor,this.mapData=null,this.mapCenter=null,this.isEdit=!1}},{key:"destoryGUI",value:function(){this.GUIPanel&&(this.GUIPanel.destroy(),console.log(this.GUIPanel),this.GUIPanel.maskDiv&&(this.GUIPanel.maskDiv.style.display="none"))}},{key:"initBaseGUI",value:function(t){var e=this;if(this.destoryGUI(),this.isEdit){if(t){if(!this.GUIPanel.maskDiv){var n=document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.bottom="0",n.style.right="0",n.style.top="0",n.style.zIndex="1000",n.style.background="rgba(0, 0 , 0, 0.3)",this.GUIPanel.maskDiv=n,this.GUIPanel.maskDiv.addEventListener("click",(function(){e.isEdit=!1,e.GUIPanel&&(e.GUIPanel.maskDiv.style.display="none",e.initBaseGUI())}),!1)}this.GUIPanel.maskDiv.style.display="block",this.set.root.appendChild(this.GUIPanel.maskDiv);var r=Object(o["a"])(t.userData.markCenter,3),i=r[0],a=r[1],s=r[2],u=t.userData.preColor,c={color:u,offsetX:i,offsetY:a,offsetZ:s,addAttributesHandle:function(){e.set.addAttributesHandle&&e.set.addAttributesHandle(t)}},l=this.GUIPanel.addFolder("单个配置");l.open(),l.addColor(c,"color").name("颜色").onChange((function(e){t.material.color=new m["Color"](e),t.userData.preColor=e})),l.add(c,"offsetX",i-10,i+10,.01).name("x轴偏移").onChange((function(n){e.areaLabelGroup.children.forEach((function(e){t.userData.tid===e.userData.tid&&(e.position.x=n,t.userData.markCenter[0]=n)}))})),l.add(c,"offsetY",a-10,a+10,.01).name("y轴偏移").onChange((function(n){e.areaLabelGroup.children.forEach((function(e){t.userData.tid===e.userData.tid&&(e.position.y=n,t.userData.markCenter[1]=n)}))})),l.add(c,"offsetZ",s-10,s+10,.01).name("z轴偏移").onChange((function(n){e.areaLabelGroup.children.forEach((function(e){t.userData.tid===e.userData.tid&&(e.position.z=n,t.userData.markCenter[2]=n,t.userData.staticCenter[2]=n)}))})),l.add(c,"addAttributesHandle").name("编辑属性")}}else{var h={baseExtrudeHeight:this.areaGroup.userData.baseExtrudeHeight,baseLineWidth:this.baseLineWidth,baseColor:this.baseColor,baseLineColor:this.baseLineColor},f=this.GUIPanel.addFolder("统一配置");f.open(),f.add(h,"baseExtrudeHeight",.1,100,.1).name("区块高度").onChange((function(t){t=Number(t),e.areaGroup.children.forEach((function(n){n.scale.set(1,1,t/e.baseExtrudeHeight),n.userData.markCenter[2]=t,n.userData.staticCenter[2]=t})),e.areaLineGroup.children.forEach((function(n){"Line2"===n.type&&(n.position.z=t-e.baseExtrudeHeight)})),e.areaLabelGroup.children.forEach((function(e){e.position.z=t}))})).onFinishChange((function(t){e.areaGroup.userData.baseExtrudeHeight=Number(t),console.log(e.areaGroup)})),f.addColor(h,"baseColor").name("区块颜色").onChange((function(t){e.areaGroup.children.forEach((function(e){e.material.color=new m["Color"](t),e.userData.preColor=t}))})).onFinishChange((function(t){e.areaGroup.userData.baseColor=t})),f.add(h,"baseLineWidth",1,100,1).name("边线宽度").onChange((function(t){e.areaLineGroup.children.forEach((function(e){"Line2"===e.type&&(e.material.linewidth=Number(t))}))})).onFinishChange((function(t){e.areaGroup.userData.baseLineWidth=Number(t)})),f.addColor(h,"baseLineColor").name("边线颜色").onChange((function(t){e.areaLineGroup.children.forEach((function(e){"Line2"===e.type&&(e.material.color=new m["Color"](t))}))})).onFinishChange((function(t){e.areaGroup.userData.baseLineColor=t}))}}},{key:"transformYAxis",value:function(t){return t.map((function(t){return new m["Vector2"](t.x,-t.y)}))}},{key:"updateAreaText",value:function(t){this.areaLabelGroup.children.forEach((function(e){t.userData.tid===e.userData.tid&&(e.element.innerHTML=t.userData.name,console.log(e))}))}},{key:"drawAreaMap",value:function(t){var e=this,n=this.computedPolygonUnion(t);try{this.mapCenter=Object(g["centroid"])(n).geometry.coordinates}catch(u){this.mapCenter=f["a"](t)}this.mapData=t,console.log(this.mapData,"geojson"),console.log(this.mapCenter,"polygonUnion center");var r=this.drawGeoSVG(t);if(this.drawExtrudeGeometryMesh(r),n){var i=this.drawGeoSVG(n),o=this.drawPolygonUnion(i[0].shapes),a=o.mesh,s=o.shape;this.areaGroup.userData.polygonUnionShape=s,this.scene.add(a)}this.scene.add(this.areaGroup),this.scene.add(this.areaLineGroup),this.scene.add(this.areaLabelGroup),this.addEvent(this.areaGroup.children),this.getDistanceFromCamera(this.areaGroup.children,(function(t){e.areaGroup.userData.cameraFar=t})),this.initBaseGUI()}},{key:"drawGeoSVG",value:function(t){var e=this,n=p["a"]().center(this.mapCenter).scale(1500).translate([0,0]);console.log(n,"projection");var r=d["a"](n),i=[],o=function(t,n){var o=r(t);if(o)try{var a=e.d3threeD.transformSVGPath(o),s=a.toShapes(!0,!1);i.push({shapeDescData:E({},t.properties,{tid:"tid".concat(n+1)}),shapes:s})}catch(u){console.error(u.message,"svg路径转three的shape出错")}};return"Feature"===t.type?o(t):t.features.forEach(o),i}},{key:"drawExtrudeGeometryMesh",value:function(t){var e=this;t.forEach((function(t,n){t.shapes.forEach((function(n){var r=e.getAeraMesh(n,t.shapeDescData),i=n.getPoints(),o=e.getAreaLineMesh(e.transformYAxis(i));e.areaLineGroup.add(o),e.areaGroup.add(r),console.log(r)}))}))}},{key:"transformPosition",value:function(t){if(!t)return null;var e=p["a"]().center([this.mapCenter[0],this.mapCenter[1]]).scale(1e3*(this.set.scale||1.8)).translate([0,0]),n=e(t)||null;return n?[].concat(Object(r["a"])(n),[0]):null}},{key:"getAeraMesh",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={bevelThickness:0,bevelSize:0,curveSegments:24,steps:10,bevelEnabled:!1,depth:this.baseExtrudeHeight},r=(new m["Shape"]).setFromPoints(this.transformYAxis(t.getPoints())),i=new m["ExtrudeBufferGeometry"](r,n);i.userData.shape=r;var o=new m["MeshBasicMaterial"]({color:this.baseColor,depthTest:!0});i.computeBoundingBox(),i.computeBoundingSphere();var a=i.boundingSphere.center,s=new m["Mesh"](i,o);s.userData=E({preColor:this.baseColor,markCenter:[a.x,a.y,this.baseExtrudeHeight],staticCenter:[a.x,a.y,this.baseExtrudeHeight]},e);var u=this.drawText([a.x,a.y,this.baseExtrudeHeight],s.userData.name||s.userData.id||"mark");return u.userData=E({},e),this.areaLabelGroup.add(u),s}},{key:"createCylinderBar",value:function(t){var e=new m["CylinderBufferGeometry"](.5,.5,5,60),n=new m["MeshBasicMaterial"]({color:"blue"}),r=new m["Mesh"](e,n),i=Object(o["a"])(t,3),a=i[0],s=i[1];i[2];return r.position.set(a,s,-2.5),r.rotateX(Math.PI/2),r}},{key:"getAreaLineMesh",value:function(t){var e=this,n=new m["Color"],r=[],i=[];t.forEach((function(o,a){r.push(o.x,o.y,e.baseExtrudeHeight),n.setHSL(a/t.length,1,.5),i.push(n.r,n.g,n.b)}));var o=new x["a"];o.setPositions(r),o.setColors(i);var a=new b["a"]({color:this.baseLineColor,linewidth:this.baseLineWidth,dashed:!1});a.resolution.set(this.set.renderWidth,this.set.renderHeight);var s=new _["a"](o,a);return s}},{key:"editEvent",value:function(t){this.isEdit||(this.isEdit=!0,this.initBaseGUI(t))}},{key:"drawPolygonUnion",value:function(t){var e=this.transformYAxis(t[0].getPoints()),n=(new m["Shape"]).setFromPoints(e),r=new m["ShapeGeometry"](n),i=new m["MeshBasicMaterial"]({color:"#fff",transparent:!0,opacity:0,side:m["DoubleSide"]}),o=new m["Mesh"](r,i);return{mesh:o,shape:n}}},{key:"computedPolygonUnion",value:function(t){try{return t instanceof Array?g["union"].apply(void 0,Object(r["a"])(t)):g["union"].apply(void 0,Object(r["a"])(t.features))}catch(e){return null}}},{key:"exportPolygonUnion",value:function(){var e=this.computedPolygonUnion(this.mapData),n=new t(JSON.stringify(e));this.saveArrayBuffer(n,"polygon.json")}},{key:"removeAllMesh",value:function(){this.areaGroup.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})),this.areaLineGroup.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})),this.scene.remove(this.areaLabelGroup),this.scene.remove(this.areaLineGroup),this.scene.remove(this.areaGroup)}},{key:"destory",value:function(){this.removeAllMesh(),this.initMapProperty(),this.labelRenderer.domElement.innerHTML=""}}]),n}(h["a"])}).call(this,n("b639").Buffer)},bc71:function(t,e,n){"use strict";var r,i,o,a,s=n("2182"),u=n("b5ea"),c=n("b82a"),l=n("474c"),h=n("98f3"),f=Object(c["a"])(),p=Object(c["a"])(),d={point:h["a"],lineStart:h["a"],lineEnd:h["a"],polygonStart:function(){d.lineStart=g,d.lineEnd=y},polygonEnd:function(){d.lineStart=d.lineEnd=d.point=h["a"],f.add(Object(l["a"])(p)),p.reset()},result:function(){var t=f/2;return f.reset(),t}};function g(){d.point=m}function m(t,e){d.point=v,r=o=t,i=a=e}function v(t,e){p.add(a*t-o*e),o=t,a=e}function y(){v(r,i)}var _,b,x,w,E=d,S=n("48c4"),M=0,T=0,C=0,L=0,A=0,I=0,P=0,R=0,O=0,N={point:D,lineStart:F,lineEnd:U,polygonStart:function(){N.lineStart=j,N.lineEnd=G},polygonEnd:function(){N.point=D,N.lineStart=F,N.lineEnd=U},result:function(){var t=O?[P/O,R/O]:I?[L/I,A/I]:C?[M/C,T/C]:[NaN,NaN];return M=T=C=L=A=I=P=R=O=0,t}};function D(t,e){M+=t,T+=e,++C}function F(){N.point=B}function B(t,e){N.point=k,D(x=t,w=e)}function k(t,e){var n=t-x,r=e-w,i=Object(l["r"])(n*n+r*r);L+=i*(x+t)/2,A+=i*(w+e)/2,I+=i,D(x=t,w=e)}function U(){N.point=D}function j(){N.point=z}function G(){V(_,b)}function z(t,e){N.point=V,D(_=x=t,b=w=e)}function V(t,e){var n=t-x,r=e-w,i=Object(l["r"])(n*n+r*r);L+=i*(x+t)/2,A+=i*(w+e)/2,I+=i,i=w*t-x*e,P+=i*(x+t),R+=i*(w+e),O+=3*i,D(x=t,w=e)}var H=N;function q(t){this._context=t}q.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,l["t"]);break}},result:h["a"]};var W,X,Y,$,J,Z=Object(c["a"])(),K={point:h["a"],lineStart:function(){K.point=Q},lineEnd:function(){W&&tt(X,Y),K.point=h["a"]},polygonStart:function(){W=!0},polygonEnd:function(){W=null},result:function(){var t=+Z;return Z.reset(),t}};function Q(t,e){K.point=tt,X=$=t,Y=J=e}function tt(t,e){$-=t,J-=e,Z.add(Object(l["r"])($*$+J*J)),$=t,J=e}var et=K;function nt(){this._string=[]}function rt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}nt.prototype={_radius:4.5,_circle:rt(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=rt(this._radius)),this._string.push("M",t,",",e,this._circle);break}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};e["a"]=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),Object(u["a"])(t,n(r))),r.result()}return o.area=function(t){return Object(u["a"])(t,n(E)),E.result()},o.measure=function(t){return Object(u["a"])(t,n(et)),et.result()},o.bounds=function(t){return Object(u["a"])(t,n(S["a"])),S["a"].result()},o.centroid=function(t){return Object(u["a"])(t,n(H)),H.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,s["a"]):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new nt):new q(e=t),"function"!==typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)}},be4f:function(t,e,n){},bee2:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},c032:function(t,e,n){var r=n("b622");e.f=r},c04e:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c19f:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("621a"),a=n("2626"),s="ArrayBuffer",u=o[s],c=i[s];r({global:!0,forced:c!==u},{ArrayBuffer:u}),a(s)},c284:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=119)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},119:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-progress",class:["el-progress--"+t.type,t.status?"is-"+t.status:"",{"el-progress--without-text":!t.showText,"el-progress--text-inside":t.textInside}],attrs:{role:"progressbar","aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===t.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:t.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:t.barStyle},[t.showText&&t.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[t._v(t._s(t.content))]):t._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:t.width+"px",width:t.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:t.trailPathStyle,attrs:{d:t.trackPath,stroke:"#e5e9f2","stroke-width":t.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:t.circlePathStyle,attrs:{d:t.trackPath,stroke:t.stroke,fill:"none","stroke-linecap":t.strokeLinecap,"stroke-width":t.percentage?t.relativeStrokeWidth:0}})])]),t.showText&&!t.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:t.progressTextSize+"px"}},[t.status?n("i",{class:t.iconClass}):[t._v(t._s(t.content))]],2):t._e()])},i=[];r._withStripped=!0;var o={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(t){return["line","circle","dashboard"].indexOf(t)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(t){return t>=0&&t<=100}},status:{type:String,validator:function(t){return["success","exception","warning"].indexOf(t)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var t={};return t.width=this.percentage+"%",t.backgroundColor=this.getCurrentColor(this.percentage),t},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var t=this.radius,e="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(e?"":"-")+t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"-":"")+2*t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"":"-")+2*t+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var t=-1*this.perimeter*(1-this.rate)/2;return t+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var t=void 0;if(this.color)t=this.getCurrentColor(this.percentage);else switch(this.status){case"success":t="#13ce66";break;case"exception":t="#ff4949";break;case"warning":t="#e6a23c";break;default:t="#20a0ff"}return t},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(t){return"function"===typeof this.color?this.color(t):"string"===typeof this.color?this.color:this.getLevelColor(t)},getLevelColor:function(t){for(var e=this.getColorArray().sort((function(t,e){return t.percentage-e.percentage})),n=0;n<e.length;n++)if(e[n].percentage>t)return e[n].color;return e[e.length-1].color},getColorArray:function(){var t=this.color,e=100/t.length;return t.map((function(t,n){return"string"===typeof t?{color:t,progress:(n+1)*e}:t}))}}},a=o,s=n(0),u=Object(s["a"])(a,r,i,!1,null,null,null);u.options.__file="packages/progress/src/progress.vue";var c=u.exports;c.install=function(t){t.component(c.name,c)};e["default"]=c}})},c2cc:function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=134)}({134:function(t,e,n){"use strict";n.r(e);var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){var t=this.$parent;while(t&&"ElRow"!==t.$options.componentName)t=t.$parent;return t?t.gutter:0}},render:function(t){var e=this,n=[],i={};return this.gutter&&(i.paddingLeft=this.gutter/2+"px",i.paddingRight=i.paddingLeft),["span","offset","pull","push"].forEach((function(t){(e[t]||0===e[t])&&n.push("span"!==t?"el-col-"+t+"-"+e[t]:"el-col-"+e[t])})),["xs","sm","md","lg","xl"].forEach((function(t){if("number"===typeof e[t])n.push("el-col-"+t+"-"+e[t]);else if("object"===r(e[t])){var i=e[t];Object.keys(i).forEach((function(e){n.push("span"!==e?"el-col-"+t+"-"+e+"-"+i[e]:"el-col-"+t+"-"+i[e])}))}})),t(this.tag,{class:["el-col",n],style:i},this.$slots.default)},install:function(t){t.component(i.name,i)}};e["default"]=i}})},c430:function(t,e){t.exports=!1},c56a:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t||!e)throw new Error("instance & callback is required");var i=!1,o=function(){i||(i=!0,e&&e.apply(null,arguments))};r?t.$once("after-leave",o):t.$on("after-leave",o),setTimeout((function(){o()}),n+100)}},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c98e:function(t,e,n){"use strict";var r=2147483647,i=36,o=1,a=26,s=38,u=700,c=72,l=128,h="-",f=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",g=i-o,m=Math.floor,v=String.fromCharCode,y=function(t){var e=[],n=0,r=t.length;while(n<r){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},_=function(t){return t+22+75*(t<26)},b=function(t,e,n){var r=0;for(t=n?m(t/u):t>>1,t+=m(t/e);t>g*a>>1;r+=i)t=m(t/g);return m(r+(g+1)*t/(t+s))},x=function(t){var e=[];t=y(t);var n,s,u=t.length,f=l,p=0,g=c;for(n=0;n<t.length;n++)s=t[n],s<128&&e.push(v(s));var x=e.length,w=x;x&&e.push(h);while(w<u){var E=r;for(n=0;n<t.length;n++)s=t[n],s>=f&&s<E&&(E=s);var S=w+1;if(E-f>m((r-p)/S))throw RangeError(d);for(p+=(E-f)*S,f=E,n=0;n<t.length;n++){if(s=t[n],s<f&&++p>r)throw RangeError(d);if(s==f){for(var M=p,T=i;;T+=i){var C=T<=g?o:T>=g+a?a:T-g;if(M<C)break;var L=M-C,A=i-C;e.push(v(_(C+L%A))),M=m(L/A)}e.push(v(_(M))),g=b(p,S,w==x),p=0,++w}}++p,++f}return e.join("")};t.exports=function(t){var e,n,r=[],i=t.toLowerCase().replace(p,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(f.test(n)?"xn--"+x(n):n);return r.join(".")}},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,a=n("d012");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),o=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},d010:function(t,e,n){"use strict";function r(t,e,n){this.$children.forEach((function(i){var o=i.$options.componentName;o===t?i.$emit.apply(i,[e].concat(n)):r.apply(i,[t,e].concat([n]))}))}e.__esModule=!0,e.default={methods:{dispatch:function(t,e,n){var r=this.$parent||this.$root,i=r.$options.componentName;while(r&&(!i||i!==t))r=r.$parent,r&&(i=r.$options.componentName);r&&r.$emit.apply(r,[e].concat(n))},broadcast:function(t,e,n){r.call(this,t,e,n)}}}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d28b:function(t,e,n){var r=n("746f");r("iterator")},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d397:function(t,e,n){"use strict";function r(t){return void 0!==t&&null!==t}function i(t){var e=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return e.test(t)}e.__esModule=!0,e.isDef=r,e.isKorean=i},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),o=n("b041");r||i(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),a=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},d784:function(t,e,n){"use strict";var r=n("9112"),i=n("6eeb"),o=n("d039"),a=n("b622"),s=n("9263"),u=a("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var f=a(t),p=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=p&&!o((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!p||!d||"replace"===t&&!c||"split"===t&&!l){var g=/./[f],m=n(f,""[t],(function(t,e,n,r,i){return e.exec===s?p&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),v=m[0],y=m[1];i(String.prototype,t,v),i(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)}),h&&r(RegExp.prototype[f],"sham",!0)}}},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("d039"),a=n("1dde"),s=a("map"),u=s&&!o((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),a=n("fc6a"),s=n("06cf"),u=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),i=s.f,c=o(r),l={},h=0;while(c.length>h)n=i(r,e=c[h++]),void 0!==n&&u(l,e,n);return l}})},ddb0:function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("e260"),a=n("9112"),s=n("b622"),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var h in i){var f=r[h],p=f&&f.prototype;if(p){if(p[u]!==l)try{a(p,u,l)}catch(g){p[u]=l}if(p[c]||a(p,c,h),i[h])for(var d in o)if(p[d]!==o[d])try{a(p,d,o[d])}catch(g){p[d]=o[d]}}}},df33:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=89)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=n("2bb5")},15:function(t,e){t.exports=n("5128")},4:function(t,e){t.exports=n("d010")},89:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":t.afterEnter,"after-leave":t.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[n("div",{key:t.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":t.fullscreen,"el-dialog--center":t.center},t.customClass],style:t.style,attrs:{role:"dialog","aria-modal":"true","aria-label":t.title||"dialog"}},[n("div",{staticClass:"el-dialog__header"},[t._t("title",[n("span",{staticClass:"el-dialog__title"},[t._v(t._s(t.title))])]),t.showClose?n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:t.handleClose}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):t._e()],2),t.rendered?n("div",{staticClass:"el-dialog__body"},[t._t("default")],2):t._e(),t.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[t._t("footer")],2):t._e()])])])},i=[];r._withStripped=!0;var o=n(15),a=n.n(o),s=n(11),u=n.n(s),c=n(4),l=n.n(c),h={name:"ElDialog",mixins:[a.a,l.a,u.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(t){var e=this;t?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){e.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){e.key++})))}},computed:{style:function(){var t={};return this.fullscreen||(t.marginTop=this.top,this.width&&(t.width=this.width)),t}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(t){!1!==t&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},f=h,p=n(0),d=Object(p["a"])(f,r,i,!1,null,null,null);d.options.__file="packages/dialog/src/component.vue";var g=d.exports;g.install=function(t){t.component(g.name,g)};e["default"]=g}})},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},e01a:function(t,e,n){"use strict";var r=n("23e7"),i=n("83ab"),o=n("da84"),a=n("5135"),s=n("861d"),u=n("9bf2").f,c=n("e893"),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(f,l);var p=f.prototype=l.prototype;p.constructor=f;var d=p.toString,g="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(h,t))return"";var n=g?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),a=n("e177"),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e25e:function(t,e,n){var r=n("23e7"),i=n("e583");r({global:!0,forced:parseInt!=i},{parseInt:i})},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("7dd0"),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),a=n("06cf").f,s=n("83ab"),u=i((function(){a(1)})),c=!s||u;r({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},e452:function(t,e,n){"use strict";e.__esModule=!0;var r=r||{};r.Utils=r.Utils||{},r.Utils.focusFirstDescendant=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(r.Utils.attemptFocus(n)||r.Utils.focusFirstDescendant(n))return!0}return!1},r.Utils.focusLastDescendant=function(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(r.Utils.attemptFocus(n)||r.Utils.focusLastDescendant(n))return!0}return!1},r.Utils.attemptFocus=function(t){if(!r.Utils.isFocusable(t))return!1;r.Utils.IgnoreUtilFocusChanges=!0;try{t.focus()}catch(e){}return r.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===t},r.Utils.isFocusable=function(t){if(t.tabIndex>0||0===t.tabIndex&&null!==t.getAttribute("tabIndex"))return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!==t.rel;case"INPUT":return"hidden"!==t.type&&"file"!==t.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},r.Utils.triggerEvent=function(t,e){var n=void 0;n=/^mouse|click/.test(e)?"MouseEvents":/^key/.test(e)?"KeyboardEvent":"HTMLEvents";for(var r=document.createEvent(n),i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return r.initEvent.apply(r,[e].concat(o)),t.dispatchEvent?t.dispatchEvent(r):t.fireEvent("on"+e,r),t},r.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},e.default=r.Utils},e583:function(t,e,n){var r=n("da84"),i=n("58a8").trim,o=n("5899"),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");t.exports=u?function(t,e){var n=i(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},e5f2:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=70)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},15:function(t,e){t.exports=n("5128")},23:function(t,e){t.exports=n("41f8")},7:function(t,e){t.exports=n("8bbf")},70:function(t,e,n){"use strict";n.r(e);var r=n(7),i=n.n(r),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-notification-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["el-notification",t.customClass,t.horizontalClass],style:t.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(e){t.clearTimer()},mouseleave:function(e){t.startTimer()},click:t.click}},[t.type||t.iconClass?n("i",{staticClass:"el-notification__icon",class:[t.typeClass,t.iconClass]}):t._e(),n("div",{staticClass:"el-notification__group",class:{"is-with-icon":t.typeClass||t.iconClass}},[n("h2",{staticClass:"el-notification__title",domProps:{textContent:t._s(t.title)}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"el-notification__content"},[t._t("default",[t.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:t._s(t.message)}}):n("p",[t._v(t._s(t.message))])])],2),t.showClose?n("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(e){return e.stopPropagation(),t.close(e)}}}):t._e()])])])},a=[];o._withStripped=!0;var s={success:"success",info:"info",warning:"warning",error:"error"},u={data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&s[this.type]?"el-icon-"+s[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var t;return t={},t[this.verticalProperty]=this.verticalOffset+"px",t}},watch:{closed:function(t){t&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"===typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;this.duration>0&&(this.timer=setTimeout((function(){t.closed||t.close()}),this.duration))},keydown:function(t){46===t.keyCode||8===t.keyCode?this.clearTimer():27===t.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var t=this;this.duration>0&&(this.timer=setTimeout((function(){t.closed||t.close()}),this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},c=u,l=n(0),h=Object(l["a"])(c,o,a,!1,null,null,null);h.options.__file="packages/notification/src/main.vue";var f=h.exports,p=n(9),d=n.n(p),g=n(15),m=n(23),v=i.a.extend(f),y=void 0,_=[],b=1,x=function t(e){if(!i.a.prototype.$isServer){e=d()({},e);var n=e.onClose,r="notification_"+b++,o=e.position||"top-right";e.onClose=function(){t.close(r,n)},y=new v({data:e}),Object(m["isVNode"])(e.message)&&(y.$slots.default=[e.message],e.message="REPLACED_BY_VNODE"),y.id=r,y.$mount(),document.body.appendChild(y.$el),y.visible=!0,y.dom=y.$el,y.dom.style.zIndex=g["PopupManager"].nextZIndex();var a=e.offset||0;return _.filter((function(t){return t.position===o})).forEach((function(t){a+=t.$el.offsetHeight+16})),a+=16,y.verticalOffset=a,_.push(y),y}};["success","warning","info","error"].forEach((function(t){x[t]=function(e){return("string"===typeof e||Object(m["isVNode"])(e))&&(e={message:e}),e.type=t,x(e)}})),x.close=function(t,e){var n=-1,r=_.length,i=_.filter((function(e,r){return e.id===t&&(n=r,!0)}))[0];if(i&&("function"===typeof e&&e(i),_.splice(n,1),!(r<=1)))for(var o=i.position,a=i.dom.offsetHeight,s=n;s<r-1;s++)_[s].position===o&&(_[s].dom.style[i.verticalProperty]=parseInt(_[s].dom.style[i.verticalProperty],10)-a-16+"px")},x.closeAll=function(){for(var t=_.length-1;t>=0;t--)_[t].close()};var w=x;e["default"]=w},9:function(t,e){t.exports=n("7f4d")}})},e62d:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){if(i.default.prototype.$isServer)return 0;if(void 0!==a)return a;var t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var r=n.offsetWidth;return t.parentNode.removeChild(t),a=e-r,a};var r=n("8bbf"),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var a=void 0},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,n){"use strict";var r,i,o,a,s=n("23e7"),u=n("c430"),c=n("da84"),l=n("d066"),h=n("fea9"),f=n("6eeb"),p=n("e2cc"),d=n("d44e"),g=n("2626"),m=n("861d"),v=n("1c0b"),y=n("19aa"),_=n("c6b6"),b=n("8925"),x=n("2266"),w=n("1c7e"),E=n("4840"),S=n("2cf4").set,M=n("b575"),T=n("cdf9"),C=n("44de"),L=n("f069"),A=n("e667"),I=n("69f3"),P=n("94ca"),R=n("b622"),O=n("60ae"),N=R("species"),D="Promise",F=I.get,B=I.set,k=I.getterFor(D),U=h,j=c.TypeError,G=c.document,z=c.process,V=l("fetch"),H=L.f,q=H,W="process"==_(z),X=!!(G&&G.createEvent&&c.dispatchEvent),Y="unhandledrejection",$="rejectionhandled",J=0,Z=1,K=2,Q=1,tt=2,et=P(D,(function(){var t=b(U)!==String(U);if(!t){if(66===O)return!0;if(!W&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!U.prototype["finally"])return!0;if(O>=51&&/native code/.test(U))return!1;var e=U.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[N]=n,!(e.then((function(){}))instanceof n)})),nt=et||!w((function(t){U.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;M((function(){var i=e.value,o=e.state==Z,a=0;while(r.length>a){var s,u,c,l=r[a++],h=o?l.ok:l.fail,f=l.resolve,p=l.reject,d=l.domain;try{h?(o||(e.rejection===tt&&ut(t,e),e.rejection=Q),!0===h?s=i:(d&&d.enter(),s=h(i),d&&(d.exit(),c=!0)),s===l.promise?p(j("Promise-chain cycle")):(u=rt(s))?u.call(s,f,p):f(s)):p(i)}catch(g){d&&!c&&d.exit(),p(g)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&at(t,e)}))}},ot=function(t,e,n){var r,i;X?(r=G.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):t===Y&&C("Unhandled promise rejection",n)},at=function(t,e){S.call(c,(function(){var n,r=e.value,i=st(e);if(i&&(n=A((function(){W?z.emit("unhandledRejection",r,t):ot(Y,t,r)})),e.rejection=W||st(e)?tt:Q,n.error))throw n.value}))},st=function(t){return t.rejection!==Q&&!t.parent},ut=function(t,e){S.call(c,(function(){W?z.emit("rejectionHandled",t):ot($,t,e.value)}))},ct=function(t,e,n,r){return function(i){t(e,n,i,r)}},lt=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=K,it(t,e,!0))},ht=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw j("Promise can't be resolved itself");var i=rt(n);i?M((function(){var r={done:!1};try{i.call(n,ct(ht,t,r,e),ct(lt,t,r,e))}catch(o){lt(t,r,o,e)}})):(e.value=n,e.state=Z,it(t,e,!1))}catch(o){lt(t,{done:!1},o,e)}}};et&&(U=function(t){y(this,U,D),v(t),r.call(this);var e=F(this);try{t(ct(ht,this,e),ct(lt,this,e))}catch(n){lt(this,e,n)}},r=function(t){B(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:J,value:void 0})},r.prototype=p(U.prototype,{then:function(t,e){var n=k(this),r=H(E(this,U));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=W?z.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=J&&it(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=F(t);this.promise=t,this.resolve=ct(ht,t,e),this.reject=ct(lt,t,e)},L.f=H=function(t){return t===U||t===o?new i(t):q(t)},u||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",(function(t,e){var n=this;return new U((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof V&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return T(U,V.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:U}),d(U,D,!1,!0),g(D),o=l(D),s({target:D,stat:!0,forced:et},{reject:function(t){var e=H(this);return e.reject.call(void 0,t),e.promise}}),s({target:D,stat:!0,forced:u||et},{resolve:function(t){return T(u&&this===o?U:this,t)}}),s({target:D,stat:!0,forced:nt},{all:function(t){var e=this,n=H(e),r=n.resolve,i=n.reject,o=A((function(){var n=v(e.resolve),o=[],a=0,s=1;x(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=H(e),r=n.reject,i=A((function(){var i=v(e.resolve);x(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),a=n("9bf2");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},eae9:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},ebb5:function(t,e,n){"use strict";var r,i=n("83ab"),o=n("da84"),a=n("861d"),s=n("5135"),u=n("f5df"),c=n("9112"),l=n("6eeb"),h=n("9bf2").f,f=n("e163"),p=n("d2bb"),d=n("b622"),g=n("90e3"),m=o.DataView,v=m&&m.prototype,y=o.Int8Array,_=y&&y.prototype,b=o.Uint8ClampedArray,x=b&&b.prototype,w=y&&f(y),E=_&&f(_),S=Object.prototype,M=S.isPrototypeOf,T=d("toStringTag"),C=g("TYPED_ARRAY_TAG"),L=!(!o.ArrayBuffer||!m),A=L&&!!p&&"Opera"!==u(o.opera),I=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R=function(t){var e=u(t);return"DataView"===e||s(P,e)},O=function(t){return a(t)&&s(P,u(t))},N=function(t){if(O(t))return t;throw TypeError("Target is not a typed array")},D=function(t){if(p){if(M.call(w,t))return t}else for(var e in P)if(s(P,r)){var n=o[e];if(n&&(t===n||M.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},F=function(t,e,n){if(i){if(n)for(var r in P){var a=o[r];a&&s(a.prototype,t)&&delete a.prototype[t]}E[t]&&!n||l(E,t,n?e:A&&_[t]||e)}},B=function(t,e,n){var r,a;if(i){if(p){if(n)for(r in P)a=o[r],a&&s(a,t)&&delete a[t];if(w[t]&&!n)return;try{return l(w,t,n?e:A&&y[t]||e)}catch(u){}}for(r in P)a=o[r],!a||a[t]&&!n||l(a,t,e)}};for(r in P)o[r]||(A=!1);if((!A||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},A))for(r in P)o[r]&&p(o[r],w);if((!A||!E||E===S)&&(E=w.prototype,A))for(r in P)o[r]&&p(o[r].prototype,E);if(A&&f(x)!==E&&p(x,E),i&&!s(E,T))for(r in I=!0,h(E,T,{get:function(){return a(this)?this[C]:void 0}}),P)o[r]&&c(o[r],C,r);L&&p&&f(v)!==S&&p(v,S),t.exports={NATIVE_ARRAY_BUFFER:L,NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:I&&C,aTypedArray:N,aTypedArrayConstructor:D,exportTypedArrayMethod:F,exportTypedArrayStaticMethod:B,isView:R,isTypedArray:O,TypedArray:w,TypedArrayPrototype:E}},eedf:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=97)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},97:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?n("i",{staticClass:"el-icon-loading"}):t._e(),t.icon&&!t.loading?n("i",{class:t.icon}):t._e(),t.$slots.default?n("span",[t._t("default")],2):t._e()])},i=[];r._withStripped=!0;var o={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},a=o,s=n(0),u=Object(s["a"])(a,r,i,!1,null,null,null);u.options.__file="packages/button/src/button.vue";var c=u.exports;c.install=function(t){t.component(c.name,c)};e["default"]=c}})},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f0d9:function(t,e,n){"use strict";e.__esModule=!0,e.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}}},f225:function(t,e,n){},f3ad:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=76)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=n("2bb5")},21:function(t,e){t.exports=n("d397")},4:function(t,e){t.exports=n("d010")},76:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["textarea"===t.type?"el-textarea":"el-input",t.inputSize?"el-input--"+t.inputSize:"",{"is-disabled":t.inputDisabled,"is-exceed":t.inputExceed,"el-input-group":t.$slots.prepend||t.$slots.append,"el-input-group--append":t.$slots.append,"el-input-group--prepend":t.$slots.prepend,"el-input--prefix":t.$slots.prefix||t.prefixIcon,"el-input--suffix":t.$slots.suffix||t.suffixIcon||t.clearable||t.showPassword}],on:{mouseenter:function(e){t.hovering=!0},mouseleave:function(e){t.hovering=!1}}},["textarea"!==t.type?[t.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[t._t("prepend")],2):t._e(),"textarea"!==t.type?n("input",t._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:t.tabindex,type:t.showPassword?t.passwordVisible?"text":"password":t.type,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"input",t.$attrs,!1)):t._e(),t.$slots.prefix||t.prefixIcon?n("span",{staticClass:"el-input__prefix"},[t._t("prefix"),t.prefixIcon?n("i",{staticClass:"el-input__icon",class:t.prefixIcon}):t._e()],2):t._e(),t.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[t.showClear&&t.showPwdVisible&&t.isWordLimitVisible?t._e():[t._t("suffix"),t.suffixIcon?n("i",{staticClass:"el-input__icon",class:t.suffixIcon}):t._e()],t.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(t){t.preventDefault()},click:t.clear}}):t._e(),t.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:t.handlePasswordVisible}}):t._e(),t.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[t._v("\n            "+t._s(t.textLength)+"/"+t._s(t.upperLimit)+"\n          ")])]):t._e()],2),t.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",t.validateIcon]}):t._e()]):t._e(),t.$slots.append?n("div",{staticClass:"el-input-group__append"},[t._t("append")],2):t._e()]:n("textarea",t._b({ref:"textarea",staticClass:"el-textarea__inner",style:t.textareaStyle,attrs:{tabindex:t.tabindex,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"textarea",t.$attrs,!1)),t.isWordLimitVisible&&"textarea"===t.type?n("span",{staticClass:"el-input__count"},[t._v(t._s(t.textLength)+"/"+t._s(t.upperLimit))]):t._e()],2)},i=[];r._withStripped=!0;var o=n(4),a=n.n(o),s=n(11),u=n.n(s),c=void 0,l="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",h=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function f(t){var e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),i=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),o=h.map((function(t){return t+":"+e.getPropertyValue(t)})).join(";");return{contextStyle:o,paddingSize:r,borderSize:i,boxSizing:n}}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c||(c=document.createElement("textarea"),document.body.appendChild(c));var r=f(t),i=r.paddingSize,o=r.borderSize,a=r.boxSizing,s=r.contextStyle;c.setAttribute("style",s+";"+l),c.value=t.value||t.placeholder||"";var u=c.scrollHeight,h={};"border-box"===a?u+=o:"content-box"===a&&(u-=i),c.value="";var p=c.scrollHeight-i;if(null!==e){var d=p*e;"border-box"===a&&(d=d+i+o),u=Math.max(d,u),h.minHeight=d+"px"}if(null!==n){var g=p*n;"border-box"===a&&(g=g+i+o),u=Math.min(g,u)}return h.height=u+"px",c.parentNode&&c.parentNode.removeChild(c),c=null,h}var d=n(9),g=n.n(d),m=n(21),v={name:"ElInput",componentName:"ElInput",mixins:[a.a,u.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return g()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(t){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[t])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var t=this;this.$nextTick((function(){t.setNativeInputValue(),t.resizeTextarea(),t.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(t){this.focused=!1,this.$emit("blur",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var t=this.autosize,e=this.type;if("textarea"===e)if(t){var n=t.minRows,r=t.maxRows;this.textareaCalcStyle=p(this.$refs.textarea,n,r)}else this.textareaCalcStyle={minHeight:p(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var t=this.getInput();t&&t.value!==this.nativeInputValue&&(t.value=this.nativeInputValue)},handleFocus:function(t){this.focused=!0,this.$emit("focus",t)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(t){var e=t.target.value,n=e[e.length-1]||"";this.isComposing=!Object(m["isKorean"])(n)},handleCompositionEnd:function(t){this.isComposing&&(this.isComposing=!1,this.handleInput(t))},handleInput:function(t){this.isComposing||t.target.value!==this.nativeInputValue&&(this.$emit("input",t.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(t){this.$emit("change",t.target.value)},calcIconOffset:function(t){var e=[].slice.call(this.$el.querySelectorAll(".el-input__"+t)||[]);if(e.length){for(var n=null,r=0;r<e.length;r++)if(e[r].parentNode===this.$el){n=e[r];break}if(n){var i={suffix:"append",prefix:"prepend"},o=i[t];this.$slots[o]?n.style.transform="translateX("+("suffix"===t?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},y=v,_=n(0),b=Object(_["a"])(y,r,i,!1,null,null,null);b.options.__file="packages/input/src/input.vue";var x=b.exports;x.install=function(t){t.component(x.name,x)};e["default"]=x},9:function(t,e){t.exports=n("7f4d")}})},f4f9:function(t,e,n){},f529:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=75)}({0:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},15:function(t,e){t.exports=n("5128")},23:function(t,e){t.exports=n("41f8")},7:function(t,e){t.exports=n("8bbf")},75:function(t,e,n){"use strict";n.r(e);var r=n(7),i=n.n(r),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["el-message",t.type&&!t.iconClass?"el-message--"+t.type:"",t.center?"is-center":"",t.showClose?"is-closable":"",t.customClass],style:t.positionStyle,attrs:{role:"alert"},on:{mouseenter:t.clearTimer,mouseleave:t.startTimer}},[t.iconClass?n("i",{class:t.iconClass}):n("i",{class:t.typeClass}),t._t("default",[t.dangerouslyUseHTMLString?n("p",{staticClass:"el-message__content",domProps:{innerHTML:t._s(t.message)}}):n("p",{staticClass:"el-message__content"},[t._v(t._s(t.message))])]),t.showClose?n("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:t.close}}):t._e()],2)])},a=[];o._withStripped=!0;var s={success:"success",info:"info",warning:"warning",error:"error"},u={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+s[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(t){t&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;this.duration>0&&(this.timer=setTimeout((function(){t.closed||t.close()}),this.duration))},keydown:function(t){27===t.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},c=u,l=n(0),h=Object(l["a"])(c,o,a,!1,null,null,null);h.options.__file="packages/message/src/main.vue";var f=h.exports,p=n(15),d=n(23),g=i.a.extend(f),m=void 0,v=[],y=1,_=function t(e){if(!i.a.prototype.$isServer){e=e||{},"string"===typeof e&&(e={message:e});var n=e.onClose,r="message_"+y++;e.onClose=function(){t.close(r,n)},m=new g({data:e}),m.id=r,Object(d["isVNode"])(m.message)&&(m.$slots.default=[m.message],m.message=null),m.$mount(),document.body.appendChild(m.$el);var o=e.offset||20;return v.forEach((function(t){o+=t.$el.offsetHeight+16})),m.verticalOffset=o,m.visible=!0,m.$el.style.zIndex=p["PopupManager"].nextZIndex(),v.push(m),m}};["success","warning","info","error"].forEach((function(t){_[t]=function(e){return"string"===typeof e&&(e={message:e}),e.type=t,_(e)}})),_.close=function(t,e){for(var n=v.length,r=-1,i=void 0,o=0;o<n;o++)if(t===v[o].id){i=v[o].$el.offsetHeight,r=o,"function"===typeof e&&e(v[o]),v.splice(o,1);break}if(!(n<=1||-1===r||r>v.length-1))for(var a=r;a<n-1;a++){var s=v[a].$el;s.style["top"]=parseInt(s.style["top"],10)-i-16+"px"}},_.closeAll=function(){for(var t=v.length-1;t>=0;t--)v[t].close()};var b=_;e["default"]=b}})},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),a))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f5df1:function(t,e,n){},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},f8c2:function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},fb15:function(t,e,n){"use strict";var r;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));n("b0c0"),n("159b"),n("0fb7"),n("450d");var i=n("f529"),o=n.n(i),a=(n("46a1"),n("e5f2")),s=n.n(a),u=(n("9e1f"),n("6ed5")),c=n.n(u),l=(n("10cb"),n("f3ad")),h=n.n(l),f=(n("a7cc"),n("df33")),p=n.n(f),d=(n("1951"),n("eedf")),g=n.n(d),m=(n("adec"),n("3d2d")),v=n.n(m),y=(n("f225"),n("89a9")),_=n.n(y),b=(n("f4f9"),n("c2cc")),x=n.n(b),w=(n("7a0f"),n("0f6c")),E=n.n(w),S=(n("be4f"),n("896a")),M=n.n(S),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("index")],1)},C=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-row",[n("el-col",{attrs:{span:18}},[n("three-map",{ref:"threeMap"})],1),n("el-col",{attrs:{span:6}},[n("el-container",{staticClass:"upLoader_container",attrs:{direction:"vertical"}},[n("up-loader",{on:{addFile:t.addFileHandle,removeFile:t.removeFileHandle,filePreview:t.filePreviewHandle}})],1),n("el-container",{staticClass:"exprot_container",attrs:{direction:"vertical"}},[n("el-button",{staticClass:"primaryBtn",attrs:{type:"primary"},on:{click:t.exportScene}},[t._v("导出场景")]),n("el-button",{staticClass:"primaryBtn",attrs:{type:"primary"},on:{click:t.exportAreaUnion}},[t._v("导出区域并集json")])],1)],1)],1)],1)},A=[],I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"mapContainer",staticClass:"mapContainer"},[n("el-dialog",{attrs:{title:"编辑区域属性",visible:t.centerDialogVisible,width:"80%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e},close:t.closeDialog}},[t.currentEditAreaMesh?n("div",{staticClass:"propertyBox"},[n("div",[t._v("已有属性：")]),t._l(t.currentEditAreaMesh.userData,(function(e,r){return n("p",{key:r},[t._v(t._s(r)+": "+t._s(e))])}))],2):n("div",{staticClass:"propertyBox"},[t._v("当前区域暂属性信息")]),n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入属性的key和value，例：id='suzhou'，多个属性请用“;”号隔开",autosize:!0,clearable:!0,autofocus:!0},model:{value:t.propertyValue,callback:function(e){t.propertyValue=e},expression:"propertyValue"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.saveInputProperty}},[t._v("添加属性")])],1)],1)],1)},P=[],R=(n("a4d3"),n("e01a"),n("d28b"),n("4de4"),n("a9e3"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("3ca3"),n("1276"),n("ddb0"),n("ade3")),O=n("ba9c");function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(R["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F={data:function(){return{threeMapInstance:null,centerDialogVisible:!1,currentEditAreaMesh:null,propertyValue:""}},props:{},methods:{onWindowResize:function(){this.threeMapInstance.camera.aspect=this.$refs.mapContainer.offsetWidth/window.innerHeight,this.threeMapInstance.camera.updateProjectionMatrix(),this.threeMapInstance.renderer.setSize(this.$refs.mapContainer.offsetWidth,window.innerHeight),this.threeMapInstance.labelRenderer.setSize(this.$refs.mapContainer.offsetWidth,window.innerHeight)},createThreeMap:function(){var t=this,e=new O["a"]({renderWidth:this.$refs.mapContainer.offsetWidth,renderHeight:window.innerHeight,isStatsWatch:!0,root:this.$refs.mapContainer,addAttributesHandle:function(e){t.centerDialogVisible||(console.log("开始编辑"),t.centerDialogVisible=!0,t.currentEditAreaMesh=e)}});this.threeMapInstance=e,window.addEventListener("resize",this.onWindowResize.bind(this),!1)},saveInputProperty:function(){if(this.propertyValue){var t=this.parsePropertyStr(this.propertyValue);if(null===t)return;this.currentEditAreaMesh.userData=D({},this.currentEditAreaMesh.userData,{},t)}this.centerDialogVisible=!1,this.threeMapInstance.updateAreaText(this.currentEditAreaMesh),this.clearInput()},parsePropertyStr:function(t){var e={},n=t.split(";"),r=null,i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.split("=");l[1]=isNaN(Number(l[1]))?l[1]:Number(l[1]);try{e[l[0]]=JSON.parse(l[1])}catch(h){r=l[1];break}}}catch(f){o=!0,a=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r?(this.$notify.error({title:"解析错误",message:"值".concat(r,"为非法格式")}),null):e},clearInput:function(){this.propertyValue="",this.currentEditAreaMesh=null},closeDialog:function(){this.clearInput()}},mounted:function(){this.createThreeMap()}},B=F;n("2f78");function k(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}var U=k(B,I,P,!1,null,"b996bdc2",null),j=U.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"","auto-upload":!1,accept:t.accept,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"on-change":t.handleChange}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将geojson文件拖到此处，或"),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传.json、.geojson文件")])])],1)},z=[],V={name:"UPLOADERGEO",data:function(){return{accept:".json,.geojson"}},methods:{handleRemove:function(t,e){var n=this;return this.fileReaderHandle(t.raw).then((function(r){n.$emit("removeFile",r,t,e)})).catch((function(t){console.log(t.message)}))},handlePreview:function(t){var e=this;return this.fileReaderHandle(t.raw).then((function(t){e.$emit("filePreview",t)})).catch((function(t){e.$notify.error({title:"错误",message:t.message})}))},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},handleChange:function(t,e){var n=this;return this.fileReaderHandle(t.raw).then((function(t){n.$emit("addFile",t,e)})).catch((function(t){n.$notify.error({title:"错误",message:t.message})}))},fileReaderHandle:function(t){return new Promise((function(e,n){var r=new FileReader;r.readAsText(t,"UTF-8"),r.onload=function(t){var r=t.target.result;try{e(JSON.parse(r))}catch(i){n(i)}}}))}}},H=V,q=(n("7285"),k(H,G,z,!1,null,"f46f2c74",null)),W=q.exports,X=(n("5a89"),{data:function(){return{}},components:{ThreeMap:j,UpLoader:W},methods:{addFileHandle:function(t,e){this.removeFileHandle(t,e),"Feature"===t.type&&(t={type:"FeatureCollection",features:[t]});var n=!0;if(t.features.forEach((function(t){"MultiPolygon"!==t.geometry.type&&"Polygon"!==t.geometry.type&&(n=!1)})),!n)return this.$notify.error({title:"错误",message:"当前只支持MultiPolygon和Polygon类型的geojson编辑，点线暂未支持"});this.$refs.threeMap.threeMapInstance&&this.$refs.threeMap.threeMapInstance.drawAreaMap(t)},removeFileHandle:function(t,e){if(this.$refs.threeMap.threeMapInstance){var n=this.$refs.threeMap.threeMapInstance;n.destory()}},filePreviewHandle:function(t){this.removeFileHandle(),this.addFileHandle(t)},exportScene:function(){if(this.$refs.threeMap.threeMapInstance){var t=this.$refs.threeMap.threeMapInstance;console.log(t.scene),console.log(t.camera),t.exportGLTF([t.areaGroup,t.camera])}},exportAreaUnion:function(){if(this.$refs.threeMap.threeMapInstance){var t=this.$refs.threeMap.threeMapInstance;if(!t.mapData)return this.$notify.error({title:"错误",message:"没有任何数据信息"});t.exportPolygonUnion()}}},mounted:function(){}}),Y=X,$=(n("2215"),k(Y,L,A,!1,null,"18904228",null)),J=$.exports,Z={name:"app",components:{index:J}},K=Z,Q=(n("034f"),k(K,T,C,!1,null,null,null)),tt=Q.exports,et=(n("f5df1"),tt);"undefined"!==typeof window&&window.Vue&&(Vue.use(M.a.directive),[E.a,x.a,_.a,v.a,g.a,p.a,h.a].forEach((function(t){Vue.use(t,{name:t.name})})),Vue.prototype.$loading=M.a.service,Vue.prototype.$msgbox=c.a,Vue.prototype.$alert=c.a.alert,Vue.prototype.$confirm=c.a.confirm,Vue.prototype.$prompt=c.a.prompt,Vue.prototype.$notify=s.a,Vue.prototype.$message=o.a);e["default"]=et},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol()},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise}})}));
//# sourceMappingURL=mapExporter.umd.min.js.map